{"ast":null,"code":"/*!\n * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Thu Nov 3 21:15:36 2022 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n    document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n      array = [],\n      slice = array.slice,\n      create = Object.create,\n      describe = Object.getOwnPropertyDescriptor,\n      define = Object.defineProperty,\n      forEach = array.forEach || function (iter, bind) {\n        for (var i = 0, l = this.length; i < l; i++) {\n          iter.call(bind, this[i], i, this);\n        }\n      },\n      forIn = function (iter, bind) {\n        for (var i in this) {\n          if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n        }\n      },\n      set = Object.assign || function (dst) {\n        for (var i = 1, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          for (var key in src) {\n            if (src.hasOwnProperty(key)) dst[key] = src[key];\n          }\n        }\n        return dst;\n      },\n      each = function (obj, iter, bind) {\n        if (obj) {\n          var desc = describe(obj, 'length');\n          (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n        }\n        return bind;\n      };\n    function inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n          res = val,\n          prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n          bean;\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n          define(dest, name, res);\n        }\n      }\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n        for (var name in beansNames) {\n          var part = beansNames[name],\n            set = dest['set' + part],\n            get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n      return dest;\n    }\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n      return this;\n    }\n    return inject(Base, {\n      inject: function (src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n            beans = src.beans,\n            preserve = src.preserve;\n          if (statics !== src) inject(this.prototype, src, src.enumerable, beans, preserve);\n          inject(this, statics, null, beans, preserve);\n        }\n        for (var i = 1, l = arguments.length; i < l; i++) this.inject(arguments[i]);\n        return this;\n      },\n      extend: function () {\n        var base = this,\n          ctor,\n          proto;\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n        inject(ctor, this);\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function () {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          if (src) {\n            inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n        return this;\n      },\n      extend: function () {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function (iter, bind) {\n        return each(this, iter, bind);\n      },\n      clone: function () {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function (obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function (obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function (a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function (list, begin, end) {\n          return slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function () {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function () {\n      return this._class || '';\n    },\n    importJSON: function (json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function (options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function () {\n      return Base.serialize(this);\n    },\n    set: function (props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n          name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function (obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n              length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n          return true;\n        }\n        return false;\n      },\n      read: function (list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n        var proto = this.prototype,\n          readIndex = proto._readIndex,\n          begin = start || readIndex && list.__index || 0,\n          length = list.length,\n          obj = list[begin];\n        amount = amount || length - begin;\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n          obj.__read = undefined;\n        }\n        return obj;\n      },\n      peek: function (list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function (list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function (list, start, options, amount) {\n        var res = [],\n          entry,\n          begin = start || 0,\n          end = amount ? begin + amount : list.length;\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n        return res;\n      },\n      readNamed: function (list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n          hasValue = value !== undefined;\n        if (hasValue) {\n          var filtered = list.__filtered;\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n          filtered[name] = undefined;\n        }\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function (list, dest) {\n        var source = this.getSource(list),\n          that = this,\n          read = false;\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n              read = true;\n            }\n          });\n        }\n        return read;\n      },\n      getSource: function (list) {\n        var source = list.__source;\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n        return source;\n      },\n      getNamed: function (list, name) {\n        var source = this.getSource(list);\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function (list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function (dest, source, exclude, prioritize) {\n        var processed;\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n        if (prioritize) {\n          var keys = {};\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n          processed = keys;\n        }\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function (obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function (obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n          res;\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function (item, create) {\n              var id = '#' + item._id,\n                ref = this.references[id];\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                  name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n              return ref;\n            }\n          };\n        }\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n          for (var i = 0, l = obj.length; i < l; i++) res[i] = Base.serialize(obj[i], options, compact, dictionary);\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function (json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n          isFirst = !_data,\n          hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n        if (Array.isArray(json)) {\n          var type = json[0],\n            isDictionary = type === 'dictionary';\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n          type = Base.exports[type];\n          res = [];\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n          if (type) {\n            var args = res;\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n          for (var key in json) res[key] = Base.deserialize(json[key], create, _data);\n        }\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function (obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function (json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n            obj = useTarget ? target : Base.create(ctor.prototype);\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n              if (useTarget) {\n                args = args.concat([Item.INSERT]);\n              }\n            }\n          }\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function (list, items) {\n        var itemsLength = items.length;\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n        return list;\n      },\n      splice: function (list, items, index, remove) {\n        var amount = items && items.length,\n          append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n        for (var i = 0; i < amount; i++) items[i]._index = index + i;\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n          for (var i = 0, l = removed.length; i < l; i++) removed[i]._index = undefined;\n          for (var i = index + amount, l = list.length; i < l; i++) list[i]._index = i;\n          return removed;\n        }\n      },\n      capitalize: function (str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function (str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function (str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n      return this;\n    },\n    off: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n      var types = this._eventTypes,\n        entry = types && types[type],\n        handlers = this._callbacks && this._callbacks[type],\n        index;\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n      return this;\n    },\n    once: function (type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function (type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n        setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function (type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function (install) {\n      var types = this._eventTypes,\n        handlers = this._callbacks,\n        key = install ? 'install' : 'uninstall';\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n              func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n              name = isString ? entry : key,\n              part = Base.capitalize(name),\n              type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n            src['get' + part] = function () {\n              return this[name];\n            };\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n          os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n          platform = os === 'darwin' ? 'mac' : os,\n          agent = proto.agent = proto.browser = {\n            platform: platform\n          };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.17\",\n    getView: function () {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function () {\n      return this;\n    },\n    execute: function (code, options) {\n      var exports = paper.PaperScript.execute(code, this, options);\n      View.updateFocus();\n      return exports;\n    },\n    install: function (scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function () {\n            return that[key];\n          }\n        });\n      });\n      for (var key in this) if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n    },\n    setup: function (element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function (width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function () {\n      paper = this;\n    },\n    clear: function () {\n      var projects = this.projects,\n        tools = this.tools;\n      for (var i = projects.length - 1; i >= 0; i--) projects[i].remove();\n      for (var i = tools.length - 1; i >= 0; i--) tools[i].remove();\n    },\n    remove: function () {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function (id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function (activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function () {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function () {\n      return this._scope[this._reference] === this;\n    },\n    remove: function () {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function () {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function (items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(items1),\n        bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function (curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n          max = Math.max,\n          bounds = new Array(curves.length);\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(curves1),\n        bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n          ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n          list = [];\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n        return list;\n      }\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function (boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n        allBounds = self ? boundsA : boundsA.concat(boundsB),\n        lengthA = boundsA.length,\n        lengthAll = allBounds.length;\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n          hi = indices.length;\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n        return lo - 1;\n      }\n      var pri0 = sweepVertical ? 1 : 0,\n        pri1 = pri0 + 2,\n        sec0 = sweepVertical ? 0 : 1,\n        sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n        allCollisions = new Array(lengthA);\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n          curBounds = allBounds[curIndex],\n          origIndex = self ? curIndex : curIndex - lengthA,\n          isCurrentA = curIndex < lengthA,\n          isCurrentB = self || !isCurrentA,\n          curCollisions = isCurrentA ? [] : null;\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n              curSec0 = curBounds[sec0];\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                activeBounds = allBounds[activeIndex],\n                isActiveA = activeIndex < lengthA,\n                isActiveB = self || activeIndex >= lengthA;\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n          allCollisions[curIndex] = curCollisions;\n        }\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n            index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function (precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function (val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function (val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function (val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function (val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function (val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n    var abs = Math.abs,\n      sqrt = Math.sqrt,\n      pow = Math.pow,\n      log2 = Math.log2 || function (x) {\n        return Math.log(x) * Math.LOG2E;\n      },\n      EPSILON = 1e-12,\n      MACHINE_EPSILON = 1.12e-16;\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n          y = v - x,\n          hi = y + x,\n          lo = v - hi;\n        return [hi, lo];\n      }\n      var D = b * b - a * c,\n        E = b * b + a * c;\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n          bd = split(b),\n          cd = split(c),\n          p = b * b,\n          dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n          q = a * c,\n          dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n      return D;\n    }\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      ANGULAR_EPSILON: 1e-5,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function (val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function (val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function (f, a, b, n) {\n        var x = abscissas[n - 2],\n          w = weights[n - 2],\n          A = (b - a) * 0.5,\n          B = A + a,\n          i = 0,\n          m = n + 1 >> 1,\n          sum = n & 1 ? w[i++] * f(B) : 0;\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n        return A * sum;\n      },\n      findRoot: function (f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n            dx = fx / df(x),\n            nx = x - dx;\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function (a, b, c, roots, min, max) {\n        var x1,\n          x2 = Infinity;\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n              R = b + (b < 0 ? -Q : Q);\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n        var count = 0,\n          boundless = min == null,\n          minB = min - EPSILON,\n          maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function (a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n          x,\n          b1,\n          c2,\n          qd,\n          q;\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n            r = pow(abs(t), 1 / 3),\n            s = t < 0 ? -1 : 1,\n            td = -qd / a,\n            rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n            x0 = x - s * rd;\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n          boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function (name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n        this._set(arg0, hasY ? arg1 : arg0);\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function (point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function () {\n      return new Point(this.x, this.y);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function (length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function () {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function (angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function () {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n          div = this.getLength() * point.getLength();\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function (angle) {\n      this._angle = angle;\n      if (!this.isZero()) {\n        var length = this.getLength();\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function () {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function () {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function () {\n      var args = arguments,\n        point = Point.read(args),\n        x = point.x - this.x,\n        y = point.y - this.y,\n        d = x * x + y * y,\n        squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function (length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n        scale = current !== 0 ? length / current : 0,\n        point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function (angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n        sin = Math.sin(angle),\n        cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function (matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function () {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this);\n    },\n    isClose: function () {\n      var args = arguments,\n        point = Point.read(args),\n        tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function () {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function () {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function () {\n      return isNaN(this.x) || isNaN(this.y);\n    },\n    isInQuadrant: function (q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function () {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function () {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function () {\n      var point = Point.read(arguments),\n        scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function () {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner[this._setter](this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner[this._setter](this);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n        this._set(arg0, hasHeight ? arg1 : arg0);\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function (size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function () {\n      return new Size(this.width, this.height);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function () {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function () {\n      return isNaN(this.width) || isNaN(this.height);\n    },\n    statics: {\n      min: function (size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function (size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function () {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function () {\n      return this._width;\n    },\n    setWidth: function (width) {\n      this._width = width;\n      this._owner[this._setter](this);\n    },\n    getHeight: function () {\n      return this._height;\n    },\n    setHeight: function (height) {\n      this._height = height;\n      this._owner[this._setter](this);\n    }\n  });\n  var Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n        type = typeof arg0,\n        read;\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n          next = Base.peek(args),\n          x = frm.x,\n          y = frm.y,\n          width,\n          height;\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n        this._set(x, y, width, height);\n        read = args.__index;\n      }\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function (rect) {\n      var rt = Base.isPlainValue(rect) ? Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function (_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function () {\n      var size = Size.read(arguments),\n        sx = this._sx,\n        sy = this._sy,\n        w = size.width,\n        h = size.height;\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function () {\n      return this.x;\n    },\n    setLeft: function (left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function () {\n      return this.y;\n    },\n    setTop: function (top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function () {\n      return this.x + this.width;\n    },\n    setRight: function (right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function () {\n      return this.y + this.height;\n    },\n    setBottom: function (bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function () {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function (x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n        this.width = (x - this.x) * 2;\n      }\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function () {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function (y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n        this.height = (y - this.y) * 2;\n      }\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function () {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function () {\n      return this.width * this.height;\n    },\n    isEmpty: function () {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function (arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function (point) {\n      var x = point.x,\n        y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function (rect) {\n      var x = rect.x,\n        y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function () {\n      var rect = Rectangle.read(arguments),\n        epsilon = Base.read(arguments) || 0;\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.max(this.x, rect.x),\n        y1 = Math.max(this.y, rect.y),\n        x2 = Math.min(this.x + this.width, rect.x + rect.width),\n        y2 = Math.min(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.min(this.x, rect.x),\n        y1 = Math.min(this.y, rect.y),\n        x2 = Math.max(this.x + this.width, rect.x + rect.width),\n        y2 = Math.max(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function () {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n        y1 = Math.min(this.y, point.y),\n        x2 = Math.max(this.x + this.width, point.x),\n        y2 = Math.max(this.y + this.height, point.y);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function () {\n      var amount = Size.read(arguments),\n        hor = amount.width,\n        ver = amount.height;\n      return new Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function (hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n      xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n      y = parts[xFirst ? 1 : 0],\n      getX = 'get' + x,\n      getY = 'get' + y,\n      setX = 'set' + x,\n      setY = 'set' + y,\n      get = 'get' + part,\n      set = 'set' + part;\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n  var LinkedRectangle = Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n        internal = '_' + key;\n      this['get' + part] = function () {\n        return this[internal];\n      };\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function () {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function (selected) {\n        var owner = this._owner;\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n        count = args.length,\n        ok = true;\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n      return this;\n    },\n    set: '#initialize',\n    _set: function (a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function () {\n      var owner = this._owner;\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function (mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function (_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function (recursively, _setApplyMatrix) {\n      var owner = this._owner;\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n      return false;\n    },\n    translate: function () {\n      var point = Point.read(arguments),\n        x = point.x,\n        y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n      this._changed();\n      return this;\n    },\n    scale: function () {\n      var args = arguments,\n        scale = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    rotate: function (angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n        x = center.x,\n        y = center.y,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        tx = x - x * cos + y * sin,\n        ty = y - x * sin - y * cos,\n        a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n      this._changed();\n      return this;\n    },\n    shear: function () {\n      var args = arguments,\n        shear = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      var a = this._a,\n        b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    skew: function () {\n      var args = arguments,\n        skew = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        }),\n        toRadians = Math.PI / 180,\n        shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    prepend: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          tx1 = this._tx,\n          ty1 = this._ty,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    appended: function (mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function (mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n      return res;\n    },\n    inverted: function () {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function () {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function () {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function () {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function () {\n      return !this.isInvertible();\n    },\n    transform: function (src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function (point, dest, _dontNotify) {\n      var x = point.x,\n        y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function (src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n          y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n      return dst;\n    },\n    _transformCorners: function (rect) {\n      var x1 = rect.x,\n        y1 = rect.y,\n        x2 = x1 + rect.width,\n        y2 = y1 + rect.height,\n        coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function (bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n        min = coords.slice(0, 2),\n        max = min.slice();\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n          j = i & 1;\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n      if (!dest) dest = new Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function () {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function (point, dest, _dontNotify) {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n          y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n      return res;\n    },\n    decompose: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        det = a * d - b * c,\n        sqrt = Math.sqrt,\n        atan2 = Math.atan2,\n        degrees = 180 / Math.PI,\n        rotate,\n        scale,\n        skew;\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function () {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function () {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function () {\n      return this.decompose().scaling;\n    },\n    getRotation: function () {\n      return this.decompose().rotation;\n    },\n    applyToContext: function (ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n      prop = '_' + key;\n    this['get' + part] = function () {\n      return this[prop];\n    };\n    this['set' + part] = function (value) {\n      this[prop] = value;\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function () {\n      return new Point(this._px, this._py);\n    },\n    getVector: function () {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function () {\n      return this.getVector().getLength();\n    },\n    intersect: function (line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function (point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function (point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function (point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function (line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function (line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function (p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n        var cross = v1x * v2y - v1y * v2x;\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n            dy = p1y - p2y,\n            u1 = (v2x * dy - v2y * dx) / cross,\n            u2 = (v1x * dy - v1y * dx) / cross,\n            epsilon = 1e-12,\n            uMin = -epsilon,\n            uMax = 1 + epsilon;\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function (px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        var v2x = x - px,\n          v2y = y - py,\n          ccw = v2x * vy - v2y * vx;\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function (px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function (px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function (flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n      var changes = this._changes;\n      if (changes && item) {\n        var changesById = this._changesById,\n          id = item._id,\n          entry = changesById[id];\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function () {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) children[i].remove();\n    },\n    isEmpty: function () {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function () {\n      return this._view;\n    },\n    getCurrentStyle: function () {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function (style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    getOptions: function () {\n      return this._scope.settings;\n    },\n    getLayers: function () {\n      return this._children;\n    },\n    getActiveLayer: function () {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function () {\n      var definitions = [],\n        ids = {};\n      this.getItems({\n        class: SymbolItem,\n        match: function (item) {\n          var definition = item._definition,\n            id = definition._id;\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function () {\n      var selectionItems = this._selectionItems,\n        items = [];\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n          selection = item._selection;\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n      return items;\n    },\n    _updateSelection: function (item) {\n      var id = item._id,\n        selectionItems = this._selectionItems;\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(true);\n    },\n    deselectAll: function () {\n      var selectionItems = this._selectionItems;\n      for (var i in selectionItems) selectionItems[i].setFullySelected(false);\n    },\n    addLayer: function (layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function (index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n        Base.splice(this._children, [layer], index, 0);\n        layer._setProject(this, true);\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n      return layer;\n    },\n    _insertItem: function (index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function (json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function (type) {\n      var sets = this._removeSets;\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n            item.remove();\n          }\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function (ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n        param = new Base({\n          offset: new Point(0, 0),\n          pixelRatio: pixelRatio,\n          viewMatrix: matrix.isIdentity() ? null : matrix,\n          matrices: [new Matrix()],\n          updateMatrix: true\n        });\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n      ctx.restore();\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n          size = this._scope.settings.handleSize,\n          version = this._updateVersion;\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      INSERT: {\n        insert: true\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function (type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function (type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function () {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function () {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function (props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n        internal = hasProps && props.internal === true,\n        matrix = this._matrix = new Matrix(),\n        project = hasProps && props.project || paper.project,\n        settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert == true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n      if (hasProps && props !== Item.NO_INSERT && props !== Item.INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n      return hasProps;\n    },\n    _serialize: function (options, dictionary) {\n      var props = {},\n        that = this;\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function (flags) {\n      var symbol = this._symbol,\n        cacheParent = this._parent || symbol,\n        project = this._project;\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function () {\n      return this._id;\n    },\n    getName: function () {\n      return this._name;\n    },\n    setName: function (name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n      var owner = this._getOwner();\n      if (name && owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n      this._name = name || undefined;\n      this._changed(256);\n    },\n    getStyle: function () {\n      return this._style;\n    },\n    setStyle: function (style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n      key = '_' + name,\n      flags = {\n        locked: 256,\n        visible: 265\n      };\n    this['get' + part] = function () {\n      return this[key];\n    };\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n        if (project) {\n          project._updateSelection(this);\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) if (children[i].isSelected()) return true;\n      }\n      return !!(this._selection & 1);\n    },\n    setSelected: function (selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) children[i].setSelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function () {\n      var children = this._children,\n        selected = !!(this._selection & 1);\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) if (!children[i].isFullySelected()) return false;\n        return true;\n      }\n      return selected;\n    },\n    setFullySelected: function (selected) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function () {\n      return this._clipMask;\n    },\n    setClipMask: function (clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n        this._changed(257);\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function () {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function (data) {\n      this._data = data;\n    },\n    getPosition: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      var position = this._position || (this._position = this._getPositionFromBounds());\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function () {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function (bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function () {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function () {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function (matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n        opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function () {\n      var rect = Rectangle.read(arguments),\n        bounds = this.getBounds(),\n        _matrix = this._matrix,\n        matrix = new Matrix(),\n        center = rect.getCenter();\n      matrix.translate(center);\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n          bounds = this.getBounds();\n        }\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function (matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new Rectangle();\n      Item._updateBoundsCache(this, options.cacheItem);\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function (options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function (matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n      var internal = options.internal && !noInternal,\n        cacheItem = options.cacheItem,\n        _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n        cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n        bounds = this._bounds;\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n      var res = this._getBounds(matrix || _matrix, options),\n        rect = res.rect || res,\n        style = this._style,\n        nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function (matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n        mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function (parent, item) {\n        if (parent && item) {\n          var id = item._id,\n            ref = parent._boundsCache = parent._boundsCache || {\n              ids: {},\n              list: []\n            };\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function (item) {\n        var cache = item._boundsCache;\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function (items, matrix, options) {\n        var x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2,\n          nonscaling = false;\n        options = options || {};\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n              rect = bounds.rect;\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n        return {\n          rect: isFinite(x1) ? new Rectangle(x1, y1, x2 - x1, y2 - y1) : new Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function () {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function () {\n      var decomposed = this._decompose();\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function () {\n      var decomposed = this._decompose(),\n        s = decomposed && decomposed.scaling;\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n          decomposed = this._decomposed,\n          matrix = new Matrix(),\n          isZero = Numerical.isZero;\n        if (isZero(current.x) || isZero(current.y)) {\n          matrix.translate(decomposed.translation);\n          if (rotation) {\n            matrix.rotate(rotation);\n          }\n          matrix.scale(scaling.x, scaling.y);\n          this._matrix.set(matrix);\n        } else {\n          var center = this.getPosition(true);\n          matrix.translate(center);\n          if (rotation) matrix.rotate(rotation);\n          matrix.scale(scaling.x / current.x, scaling.y / current.y);\n          if (rotation) matrix.rotate(-rotation);\n          matrix.translate(center.negate());\n          this.transform(matrix);\n        }\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function (_dontClone) {\n      var matrix = this._globalMatrix;\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n            break;\n          }\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function () {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function () {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function (apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function () {\n      return this._project;\n    },\n    _setProject: function (project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n        for (var i = 0, l = children && children.length; i < l; i++) children[i]._setProject(project);\n        installEvents = true;\n      }\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n      var children = this._children;\n      for (var i = 0, l = children && children.length; i < l; i++) children[i]._installEvents(install);\n    },\n    getLayer: function () {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n      return null;\n    },\n    getParent: function () {\n      return this._parent;\n    },\n    setParent: function (item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function () {\n      return this._children;\n    },\n    setChildren: function (items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function () {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function () {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    equals: function (item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function (item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function (options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n        children = this._children,\n        insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n        deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n        parent = this._parent;\n      if (name && parent) {\n        var children = parent._children,\n          orig = name,\n          i = 1;\n        while (children[name]) name = orig + ' ' + i++;\n        if (name !== orig) copy.setName(name);\n      }\n      return copy;\n    },\n    copyContent: function (source) {\n      var children = source._children;\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function (source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n        name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function (arg0, arg1) {\n      var resolution, insert, raster;\n      if (Base.isPlainObject(arg0)) {\n        resolution = arg0.resolution;\n        insert = arg0.insert;\n        raster = arg0.raster;\n      } else {\n        resolution = arg0;\n        insert = arg1;\n      }\n      if (!raster) {\n        raster = new Raster(Item.NO_INSERT);\n      }\n      var bounds = this.getStrokeBounds(),\n        scale = (resolution || this.getView().getResolution()) / 72,\n        topLeft = bounds.getTopLeft().floor(),\n        bottomRight = bounds.getBottomRight().ceil(),\n        boundsSize = new Size(bottomRight.subtract(topLeft)),\n        rasterSize = boundsSize.multiply(scale);\n      raster.setSize(rasterSize, true);\n      if (!rasterSize.isZero()) {\n        var ctx = raster.getContext(true),\n          matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n      }\n      raster._matrix.set(new Matrix().translate(topLeft.add(boundsSize.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) {\n        raster.insertAbove(this);\n      }\n      return raster;\n    },\n    contains: function () {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function (point) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n        return false;\n      }\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function () {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function (item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n    function hitTestAll() {\n      var args = arguments,\n        point = Point.read(args),\n        options = HitResult.getOptions(args),\n        all = [];\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n      return all;\n    }\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n          if (res && !options.all) return res;\n        }\n      }\n      return null;\n    }\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function (point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n      var matrix = this._matrix,\n        viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n        tolerance = Math.max(options.tolerance, 1e-12),\n        tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options.class && !(this instanceof options.class)),\n        match = options.match,\n        that = this,\n        bounds,\n        res;\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n      var checkPosition = options.position,\n        checkCenter = options.center,\n        checkBounds = options.bounds;\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n        res = filter(res);\n      }\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n      return res;\n    },\n    _hitTestSelf: function (point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function (name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n              val2 = obj2[i];\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n      var type = typeof name;\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n            overlapping = obj && obj.overlapping,\n            inside = obj && obj.inside,\n            bounds = overlapping || inside,\n            rect = bounds && Rectangle.read([bounds]);\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n        var children = item._children,\n          items = param.items,\n          rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n            childMatrix = matrix && matrix.appended(child._matrix),\n            add = true;\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n          if (firstOnly && items.length > 0) break;\n        }\n        return items;\n      }\n    }\n  }, {\n    importJSON: function (json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function (item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function (index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function (items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function (index, items) {\n      var children = this._children;\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n            id = item && item._id;\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n            inserted[id] = true;\n          }\n        }\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n          notifySelf = project._changes;\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n            name = item._name;\n          item._parent = this;\n          item._setProject(project, true);\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n        this._changed(11);\n      } else {\n        items = null;\n      }\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function (item, offset) {\n      var owner = item && item._getOwner(),\n        res = item !== this && owner ? this : null;\n      if (res) {\n        res._remove(false, true);\n        owner._insertItem(item._index + offset, res);\n      }\n      return res;\n    },\n    insertAbove: function (item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function (item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function (item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function (owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function (owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function (options) {\n      var children = this._children;\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n        return child;\n      }\n      return this;\n    },\n    _removeNamed: function () {\n      var owner = this._getOwner();\n      if (owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren,\n          name = this._name,\n          namedArray = namedChildren[name],\n          index = namedArray ? namedArray.indexOf(this) : -1;\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function (notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n        project = this._project,\n        index = this._index;\n      if (this._style) this._style._dispose();\n      if (owner) {\n        if (this._name) this._removeNamed();\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n        this._installEvents(false);\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n      return false;\n    },\n    remove: function () {\n      return this._remove(true, true);\n    },\n    replaceWith: function (item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function (start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function () {\n      if (this._children) {\n        this._children.reverse();\n        for (var i = 0, l = this._children.length; i < l; i++) this._children[i]._index = i;\n        this._changed(11);\n      }\n    },\n    isEmpty: function (recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return !numChildren;\n    },\n    isEditable: function () {\n      var item = this;\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n      return true;\n    },\n    hasFill: function () {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function () {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function () {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function (item) {\n      function getList(item) {\n        var list = [];\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n        return list;\n      }\n      var list1 = getList(this),\n        list2 = getList(item);\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n      return 0;\n    },\n    hasChildren: function () {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function () {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function (item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function (item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function (item) {\n      return this._parent === item;\n    },\n    isChild: function (item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function (item) {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n      return false;\n    },\n    isAncestor: function (item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function (item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function (item) {\n      var parent = this._parent;\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function (matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n        transformMatrix = matrix && !matrix.isIdentity(),\n        applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n        _matrix.prepend(matrix, true);\n        var style = this._style,\n          fillColor = style.getFillColor(true),\n          strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n        _matrix.reset(true);\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n      var bounds = this._bounds,\n        position = this._position;\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n      var decomp = transformMatrix && bounds && matrix.decompose();\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n            matrix._transformBounds(rect, rect);\n          }\n        }\n        this._bounds = bounds;\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n      return this;\n    },\n    _transformContent: function (matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n        return true;\n      }\n    },\n    globalToLocal: function () {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function () {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function (rectangle, fill) {\n      rectangle = Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n        itemRatio = bounds.height / bounds.width,\n        rectRatio = rectangle.height / rectangle.width,\n        scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n        newBounds = new Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function (ctx, param, viewMatrix) {\n      var style = this._style,\n        matrix = this._matrix;\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n          strokeCap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n            dashOffset = style.getDashOffset();\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n          mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n          blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n          offset = mx.transform(this.getShadowOffset());\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function (ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n        viewMatrix = param.viewMatrix,\n        matrix = this._matrix,\n        globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n      var blendMode = this._blendMode,\n        opacity = Numerical.clamp(this._opacity, 0, 1),\n        normalBlend = blendMode === 'normal',\n        nativeBlend = BlendMode.nativeModes[blendMode],\n        direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n        pixelRatio = param.pixelRatio || 1,\n        mainCtx,\n        itemOffset,\n        prevOffset;\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n        clip = !direct && param.clipItem,\n        transform = !strokeMatrix || clip;\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n      ctx.restore();\n      matrices.pop();\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function (updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n      return updated;\n    },\n    _drawSelection: function (ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n        itemSelected = selection & 1,\n        boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n        positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n          color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n          mx = matrix.appended(this.getGlobalMatrix(true)),\n          half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n            parent = this._parent,\n            point = parent ? parent.localToGlobal(pos) : pos,\n            x = point.x,\n            y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n            start = half,\n            end = size + 1;\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n              dx = delta[0],\n              dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n          ctx.beginPath();\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n          ctx.closePath();\n          ctx.stroke();\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function () {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function (obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n            project = this._project,\n            sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n      return this;\n    }\n  }), {\n    tween: function (from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n      var easing = options && options.easing,\n        start = options && options.start,\n        duration = options != null && (typeof options === 'number' ? options : options.duration),\n        tween = new Tween(this, from, to, duration, easing, start);\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n      return tween;\n    },\n    tweenTo: function (to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function (from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function () {\n      var clipItem = this._clipItem;\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n        this._clipItem = clipItem;\n      }\n      return clipItem;\n    },\n    isClipped: function () {\n      return !!this._getClipItem();\n    },\n    setClipped: function (clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function (ctx, param) {\n      var clip = param.clip,\n        clipItem = !clip && this._getClipItem();\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function () {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function () {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function () {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function (item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function (source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function () {\n      return this._type;\n    },\n    setType: function (type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n          width = size.width,\n          height = size.height;\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n        this._size._set(width, height);\n        this._changed(9);\n      }\n    },\n    getRadius: function () {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function (radius) {\n      var type = this._type;\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n          this._radius.set(radius);\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n      this._changed(9);\n    },\n    isEmpty: function () {\n      return false;\n    },\n    toPath: function (insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function () {\n      return this.toPath(false);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        dontPaint = param.dontFinish || param.clip,\n        untransformed = !strokeMatrix;\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n          radius = this._radius,\n          isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n            ry = isCircle ? radius : radius.height,\n            size = this._size,\n            width = size.width,\n            height = size.height;\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n              y = height / 2,\n              kappa = 1 - 0.5522847498307936,\n              cx = rx * kappa,\n              cy = ry * kappa,\n              c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n        ctx.closePath();\n      }\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0),\n        style = this._style,\n        strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n            corner = dir.multiply(halfSize),\n            center = corner.subtract(dir.multiply(radius)),\n            rect = new Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n          style = this._style,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill();\n        if (hitStroke || hitFill) {\n          var type = this._type,\n            radius = this._radius,\n            strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n            strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n              center = getCornerCenter(this, point, padding);\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new Rectangle(this._size).setCenter(0, 0),\n                outer = rect.expand(padding),\n                inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n        item._initialize(Base.getNamed(args), point);\n        return item;\n      }\n      return {\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args),\n            radius = ellipse.radius;\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function (args) {\n          var center, radius;\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = Rectangle.readNamed(args, 'rectangle');\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: 'low',\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n          type = typeof source,\n          object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContext || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function (item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function (source) {\n      var image = source._image,\n        canvas = source._canvas;\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n        this._setImage(copyCanvas);\n      }\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function (_size, _clear) {\n      var size = Size.read(arguments);\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = !_clear && this.getElement();\n          this._setImage(CanvasProvider.getCanvas(size));\n          if (element) {\n            this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n          }\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      } else if (_clear) {\n        this.clear();\n      }\n    },\n    getWidth: function () {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function (width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function () {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function (height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function () {\n      return this._loaded;\n    },\n    isEmpty: function () {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function () {\n      var matrix = this._matrix,\n        orig = new Point(0, 0).transform(matrix),\n        u = new Point(1, 0).transform(matrix).subtract(orig),\n        v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function () {\n      return this._image;\n    },\n    setImage: function (image) {\n      var that = this;\n      function emit(event) {\n        var view = that.getView(),\n          type = event && event.type || 'load';\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n      this._setImage(image);\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function (event) {\n            that._setImage(image);\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function (image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n      this._changed(1033);\n    },\n    getCanvas: function () {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function (_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n      if (_change) {\n        this._image = null;\n        this._changed(1025);\n      }\n      return this._context;\n    },\n    setContext: function (context) {\n      this._context = context;\n    },\n    getSource: function () {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function (src) {\n      var image = new self.Image(),\n        crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function () {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function (crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function () {\n      return this._smoothing;\n    },\n    setSmoothing: function (smoothing) {\n      this._smoothing = typeof smoothing === 'string' ? smoothing : smoothing ? 'low' : 'off';\n      this._changed(257);\n    },\n    getElement: function () {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function () {\n      var rect = Rectangle.read(arguments),\n        ctx = CanvasProvider.getContext(rect.getSize());\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function () {\n      var rect = Rectangle.read(arguments),\n        raster = new Raster(Item.NO_INSERT);\n      raster._setImage(this.getSubCanvas(rect));\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n      raster._matrix.prepend(this._matrix);\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function () {\n      var image = this._image,\n        src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function (image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function (object) {\n      var bounds, path;\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n      if (!bounds) return null;\n      var sampleSize = 32,\n        width = Math.min(bounds.width, sampleSize),\n        height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n      this._matrix.applyToContext(ctx);\n      var element = this.getElement(),\n        size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n        channels = [0, 0, 0],\n        total = 0;\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n      for (var i = 0; i < 3; i++) channels[i] /= total;\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function () {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function () {\n      var args = arguments,\n        point = Point.read(args),\n        color = Color.read(args),\n        components = color._convert('rgb'),\n        alpha = color._alpha,\n        ctx = this.getContext(true),\n        imageData = ctx.createImageData(1, 1),\n        data = imageData.data;\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function () {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function () {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function () {\n      var rect = Rectangle.read(arguments);\n      if (rect.isEmpty()) rect = new Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    putImageData: function (data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    setImageData: function (data) {\n      this.setSize(data);\n      this.getContext(true).putImageData(data, 0, 0);\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function (point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function () {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      var element = this.getElement();\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n        this._setStyles(ctx, param, viewMatrix);\n        var smoothing = this._smoothing,\n          disabled = smoothing === 'off';\n        DomElement.setPrefixed(ctx, disabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality', disabled ? false : smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function () {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function (item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function (source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function () {\n      return this._definition;\n    },\n    setDefinition: function (definition) {\n      this._definition = definition;\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function () {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function (matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function (point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function (ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function (flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function () {\n      return this._item;\n    },\n    setItem: function (item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function (position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function () {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function (symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function (args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n        point,\n        handleIn,\n        handleOut,\n        selection;\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function (options, dictionary) {\n      var point = this._point,\n        selection = this._selection,\n        obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function (point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n        index = this._index,\n        curve;\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n      path._changed(41);\n    },\n    getPoint: function () {\n      return this._point;\n    },\n    setPoint: function () {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function () {\n      return this._handleIn;\n    },\n    setHandleIn: function () {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function () {\n      return this._handleOut;\n    },\n    setHandleOut: function () {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function () {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function () {\n      this._handleIn._set(0, 0);\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      var oldSelection = this._selection,\n        path = this._path;\n      this._selection = selection = selection || 0;\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n        path._changed(257);\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      return !!(this._selection & 7);\n    },\n    setSelected: function (selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function () {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function () {\n      return this._path || null;\n    },\n    getCurve: function () {\n      var path = this._path,\n        index = this._index;\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n      return null;\n    },\n    getLocation: function () {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function (options, _first, _last) {\n      var opts = options || {},\n        type = opts.type,\n        factor = opts.factor,\n        prev = this.getPrevious(),\n        next = this.getNext(),\n        p0 = (prev || this)._point,\n        p1 = this._point,\n        p2 = (next || this)._point,\n        d1 = p0.getDistance(p1),\n        d2 = p1.getDistance(p2);\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n          d1_a = Math.pow(d1, a),\n          d1_2a = d1_a * d1_a,\n          d2_a = Math.pow(d2, a),\n          d2_2a = d2_a * d2_a;\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n            N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n            N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n            t = factor === undefined ? 0.4 : factor,\n            k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut,\n        tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function () {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function () {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function () {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function (segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function () {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function (matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n      this._changed();\n    },\n    interpolate: function (from, to, factor) {\n      var u = 1 - factor,\n        v = factor,\n        point1 = from._point,\n        point2 = to._point,\n        handleIn1 = from._handleIn,\n        handleIn2 = to._handleIn,\n        handleOut2 = to._handleOut,\n        handleOut1 = from._handleOut;\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n      this._changed();\n    },\n    _transformCoordinates: function (matrix, coords, change) {\n      var point = this._point,\n        handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n        handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n        x = point._x,\n        y = point._y,\n        i = 2;\n      coords[0] = x;\n      coords[1] = y;\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n        x = coords[0];\n        y = coords[1];\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n        y = pt.y;\n        selected = pt.selected;\n      }\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function (x, y) {\n      this._x = x;\n      this._y = y;\n      this._owner._changed(this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner._changed(this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner._changed(this);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n        seg1,\n        seg2,\n        point1,\n        point2,\n        handle1,\n        handle2;\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function () {\n      this._length = this._bounds = undefined;\n    },\n    clone: function () {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function () {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function () {\n      return Curve.classify(this.getValues());\n    },\n    remove: function () {\n      var removed = false;\n      if (this._path) {\n        var segment2 = this._segment2,\n          handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n      return removed;\n    },\n    getPoint1: function () {\n      return this._segment1._point;\n    },\n    setPoint1: function () {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function () {\n      return this._segment2._point;\n    },\n    setPoint2: function () {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function () {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function () {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function () {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function () {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function () {\n      return this._segment1;\n    },\n    getSegment2: function () {\n      return this._segment2;\n    },\n    getPath: function () {\n      return this._path;\n    },\n    getIndex: function () {\n      return this._segment1._index;\n    },\n    getNext: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._segment1._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function () {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function (selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function (matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function () {\n      var coords = this.getValues(),\n        points = [];\n      for (var i = 0; i < 8; i += 2) points.push(new Point(coords[i], coords[i + 1]));\n      return points;\n    }\n  }, {\n    getLength: function () {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function () {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function () {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function (from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function (from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function (location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function (time, _setHandles) {\n      var tMin = 1e-8,\n        tMax = 1 - tMin,\n        res = null;\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n          left = parts[0],\n          right = parts[1],\n          setHandles = _setHandles || this.hasHandles(),\n          seg1 = this._segment1,\n          seg2 = this._segment2,\n          path = this._path;\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n        var x = left[6],\n          y = left[7],\n          segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n          this._changed();\n          res = new Curve(segment, seg2);\n        }\n      }\n      return res;\n    },\n    splitAt: function (location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function (time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function (offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function (offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function () {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function () {\n      this._segment1._handleOut._set(0, 0);\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function (segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n          h1 = segment1._handleOut,\n          h2 = segment2._handleIn,\n          p2 = segment2._point,\n          x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function (v, t) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n          x4 = u * x0 + t * x1,\n          y4 = u * y0 + t * y1,\n          x5 = u * x1 + t * x2,\n          y5 = u * y1 + t * y2,\n          x6 = u * x2 + t * x3,\n          y6 = u * y2 + t * y3,\n          x7 = u * x4 + t * x5,\n          y7 = u * y4 + t * y5,\n          x8 = u * x5 + t * x6,\n          y8 = u * y5 + t * y6,\n          x9 = u * x7 + t * x8,\n          y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function (v, dir) {\n        var curves = [],\n          io = dir ? 0 : 1,\n          o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n            b = 2 * (o0 + o2) - 4 * o1,\n            c = o1 - o0,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [],\n            n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n              parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n            curves.push(parts[1]);\n          }\n        }\n        return curves;\n      },\n      solveCubic: function (v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n          v1 = v[coord + 2],\n          v2 = v[coord + 4],\n          v3 = v[coord + 6],\n          res = 0;\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n            b = 3 * (v2 - v1) - c,\n            a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n        return res;\n      },\n      getTimeOf: function (v, point) {\n        var p0 = new Point(v[0], v[1]),\n          p3 = new Point(v[6], v[7]),\n          epsilon = 1e-12,\n          geomEpsilon = 1e-7,\n          t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n        if (t === null) {\n          var coords = [point.x, point.y],\n            roots = [];\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function (v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n            y0 = v[1],\n            x3 = v[6],\n            y3 = v[7],\n            vx = x3 - x0,\n            vy = y3 - y0,\n            det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n        var count = 100,\n          minDist = Infinity,\n          minT = 0;\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n        for (var i = 0; i <= count; i++) refine(i / count);\n        var step = 1 / (count * 2);\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n        return minT;\n      },\n      getPart: function (v, from, to) {\n        var flip = from > to;\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function (v, flatness) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ux = 3 * x1 - 2 * x0 - x3,\n          uy = 3 * y1 - 2 * y0 - y3,\n          vx = 3 * x2 - 2 * x3 - x0,\n          vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function (v) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function (v) {\n        var min = v.slice(0, 2),\n          max = min.slice(),\n          roots = [0, 0];\n        for (var i = 0; i < 2; i++) Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function (v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n            right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n        padding /= 2;\n        var minPad = min[coord] + padding,\n          maxPad = max[coord] - padding;\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, 0);\n            add(v3, 0);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n              b = 2 * (v0 + v2) - 4 * v1,\n              c = v1 - v0,\n              count = Numerical.solveQuadratic(a, b, c, roots),\n              tMin = 1e-8,\n              tMax = 1 - tMin;\n            add(v3, 0);\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function (p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n            epsilon = 1e-7;\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n              s1 = v.dot(h1) / div,\n              s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n      return false;\n    },\n    isLinear: function (p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n        seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n        y0 = v[1],\n        x3 = v[6],\n        y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function () {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function (epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function (curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function (offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function (t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function (offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function () {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function (t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function () {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function () {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        values = this.getValues(),\n        t = Curve.getNearestTime(values, point),\n        pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n        bx = 6 * (x0 + x2) - 12 * x1,\n        cx = 3 * (x1 - x0),\n        ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n        by = 6 * (y0 + y2) - 12 * y1,\n        cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n          dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        isZero = Numerical.isZero;\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n      var cx = 3 * (x1 - x0),\n        bx = 3 * (x2 - x1) - cx,\n        ax = x3 - x0 - cx - bx,\n        cy = 3 * (y1 - y0),\n        by = 3 * (y2 - y1) - cy,\n        ay = y3 - y0 - cy - by,\n        x,\n        y;\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n          tMax = 1 - tMin;\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n          var len = Math.sqrt(x * x + y * y);\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n            y2 = 6 * ay * t + 2 * by,\n            d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n    return {\n      statics: {\n        classify: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n            a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n            a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n            d3 = 3 * a3,\n            d2 = d3 - a2,\n            d1 = d2 - a2 + a1,\n            l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n            s = l !== 0 ? 1 / l : 0,\n            isZero = Numerical.isZero,\n            serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n              t1Ok = hasRoots && t1 > 0 && t1 < 1,\n              t2Ok = hasRoots && t2 > 0 && t2 < 1;\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n            f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function (v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n          if (Curve.isStraight(v)) {\n            var c = v;\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n            var dx = c[6] - c[0],\n              dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function (v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n            epsilon = 1e-12,\n            forward = offset > 0,\n            a = forward ? start : 0,\n            b = forward ? 1 : start,\n            ds = getLengthIntegrand(v),\n            rangeLength = Curve.getLength(v, a, b, ds),\n            diff = abs(offset) - rangeLength;\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n          var guess = offset / rangeLength,\n            length = 0;\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function (v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function (v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function (v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function (v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function (v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function (v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ax = -x0 + 3 * x1 - 3 * x2 + x3,\n            bx = 3 * x0 - 6 * x1 + 3 * x2,\n            cx = -3 * x0 + 3 * x1,\n            ay = -y0 + 3 * y1 - 3 * y2 + y3,\n            by = 3 * y0 - 6 * y1 + 3 * y2,\n            cy = -3 * y0 + 3 * y1,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n        excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n            loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n        q0x = v2[0],\n        q0y = v2[1],\n        q3x = v2[6],\n        q3y = v2[7],\n        getSignedDistance = Line.getSignedDistance,\n        d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n        d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n        factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n        dMin = factor * Math.min(0, d1, d2),\n        dMax = factor * Math.max(0, d1, d2),\n        dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n        dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n        dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n        dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n        hull = getConvexHull(dp0, dp1, dp2, dp3),\n        top = hull[0],\n        bottom = hull[1],\n        tMinClip,\n        tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n        tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n          u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n              t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n              u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n      return calls;\n    }\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n        p1 = [1 / 3, dq1],\n        p2 = [2 / 3, dq2],\n        p3 = [1, dq3],\n        dist1 = dq1 - (2 * dq0 + dq3) / 3,\n        dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n        hull;\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n        py = part[0][1];\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n          qy = part[i][1];\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n        px = qx;\n        py = qy;\n      }\n      return null;\n    }\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n      var angle = Math.atan2(-vy, vx),\n        sin = Math.sin(angle),\n        cos = Math.cos(angle),\n        rv = [],\n        roots = [];\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n          y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n        y1 = v2[1],\n        x2 = v2[6],\n        y2 = v2[7],\n        roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n          p1 = Curve.getPoint(v1, t1),\n          t2 = Curve.getTimeOf(v2, p1);\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n        min = Math.min,\n        max = Math.max;\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n            straight2 = Curve.isStraight(v2),\n            straight = straight1 && straight2,\n            flip = straight1 && !straight2,\n            before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                t2 = i & 1,\n                i1 = t1 * 6,\n                i2 = t2 * 6,\n                p1 = new Point(v1[i1], v1[i1 + 1]),\n                p2 = new Point(v2[i2], v2[i2 + 1]);\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n      return locations;\n    }\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n        self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n        length2 = curves2.length,\n        values1 = new Array(length1),\n        values2 = self ? values1 : new Array(length2),\n        locations = [];\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n          v1 = values1[index1];\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n        var collisions1 = boundsCollisions[index1];\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n          y = v[7] - v[1];\n        return x * x + y * y;\n      }\n      var abs = Math.abs,\n        getDistance = Line.getDistance,\n        timeEpsilon = 1e-8,\n        geomEpsilon = 1e-7,\n        straight1 = Curve.isStraight(v1),\n        straight2 = Curve.isStraight(v2),\n        straightBoth = straight1 && straight2,\n        flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n        l1 = flip ? v2 : v1,\n        l2 = flip ? v1 : v2,\n        px = l1[0],\n        py = l1[1],\n        vx = l1[6] - px,\n        vy = l1[7] - py;\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n      if (straight1 ^ straight2) {\n        return null;\n      }\n      var v = [v1, v2],\n        pairs = [];\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n          i2 = i1 ^ 1,\n          t1 = i >> 1,\n          t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n        if (i > 2 && !pairs.length) break;\n      }\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n          o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n      return pairs;\n    }\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        normalized = tangent.normalize(),\n        tx = normalized.x,\n        ty = normalized.y,\n        ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n        ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n        bx = 6 * x2 - 12 * x1 + 6 * x0,\n        by = 6 * y2 - 12 * y1 + 6 * y0,\n        cx = 3 * x1 - 3 * x0,\n        cy = 3 * y1 - 3 * y0,\n        den = 2 * ax * ty - 2 * ay * tx,\n        times = [];\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n          den = ax * by - ay * bx;\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n          k = bx * ty - by * tx;\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n            t0 = -(k + d) / den,\n            t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n      return times;\n    }\n    return {\n      getIntersections: function (curve) {\n        var v1 = this.getValues(),\n          v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n      this._setCurve(curve);\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setPath: function (path) {\n      this._path = path;\n      this._version = path ? path._version : 0;\n    },\n    _setCurve: function (curve) {\n      this._setPath(curve._path);\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function (segment) {\n      var curve = segment.getCurve();\n      if (curve) {\n        this._setCurve(curve);\n      } else {\n        this._setPath(segment._path);\n        this._segment1 = segment;\n        this._segment2 = null;\n      }\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function () {\n      var segment = this._segment;\n      if (!segment) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n        this._segment = segment;\n      }\n      return segment;\n    },\n    getCurve: function () {\n      var path = this._path,\n        that = this;\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n          return curve;\n        }\n      }\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function () {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function () {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function () {\n      var curve = this.getCurve(),\n        time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function () {\n      return this._point;\n    },\n    getOffset: function () {\n      var offset = this._offset;\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n          index = this.getIndex();\n        if (path && index != null) {\n          var curves = path.getCurves();\n          for (var i = 0; i < index; i++) offset += curves[i].getLength();\n        }\n        this._offset = offset += this.getCurveOffset();\n      }\n      return offset;\n    },\n    getCurveOffset: function () {\n      var offset = this._curveOffset;\n      if (offset == null) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n      return offset;\n    },\n    getIntersection: function () {\n      return this._intersection;\n    },\n    getDistance: function () {\n      return this._distance;\n    },\n    divide: function () {\n      var curve = this.getCurve(),\n        res = curve && curve.divideAtTime(this.getTime());\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n      return res;\n    },\n    split: function () {\n      var curve = this.getCurve(),\n        path = curve._path,\n        res = curve && curve.splitAtTime(this.getTime());\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n      return res;\n    },\n    equals: function (loc, _ignoreOther) {\n      var res = this === loc;\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n          c2 = loc.getCurve(),\n          p1 = c1._path,\n          p2 = c2._path;\n        if (p1 === p2) {\n          var abs = Math.abs,\n            epsilon = 1e-7,\n            diff = abs(this.getOffset() - loc.getOffset()),\n            i1 = !_ignoreOther && this._intersection,\n            i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n      return res;\n    },\n    toString: function () {\n      var parts = [],\n        point = this.getPoint(),\n        f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function () {\n      var inter = this._intersection;\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n          curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n      return false;\n    },\n    isCrossing: function () {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n        t2 = inter.getTime(),\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        t1Inside = t1 >= tMin && t1 <= tMax,\n        t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n        c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n        c4 = inter.getCurve(),\n        c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n          roots = Curve.classify(v).roots || Curve.getPeaks(v),\n          count = roots.length,\n          offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 32);\n      }\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n      var pt = this.getPoint(),\n        offset = Math.min.apply(Math, offsets),\n        v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n        v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n        v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n        v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n        a1 = v1.getAngle(),\n        a2 = v2.getAngle(),\n        a3 = v3.getAngle(),\n        a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function () {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n    this[name] = function () {\n      var curve = this.getCurve(),\n        time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n        l = 0,\n        r = length - 1;\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n        return null;\n      }\n      while (l <= r) {\n        var m = l + r >>> 1,\n          loc2 = locations[m],\n          found;\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n          return found;\n        }\n        var path1 = loc.getPath(),\n          path2 = loc2.getPath(),\n          diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n    return {\n      statics: {\n        insert: insert,\n        expand: function (locations) {\n          var expanded = locations.slice();\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function (arg) {\n        var data, segments, compound;\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function () {\n      return this;\n    },\n    isClockwise: function () {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function (clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function (data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n        coords,\n        relative = false,\n        previous,\n        control,\n        current = new Point(),\n        start = new Point();\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n      this.clear();\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n          command = part[0],\n          lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n            control = current;\n            break;\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n            control = current;\n            break;\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n            break;\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n            break;\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n            break;\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n            break;\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n            break;\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n        previous = lower;\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function (point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function (path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n        matrix1 = this._matrix._orNullIfIdentity(),\n        matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function (path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves(),\n        minDist = Infinity,\n        minLoc = null;\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n      return minLoc;\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function (from, to, factor) {\n      var isPath = !this._children,\n        name = isPath ? '_segments' : '_children',\n        itemsFrom = from[name],\n        itemsTo = to[name],\n        items = this[name];\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n      var current = items.length,\n        length = itemsTo.length;\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n      if (isPath) {\n        this.setClosed(from._closed);\n        this._changed(9);\n      }\n    },\n    compare: function (path) {\n      var ok = false;\n      if (path) {\n        var paths1 = this._children || [this],\n          paths2 = path._children ? path._children.slice() : [path],\n          length1 = paths1.length,\n          length2 = paths2.length,\n          matched = [],\n          count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n                ok = true;\n              }\n            }\n          }\n        }\n        ok = ok && count === length2;\n      }\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n        segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n      this._initialize(!segments && arg);\n    },\n    _equals: function (item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function (source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 8) {\n        this._length = this._area = undefined;\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) this._curves[i]._changed();\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function () {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function () {\n      return this._segments;\n    },\n    setSegments: function (segments) {\n      var fullySelected = this.isFullySelected(),\n        length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n      if (length) {\n        var last = segments[length - 1];\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function () {\n      return this._segments[0];\n    },\n    getLastSegment: function () {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function () {\n      var curves = this._curves,\n        segments = this._segments;\n      if (!curves) {\n        var length = this._countCurves();\n        curves = this._curves = new Array(length);\n        for (var i = 0; i < length; i++) curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function () {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function () {\n      return this._closed;\n    },\n    setClosed: function (closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function (_matrix, _precision) {\n      var segments = this._segments,\n        length = segments.length,\n        f = new Formatter(_precision),\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY,\n        parts = [];\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n        curX = coords[0];\n        curY = coords[1];\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n      if (!length) return '';\n      for (var i = 0; i < length; i++) addSegment(segments[i]);\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n      return parts.join('');\n    },\n    isEmpty: function () {\n      return !this._segments.length;\n    },\n    _transformContent: function (matrix) {\n      var segments = this._segments,\n        coords = new Array(6);\n      for (var i = 0, l = segments.length; i < l; i++) segments[i]._transformCoordinates(matrix, coords, true);\n      return true;\n    },\n    _add: function (segs, index) {\n      var segments = this._segments,\n        curves = this._curves,\n        amount = segs.length,\n        append = index == null,\n        index = append ? segments.length : index;\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n        for (var i = index + amount, l = segments.length; i < l; i++) segments[i]._index = i;\n      }\n      if (curves) {\n        var total = this._countCurves(),\n          start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n          insert = start,\n          end = Math.min(start + amount, total);\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n        for (var i = insert; i < end; i++) curves.splice(i, 0, new Curve(this, null, null));\n        this._adjustCurves(start, end);\n      }\n      this._changed(41);\n      return segs;\n    },\n    _adjustCurves: function (start, end) {\n      var segments = this._segments,\n        curves = this._curves,\n        curve;\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n        curve._changed();\n      }\n    },\n    _countCurves: function () {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function (segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function (index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function () {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function (index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function (segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function (index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function (index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function (start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n        curves = this._curves,\n        count = segments.length,\n        removed = segments.splice(start, end - start),\n        amount = removed.length;\n      if (!amount) return removed;\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n      for (var i = start, l = segments.length; i < l; i++) segments[i]._index = i;\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n          curves = curves.splice(index, amount);\n        for (var i = curves.length - 1; i >= 0; i--) curves[i]._path = null;\n        if (_includeCurves) removed._curves = curves.slice(1);\n        this._adjustCurves(index, index);\n      }\n      this._changed(41);\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n      return false;\n    },\n    clearHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) segments[i].clearHandles();\n    },\n    getLength: function () {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) length += curves[i].getLength();\n        this._length = length;\n      }\n      return this._length;\n    },\n    getArea: function () {\n      var area = this._area;\n      if (area == null) {\n        var segments = this._segments,\n          closed = this._closed;\n        area = 0;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n        this._area = area;\n      }\n      return area;\n    },\n    isFullySelected: function () {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function (selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function (selected) {\n      var segments = this._segments,\n        length = segments.length,\n        selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n      for (var i = 0; i < length; i++) segments[i]._selection = selection;\n    },\n    _updateSelection: function (segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function (location) {\n      var loc = this.getLocationAt(location),\n        curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function (location) {\n      var loc = this.getLocationAt(location),\n        index = loc && loc.index,\n        time = loc && loc.time,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n      var curves = this.getCurves();\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n        var segs = this.removeSegments(index, this._segments.length, true),\n          path;\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n        path._add(segs, 0);\n        this.addSegment(segs[0]);\n        return path;\n      }\n      return null;\n    },\n    split: function (index, time) {\n      var curve,\n        location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function (path, tolerance) {\n      var epsilon = tolerance || 0;\n      if (path && path !== this) {\n        var segments = path._segments,\n          last1 = this.getLastSegment(),\n          last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n      var first = this.getFirstSegment(),\n        last = this.getLastSegment();\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n      return this;\n    },\n    reduce: function (options) {\n      var curves = this.getCurves(),\n        simplify = options && options.simplify,\n        tolerance = simplify ? 1e-7 : 0;\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n      return this;\n    },\n    reverse: function () {\n      this._segments.reverse();\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n      this._curves = null;\n      this._changed(9);\n    },\n    flatten: function (flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n        parts = flattener.parts,\n        length = parts.length,\n        segments = [];\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n      this.setSegments(segments);\n    },\n    simplify: function (tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function (options) {\n      var that = this,\n        opts = options || {},\n        type = opts.type || 'asymmetric',\n        segments = this._segments,\n        length = segments.length,\n        closed = this._closed;\n      function getIndex(value, _default) {\n        var index = value && value.index;\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n        from = getIndex(opts.from, 0),\n        to = getIndex(opts.to, length - 1);\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n          min = Math.min,\n          amount = to - from + 1,\n          n = amount - 1,\n          padding = loop ? min(amount, 4) : 1,\n          paddingLeft = padding,\n          paddingRight = padding,\n          knots = [];\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n        var x = knots[0]._x + 2 * knots[1]._x,\n          y = knots[0]._y + 2 * knots[1]._y,\n          f = 2,\n          n_1 = n - 1,\n          rx = [x],\n          ry = [y],\n          rf = [f],\n          px = [],\n          py = [];\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n            a = internal ? 1 : asymmetric ? 1 : 2,\n            b = internal ? 4 : asymmetric ? 2 : 7,\n            u = internal ? 4 : asymmetric ? 3 : 8,\n            v = internal ? 2 : asymmetric ? 0 : 1,\n            m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n            pt = segment._point,\n            hx = px[i] - pt._x,\n            hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function (insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n        type,\n        size,\n        radius,\n        topCenter;\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          seg3 = segments[j],\n          seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n          seg1 = seg2.getPrevious(),\n          seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n      function isArc(i) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          handle1 = seg1._handleOut,\n          handle2 = seg2._handleIn,\n          kappa = 0.5522847498307936;\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n            pt2 = seg2._point,\n            corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n        return false;\n      }\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n        topCenter = segments[1]._point;\n      }\n      if (type) {\n        var center = this.getPosition(true),\n          shape = new type({\n            center: center,\n            size: size,\n            radius: radius,\n            insert: false\n          });\n        shape.copyAttributes(this, true);\n        shape._matrix.prepend(this._matrix);\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n        curves2 = path.getCurves(),\n        length1 = curves1.length,\n        length2 = curves2.length;\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n      var v1 = curves1[0].getValues(),\n        values2 = [],\n        pos1 = 0,\n        pos2,\n        end1 = 0,\n        end2;\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n      var abs = Math.abs,\n        epsilon = 1e-8,\n        v2 = values2[pos2],\n        start2;\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n            var t2 = overlaps[0][1];\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n              continue;\n            }\n          }\n        }\n        break;\n      }\n      return false;\n    },\n    _hitTestSelf: function (point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n        style = this.getStyle(),\n        segments = this._segments,\n        numSegments = segments.length,\n        closed = this._closed,\n        tolerancePadding = options._tolerancePadding,\n        strokePadding = tolerancePadding,\n        join,\n        cap,\n        miterLimit,\n        area,\n        loc,\n        res,\n        hitStroke = options.stroke && style.hasStroke(),\n        hitFill = options.fill && style.hasFill(),\n        hitCurves = options.curves,\n        strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n      function addToArea(point) {\n        area.add(point);\n      }\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) if (res = checkSegmentPoints(segments[i])) return res;\n      }\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n        if (loc) {\n          var time = loc.getTime();\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n      return null;\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function (offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n            curve = curves[i];\n          length += curve.getLength();\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n      return null;\n    },\n    getOffsetsWithTangent: function () {\n      var tangent = Point.read(arguments);\n      if (tangent.isZero()) {\n        return [];\n      }\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n        curveStart += curve.length;\n      }\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n        miniSize = size - 2,\n        miniHalf = half - 1,\n        coords = new Array(6),\n        pX,\n        pY;\n      function drawHandle(index) {\n        var hX = coords[index],\n          hY = coords[index + 1];\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n          selection = segment._selection;\n        segment._transformCoordinates(matrix, coords);\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n        length = segments.length,\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY;\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n      for (var i = 0; i < length; i++) drawSegment(segments[i]);\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n    return {\n      _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n          dontPaint = param.dontFinish || param.clip,\n          style = this.getStyle(),\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dashArray = style.getDashArray(),\n          dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                length = flattener.length,\n                from = -style.getDashOffset(),\n                to,\n                i = 0;\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function (ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n    return {\n      moveTo: function () {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function () {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function () {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          t = Base.pick(Base.read(args), 0.5),\n          t1 = 1 - t,\n          current = getCurrentSegment(this)._point,\n          handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function () {\n        var args = arguments,\n          abs = Math.abs,\n          sqrt = Math.sqrt,\n          current = getCurrentSegment(this),\n          from = current._point,\n          to = Point.read(args),\n          through,\n          peek = Base.peek(args),\n          clockwise = Base.pick(peek, true),\n          center,\n          extent,\n          vector,\n          matrix;\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n            through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n            isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n            clockwise = !!Base.read(args),\n            large = !!Base.read(args),\n            middle = from.add(to).divide(2),\n            pt = from.subtract(middle).rotate(-rotation),\n            x = pt.x,\n            y = pt.y,\n            rx = abs(radius.width),\n            ry = abs(radius.height),\n            rxSq = rx * rx,\n            rySq = ry * ry,\n            xSq = x * x,\n            ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n            l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n            line = new Line(from, to),\n            throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n        if (extent) {\n          var epsilon = 1e-5,\n            ext = abs(extent),\n            count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n            inc = extent / count,\n            half = inc * Math.PI / 360,\n            z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n            segments = [];\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n              out = null;\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n              segments.push(new Segment(pt, _in, out));\n            }\n            vector = vector.rotate(inc);\n          }\n          this._add(segments);\n        }\n      },\n      lineBy: function () {\n        var to = Point.read(arguments),\n          current = getCurrentSegment(this)._point;\n        this.lineTo(current.add(to));\n      },\n      curveBy: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          parameter = Base.read(args),\n          current = getCurrentSegment(this)._point;\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function () {\n        var args = arguments,\n          current = getCurrentSegment(this)._point,\n          point = current.add(Point.read(args)),\n          clockwise = Base.pick(Base.peek(args), true);\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function (tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function (matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function (segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new Rectangle();\n        var coords = new Array(6),\n          prevCoords = first._transformCoordinates(matrix, new Array(6)),\n          min = prevCoords.slice(0, 2),\n          max = min.slice(),\n          roots = new Array(2);\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n        for (var i = 1, l = segments.length; i < l; i++) processSegment(segments[i]);\n        if (closed) processSegment(first);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = style.hasStroke(),\n          strokeWidth = style.getStrokeWidth(),\n          strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n          strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n          bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n          join = style.getStrokeJoin(),\n          cap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit(),\n          joinBounds = new Rectangle(new Size(strokePadding));\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n        var length = segments.length - (closed ? 0 : 1);\n        if (length > 0) {\n          for (var i = 1; i < length; i++) {\n            addJoin(segments[i], join);\n          }\n          if (closed) {\n            addJoin(segments[0], join);\n          } else {\n            addCap(segments[0], cap);\n            addCap(segments[segments.length - 1], cap);\n          }\n        }\n        return bounds;\n      },\n      _getStrokePadding: function (radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n          ver = new Point(0, radius).transform(matrix),\n          phi = hor.getAngleInRadians(),\n          a = hor.getLength(),\n          b = ver.getLength();\n        var sin = Math.sin(phi),\n          cos = Math.cos(phi),\n          tan = Math.tan(phi),\n          tx = Math.atan2(b * tan, a),\n          ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function (segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n          curve1 = curve2.getPrevious(),\n          point = curve2.getPoint1().transform(matrix),\n          normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n          normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n          angle = normal1.getDirectedAngle(normal2);\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function (segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n          loc = segment.getLocation(),\n          normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n          point = point.add(normal.rotate(-90));\n        }\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = options.stroke && style.hasStroke(),\n          strokePadding,\n          joinPadding;\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n            strokeRadius = style.getStrokeWidth() / 2,\n            joinRadius = strokeRadius;\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n        var coords = new Array(6),\n          x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n          segment._transformCoordinates(matrix, coords);\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n              paddingX = padding ? padding[0] : 0,\n              paddingY = padding ? padding[1] : 0,\n              x = coords[j],\n              y = coords[j + 1],\n              xn = x - paddingX,\n              xx = x + paddingX,\n              yn = y - paddingY,\n              yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n        ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n          path = new Path(props && (props.insert == true ? Item.INSERT : props.insert == false ? Item.NO_INSERT : null));\n        path._add(segments);\n        path._closed = closed;\n        return path.set(props, Item.INSERT);\n      }\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n        return createPath(segments, true, args);\n      }\n      return {\n        Line: function () {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.readNamed(args, 'radius', 0, {\n              readNull: true\n            }),\n            bl = rect.getBottomLeft(true),\n            tl = rect.getTopLeft(true),\n            tr = rect.getTopRight(true),\n            br = rect.getBottomRight(true),\n            segments;\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n              ry = radius.height,\n              hx = rx * kappa,\n              hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args);\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function () {\n          var args = arguments,\n            from = Point.readNamed(args, 'from'),\n            through = Point.readNamed(args, 'through'),\n            to = Point.readNamed(args, 'to'),\n            props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            sides = Base.readNamed(args, 'sides'),\n            radius = Base.readNamed(args, 'radius'),\n            step = 360 / sides,\n            three = sides % 3 === 0,\n            vector = new Point(0, three ? -radius : radius),\n            offset = three ? -1 : 0.5,\n            segments = new Array(sides);\n          for (var i = 0; i < sides; i++) segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n          return createPath(segments, true, args);\n        },\n        Star: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            points = Base.readNamed(args, 'points') * 2,\n            radius1 = Base.readNamed(args, 'radius1'),\n            radius2 = Base.readNamed(args, 'radius2'),\n            step = 360 / points,\n            vector = new Point(0, -1),\n            segments = new Array(points);\n          for (var i = 0; i < points; i++) segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n        first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n      return reduce.base.call(this);\n    },\n    isClosed: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n      return true;\n    },\n    setClosed: function (closed) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function () {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function () {\n      var children = this._children,\n        curves = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function () {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function () {\n      var children = this._children,\n        area = 0;\n      for (var i = 0, l = children.length; i < l; i++) area += children[i].getArea();\n      return area;\n    },\n    getLength: function () {\n      var children = this._children,\n        length = 0;\n      for (var i = 0, l = children.length; i < l; i++) length += children[i].getLength();\n      return length;\n    },\n    getPathData: function (_matrix, _precision) {\n      var children = this._children,\n        paths = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options.class === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n      for (var i = 0, l = children.length; i < l; i++) children[i].draw(ctx, param, strokeMatrix);\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n        var style = this._style;\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function (ctx, matrix, selectionItems) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function () {\n        var current = getCurrentPath(this),\n          path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function () {\n        var current = getCurrentPath(this, true),\n          last = current && current.getLastSegment(),\n          point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function (tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n        res;\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      operators = {\n        unite: {\n          '1': true,\n          '2': true\n        },\n        intersect: {\n          '2': true\n        },\n        subtract: {\n          '1': true\n        },\n        exclude: {\n          '1': true,\n          '-1': true\n        }\n      };\n    function getPaths(path) {\n      return path._children || [path];\n    }\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n      if (resolve) {\n        var paths = getPaths(res);\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n      return res;\n    }\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n      result.copyAttributes(path1, true);\n      return result;\n    }\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n      var _path1 = preparePath(path1, true),\n        _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n        operator = operators[operation];\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n        paths1 = getPaths(_path1),\n        paths2 = _path2 && getPaths(_path2),\n        segments = [],\n        curves = [],\n        paths;\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n      function getCurves(indices) {\n        var list = [];\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n        return list;\n      }\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n            id = curve._path._id,\n            map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n            inter = segment._intersection;\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n      return createResult(paths, true, path1, path2, options);\n    }\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n        _path2 = preparePath(path2),\n        crossings = _path1.getIntersections(_path2, filterIntersection),\n        subtract = operation === 'subtract',\n        divide = operation === 'divide',\n        added = {},\n        paths = [];\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n    function linkIntersections(from, to) {\n      var prev = from;\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n      while (from._next && from._next !== to) from = from._next;\n      if (!from._next) {\n        while (to._previous) to = to._previous;\n        from._next = to;\n        to._previous = from;\n      }\n    }\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) curves[i].clearHandles();\n    }\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n            this[path._id] = {\n              container: null,\n              winding: path.isClockwise() ? 1 : -1,\n              index: i\n            };\n          }, {}),\n          sorted = paths.slice().sort(function (a, b) {\n            return abs(b.getArea()) - abs(a.getArea());\n          }),\n          first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n            entry1 = lookup[path1._id],\n            containerWinding = 0,\n            indices = collisions[i];\n          if (indices) {\n            var point = null;\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n      return paths;\n    }\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        clearHandles = false,\n        clearCurves = clearLater || [],\n        clearLookup = clearLater && {},\n        renormalizeLocs,\n        prevCurve,\n        prevTime;\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n          time = loc._time,\n          origTime = time,\n          exclude = include && !include(loc),\n          curve = loc._curve,\n          segment;\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n        prevTime = origTime;\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n        loc._setSegment(segment);\n        var inter = segment._intersection,\n          dest = loc._intersection;\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n        io = ia ^ 1,\n        pv = [point.x, point.y],\n        pa = pv[ia],\n        po = pv[io],\n        windingEpsilon = 1e-9,\n        qualityEpsilon = 1e-6,\n        paL = pa - windingEpsilon,\n        paR = pa + windingEpsilon,\n        windingL = 0,\n        windingR = 0,\n        pathWindingL = 0,\n        pathWindingR = 0,\n        onPath = false,\n        onAnyPath = false,\n        quality = 1,\n        roots = [],\n        vPrev,\n        vClose;\n      function addWinding(v) {\n        var o0 = v[io + 0],\n          o3 = v[io + 6];\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n        var a0 = v[ia + 0],\n          a1 = v[ia + 2],\n          a2 = v[ia + 4],\n          a3 = v[ia + 6];\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n          return;\n        }\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n          a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n          winding = o0 > o3 ? 1 : -1,\n          windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n          a3Prev = vPrev[ia + 6];\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n          quality /= 4;\n        }\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6],\n            monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n            res;\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n          path = curve._path,\n          v = curve.getValues(),\n          res;\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n              prev = prev.getPrevious();\n            }\n          }\n        }\n        if (res = handleCurve(v)) return res;\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n          vClose = null;\n        }\n      }\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n        start = segment,\n        totalLength = 0,\n        winding;\n      do {\n        var curve = segment.getCurve();\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n      var offsets = [0.5, 0.25, 0.75],\n        winding = {\n          winding: 0,\n          quality: -1\n        },\n        tMin = 1e-3,\n        tMax = 1 - tMin;\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n            curveLength = entry.length;\n          if (length <= curveLength) {\n            var curve = entry.curve,\n              path = curve._path,\n              parent = path._parent,\n              operand = parent instanceof CompoundPath ? parent : path,\n              t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n              pt = curve.getPointAtTime(t),\n              dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                pathWinding = otherPath._getWinding(pt, dir, true);\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n          length -= curveLength;\n        }\n      }\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n    function tracePaths(segments, operator) {\n      var paths = [],\n        starts;\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n        return false;\n      }\n      function visitPath(path) {\n        var segments = path._segments;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n          start = inter,\n          crossings = [];\n        if (collectStarts) starts = [segment];\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n              path = other && other._path;\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                nextInter = next._intersection;\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n              if (collectStarts) starts.push(other);\n            }\n            inter = inter._next;\n          }\n        }\n        if (inter) {\n          collect(inter);\n          while (inter && inter._previous) inter = inter._previous;\n          collect(inter, start);\n        }\n        return crossings;\n      }\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n          inter2 = seg2._intersection,\n          over1 = !!(inter1 && inter1._overlap),\n          over2 = !!(inter2 && inter2._overlap),\n          path1 = seg1._path,\n          path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n          valid = isValid(seg),\n          path = null,\n          finished = false,\n          closed = true,\n          branches = [],\n          branch,\n          visited,\n          handleIn;\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n            path2 = seg._intersection._segment._path;\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n        while (valid) {\n          var first = !path,\n            crossings = getCrossingSegments(seg, first),\n            other = crossings.shift(),\n            finished = !first && (isStart(seg) || isStart(other)),\n            cross = !finished && other;\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n          if (cross) seg = other;\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n            visited.length = 0;\n            do {\n              seg = branch && branch.crossings.shift();\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n            if (!seg) break;\n          }\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n      return paths;\n    }\n    return {\n      _getWinding: function (point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function (path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function (path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function (path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function (path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function (path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function () {\n        var children = this._children,\n          paths = children || [this];\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n        var hasOverlaps = false,\n          hasCrossings = false,\n          intersections = this.getIntersections(null, function (inter) {\n            return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n          }),\n          clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n              path = overlap._path,\n              seg = overlap._segment,\n              prev = seg.getPrevious(),\n              next = seg.getNext();\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n              prev._handleOut._set(0, 0);\n              next._handleIn._set(0, 0);\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n                prev.remove();\n              }\n            }\n          }\n        }\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n              seg1 = inter.getSegment(),\n              other = inter._intersection,\n              curve2 = other._curve,\n              seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n        var length = paths.length,\n          item;\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n        return item;\n      },\n      reorient: function (nonZero, clockwise) {\n        var children = this._children;\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n        return this;\n      },\n      getInteriorPoint: function () {\n        var bounds = this.getBounds(),\n          point = bounds.getCenter(true);\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n            y = point.y,\n            intercepts = [],\n            roots = [];\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n              o0 = v[1],\n              o1 = v[3],\n              o2 = v[5],\n              o3 = v[7];\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                  mo0 = mv[1],\n                  mo3 = mv[7];\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function (path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n        parts = [],\n        length = 0,\n        minSpan = 1 / (maxRecursion || 32),\n        segments = path._segments,\n        segment1 = segments[0],\n        segment2;\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n            tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n            dy = curve[7] - curve[1],\n            dist = Math.sqrt(dx * dx + dy * dy);\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function (offset) {\n      var parts = this.parts,\n        length = parts.length,\n        start,\n        i,\n        j = this.index;\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n      for (; i < length; i++) {\n        var part = parts[i];\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n            prevTime = prev && prev.index === part.index ? prev.time : 0,\n            prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function (ctx, from, to) {\n      var start = this._get(from),\n        end = this._get(to);\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function (path) {\n      var points = this.points = [],\n        segments = path._segments,\n        closed = path._closed;\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n      this.closed = closed;\n    },\n    fit: function (error) {\n      var points = this.points,\n        length = points.length,\n        segments = null;\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n      return segments;\n    },\n    fitCubic: function (segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n      if (last - first === 1) {\n        var pt1 = points[first],\n          pt2 = points[last],\n          dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n      var uPrime = this.chordLengthParameterize(first, last),\n        maxError = Math.max(error, error * error),\n        split,\n        parametersInOrder = true;\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function (segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function (first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n        abs = Math.abs,\n        points = this.points,\n        pt1 = points[first],\n        pt2 = points[last],\n        C = [[0, 0], [0, 0]],\n        X = [0, 0];\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n          t = 1 - u,\n          b = 3 * u * t,\n          b0 = t * t * t,\n          b1 = b * t,\n          b2 = b * u,\n          b3 = u * u * u,\n          a1 = tan1.normalize(b1),\n          a2 = tan2.normalize(b2),\n          tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n        alpha1,\n        alpha2;\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n          detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n          c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n      var segLength = pt2.getDistance(pt1),\n        eps = epsilon * segLength,\n        handle1,\n        handle2;\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function (first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n      return true;\n    },\n    findRoot: function (curve, point, u) {\n      var curve1 = [],\n        curve2 = [];\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n      var pt = this.evaluate(3, curve, u),\n        pt1 = this.evaluate(2, curve1, u),\n        pt2 = this.evaluate(1, curve2, u),\n        diff = pt.subtract(point),\n        df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function (degree, curve, t) {\n      var tmp = curve.slice();\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n      return tmp[0];\n    },\n    chordLengthParameterize: function (first, last) {\n      var u = [0];\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n      return u;\n    },\n    findMaxError: function (first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n        maxDist = 0;\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function (item) {\n      return this._content === item._content;\n    },\n    copyContent: function (source) {\n      this.setContent(source._content);\n    },\n    getContent: function () {\n      return this._content;\n    },\n    setContent: function (content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n      this._changed(521);\n    },\n    isEmpty: function () {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function () {\n      var point = this._matrix.getTranslation();\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      if (!this._content) return;\n      this._setStyles(ctx, param, viewMatrix);\n      var lines = this._lines,\n        style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        leading = style.getLeading(),\n        shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function (matrix, options) {\n      var style = this._style,\n        lines = this._lines,\n        numLines = lines.length,\n        justification = style.getJustification(),\n        leading = style.getLeading(),\n        width = this.getView().getTextWidth(style.getFontStyle(), lines),\n        x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n      namedColors = {\n        transparent: [0, 0, 0, 0]\n      },\n      colorCtx;\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n        type = 'rgb',\n        components;\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1, {\n                willReadFrequently: true\n              });\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n        components = color.slice();\n      }\n      return [type, components];\n    }\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function (h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n          f = h - i,\n          i = hsbIndices[i],\n          v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          achromatic = delta === 0,\n          h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n          l = (max + min) / 2,\n          s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function (h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n          t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n          t1 = 2 * l - t2,\n          c = [];\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n        return c;\n      },\n      'rgb-gray': function (r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function (g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function (g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function (g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function () {\n        return [];\n      },\n      'rgb-gradient': function () {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n          hasOverlap = /^(hue|saturation)$/.test(name),\n          parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n            var current = this._components[0];\n            value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n              readNull: true\n            });\n            if (current !== value) {\n              if (current) current._removeOwner(this);\n              if (value) value._addOwner(this);\n            }\n            return value;\n          } : function () {\n            return Point.read(arguments, 0, {\n              readNull: name === 'highlight',\n              clone: true\n            });\n          } : function (value) {\n            return value == null || isNaN(value) ? 0 : +value;\n          };\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n          this._components[index] = parser.call(this, value);\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n          reading = this.__read,\n          read = 0,\n          type,\n          components,\n          alpha,\n          values;\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n        var argType = arg != null && typeof arg;\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                parsers = componentParsers[type];\n              this._components = components = [];\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n              alpha = arg.alpha;\n            }\n          }\n          if (reading && type) read = 1;\n        }\n        this._type = type || 'rgb';\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function (options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function () {\n        this._canvasStyle = null;\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function (type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function (type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function () {\n        return this._type;\n      },\n      setType: function (type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function () {\n        var components = this._components.slice();\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function () {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function (alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n        this._changed();\n      },\n      hasAlpha: function () {\n        return this._alpha != null;\n      },\n      equals: function (color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function () {\n        var properties = this._properties,\n          parts = [],\n          isGradient = this._type === 'gradient',\n          f = Formatter.instance;\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function (hex) {\n        var components = this._convert('rgb'),\n          alpha = hex || this._alpha == null ? 1 : this._alpha;\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function (ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n          gradient = components[0],\n          stops = gradient._stops,\n          origin = components[1],\n          destination = components[2],\n          highlight = components[3],\n          inverse = matrix && matrix.inverted(),\n          canvasGradient;\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function (matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n            matrix._transformPoint(point, point, true);\n          }\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function () {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function (color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function (a, b) {\n        return a + b;\n      },\n      subtract: function (a, b) {\n        return a - b;\n      },\n      multiply: function (a, b) {\n        return a * b;\n      },\n      divide: function (a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n        var type = this._type,\n          components1 = this._components,\n          components2 = color._convert(type);\n        for (var i = 0, l = components1.length; i < l; i++) components2[i] = operator(components1[i], components2[i]);\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function () {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function (color) {\n      if (!this._owners) this._owners = [];\n      this._owners.push(color);\n    },\n    _removeOwner: function (color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n      if (index != -1) {\n        this._owners.splice(index, 1);\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function () {\n      var stops = [];\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function () {\n      return this._stops;\n    },\n    setStops: function (stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n      var _stops = this._stops;\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = undefined;\n      }\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n      for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = this;\n      this._changed();\n    },\n    getRadial: function () {\n      return this._radial;\n    },\n    setRadial: function (radial) {\n      this._radial = radial;\n      this._changed();\n    },\n    equals: function (gradient) {\n      if (gradient === this) return true;\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n          stops2 = gradient._stops,\n          length = stops1.length;\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n          return true;\n        }\n      }\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n        offset = arg1;\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function () {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function (options, dictionary) {\n      var color = this._color,\n        offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function () {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function () {\n      return this._offset;\n    },\n    setOffset: function (offset) {\n      this._offset = offset;\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function () {\n      return this._color;\n    },\n    setColor: function () {\n      Color._setOwner(this._color, null);\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n      this._changed();\n    },\n    equals: function (stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n        fillColor: null,\n        fillRule: 'nonzero',\n        strokeColor: null,\n        strokeWidth: 1,\n        strokeCap: 'butt',\n        strokeJoin: 'miter',\n        strokeScaling: true,\n        miterLimit: 10,\n        dashOffset: 0,\n        dashArray: [],\n        shadowColor: null,\n        shadowBlur: 0,\n        shadowOffset: new Point(),\n        selectedColor: null\n      },\n      groupDefaults = Base.set({}, itemDefaults, {\n        fontFamily: 'sans-serif',\n        fontWeight: 'normal',\n        fontSize: 12,\n        leading: null,\n        justification: 'left'\n      }),\n      textDefaults = Base.set({}, groupDefaults, {\n        fillColor: new Color()\n      }),\n      flags = {\n        strokeWidth: 193,\n        strokeCap: 193,\n        strokeJoin: 193,\n        strokeScaling: 201,\n        miterLimit: 193,\n        fontFamily: 9,\n        fontWeight: 9,\n        fontSize: 9,\n        font: 9,\n        leading: 9,\n        justification: 9\n      },\n      item = {\n        beans: true\n      },\n      fields = {\n        _class: 'Style',\n        beans: true,\n        initialize: function Style(style, _owner, _project) {\n          this._values = {};\n          this._owner = _owner;\n          this._project = _owner && _owner._project || _project || paper.project;\n          this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n          if (style) this.set(style);\n        }\n      };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n        isPoint = key === 'shadowOffset',\n        part = Base.capitalize(key),\n        flag = flags[key],\n        set = 'set' + part,\n        get = 'get' + part;\n      fields[set] = function (value) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) children[i]._style[set](value);\n        }\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n                old._canvasStyle = null;\n              }\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n          value;\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n          if (value === undefined) {\n            value = this._defaults[key];\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n        return value;\n      };\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n        set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function (style) {\n      var isStyle = style instanceof Style,\n        values = isStyle ? style._values : style;\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function (style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n          values2 = style2._values,\n          defaults2 = style2._defaults;\n        for (var key in values1) {\n          var value1 = values1[key],\n            value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n        return true;\n      }\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function () {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function () {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function () {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function () {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    getFontStyle: function () {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n        fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n        suffix = name[0].toUpperCase() + name.substring(1);\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n          key = prefix ? prefix + suffix : name;\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n          break;\n        }\n      }\n    }\n    return {\n      getStyles: function (el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n          view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function (el, viewport) {\n        var doc = el.ownerDocument,\n          body = doc.body,\n          html = doc.documentElement,\n          rect;\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n          y = rect.top - (html.clientTop || body.clientTop || 0);\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n        return new Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function (el) {\n        var doc = el.ownerDocument,\n          view = doc.defaultView,\n          html = doc.documentElement;\n        return new Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function (el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function (el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function (el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function (el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function (el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function (el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function (el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) handlePrefix(el, key, true, name[key]);\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) el.removeEventListener(parts[i], func, false);\n        }\n      }\n    },\n    getPoint: function (event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function (event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function (event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function (event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n      requested = false,\n      callbacks = [],\n      timer;\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n      for (var i = 0, l = functions.length; i < l; i++) functions[i]();\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n    return function (callback) {\n      callbacks.push(callback);\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n      var size;\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'paper-view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function () {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n        size = getCanvasSize();\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n            style = stats.style,\n            offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n      this._setElementSize(size.width, size.height);\n      this._viewSize = size;\n      View._views.push(this);\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        native: {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function () {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n      View._views.splice(View._views.indexOf(this), 1);\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function () {\n          this.play();\n        },\n        uninstall: function () {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function () {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function (autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function () {},\n    draw: function () {\n      this.update();\n    },\n    requestUpdate: function () {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function () {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function () {\n      this._animate = false;\n    },\n    _handleFrame: function () {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n        delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function (item, animate) {\n      var items = this._frameItems;\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function (event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function () {\n      this._project._changed(4097);\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function () {\n      return this._element;\n    },\n    getPixelRatio: function () {\n      return this._pixelRatio;\n    },\n    getResolution: function () {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function () {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function () {\n      var size = Size.read(arguments),\n        delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n      this._setElementSize(size.width, size.height);\n      this._viewSize.set(size);\n      this._changed();\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function (width, height) {\n      var element = this._element;\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function () {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function () {\n      return this.getBounds().getSize();\n    },\n    isVisible: function () {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function () {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function (size) {\n      var element = this._element,\n        pixels;\n      if (element) {\n        var parent = element.parentNode,\n          temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function () {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function () {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function () {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function () {\n      var scaling = this._decompose().scaling;\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function (zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function () {\n      return this._decompose().rotation;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function () {\n      var scaling = this._decompose().scaling;\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    transform: function (matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function () {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function (event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function (project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n      tempFocus,\n      dragging = false,\n      mouseDown = false;\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n    function updateFocus() {\n      var view = View._focused;\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n    var navigator = window.navigator,\n      mousedown,\n      mousemove,\n      mouseup;\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n    var viewEvents = {},\n      docEvents = {\n        mouseout: function (event) {\n          var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n          if (view && (!target || target.nodeName === 'HTML')) {\n            var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n            offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n            handleMouseMove(view, event, view.viewToProject(offset));\n          }\n        },\n        scroll: updateFocus\n      };\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n      if (!dragging) {\n        dragging = true;\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n      if (!mouseDown) {\n        var target = getView(event);\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n      if (view) handleMouseMove(view, event);\n    };\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n      prevented = false,\n      fallbacks = {\n        doubleclick: 'click',\n        mousedrag: 'mousemove'\n      },\n      wasInView = false,\n      overView,\n      downPoint,\n      lastPoint,\n      downItem,\n      overItem,\n      dragItem,\n      clickItem,\n      clickTime,\n      dblClick;\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n        mouseEvent;\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n      return stopped;\n    }\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function (type, event, point) {\n        var itemEvents = this._itemEvents,\n          hitItems = itemEvents.native[type],\n          nativeMove = type === 'mousemove',\n          tool = this._scope.tool,\n          view = this;\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n        var inView = this.getBounds().contains(point),\n          hit = hitItems && inView && view._project.hitTest(point, {\n            tolerance: 0,\n            fill: true,\n            stroke: true\n          }),\n          hitItem = hit && hit.item || null,\n          handle = false,\n          mouse = {};\n        mouse[type.substr(5)] = true;\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n          overItem = hitItem;\n        }\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n        wasInView = inView;\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n            if (!prevented && hitItem) {\n              var item = hitItem;\n              while (item && !item.responds('mousedrag')) item = item._parent;\n              if (item) dragItem = hitItem;\n            }\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n            downItem = dragItem = null;\n          }\n          wasInView = false;\n          handle = true;\n        }\n        lastPoint = point;\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function (type, event, key, character) {\n        var scope = this._scope,\n          tool = scope.tool,\n          keyEvent;\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function (type, sign) {\n        var itemEvents = this._itemEvents,\n          native = itemEvents.native,\n          virtual = itemEvents.virtual;\n        for (var key in itemEventsMap) {\n          native[key] = (native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function () {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n          backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n      if (pixelRatio !== 1) {\n        var element = this._element,\n          ctx = this._context;\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function () {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n        pixels;\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n          prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      var ctx = this._context,\n        prevFont = ctx.font,\n        width = 0;\n      ctx.font = font;\n      for (var i = 0, l = lines.length; i < l; i++) width = Math.max(width, ctx.measureText(lines[i]).width);\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function () {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n        ctx = this._context,\n        size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function () {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function () {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function () {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function () {\n      return this.event.timeStamp;\n    },\n    getModifiers: function () {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n        '\\t': 'tab',\n        ' ': 'space',\n        '\\b': 'backspace',\n        '\\x7f': 'delete',\n        'Spacebar': 'space',\n        'Del': 'delete',\n        'Win': 'meta',\n        'Esc': 'escape'\n      },\n      charLookup = {\n        'tab': '\\t',\n        'space': ' ',\n        'enter': '\\r'\n      },\n      keyMap = {},\n      charMap = {},\n      metaFixMap,\n      downKey,\n      modifiers = new Base({\n        shift: false,\n        control: false,\n        alt: false,\n        meta: false,\n        capsLock: false,\n        space: false\n      }).inject({\n        option: {\n          get: function () {\n            return this.alt;\n          }\n        },\n        command: {\n          get: function () {\n            var agent = paper && paper.agent;\n            return agent && agent.mac ? this.meta : this.control;\n          }\n        }\n      });\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n        view = View._focused,\n        name;\n      keyMap[key] = down;\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n    DomEvent.add(document, {\n      keydown: function (event) {\n        var key = getKey(event),\n          agent = paper && paper.agent;\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function (event) {\n        if (downKey) {\n          var key = getKey(event),\n            code = event.charCode,\n            character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function (event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function (event) {\n        for (var key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function (key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function (point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function () {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function (point) {\n      this._point = point;\n    },\n    getLastPoint: function () {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function (lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function () {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function (downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function () {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n      return this._middlePoint;\n    },\n    setMiddlePoint: function (middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function () {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function (delta) {\n      this._delta = delta;\n    },\n    getCount: function () {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function (count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function () {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n        if (result) {\n          var item = result.item,\n            parent = item._parent;\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n          this._item = item;\n        }\n      }\n      return this._item;\n    },\n    setItem: function (item) {\n      this._item = item;\n    },\n    toString: function () {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function () {\n      return this._minDistance;\n    },\n    setMinDistance: function (minDistance) {\n      this._minDistance = minDistance;\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function () {\n      return this._maxDistance;\n    },\n    setMaxDistance: function (maxDistance) {\n      this._maxDistance = maxDistance;\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function () {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function (distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function (type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n        responds = this.responds(type),\n        minDistance = this.minDistance,\n        maxDistance = this.maxDistance,\n        called = false,\n        tool = this;\n      function update(minDistance, maxDistance) {\n        var pt = point,\n          toolPoint = move ? tool._point : tool._downPoint || pt;\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n              distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n          tool._moveCount++;\n        }\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n        return true;\n      }\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) emit();\n      }\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: new Base({\n        linear: function (t) {\n          return t;\n        },\n        easeInQuad: function (t) {\n          return t * t;\n        },\n        easeOutQuad: function (t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function (t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function (t) {\n          return t * t * t;\n        },\n        easeOutCubic: function (t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function (t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function (t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function (t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function (t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function (t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function (t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function (t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      })\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function (then) {\n      this._then = then;\n      return this;\n    },\n    start: function () {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function () {\n      this.running = false;\n      return this;\n    },\n    update: function (progress) {\n      if (this.running) {\n        if (progress >= 1) {\n          progress = 1;\n          this.running = false;\n        }\n        var factor = this.easing(progress),\n          keys = this._keys,\n          getValue = function (value) {\n            return typeof value === 'function' ? value(factor, progress) : value;\n          };\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n            from = getValue(this._from[key]),\n            to = getValue(this._to[key]),\n            value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n          this._setProperty(this._parsedKeys[key], value);\n        }\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n      }\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function (time) {\n      var startTime = this._startTime,\n        progress = startTime ? (time - startTime) / this.duration : 0;\n      if (!startTime) {\n        this._startTime = time;\n      }\n      this.update(progress);\n    },\n    _getState: function (state) {\n      var keys = this._keys,\n        result = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = this._parsedKeys[key],\n          current = this._getProperty(path),\n          value;\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n          this._setProperty(path, resolved);\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n        result[key] = value;\n      }\n      return result;\n    },\n    _resolveValue: function (current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n      return value;\n    },\n    _calculate: function (left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function (keys) {\n      var parsed = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n      return parsed;\n    },\n    _getProperty: function (path, offset) {\n      var obj = this.object;\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n      return obj;\n    },\n    _setProperty: function (path, value) {\n      var dest = this._getProperty(path, 1);\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function (options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n      xhr.onload = function () {\n        var status = xhr.status;\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n      xhr.onerror = function () {\n        var status = xhr.status,\n          message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = Base.exports.CanvasProvider = {\n    canvases: [],\n    getCanvas: function (width, height, options) {\n      if (!window) return null;\n      var canvas,\n        clear = true;\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n      var ctx = canvas.getContext('2d', options || {});\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n      ctx.save();\n      return canvas;\n    },\n    getContext: function (width, height, options) {\n      var canvas = this.getCanvas(width, height, options);\n      return canvas ? canvas.getContext('2d', options || {}) : null;\n    },\n    release: function (obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      sr,\n      sg,\n      sb,\n      sa,\n      br,\n      bg,\n      bb,\n      ba,\n      dr,\n      dg,\n      db;\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n        mn = min(dr, dg, db),\n        mx = max(dr, dg, db);\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n      if (mx > 255) {\n        var ln = 255 - l,\n          mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n        mx = max(r, g, b),\n        mn = min(r, g, b),\n        md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n    var modes = {\n      multiply: function () {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function () {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function () {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function () {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function () {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function () {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function () {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function () {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function () {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function () {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function () {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function () {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function () {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function () {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function () {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function () {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function () {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function () {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function () {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1, {\n      willReadFrequently: true\n    });\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n          ok = false;\n        ctx.save();\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n        normal = mode === 'normal';\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n          dst = dstData.data,\n          src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n            a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n      xmlns = 'http://www.w3.org/2000/xmlns',\n      xlink = 'http://www.w3.org/1999/xlink',\n      attributeNamespace = {\n        href: xlink,\n        xlink: xmlns,\n        xmlns: xmlns + '/',\n        'xmlns:xlink': xmlns + '/'\n      };\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n        value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n          namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n      return node;\n    }\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      true: 'none',\n      false: 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n      lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n        trans = matrix.getTranslation();\n      if (coordinates) {\n        var point;\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n        if (decomposed) {\n          var parts = [],\n            angle = decomposed.rotation,\n            scale = decomposed.scaling,\n            skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n      return attrs;\n    }\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n        children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var childNode = exportSVG(child, options);\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n      return node;\n    }\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        size = item.getSize(),\n        image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n      var segments = item._segments,\n        length = segments.length,\n        type,\n        attrs = getTransform(item._matrix);\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n            end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportShape(item) {\n      var type = item._type,\n        radius = item._radius,\n        attrs = getTransform(item._matrix, true, type !== 'rectangle');\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n          width = size.width,\n          height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        definition = item._definition,\n        node = getDefinition(definition, 'symbol'),\n        definitionItem = definition._item,\n        bounds = definitionItem.getStrokeBounds();\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n          radial = gradient._radial,\n          origin = color.getOrigin(),\n          destination = color.getDestination(),\n          attrs;\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            stopColor = stop._color,\n            alpha = stopColor.getAlpha(),\n            offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n        setDefinition(color, gradientNode, 'color');\n      }\n      return 'url(#' + gradientNode.id + ')';\n    }\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n        parent = !isRoot && item.getParent(),\n        style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n          type = entry.type,\n          value = item[get]();\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n    var definitions;\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n    function exportDefinitions(node, options) {\n      var svg = node,\n        defs = null;\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n          defs.appendChild(definitions.svgs[i]);\n        }\n        definitions = null;\n      }\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n    function exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n        node = exporter && exporter(item, options);\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n      return node && applyStyle(item, node, isRoot);\n    }\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n    Item.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        return exportDefinitions(exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        var children = this._children,\n          view = this.getView(),\n          bounds = Base.pick(options.bounds, 'view'),\n          mx = options.matrix || bounds === 'view' && view._matrix,\n          matrix = mx && Matrix.read([mx]),\n          rect = bounds === 'view' ? new Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n            stroke: true\n          }).rect : Rectangle.read([bounds], 0, {\n            readNull: true\n          }),\n          attrs = {\n            version: '1.1',\n            xmlns: SvgElement.svg,\n            'xmlns:xlink': SvgElement.xlink\n          };\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n        var node = SvgElement.create('svg', attrs, formatter),\n          parent = node;\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(exportSVG(children[i], options, true));\n        }\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n      rootSize;\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n        res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n        isClip = type === 'clippath',\n        isDefs = type === 'defs',\n        item = new Group(),\n        project = item._project,\n        currentStyle = project._currentStyle,\n        children = [];\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n          child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n      return item;\n    }\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n        points = [];\n      for (var i = 0, l = coords.length; i < l; i += 2) points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n        radial = type === 'radialgradient',\n        gradient;\n      if (id) {\n        gradient = definitions[id].getGradient();\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n          stops = [];\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n        gradient = new Gradient(stops, radial);\n      }\n      var origin,\n        destination,\n        highlight,\n        scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n    var importers = {\n      '#document': function (node, type, options, isRoot) {\n        var nodes = node.childNodes;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function (node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function (node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function (node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n          definition = definitions[id],\n          point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function (node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function (node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function (node) {\n        return new Shape.Rectangle(new Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function (node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function (node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      switch: importGroup\n    };\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n          matrix = new Matrix();\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n            command = parts[0],\n            v = parts[1].split(/[\\s,]+/g);\n          for (var j = 0, m = v.length; j < m; j++) v[j] = parseFloat(v[j]);\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n            case 'scale':\n              matrix.scale(v);\n              break;\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n        item.transform(matrix);\n      }\n    }\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n        color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function (item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function (item, value) {\n        var clip = getDefinition(value);\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function (item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function (item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function (item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function (item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function (item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function (item, value, name, node, styles) {\n        var rect = new Rectangle(convertValue(value, 'array')),\n          size = getSize(node, null, null, true),\n          group,\n          matrix;\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n            matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n        value = attr && attr.value;\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n        styles = {\n          node: DomElement.getStyles(node) || {},\n          parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n        };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n        name = match && match[1],\n        res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n      return res;\n    }\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n        isElement = type !== '#document',\n        body = document.body,\n        container,\n        parent,\n        next;\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n      var settings = paper.settings,\n        applyMatrix = settings.applyMatrix,\n        insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n        item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n          data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n        if (data) item._data = JSON.parse(data);\n      }\n      if (container) {\n        body.removeChild(container);\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n      return item;\n    }\n    function importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n        item = null;\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg.trim(), 'image/svg+xml');\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n          paper = scope;\n          item = importNode(node, options, true);\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n      function onError(message, status) {\n        var onError = options.onError;\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n      if (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n        var node = document.getElementById(source);\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n      return item;\n    }\n    Item.inject({\n      importSVG: function (node, options) {\n        return importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function (node, options) {\n        this.activate();\n        return importSVG(node, options, this);\n      }\n    });\n  }();\n  Base.exports.PaperScript = function () {\n    var global = this,\n      acorn = global.acorn;\n    if (!acorn && typeof require !== 'undefined') {\n      try {\n        acorn = require('acorn');\n      } catch (e) {}\n    }\n    if (!acorn) {\n      var exports, module;\n      acorn = exports = module = {};\n      (function (root, mod) {\n        if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n        if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n        mod(root.acorn || (root.acorn = {}));\n      })(this, function (exports) {\n        \"use strict\";\n\n        exports.version = \"0.5.0\";\n        var options, input, inputLen, sourceFile;\n        exports.parse = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          return parseTopLevel(options.program);\n        };\n        var defaultOptions = exports.defaultOptions = {\n          ecmaVersion: 5,\n          strictSemicolons: false,\n          allowTrailingCommas: true,\n          forbidReserved: false,\n          allowReturnOutsideFunction: false,\n          locations: false,\n          onComment: null,\n          ranges: false,\n          program: null,\n          sourceFile: null,\n          directSourceFile: null\n        };\n        function setOptions(opts) {\n          options = opts || {};\n          for (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt)) options[opt] = defaultOptions[opt];\n          sourceFile = options.sourceFile || null;\n        }\n        var getLineInfo = exports.getLineInfo = function (input, offset) {\n          for (var line = 1, cur = 0;;) {\n            lineBreak.lastIndex = cur;\n            var match = lineBreak.exec(input);\n            if (match && match.index < offset) {\n              ++line;\n              cur = match.index + match[0].length;\n            } else break;\n          }\n          return {\n            line: line,\n            column: offset - cur\n          };\n        };\n        exports.tokenize = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          var t = {};\n          function getToken(forceRegexp) {\n            lastEnd = tokEnd;\n            readToken(forceRegexp);\n            t.start = tokStart;\n            t.end = tokEnd;\n            t.startLoc = tokStartLoc;\n            t.endLoc = tokEndLoc;\n            t.type = tokType;\n            t.value = tokVal;\n            return t;\n          }\n          getToken.jumpTo = function (pos, reAllowed) {\n            tokPos = pos;\n            if (options.locations) {\n              tokCurLine = 1;\n              tokLineStart = lineBreak.lastIndex = 0;\n              var match;\n              while ((match = lineBreak.exec(input)) && match.index < pos) {\n                ++tokCurLine;\n                tokLineStart = match.index + match[0].length;\n              }\n            }\n            tokRegexpAllowed = reAllowed;\n            skipSpace();\n          };\n          return getToken;\n        };\n        var tokPos;\n        var tokStart, tokEnd;\n        var tokStartLoc, tokEndLoc;\n        var tokType, tokVal;\n        var tokRegexpAllowed;\n        var tokCurLine, tokLineStart;\n        var lastStart, lastEnd, lastEndLoc;\n        var inFunction, labels, strict;\n        function raise(pos, message) {\n          var loc = getLineInfo(input, pos);\n          message += \" (\" + loc.line + \":\" + loc.column + \")\";\n          var err = new SyntaxError(message);\n          err.pos = pos;\n          err.loc = loc;\n          err.raisedAt = tokPos;\n          throw err;\n        }\n        var empty = [];\n        var _num = {\n            type: \"num\"\n          },\n          _regexp = {\n            type: \"regexp\"\n          },\n          _string = {\n            type: \"string\"\n          };\n        var _name = {\n            type: \"name\"\n          },\n          _eof = {\n            type: \"eof\"\n          };\n        var _break = {\n            keyword: \"break\"\n          },\n          _case = {\n            keyword: \"case\",\n            beforeExpr: true\n          },\n          _catch = {\n            keyword: \"catch\"\n          };\n        var _continue = {\n            keyword: \"continue\"\n          },\n          _debugger = {\n            keyword: \"debugger\"\n          },\n          _default = {\n            keyword: \"default\"\n          };\n        var _do = {\n            keyword: \"do\",\n            isLoop: true\n          },\n          _else = {\n            keyword: \"else\",\n            beforeExpr: true\n          };\n        var _finally = {\n            keyword: \"finally\"\n          },\n          _for = {\n            keyword: \"for\",\n            isLoop: true\n          },\n          _function = {\n            keyword: \"function\"\n          };\n        var _if = {\n            keyword: \"if\"\n          },\n          _return = {\n            keyword: \"return\",\n            beforeExpr: true\n          },\n          _switch = {\n            keyword: \"switch\"\n          };\n        var _throw = {\n            keyword: \"throw\",\n            beforeExpr: true\n          },\n          _try = {\n            keyword: \"try\"\n          },\n          _var = {\n            keyword: \"var\"\n          };\n        var _while = {\n            keyword: \"while\",\n            isLoop: true\n          },\n          _with = {\n            keyword: \"with\"\n          },\n          _new = {\n            keyword: \"new\",\n            beforeExpr: true\n          };\n        var _this = {\n          keyword: \"this\"\n        };\n        var _null = {\n            keyword: \"null\",\n            atomValue: null\n          },\n          _true = {\n            keyword: \"true\",\n            atomValue: true\n          };\n        var _false = {\n          keyword: \"false\",\n          atomValue: false\n        };\n        var _in = {\n          keyword: \"in\",\n          binop: 7,\n          beforeExpr: true\n        };\n        var keywordTypes = {\n          \"break\": _break,\n          \"case\": _case,\n          \"catch\": _catch,\n          \"continue\": _continue,\n          \"debugger\": _debugger,\n          \"default\": _default,\n          \"do\": _do,\n          \"else\": _else,\n          \"finally\": _finally,\n          \"for\": _for,\n          \"function\": _function,\n          \"if\": _if,\n          \"return\": _return,\n          \"switch\": _switch,\n          \"throw\": _throw,\n          \"try\": _try,\n          \"var\": _var,\n          \"while\": _while,\n          \"with\": _with,\n          \"null\": _null,\n          \"true\": _true,\n          \"false\": _false,\n          \"new\": _new,\n          \"in\": _in,\n          \"instanceof\": {\n            keyword: \"instanceof\",\n            binop: 7,\n            beforeExpr: true\n          },\n          \"this\": _this,\n          \"typeof\": {\n            keyword: \"typeof\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"void\": {\n            keyword: \"void\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"delete\": {\n            keyword: \"delete\",\n            prefix: true,\n            beforeExpr: true\n          }\n        };\n        var _bracketL = {\n            type: \"[\",\n            beforeExpr: true\n          },\n          _bracketR = {\n            type: \"]\"\n          },\n          _braceL = {\n            type: \"{\",\n            beforeExpr: true\n          };\n        var _braceR = {\n            type: \"}\"\n          },\n          _parenL = {\n            type: \"(\",\n            beforeExpr: true\n          },\n          _parenR = {\n            type: \")\"\n          };\n        var _comma = {\n            type: \",\",\n            beforeExpr: true\n          },\n          _semi = {\n            type: \";\",\n            beforeExpr: true\n          };\n        var _colon = {\n            type: \":\",\n            beforeExpr: true\n          },\n          _dot = {\n            type: \".\"\n          },\n          _question = {\n            type: \"?\",\n            beforeExpr: true\n          };\n        var _slash = {\n            binop: 10,\n            beforeExpr: true\n          },\n          _eq = {\n            isAssign: true,\n            beforeExpr: true\n          };\n        var _assign = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _incDec = {\n            postfix: true,\n            prefix: true,\n            isUpdate: true\n          },\n          _prefix = {\n            prefix: true,\n            beforeExpr: true\n          };\n        var _logicalOR = {\n          binop: 1,\n          beforeExpr: true\n        };\n        var _logicalAND = {\n          binop: 2,\n          beforeExpr: true\n        };\n        var _bitwiseOR = {\n          binop: 3,\n          beforeExpr: true\n        };\n        var _bitwiseXOR = {\n          binop: 4,\n          beforeExpr: true\n        };\n        var _bitwiseAND = {\n          binop: 5,\n          beforeExpr: true\n        };\n        var _equality = {\n          binop: 6,\n          beforeExpr: true\n        };\n        var _relational = {\n          binop: 7,\n          beforeExpr: true\n        };\n        var _bitShift = {\n          binop: 8,\n          beforeExpr: true\n        };\n        var _plusMin = {\n          binop: 9,\n          prefix: true,\n          beforeExpr: true\n        };\n        var _multiplyModulo = {\n          binop: 10,\n          beforeExpr: true\n        };\n        exports.tokTypes = {\n          bracketL: _bracketL,\n          bracketR: _bracketR,\n          braceL: _braceL,\n          braceR: _braceR,\n          parenL: _parenL,\n          parenR: _parenR,\n          comma: _comma,\n          semi: _semi,\n          colon: _colon,\n          dot: _dot,\n          question: _question,\n          slash: _slash,\n          eq: _eq,\n          name: _name,\n          eof: _eof,\n          num: _num,\n          regexp: _regexp,\n          string: _string\n        };\n        for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n        function makePredicate(words) {\n          words = words.split(\" \");\n          var f = \"\",\n            cats = [];\n          out: for (var i = 0; i < words.length; ++i) {\n            for (var j = 0; j < cats.length; ++j) if (cats[j][0].length == words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n            }\n            cats.push([words[i]]);\n          }\n          function compareTo(arr) {\n            if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n            f += \"switch(str){\";\n            for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n            f += \"return true}return false;\";\n          }\n          if (cats.length > 3) {\n            cats.sort(function (a, b) {\n              return b.length - a.length;\n            });\n            f += \"switch(str.length){\";\n            for (var i = 0; i < cats.length; ++i) {\n              var cat = cats[i];\n              f += \"case \" + cat[0].length + \":\";\n              compareTo(cat);\n            }\n            f += \"}\";\n          } else {\n            compareTo(words);\n          }\n          return new Function(\"str\", f);\n        }\n        var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n        var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n        var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n        var isStrictBadIdWord = makePredicate(\"eval arguments\");\n        var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n        var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n        var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n        var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n        var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n        var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n        var newline = /[\\n\\r\\u2028\\u2029]/;\n        var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n        var isIdentifierStart = exports.isIdentifierStart = function (code) {\n          if (code < 65) return code === 36;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n        };\n        var isIdentifierChar = exports.isIdentifierChar = function (code) {\n          if (code < 48) return code === 36;\n          if (code < 58) return true;\n          if (code < 65) return false;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n        };\n        function line_loc_t() {\n          this.line = tokCurLine;\n          this.column = tokPos - tokLineStart;\n        }\n        function initTokenState() {\n          tokCurLine = 1;\n          tokPos = tokLineStart = 0;\n          tokRegexpAllowed = true;\n          skipSpace();\n        }\n        function finishToken(type, val) {\n          tokEnd = tokPos;\n          if (options.locations) tokEndLoc = new line_loc_t();\n          tokType = type;\n          skipSpace();\n          tokVal = val;\n          tokRegexpAllowed = type.beforeExpr;\n        }\n        function skipBlockComment() {\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var start = tokPos,\n            end = input.indexOf(\"*/\", tokPos += 2);\n          if (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n          tokPos = end + 2;\n          if (options.locations) {\n            lineBreak.lastIndex = start;\n            var match;\n            while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n              ++tokCurLine;\n              tokLineStart = match.index + match[0].length;\n            }\n          }\n          if (options.onComment) options.onComment(true, input.slice(start + 2, end), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n        function skipLineComment() {\n          var start = tokPos;\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var ch = input.charCodeAt(tokPos += 2);\n          while (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n            ++tokPos;\n            ch = input.charCodeAt(tokPos);\n          }\n          if (options.onComment) options.onComment(false, input.slice(start + 2, tokPos), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n        function skipSpace() {\n          while (tokPos < inputLen) {\n            var ch = input.charCodeAt(tokPos);\n            if (ch === 32) {\n              ++tokPos;\n            } else if (ch === 13) {\n              ++tokPos;\n              var next = input.charCodeAt(tokPos);\n              if (next === 10) {\n                ++tokPos;\n              }\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch === 10 || ch === 8232 || ch === 8233) {\n              ++tokPos;\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch > 8 && ch < 14) {\n              ++tokPos;\n            } else if (ch === 47) {\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 42) {\n                skipBlockComment();\n              } else if (next === 47) {\n                skipLineComment();\n              } else break;\n            } else if (ch === 160) {\n              ++tokPos;\n            } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n              ++tokPos;\n            } else {\n              break;\n            }\n          }\n        }\n        function readToken_dot() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next >= 48 && next <= 57) return readNumber(true);\n          ++tokPos;\n          return finishToken(_dot);\n        }\n        function readToken_slash() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (tokRegexpAllowed) {\n            ++tokPos;\n            return readRegexp();\n          }\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_slash, 1);\n        }\n        function readToken_mult_modulo() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_multiplyModulo, 1);\n        }\n        function readToken_pipe_amp(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n        }\n        function readToken_caret() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_bitwiseXOR, 1);\n        }\n        function readToken_plus_min(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) {\n            if (next == 45 && input.charCodeAt(tokPos + 2) == 62 && newline.test(input.slice(lastEnd, tokPos))) {\n              tokPos += 3;\n              skipLineComment();\n              skipSpace();\n              return readToken();\n            }\n            return finishOp(_incDec, 2);\n          }\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_plusMin, 1);\n        }\n        function readToken_lt_gt(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          var size = 1;\n          if (next === code) {\n            size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n            if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n            return finishOp(_bitShift, size);\n          }\n          if (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 && input.charCodeAt(tokPos + 3) == 45) {\n            tokPos += 4;\n            skipLineComment();\n            skipSpace();\n            return readToken();\n          }\n          if (next === 61) size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n          return finishOp(_relational, size);\n        }\n        function readToken_eq_excl(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n          return finishOp(code === 61 ? _eq : _prefix, 1);\n        }\n        function getTokenFromCode(code) {\n          switch (code) {\n            case 46:\n              return readToken_dot();\n            case 40:\n              ++tokPos;\n              return finishToken(_parenL);\n            case 41:\n              ++tokPos;\n              return finishToken(_parenR);\n            case 59:\n              ++tokPos;\n              return finishToken(_semi);\n            case 44:\n              ++tokPos;\n              return finishToken(_comma);\n            case 91:\n              ++tokPos;\n              return finishToken(_bracketL);\n            case 93:\n              ++tokPos;\n              return finishToken(_bracketR);\n            case 123:\n              ++tokPos;\n              return finishToken(_braceL);\n            case 125:\n              ++tokPos;\n              return finishToken(_braceR);\n            case 58:\n              ++tokPos;\n              return finishToken(_colon);\n            case 63:\n              ++tokPos;\n              return finishToken(_question);\n            case 48:\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 120 || next === 88) return readHexNumber();\n            case 49:\n            case 50:\n            case 51:\n            case 52:\n            case 53:\n            case 54:\n            case 55:\n            case 56:\n            case 57:\n              return readNumber(false);\n            case 34:\n            case 39:\n              return readString(code);\n            case 47:\n              return readToken_slash(code);\n            case 37:\n            case 42:\n              return readToken_mult_modulo();\n            case 124:\n            case 38:\n              return readToken_pipe_amp(code);\n            case 94:\n              return readToken_caret();\n            case 43:\n            case 45:\n              return readToken_plus_min(code);\n            case 60:\n            case 62:\n              return readToken_lt_gt(code);\n            case 61:\n            case 33:\n              return readToken_eq_excl(code);\n            case 126:\n              return finishOp(_prefix, 1);\n          }\n          return false;\n        }\n        function readToken(forceRegexp) {\n          if (!forceRegexp) tokStart = tokPos;else tokPos = tokStart + 1;\n          if (options.locations) tokStartLoc = new line_loc_t();\n          if (forceRegexp) return readRegexp();\n          if (tokPos >= inputLen) return finishToken(_eof);\n          var code = input.charCodeAt(tokPos);\n          if (isIdentifierStart(code) || code === 92) return readWord();\n          var tok = getTokenFromCode(code);\n          if (tok === false) {\n            var ch = String.fromCharCode(code);\n            if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n            raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n          }\n          return tok;\n        }\n        function finishOp(type, size) {\n          var str = input.slice(tokPos, tokPos + size);\n          tokPos += size;\n          finishToken(type, str);\n        }\n        function readRegexp() {\n          var content = \"\",\n            escaped,\n            inClass,\n            start = tokPos;\n          for (;;) {\n            if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n            var ch = input.charAt(tokPos);\n            if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n            if (!escaped) {\n              if (ch === \"[\") inClass = true;else if (ch === \"]\" && inClass) inClass = false;else if (ch === \"/\" && !inClass) break;\n              escaped = ch === \"\\\\\";\n            } else escaped = false;\n            ++tokPos;\n          }\n          var content = input.slice(start, tokPos);\n          ++tokPos;\n          var mods = readWord1();\n          if (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n          try {\n            var value = new RegExp(content, mods);\n          } catch (e) {\n            if (e instanceof SyntaxError) raise(start, e.message);\n            raise(e);\n          }\n          return finishToken(_regexp, value);\n        }\n        function readInt(radix, len) {\n          var start = tokPos,\n            total = 0;\n          for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n            var code = input.charCodeAt(tokPos),\n              val;\n            if (code >= 97) val = code - 97 + 10;else if (code >= 65) val = code - 65 + 10;else if (code >= 48 && code <= 57) val = code - 48;else val = Infinity;\n            if (val >= radix) break;\n            ++tokPos;\n            total = total * radix + val;\n          }\n          if (tokPos === start || len != null && tokPos - start !== len) return null;\n          return total;\n        }\n        function readHexNumber() {\n          tokPos += 2;\n          var val = readInt(16);\n          if (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          return finishToken(_num, val);\n        }\n        function readNumber(startsWithDot) {\n          var start = tokPos,\n            isFloat = false,\n            octal = input.charCodeAt(tokPos) === 48;\n          if (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n          if (input.charCodeAt(tokPos) === 46) {\n            ++tokPos;\n            readInt(10);\n            isFloat = true;\n          }\n          var next = input.charCodeAt(tokPos);\n          if (next === 69 || next === 101) {\n            next = input.charCodeAt(++tokPos);\n            if (next === 43 || next === 45) ++tokPos;\n            if (readInt(10) === null) raise(start, \"Invalid number\");\n            isFloat = true;\n          }\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          var str = input.slice(start, tokPos),\n            val;\n          if (isFloat) val = parseFloat(str);else if (!octal || str.length === 1) val = parseInt(str, 10);else if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");else val = parseInt(str, 8);\n          return finishToken(_num, val);\n        }\n        function readString(quote) {\n          tokPos++;\n          var out = \"\";\n          for (;;) {\n            if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n            var ch = input.charCodeAt(tokPos);\n            if (ch === quote) {\n              ++tokPos;\n              return finishToken(_string, out);\n            }\n            if (ch === 92) {\n              ch = input.charCodeAt(++tokPos);\n              var octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n              if (octal) octal = octal[0];\n              while (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n              if (octal === \"0\") octal = null;\n              ++tokPos;\n              if (octal) {\n                if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n                out += String.fromCharCode(parseInt(octal, 8));\n                tokPos += octal.length - 1;\n              } else {\n                switch (ch) {\n                  case 110:\n                    out += \"\\n\";\n                    break;\n                  case 114:\n                    out += \"\\r\";\n                    break;\n                  case 120:\n                    out += String.fromCharCode(readHexChar(2));\n                    break;\n                  case 117:\n                    out += String.fromCharCode(readHexChar(4));\n                    break;\n                  case 85:\n                    out += String.fromCharCode(readHexChar(8));\n                    break;\n                  case 116:\n                    out += \"\\t\";\n                    break;\n                  case 98:\n                    out += \"\\b\";\n                    break;\n                  case 118:\n                    out += \"\\u000b\";\n                    break;\n                  case 102:\n                    out += \"\\f\";\n                    break;\n                  case 48:\n                    out += \"\\0\";\n                    break;\n                  case 13:\n                    if (input.charCodeAt(tokPos) === 10) ++tokPos;\n                  case 10:\n                    if (options.locations) {\n                      tokLineStart = tokPos;\n                      ++tokCurLine;\n                    }\n                    break;\n                  default:\n                    out += String.fromCharCode(ch);\n                    break;\n                }\n              }\n            } else {\n              if (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n              out += String.fromCharCode(ch);\n              ++tokPos;\n            }\n          }\n        }\n        function readHexChar(len) {\n          var n = readInt(16, len);\n          if (n === null) raise(tokStart, \"Bad character escape sequence\");\n          return n;\n        }\n        var containsEsc;\n        function readWord1() {\n          containsEsc = false;\n          var word,\n            first = true,\n            start = tokPos;\n          for (;;) {\n            var ch = input.charCodeAt(tokPos);\n            if (isIdentifierChar(ch)) {\n              if (containsEsc) word += input.charAt(tokPos);\n              ++tokPos;\n            } else if (ch === 92) {\n              if (!containsEsc) word = input.slice(start, tokPos);\n              containsEsc = true;\n              if (input.charCodeAt(++tokPos) != 117) raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n              ++tokPos;\n              var esc = readHexChar(4);\n              var escStr = String.fromCharCode(esc);\n              if (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n              if (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc))) raise(tokPos - 4, \"Invalid Unicode escape\");\n              word += escStr;\n            } else {\n              break;\n            }\n            first = false;\n          }\n          return containsEsc ? word : input.slice(start, tokPos);\n        }\n        function readWord() {\n          var word = readWord1();\n          var type = _name;\n          if (!containsEsc && isKeyword(word)) type = keywordTypes[word];\n          return finishToken(type, word);\n        }\n        function next() {\n          lastStart = tokStart;\n          lastEnd = tokEnd;\n          lastEndLoc = tokEndLoc;\n          readToken();\n        }\n        function setStrict(strct) {\n          strict = strct;\n          tokPos = tokStart;\n          if (options.locations) {\n            while (tokPos < tokLineStart) {\n              tokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n              --tokCurLine;\n            }\n          }\n          skipSpace();\n          readToken();\n        }\n        function node_t() {\n          this.type = null;\n          this.start = tokStart;\n          this.end = null;\n        }\n        function node_loc_t() {\n          this.start = tokStartLoc;\n          this.end = null;\n          if (sourceFile !== null) this.source = sourceFile;\n        }\n        function startNode() {\n          var node = new node_t();\n          if (options.locations) node.loc = new node_loc_t();\n          if (options.directSourceFile) node.sourceFile = options.directSourceFile;\n          if (options.ranges) node.range = [tokStart, 0];\n          return node;\n        }\n        function startNodeFrom(other) {\n          var node = new node_t();\n          node.start = other.start;\n          if (options.locations) {\n            node.loc = new node_loc_t();\n            node.loc.start = other.loc.start;\n          }\n          if (options.ranges) node.range = [other.range[0], 0];\n          return node;\n        }\n        function finishNode(node, type) {\n          node.type = type;\n          node.end = lastEnd;\n          if (options.locations) node.loc.end = lastEndLoc;\n          if (options.ranges) node.range[1] = lastEnd;\n          return node;\n        }\n        function isUseStrict(stmt) {\n          return options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" && stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n        }\n        function eat(type) {\n          if (tokType === type) {\n            next();\n            return true;\n          }\n        }\n        function canInsertSemicolon() {\n          return !options.strictSemicolons && (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n        }\n        function semicolon() {\n          if (!eat(_semi) && !canInsertSemicolon()) unexpected();\n        }\n        function expect(type) {\n          if (tokType === type) next();else unexpected();\n        }\n        function unexpected() {\n          raise(tokStart, \"Unexpected token\");\n        }\n        function checkLVal(expr) {\n          if (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\") raise(expr.start, \"Assigning to rvalue\");\n          if (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name)) raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n        }\n        function parseTopLevel(program) {\n          lastStart = lastEnd = tokPos;\n          if (options.locations) lastEndLoc = new line_loc_t();\n          inFunction = strict = null;\n          labels = [];\n          readToken();\n          var node = program || startNode(),\n            first = true;\n          if (!program) node.body = [];\n          while (tokType !== _eof) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && isUseStrict(stmt)) setStrict(true);\n            first = false;\n          }\n          return finishNode(node, \"Program\");\n        }\n        var loopLabel = {\n            kind: \"loop\"\n          },\n          switchLabel = {\n            kind: \"switch\"\n          };\n        function parseStatement() {\n          if (tokType === _slash || tokType === _assign && tokVal == \"/=\") readToken(true);\n          var starttype = tokType,\n            node = startNode();\n          switch (starttype) {\n            case _break:\n            case _continue:\n              next();\n              var isBreak = starttype === _break;\n              if (eat(_semi) || canInsertSemicolon()) node.label = null;else if (tokType !== _name) unexpected();else {\n                node.label = parseIdent();\n                semicolon();\n              }\n              for (var i = 0; i < labels.length; ++i) {\n                var lab = labels[i];\n                if (node.label == null || lab.name === node.label.name) {\n                  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n                  if (node.label && isBreak) break;\n                }\n              }\n              if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n              return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n            case _debugger:\n              next();\n              semicolon();\n              return finishNode(node, \"DebuggerStatement\");\n            case _do:\n              next();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              expect(_while);\n              node.test = parseParenExpression();\n              semicolon();\n              return finishNode(node, \"DoWhileStatement\");\n            case _for:\n              next();\n              labels.push(loopLabel);\n              expect(_parenL);\n              if (tokType === _semi) return parseFor(node, null);\n              if (tokType === _var) {\n                var init = startNode();\n                next();\n                parseVar(init, true);\n                finishNode(init, \"VariableDeclaration\");\n                if (init.declarations.length === 1 && eat(_in)) return parseForIn(node, init);\n                return parseFor(node, init);\n              }\n              var init = parseExpression(false, true);\n              if (eat(_in)) {\n                checkLVal(init);\n                return parseForIn(node, init);\n              }\n              return parseFor(node, init);\n            case _function:\n              next();\n              return parseFunction(node, true);\n            case _if:\n              next();\n              node.test = parseParenExpression();\n              node.consequent = parseStatement();\n              node.alternate = eat(_else) ? parseStatement() : null;\n              return finishNode(node, \"IfStatement\");\n            case _return:\n              if (!inFunction && !options.allowReturnOutsideFunction) raise(tokStart, \"'return' outside of function\");\n              next();\n              if (eat(_semi) || canInsertSemicolon()) node.argument = null;else {\n                node.argument = parseExpression();\n                semicolon();\n              }\n              return finishNode(node, \"ReturnStatement\");\n            case _switch:\n              next();\n              node.discriminant = parseParenExpression();\n              node.cases = [];\n              expect(_braceL);\n              labels.push(switchLabel);\n              for (var cur, sawDefault; tokType != _braceR;) {\n                if (tokType === _case || tokType === _default) {\n                  var isCase = tokType === _case;\n                  if (cur) finishNode(cur, \"SwitchCase\");\n                  node.cases.push(cur = startNode());\n                  cur.consequent = [];\n                  next();\n                  if (isCase) cur.test = parseExpression();else {\n                    if (sawDefault) raise(lastStart, \"Multiple default clauses\");\n                    sawDefault = true;\n                    cur.test = null;\n                  }\n                  expect(_colon);\n                } else {\n                  if (!cur) unexpected();\n                  cur.consequent.push(parseStatement());\n                }\n              }\n              if (cur) finishNode(cur, \"SwitchCase\");\n              next();\n              labels.pop();\n              return finishNode(node, \"SwitchStatement\");\n            case _throw:\n              next();\n              if (newline.test(input.slice(lastEnd, tokStart))) raise(lastEnd, \"Illegal newline after throw\");\n              node.argument = parseExpression();\n              semicolon();\n              return finishNode(node, \"ThrowStatement\");\n            case _try:\n              next();\n              node.block = parseBlock();\n              node.handler = null;\n              if (tokType === _catch) {\n                var clause = startNode();\n                next();\n                expect(_parenL);\n                clause.param = parseIdent();\n                if (strict && isStrictBadIdWord(clause.param.name)) raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n                expect(_parenR);\n                clause.guard = null;\n                clause.body = parseBlock();\n                node.handler = finishNode(clause, \"CatchClause\");\n              }\n              node.guardedHandlers = empty;\n              node.finalizer = eat(_finally) ? parseBlock() : null;\n              if (!node.handler && !node.finalizer) raise(node.start, \"Missing catch or finally clause\");\n              return finishNode(node, \"TryStatement\");\n            case _var:\n              next();\n              parseVar(node);\n              semicolon();\n              return finishNode(node, \"VariableDeclaration\");\n            case _while:\n              next();\n              node.test = parseParenExpression();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              return finishNode(node, \"WhileStatement\");\n            case _with:\n              if (strict) raise(tokStart, \"'with' in strict mode\");\n              next();\n              node.object = parseParenExpression();\n              node.body = parseStatement();\n              return finishNode(node, \"WithStatement\");\n            case _braceL:\n              return parseBlock();\n            case _semi:\n              next();\n              return finishNode(node, \"EmptyStatement\");\n            default:\n              var maybeName = tokVal,\n                expr = parseExpression();\n              if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n                for (var i = 0; i < labels.length; ++i) if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n                var kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n                labels.push({\n                  name: maybeName,\n                  kind: kind\n                });\n                node.body = parseStatement();\n                labels.pop();\n                node.label = expr;\n                return finishNode(node, \"LabeledStatement\");\n              } else {\n                node.expression = expr;\n                semicolon();\n                return finishNode(node, \"ExpressionStatement\");\n              }\n          }\n        }\n        function parseParenExpression() {\n          expect(_parenL);\n          var val = parseExpression();\n          expect(_parenR);\n          return val;\n        }\n        function parseBlock(allowStrict) {\n          var node = startNode(),\n            first = true,\n            strict = false,\n            oldStrict;\n          node.body = [];\n          expect(_braceL);\n          while (!eat(_braceR)) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && allowStrict && isUseStrict(stmt)) {\n              oldStrict = strict;\n              setStrict(strict = true);\n            }\n            first = false;\n          }\n          if (strict && !oldStrict) setStrict(false);\n          return finishNode(node, \"BlockStatement\");\n        }\n        function parseFor(node, init) {\n          node.init = init;\n          expect(_semi);\n          node.test = tokType === _semi ? null : parseExpression();\n          expect(_semi);\n          node.update = tokType === _parenR ? null : parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForStatement\");\n        }\n        function parseForIn(node, init) {\n          node.left = init;\n          node.right = parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForInStatement\");\n        }\n        function parseVar(node, noIn) {\n          node.declarations = [];\n          node.kind = \"var\";\n          for (;;) {\n            var decl = startNode();\n            decl.id = parseIdent();\n            if (strict && isStrictBadIdWord(decl.id.name)) raise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n            decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n            node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n            if (!eat(_comma)) break;\n          }\n          return node;\n        }\n        function parseExpression(noComma, noIn) {\n          var expr = parseMaybeAssign(noIn);\n          if (!noComma && tokType === _comma) {\n            var node = startNodeFrom(expr);\n            node.expressions = [expr];\n            while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n            return finishNode(node, \"SequenceExpression\");\n          }\n          return expr;\n        }\n        function parseMaybeAssign(noIn) {\n          var left = parseMaybeConditional(noIn);\n          if (tokType.isAssign) {\n            var node = startNodeFrom(left);\n            node.operator = tokVal;\n            node.left = left;\n            next();\n            node.right = parseMaybeAssign(noIn);\n            checkLVal(left);\n            return finishNode(node, \"AssignmentExpression\");\n          }\n          return left;\n        }\n        function parseMaybeConditional(noIn) {\n          var expr = parseExprOps(noIn);\n          if (eat(_question)) {\n            var node = startNodeFrom(expr);\n            node.test = expr;\n            node.consequent = parseExpression(true);\n            expect(_colon);\n            node.alternate = parseExpression(true, noIn);\n            return finishNode(node, \"ConditionalExpression\");\n          }\n          return expr;\n        }\n        function parseExprOps(noIn) {\n          return parseExprOp(parseMaybeUnary(), -1, noIn);\n        }\n        function parseExprOp(left, minPrec, noIn) {\n          var prec = tokType.binop;\n          if (prec != null && (!noIn || tokType !== _in)) {\n            if (prec > minPrec) {\n              var node = startNodeFrom(left);\n              node.left = left;\n              node.operator = tokVal;\n              var op = tokType;\n              next();\n              node.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n              var exprNode = finishNode(node, op === _logicalOR || op === _logicalAND ? \"LogicalExpression\" : \"BinaryExpression\");\n              return parseExprOp(exprNode, minPrec, noIn);\n            }\n          }\n          return left;\n        }\n        function parseMaybeUnary() {\n          if (tokType.prefix) {\n            var node = startNode(),\n              update = tokType.isUpdate;\n            node.operator = tokVal;\n            node.prefix = true;\n            tokRegexpAllowed = true;\n            next();\n            node.argument = parseMaybeUnary();\n            if (update) checkLVal(node.argument);else if (strict && node.operator === \"delete\" && node.argument.type === \"Identifier\") raise(node.start, \"Deleting local variable in strict mode\");\n            return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n          }\n          var expr = parseExprSubscripts();\n          while (tokType.postfix && !canInsertSemicolon()) {\n            var node = startNodeFrom(expr);\n            node.operator = tokVal;\n            node.prefix = false;\n            node.argument = expr;\n            checkLVal(expr);\n            next();\n            expr = finishNode(node, \"UpdateExpression\");\n          }\n          return expr;\n        }\n        function parseExprSubscripts() {\n          return parseSubscripts(parseExprAtom());\n        }\n        function parseSubscripts(base, noCalls) {\n          if (eat(_dot)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseIdent(true);\n            node.computed = false;\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (eat(_bracketL)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseExpression();\n            node.computed = true;\n            expect(_bracketR);\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (!noCalls && eat(_parenL)) {\n            var node = startNodeFrom(base);\n            node.callee = base;\n            node.arguments = parseExprList(_parenR, false);\n            return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n          } else return base;\n        }\n        function parseExprAtom() {\n          switch (tokType) {\n            case _this:\n              var node = startNode();\n              next();\n              return finishNode(node, \"ThisExpression\");\n            case _name:\n              return parseIdent();\n            case _num:\n            case _string:\n            case _regexp:\n              var node = startNode();\n              node.value = tokVal;\n              node.raw = input.slice(tokStart, tokEnd);\n              next();\n              return finishNode(node, \"Literal\");\n            case _null:\n            case _true:\n            case _false:\n              var node = startNode();\n              node.value = tokType.atomValue;\n              node.raw = tokType.keyword;\n              next();\n              return finishNode(node, \"Literal\");\n            case _parenL:\n              var tokStartLoc1 = tokStartLoc,\n                tokStart1 = tokStart;\n              next();\n              var val = parseExpression();\n              val.start = tokStart1;\n              val.end = tokEnd;\n              if (options.locations) {\n                val.loc.start = tokStartLoc1;\n                val.loc.end = tokEndLoc;\n              }\n              if (options.ranges) val.range = [tokStart1, tokEnd];\n              expect(_parenR);\n              return val;\n            case _bracketL:\n              var node = startNode();\n              next();\n              node.elements = parseExprList(_bracketR, true, true);\n              return finishNode(node, \"ArrayExpression\");\n            case _braceL:\n              return parseObj();\n            case _function:\n              var node = startNode();\n              next();\n              return parseFunction(node, false);\n            case _new:\n              return parseNew();\n            default:\n              unexpected();\n          }\n        }\n        function parseNew() {\n          var node = startNode();\n          next();\n          node.callee = parseSubscripts(parseExprAtom(), true);\n          if (eat(_parenL)) node.arguments = parseExprList(_parenR, false);else node.arguments = empty;\n          return finishNode(node, \"NewExpression\");\n        }\n        function parseObj() {\n          var node = startNode(),\n            first = true,\n            sawGetSet = false;\n          node.properties = [];\n          next();\n          while (!eat(_braceR)) {\n            if (!first) {\n              expect(_comma);\n              if (options.allowTrailingCommas && eat(_braceR)) break;\n            } else first = false;\n            var prop = {\n                key: parsePropertyName()\n              },\n              isGetSet = false,\n              kind;\n            if (eat(_colon)) {\n              prop.value = parseExpression(true);\n              kind = prop.kind = \"init\";\n            } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" && (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n              isGetSet = sawGetSet = true;\n              kind = prop.kind = prop.key.name;\n              prop.key = parsePropertyName();\n              if (tokType !== _parenL) unexpected();\n              prop.value = parseFunction(startNode(), false);\n            } else unexpected();\n            if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n              for (var i = 0; i < node.properties.length; ++i) {\n                var other = node.properties[i];\n                if (other.key.name === prop.key.name) {\n                  var conflict = kind == other.kind || isGetSet && other.kind === \"init\" || kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n                  if (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n                  if (conflict) raise(prop.key.start, \"Redefinition of property\");\n                }\n              }\n            }\n            node.properties.push(prop);\n          }\n          return finishNode(node, \"ObjectExpression\");\n        }\n        function parsePropertyName() {\n          if (tokType === _num || tokType === _string) return parseExprAtom();\n          return parseIdent(true);\n        }\n        function parseFunction(node, isStatement) {\n          if (tokType === _name) node.id = parseIdent();else if (isStatement) unexpected();else node.id = null;\n          node.params = [];\n          var first = true;\n          expect(_parenL);\n          while (!eat(_parenR)) {\n            if (!first) expect(_comma);else first = false;\n            node.params.push(parseIdent());\n          }\n          var oldInFunc = inFunction,\n            oldLabels = labels;\n          inFunction = true;\n          labels = [];\n          node.body = parseBlock(true);\n          inFunction = oldInFunc;\n          labels = oldLabels;\n          if (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n            for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n              var id = i < 0 ? node.id : node.params[i];\n              if (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name)) raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n              if (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name) raise(id.start, \"Argument name clash in strict mode\");\n            }\n          }\n          return finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n        }\n        function parseExprList(close, allowTrailingComma, allowEmpty) {\n          var elts = [],\n            first = true;\n          while (!eat(close)) {\n            if (!first) {\n              expect(_comma);\n              if (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n            } else first = false;\n            if (allowEmpty && tokType === _comma) elts.push(null);else elts.push(parseExpression(true));\n          }\n          return elts;\n        }\n        function parseIdent(liberal) {\n          var node = startNode();\n          if (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n          if (tokType === _name) {\n            if (!liberal && (options.forbidReserved && (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) || strict && isStrictReservedWord(tokVal)) && input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1) raise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n            node.name = tokVal;\n          } else if (liberal && tokType.keyword) {\n            node.name = tokType.keyword;\n          } else {\n            unexpected();\n          }\n          tokRegexpAllowed = false;\n          next();\n          return finishNode(node, \"Identifier\");\n        }\n      });\n      if (!acorn.version) acorn = null;\n    }\n    function parse(code, options) {\n      return (global.acorn || acorn).parse(code, options);\n    }\n    var binaryOperators = {\n      '+': '__add',\n      '-': '__subtract',\n      '*': '__multiply',\n      '/': '__divide',\n      '%': '__modulo',\n      '==': '__equals',\n      '!=': '__equals'\n    };\n    var unaryOperators = {\n      '-': '__negate',\n      '+': '__self'\n    };\n    var fields = Base.each(['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'], function (name) {\n      this['__' + name] = '#' + name;\n    }, {\n      __self: function () {\n        return this;\n      }\n    });\n    Point.inject(fields);\n    Size.inject(fields);\n    Color.inject(fields);\n    function __$__(left, operator, right) {\n      var handler = binaryOperators[operator];\n      if (left && left[handler]) {\n        var res = left[handler](right);\n        return operator === '!=' ? !res : res;\n      }\n      switch (operator) {\n        case '+':\n          return left + right;\n        case '-':\n          return left - right;\n        case '*':\n          return left * right;\n        case '/':\n          return left / right;\n        case '%':\n          return left % right;\n        case '==':\n          return left == right;\n        case '!=':\n          return left != right;\n      }\n    }\n    function $__(operator, value) {\n      var handler = unaryOperators[operator];\n      if (value && value[handler]) return value[handler]();\n      switch (operator) {\n        case '+':\n          return +value;\n        case '-':\n          return -value;\n      }\n    }\n    function compile(code, options) {\n      if (!code) return '';\n      options = options || {};\n      var insertions = [];\n      function getOffset(offset) {\n        for (var i = 0, l = insertions.length; i < l; i++) {\n          var insertion = insertions[i];\n          if (insertion[0] >= offset) break;\n          offset += insertion[1];\n        }\n        return offset;\n      }\n      function getCode(node) {\n        return code.substring(getOffset(node.range[0]), getOffset(node.range[1]));\n      }\n      function getBetween(left, right) {\n        return code.substring(getOffset(left.range[1]), getOffset(right.range[0]));\n      }\n      function replaceCode(node, str) {\n        var start = getOffset(node.range[0]),\n          end = getOffset(node.range[1]),\n          insert = 0;\n        for (var i = insertions.length - 1; i >= 0; i--) {\n          if (start > insertions[i][0]) {\n            insert = i + 1;\n            break;\n          }\n        }\n        insertions.splice(insert, 0, [start, str.length - end + start]);\n        code = code.substring(0, start) + str + code.substring(end);\n      }\n      function handleOverloading(node, parent) {\n        switch (node.type) {\n          case 'UnaryExpression':\n            if (node.operator in unaryOperators && node.argument.type !== 'Literal') {\n              var arg = getCode(node.argument);\n              replaceCode(node, '$__(\"' + node.operator + '\", ' + arg + ')');\n            }\n            break;\n          case 'BinaryExpression':\n            if (node.operator in binaryOperators && node.left.type !== 'Literal') {\n              var left = getCode(node.left),\n                right = getCode(node.right),\n                between = getBetween(node.left, node.right),\n                operator = node.operator;\n              replaceCode(node, '__$__(' + left + ',' + between.replace(new RegExp('\\\\' + operator), '\"' + operator + '\"') + ', ' + right + ')');\n            }\n            break;\n          case 'UpdateExpression':\n          case 'AssignmentExpression':\n            var parentType = parent && parent.type;\n            if (!(parentType === 'ForStatement' || parentType === 'BinaryExpression' && /^[=!<>]/.test(parent.operator) || parentType === 'MemberExpression' && parent.computed)) {\n              if (node.type === 'UpdateExpression') {\n                var arg = getCode(node.argument),\n                  exp = '__$__(' + arg + ', \"' + node.operator[0] + '\", 1)',\n                  str = arg + ' = ' + exp;\n                if (node.prefix) {\n                  str = '(' + str + ')';\n                } else if (parentType === 'AssignmentExpression' || parentType === 'VariableDeclarator' || parentType === 'BinaryExpression') {\n                  if (getCode(parent.left || parent.id) === arg) str = exp;\n                  str = arg + '; ' + str;\n                }\n                replaceCode(node, str);\n              } else {\n                if (/^.=$/.test(node.operator) && node.left.type !== 'Literal') {\n                  var left = getCode(node.left),\n                    right = getCode(node.right),\n                    exp = left + ' = __$__(' + left + ', \"' + node.operator[0] + '\", ' + right + ')';\n                  replaceCode(node, /^\\(.*\\)$/.test(getCode(node)) ? '(' + exp + ')' : exp);\n                }\n              }\n            }\n            break;\n        }\n      }\n      function handleExports(node) {\n        switch (node.type) {\n          case 'ExportDefaultDeclaration':\n            replaceCode({\n              range: [node.start, node.declaration.start]\n            }, 'module.exports = ');\n            break;\n          case 'ExportNamedDeclaration':\n            var declaration = node.declaration;\n            var specifiers = node.specifiers;\n            if (declaration) {\n              var declarations = declaration.declarations;\n              if (declarations) {\n                declarations.forEach(function (dec) {\n                  replaceCode(dec, 'module.exports.' + getCode(dec));\n                });\n                replaceCode({\n                  range: [node.start, declaration.start + declaration.kind.length]\n                }, '');\n              }\n            } else if (specifiers) {\n              var exports = specifiers.map(function (specifier) {\n                var name = getCode(specifier);\n                return 'module.exports.' + name + ' = ' + name + '; ';\n              }).join('');\n              if (exports) {\n                replaceCode(node, exports);\n              }\n            }\n            break;\n        }\n      }\n      function walkAST(node, parent, paperFeatures) {\n        if (node) {\n          for (var key in node) {\n            if (key !== 'range' && key !== 'loc') {\n              var value = node[key];\n              if (Array.isArray(value)) {\n                for (var i = 0, l = value.length; i < l; i++) {\n                  walkAST(value[i], node, paperFeatures);\n                }\n              } else if (value && typeof value === 'object') {\n                walkAST(value, node, paperFeatures);\n              }\n            }\n          }\n          if (paperFeatures.operatorOverloading !== false) {\n            handleOverloading(node, parent);\n          }\n          if (paperFeatures.moduleExports !== false) {\n            handleExports(node);\n          }\n        }\n      }\n      function encodeVLQ(value) {\n        var res = '',\n          base64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        value = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n        while (value || !res) {\n          var next = value & 32 - 1;\n          value >>= 5;\n          if (value) next |= 32;\n          res += base64[next];\n        }\n        return res;\n      }\n      var url = options.url || '',\n        sourceMaps = options.sourceMaps,\n        paperFeatures = options.paperFeatures || {},\n        source = options.source || code,\n        offset = options.offset || 0,\n        agent = paper.agent,\n        version = agent.versionNumber,\n        offsetCode = false,\n        lineBreaks = /\\r\\n|\\n|\\r/mg,\n        map;\n      if (sourceMaps && (agent.chrome && version >= 30 || agent.webkit && version >= 537.76 || agent.firefox && version >= 23 || agent.node)) {\n        if (agent.node) {\n          offset -= 2;\n        } else if (window && url && !window.location.href.indexOf(url)) {\n          var html = document.getElementsByTagName('html')[0].innerHTML;\n          offset = html.substr(0, html.indexOf(code) + 1).match(lineBreaks).length + 1;\n        }\n        offsetCode = offset > 0 && !(agent.chrome && version >= 36 || agent.safari && version >= 600 || agent.firefox && version >= 40 || agent.node);\n        var mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n        mappings.length = (code.match(lineBreaks) || []).length + 1 + (offsetCode ? offset : 0);\n        map = {\n          version: 3,\n          file: url,\n          names: [],\n          mappings: mappings.join(';AACA'),\n          sourceRoot: '',\n          sources: [url],\n          sourcesContent: [source]\n        };\n      }\n      if (paperFeatures.operatorOverloading !== false || paperFeatures.moduleExports !== false) {\n        walkAST(parse(code, {\n          ranges: true,\n          preserveParens: true,\n          sourceType: 'module'\n        }), null, paperFeatures);\n      }\n      if (map) {\n        if (offsetCode) {\n          code = new Array(offset + 1).join('\\n') + code;\n        }\n        if (/^(inline|both)$/.test(sourceMaps)) {\n          code += \"\\n//# sourceMappingURL=data:application/json;base64,\" + self.btoa(unescape(encodeURIComponent(JSON.stringify(map))));\n        }\n        code += \"\\n//# sourceURL=\" + (url || 'paperscript');\n      }\n      return {\n        url: url,\n        source: source,\n        code: code,\n        map: map\n      };\n    }\n    function execute(code, scope, options) {\n      paper = scope;\n      var view = scope.getView(),\n        tool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(code) && !/\\bnew\\s+Tool\\b/.test(code) ? new Tool() : null,\n        toolHandlers = tool ? tool._events : [],\n        handlers = ['onFrame', 'onResize'].concat(toolHandlers),\n        params = [],\n        args = [],\n        func,\n        compiled = typeof code === 'object' ? code : compile(code, options);\n      code = compiled.code;\n      function expose(scope, hidden) {\n        for (var key in scope) {\n          if ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)' + key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n            params.push(key);\n            args.push(scope[key]);\n          }\n        }\n      }\n      expose({\n        __$__: __$__,\n        $__: $__,\n        paper: scope,\n        tool: tool\n      }, true);\n      expose(scope);\n      code = 'var module = { exports: {} }; ' + code;\n      var exports = Base.each(handlers, function (key) {\n        if (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n          params.push(key);\n          this.push('module.exports.' + key + ' = ' + key + ';');\n        }\n      }, []).join('\\n');\n      if (exports) {\n        code += '\\n' + exports;\n      }\n      code += '\\nreturn module.exports;';\n      var agent = paper.agent;\n      if (document && (agent.chrome || agent.firefox && agent.versionNumber < 40)) {\n        var script = document.createElement('script'),\n          head = document.head || document.getElementsByTagName('head')[0];\n        if (agent.firefox) code = '\\n' + code;\n        script.appendChild(document.createTextNode('document.__paperscript__ = function(' + params + ') {' + code + '\\n}'));\n        head.appendChild(script);\n        func = document.__paperscript__;\n        delete document.__paperscript__;\n        head.removeChild(script);\n      } else {\n        func = Function(params, code);\n      }\n      var exports = func && func.apply(scope, args);\n      var obj = exports || {};\n      Base.each(toolHandlers, function (key) {\n        var value = obj[key];\n        if (value) tool[key] = value;\n      });\n      if (view) {\n        if (obj.onResize) view.setOnResize(obj.onResize);\n        view.emit('resize', {\n          size: view.size,\n          delta: new Point()\n        });\n        if (obj.onFrame) view.setOnFrame(obj.onFrame);\n        view.requestUpdate();\n      }\n      return exports;\n    }\n    function loadScript(script) {\n      if (/^text\\/(?:x-|)paperscript$/.test(script.type) && PaperScope.getAttribute(script, 'ignore') !== 'true') {\n        var canvasId = PaperScope.getAttribute(script, 'canvas'),\n          canvas = document.getElementById(canvasId),\n          src = script.src || script.getAttribute('data-src'),\n          async = PaperScope.hasAttribute(script, 'async'),\n          scopeAttribute = 'data-paper-scope';\n        if (!canvas) throw new Error('Unable to find canvas with id \"' + canvasId + '\"');\n        var scope = PaperScope.get(canvas.getAttribute(scopeAttribute)) || new PaperScope().setup(canvas);\n        canvas.setAttribute(scopeAttribute, scope._id);\n        if (src) {\n          Http.request({\n            url: src,\n            async: async,\n            mimeType: 'text/plain',\n            onLoad: function (code) {\n              execute(code, scope, src);\n            }\n          });\n        } else {\n          execute(script.innerHTML, scope, script.baseURI);\n        }\n        script.setAttribute('data-paper-ignore', 'true');\n        return scope;\n      }\n    }\n    function loadAll() {\n      Base.each(document && document.getElementsByTagName('script'), loadScript);\n    }\n    function load(script) {\n      return script ? loadScript(script) : loadAll();\n    }\n    if (window) {\n      if (document.readyState === 'complete') {\n        setTimeout(loadAll);\n      } else {\n        DomEvent.add(window, {\n          load: loadAll\n        });\n      }\n    }\n    return {\n      compile: compile,\n      execute: execute,\n      load: load,\n      parse: parse,\n      calculateBinary: __$__,\n      calculateUnary: $__\n    };\n  }.call(this);\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);","map":{"version":3,"names":["paper","self","undefined","require","window","document","Base","hidden","array","slice","create","Object","describe","getOwnPropertyDescriptor","define","defineProperty","forEach","iter","bind","i","l","length","call","forIn","hasOwnProperty","set","assign","dst","arguments","src","key","each","obj","desc","value","inject","dest","enumerable","beans","preserve","beansNames","field","name","val","get","substring","isFunc","res","prev","base","bean","match","toLowerCase","isPlainObject","writable","configurable","test","part","statics","prototype","extend","ctor","proto","initialize","apply","clone","constructor","pick","a","b","list","begin","end","module","exports","toString","_id","_class","_name","type","push","Formatter","instance","number","join","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","props","exclude","filter","_prioritize","equals","obj1","obj2","Array","isArray","keys","read","start","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","add","item","id","ref","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","target","parse","useTarget","Item","Layer","insert","concat","INSERT","items","itemsLength","startLength","splice","index","remove","append","_index","removed","capitalize","str","replace","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","event","setTarget","currentTarget","stop","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","PaperScript","View","updateFocus","scope","setup","element","Project","createCanvas","width","height","getCanvas","activate","clear","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","rect","left","top","right","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","min","Math","max","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","curPri1","collisions","multiplier","pow","round","pair","val1","val2","separator","point","x","y","size","rectangle","Numerical","abscissas","weights","abs","sqrt","log2","log","LOG2E","EPSILON","MACHINE_EPSILON","clamp","getDiscriminant","c","split","D","E","ad","bd","cd","p","dp","q","dq","getNormalizationFactor","norm","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","ANGULAR_EPSILON","KAPPA","isZero","isMachineZero","integrate","f","w","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","d","b1","c2","qd","evaluate","x0","tmp","t","r","s","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","atan2","div","NaN","dot","acos","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","current","rotate","center","subtract","transform","matrix","_transformPoint","multiply","divide","modulo","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isNaN","isInQuadrant","point1","point2","random","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","from","to","frm","next","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","unite","include","expand","parts","xFirst","LinkedRectangle","internal","Matrix","ok","_a","_b","_c","_d","_tx","_ty","reset","Error","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","translate","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","uMin","uMax","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","_selectionItems","_selectionCount","_updateVersion","flags","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","children","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","class","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","offset","viewMatrix","matrices","updateMatrix","restore","strokeWidth","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","data","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","position","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","handle","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","addChild","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","raster","Raster","getResolution","topLeft","getTopLeft","floor","bottomRight","getBottomRight","ceil","boundsSize","rasterSize","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","fill","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","updateVersion","globalMatrix","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","mainCtx","itemOffset","prevOffset","pop","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","color","getSelectedColor","half","pos","beginPath","arc","deltas","delta","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","radius","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","object","getElementById","naturalHeight","setImage","setSource","_loaded","_image","canvas","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","_clear","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","error","complete","naturalWidth","_context","e","setCanvas","_change","setContext","context","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","sampleSize","_sampleContext","clearRect","pixels","getImageData","channels","total","alpha","Color","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","disabled","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","values","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","_curves","curve","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","d1_a","d1_2a","d2_a","d2_2a","N","k","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","tMin","tMax","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","geomEpsilon","getNearestTime","minDist","minT","refine","dist","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","loc","getOffset","getParameterOf","getNearestLocation","getNearestPoint","methods","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","len","a3","d3","serpentine","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","fatLineEpsilon","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","getConvexHull","tMinClip","tMaxClip","clipConvexHull","tMinNew","tMaxNew","uDiff","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","getSquaredLineLength","timeEpsilon","straightBoth","l1","l2","pairs","den","times","num","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","_offset","_curveOffset","trySegment","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","relative","previous","control","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","flattener","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos1","pos2","end1","end2","start2","numSegments","cap","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawHandles","miniSize","miniHalf","pX","pY","drawHandle","hX","hY","drawSegments","drawSegment","dashLength","drawPart","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","method","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolve","resolveCrossings","reorient","createResult","result","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","map","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","results","clearCurves","clearLookup","renormalizeLocs","prevCurve","prevTime","origTime","newCurve","getWinding","dontFlip","curvesList","ia","pv","pa","po","windingEpsilon","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","vPrev","vClose","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","otherPath","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","valid","finished","branches","branch","visited","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","detC0C1","alpha1","alpha2","detC0X","detXC1","c0","segLength","eps","degree","maxDist","P","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","colorCtx","fromCSS","string","parseInt","trim","isHSL","component","unit","turn","grad","willReadFrequently","hsbIndices","converters","rgb-hsb","g","hsb-rgb","rgb-hsl","achromatic","hsl-rgb","t3s","t3","rgb-gray","gray-rgb","gray-hsb","gray-hsl","gradient-rgb","rgb-gradient","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","hex","_stops","origin","destination","highlight","inverse","canvasGradient","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","addEventListener","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","nativeRequest","requested","callbacks","timer","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","none","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","node","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","isVisible","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","dragging","mouseDown","handleMouseMove","_handleMouseEvent","mousedown","mousemove","mouseup","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","scroll","called","prevented","fallbacks","doubleclick","wasInView","overView","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","emitMouseEvent","prevPoint","stopItem","stopped","mouseEvent","MouseEvent","fallback","emitMouseEvents","hitItem","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","mouse","substr","drag","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","keyLookup","charLookup","keyMap","charMap","metaFixMap","downKey","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","String","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","Tool","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","state","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","then","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","calculateBinary","Http","request","xhr","XMLHttpRequest","open","url","async","mimeType","overrideMimeType","onload","status","responseText","onerror","message","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","tag","attributes","createElementNS","namespace","getAttributeNS","setAttributeNS","SvgStyles","true","false","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","exportSVG","exportRaster","embedImages","exportPath","matchShapes","exportShape","exportCompoundPath","exportSymbolItem","definitionItem","viewBox","overflow","exportGradient","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportText","textContent","exporters","applyStyle","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importPath","importGradient","scaleToBounds","_scaleToBounds","importers","#document","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","text","switch","applyTransform","transforms","applyOpacity","clip-path","gradientTransform","setVisible","display","stop-color","stop-opacity","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","global","acorn","root","mod","amd","input","inputLen","sourceFile","inpt","initTokenState","parseTopLevel","program","defaultOptions","ecmaVersion","strictSemicolons","allowTrailingCommas","forbidReserved","allowReturnOutsideFunction","onComment","ranges","directSourceFile","opt","getLineInfo","cur","lineBreak","lastIndex","column","tokenize","getToken","forceRegexp","lastEnd","tokEnd","readToken","tokStart","startLoc","tokStartLoc","endLoc","tokEndLoc","tokType","tokVal","jumpTo","reAllowed","tokPos","tokCurLine","tokLineStart","tokRegexpAllowed","skipSpace","lastStart","lastEndLoc","inFunction","labels","strict","raise","err","SyntaxError","raisedAt","empty","_num","_regexp","_string","_eof","_break","keyword","_case","beforeExpr","_catch","_continue","_debugger","_do","isLoop","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_while","_with","_new","_this","_null","atomValue","_true","_false","binop","keywordTypes","_bracketL","_bracketR","_braceL","_braceR","_parenL","_parenR","_comma","_semi","_colon","_dot","_question","_slash","_eq","isAssign","_assign","_incDec","postfix","isUpdate","_prefix","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseXOR","_bitwiseAND","_equality","_relational","_bitShift","_plusMin","_multiplyModulo","tokTypes","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","question","slash","eq","eof","regexp","kw","makePredicate","words","cats","compareTo","arr","cat","Function","isReservedWord3","isReservedWord5","isStrictReservedWord","isStrictBadIdWord","isKeyword","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","isIdentifierStart","isIdentifierChar","line_loc_t","finishToken","skipBlockComment","skipLineComment","ch","charCodeAt","readToken_dot","readNumber","readToken_slash","readRegexp","finishOp","readToken_mult_modulo","readToken_pipe_amp","readToken_caret","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","getTokenFromCode","readHexNumber","readString","readWord","tok","escaped","inClass","charAt","mods","readWord1","readInt","radix","startsWithDot","isFloat","octal","quote","readHexChar","containsEsc","word","esc","escStr","setStrict","strct","lastIndexOf","node_t","node_loc_t","startNode","range","startNodeFrom","finishNode","isUseStrict","stmt","expression","eat","canInsertSemicolon","semicolon","unexpected","expect","checkLVal","expr","parseStatement","loopLabel","kind","switchLabel","starttype","isBreak","label","parseIdent","lab","parseParenExpression","parseFor","init","parseVar","declarations","parseForIn","parseExpression","parseFunction","consequent","alternate","argument","discriminant","cases","sawDefault","isCase","block","parseBlock","clause","guard","guardedHandlers","finalizer","maybeName","allowStrict","oldStrict","noIn","decl","noComma","parseMaybeAssign","expressions","parseMaybeConditional","parseExprOps","parseExprOp","parseMaybeUnary","minPrec","prec","exprNode","parseExprSubscripts","parseSubscripts","parseExprAtom","noCalls","computed","callee","parseExprList","raw","tokStartLoc1","tokStart1","elements","parseObj","parseNew","sawGetSet","parsePropertyName","isGetSet","conflict","isStatement","params","oldInFunc","oldLabels","close","allowTrailingComma","allowEmpty","elts","liberal","binaryOperators","unaryOperators","__self","__$__","$__","compile","insertions","insertion","getCode","getBetween","replaceCode","handleOverloading","between","parentType","exp","handleExports","declaration","specifiers","dec","specifier","walkAST","paperFeatures","operatorOverloading","moduleExports","encodeVLQ","base64","sourceMaps","offsetCode","lineBreaks","getElementsByTagName","innerHTML","safari","mappings","file","names","sourceRoot","sources","sourcesContent","preserveParens","sourceType","btoa","unescape","encodeURIComponent","toolHandlers","compiled","expose","script","head","createTextNode","__paperscript__","onResize","setOnResize","setOnFrame","loadScript","canvasId","scopeAttribute","baseURI","loadAll","readyState","calculateUnary","Symbol","PlacedSymbol"],"sources":["/Users/akhilakonam/Documents/TestWhiteboard/test-whiteboard/node_modules/paper/dist/paper-full.js"],"sourcesContent":["/*!\n * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Thu Nov 3 21:15:36 2022 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function(self, undefined) {\n\nself = self || require('./node/self.js');\nvar window = self.window,\n\tdocument = self.document;\n\nvar Base = new function() {\n\tvar hidden = /^(statics|enumerable|beans|preserve)$/,\n\t\tarray = [],\n\t\tslice = array.slice,\n\t\tcreate = Object.create,\n\t\tdescribe = Object.getOwnPropertyDescriptor,\n\t\tdefine = Object.defineProperty,\n\n\t\tforEach = array.forEach || function(iter, bind) {\n\t\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tforIn = function(iter, bind) {\n\t\t\tfor (var i in this) {\n\t\t\t\tif (this.hasOwnProperty(i))\n\t\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tset = Object.assign || function(dst) {\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tfor (var key in src) {\n\t\t\t\t\tif (src.hasOwnProperty(key))\n\t\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dst;\n\t\t},\n\n\t\teach = function(obj, iter, bind) {\n\t\t\tif (obj) {\n\t\t\t\tvar desc = describe(obj, 'length');\n\t\t\t\t(desc && typeof desc.value === 'number' ? forEach : forIn)\n\t\t\t\t\t.call(obj, iter, bind = bind || obj);\n\t\t\t}\n\t\t\treturn bind;\n\t\t};\n\n\tfunction inject(dest, src, enumerable, beans, preserve) {\n\t\tvar beansNames = {};\n\n\t\tfunction field(name, val) {\n\t\t\tval = val || (val = describe(src, name))\n\t\t\t\t\t&& (val.get ? val : val.value);\n\t\t\tif (typeof val === 'string' && val[0] === '#')\n\t\t\t\tval = dest[val.substring(1)] || val;\n\t\t\tvar isFunc = typeof val === 'function',\n\t\t\t\tres = val,\n\t\t\t\tprev = preserve || isFunc && !val.base\n\t\t\t\t\t\t? (val && val.get ? name in dest : dest[name])\n\t\t\t\t\t\t: null,\n\t\t\t\tbean;\n\t\t\tif (!preserve || !prev) {\n\t\t\t\tif (isFunc && prev)\n\t\t\t\t\tval.base = prev;\n\t\t\t\tif (isFunc && beans !== false\n\t\t\t\t\t\t&& (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/)))\n\t\t\t\t\tbeansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\t\t\t\tif (!res || isFunc || !res.get || typeof res.get !== 'function'\n\t\t\t\t\t\t|| !Base.isPlainObject(res)) {\n\t\t\t\t\tres = { value: res, writable: true };\n\t\t\t\t}\n\t\t\t\tif ((describe(dest, name)\n\t\t\t\t\t\t|| { configurable: true }).configurable) {\n\t\t\t\t\tres.configurable = true;\n\t\t\t\t\tres.enumerable = enumerable != null ? enumerable : !bean;\n\t\t\t\t}\n\t\t\t\tdefine(dest, name, res);\n\t\t\t}\n\t\t}\n\t\tif (src) {\n\t\t\tfor (var name in src) {\n\t\t\t\tif (src.hasOwnProperty(name) && !hidden.test(name))\n\t\t\t\t\tfield(name);\n\t\t\t}\n\t\t\tfor (var name in beansNames) {\n\t\t\t\tvar part = beansNames[name],\n\t\t\t\t\tset = dest['set' + part],\n\t\t\t\t\tget = dest['get' + part] || set && dest['is' + part];\n\t\t\t\tif (get && (beans === true || get.length === 0))\n\t\t\t\t\tfield(name, { get: get, set: set });\n\t\t\t}\n\t\t}\n\t\treturn dest;\n\t}\n\n\tfunction Base() {\n\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\tvar src = arguments[i];\n\t\t\tif (src)\n\t\t\t\tset(this, src);\n\t\t}\n\t\treturn this;\n\t}\n\n\treturn inject(Base, {\n\t\tinject: function(src) {\n\t\t\tif (src) {\n\t\t\t\tvar statics = src.statics === true ? src : src.statics,\n\t\t\t\t\tbeans = src.beans,\n\t\t\t\t\tpreserve = src.preserve;\n\t\t\t\tif (statics !== src)\n\t\t\t\t\tinject(this.prototype, src, src.enumerable, beans, preserve);\n\t\t\t\tinject(this, statics, null, beans, preserve);\n\t\t\t}\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++)\n\t\t\t\tthis.inject(arguments[i]);\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar base = this,\n\t\t\t\tctor,\n\t\t\t\tproto;\n\t\t\tfor (var i = 0, obj, l = arguments.length;\n\t\t\t\t\ti < l && !(ctor && proto); i++) {\n\t\t\t\tobj = arguments[i];\n\t\t\t\tctor = ctor || obj.initialize;\n\t\t\t\tproto = proto || obj.prototype;\n\t\t\t}\n\t\t\tctor = ctor || function() {\n\t\t\t\tbase.apply(this, arguments);\n\t\t\t};\n\t\t\tproto = ctor.prototype = proto || create(this.prototype);\n\t\t\tdefine(proto, 'constructor',\n\t\t\t\t\t{ value: ctor, writable: true, configurable: true });\n\t\t\tinject(ctor, this);\n\t\t\tif (arguments.length)\n\t\t\t\tthis.inject.apply(ctor, arguments);\n\t\t\tctor.base = base;\n\t\t\treturn ctor;\n\t\t}\n\t}).inject({\n\t\tenumerable: false,\n\n\t\tinitialize: Base,\n\n\t\tset: Base,\n\n\t\tinject: function() {\n\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tif (src) {\n\t\t\t\t\tinject(this, src, src.enumerable, src.beans, src.preserve);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar res = create(this);\n\t\t\treturn res.inject.apply(res, arguments);\n\t\t},\n\n\t\teach: function(iter, bind) {\n\t\t\treturn each(this, iter, bind);\n\t\t},\n\n\t\tclone: function() {\n\t\t\treturn new this.constructor(this);\n\t\t},\n\n\t\tstatics: {\n\t\t\tset: set,\n\t\t\teach: each,\n\t\t\tcreate: create,\n\t\t\tdefine: define,\n\t\t\tdescribe: describe,\n\n\t\t\tclone: function(obj) {\n\t\t\t\treturn set(new obj.constructor(), obj);\n\t\t\t},\n\n\t\t\tisPlainObject: function(obj) {\n\t\t\t\tvar ctor = obj != null && obj.constructor;\n\t\t\t\treturn ctor && (ctor === Object || ctor === Base\n\t\t\t\t\t\t|| ctor.name === 'Object');\n\t\t\t},\n\n\t\t\tpick: function(a, b) {\n\t\t\t\treturn a !== undefined ? a : b;\n\t\t\t},\n\n\t\t\tslice: function(list, begin, end) {\n\t\t\t\treturn slice.call(list, begin, end);\n\t\t\t}\n\t\t}\n\t});\n};\n\nif (typeof module !== 'undefined')\n\tmodule.exports = Base;\n\nBase.inject({\n\tenumerable: false,\n\n\ttoString: function() {\n\t\treturn this._id != null\n\t\t\t?  (this._class || 'Object') + (this._name\n\t\t\t\t? \" '\" + this._name + \"'\"\n\t\t\t\t: ' @' + this._id)\n\t\t\t: '{ ' + Base.each(this, function(value, key) {\n\t\t\t\tif (!/^_/.test(key)) {\n\t\t\t\t\tvar type = typeof value;\n\t\t\t\t\tthis.push(key + ': ' + (type === 'number'\n\t\t\t\t\t\t\t? Formatter.instance.number(value)\n\t\t\t\t\t\t\t: type === 'string' ? \"'\" + value + \"'\" : value));\n\t\t\t\t}\n\t\t\t}, []).join(', ') + ' }';\n\t},\n\n\tgetClassName: function() {\n\t\treturn this._class || '';\n\t},\n\n\timportJSON: function(json) {\n\t\treturn Base.importJSON(json, this);\n\t},\n\n\texportJSON: function(options) {\n\t\treturn Base.exportJSON(this, options);\n\t},\n\n\ttoJSON: function() {\n\t\treturn Base.serialize(this);\n\t},\n\n\tset: function(props, exclude) {\n\t\tif (props)\n\t\t\tBase.filter(this, props, exclude, this._prioritize);\n\t\treturn this;\n\t}\n}, {\n\nbeans: false,\nstatics: {\n\texports: {},\n\n\textend: function extend() {\n\t\tvar res = extend.base.apply(this, arguments),\n\t\t\tname = res.prototype._class;\n\t\tif (name && !Base.exports[name])\n\t\t\tBase.exports[name] = res;\n\t\treturn res;\n\t},\n\n\tequals: function(obj1, obj2) {\n\t\tif (obj1 === obj2)\n\t\t\treturn true;\n\t\tif (obj1 && obj1.equals)\n\t\t\treturn obj1.equals(obj2);\n\t\tif (obj2 && obj2.equals)\n\t\t\treturn obj2.equals(obj1);\n\t\tif (obj1 && obj2\n\t\t\t\t&& typeof obj1 === 'object' && typeof obj2 === 'object') {\n\t\t\tif (Array.isArray(obj1) && Array.isArray(obj2)) {\n\t\t\t\tvar length = obj1.length;\n\t\t\t\tif (length !== obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tif (!Base.equals(obj1[length], obj2[length]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar keys = Object.keys(obj1),\n\t\t\t\t\tlength = keys.length;\n\t\t\t\tif (length !== Object.keys(obj2).length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tvar key = keys[length];\n\t\t\t\t\tif (!(obj2.hasOwnProperty(key)\n\t\t\t\t\t\t\t&& Base.equals(obj1[key], obj2[key])))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tread: function(list, start, options, amount) {\n\t\tif (this === Base) {\n\t\t\tvar value = this.peek(list, start);\n\t\t\tlist.__index++;\n\t\t\treturn value;\n\t\t}\n\t\tvar proto = this.prototype,\n\t\t\treadIndex = proto._readIndex,\n\t\t\tbegin = start || readIndex && list.__index || 0,\n\t\t\tlength = list.length,\n\t\t\tobj = list[begin];\n\t\tamount = amount || length - begin;\n\t\tif (obj instanceof this\n\t\t\t|| options && options.readNull && obj == null && amount <= 1) {\n\t\t\tif (readIndex)\n\t\t\t\tlist.__index = begin + 1;\n\t\t\treturn obj && options && options.clone ? obj.clone() : obj;\n\t\t}\n\t\tobj = Base.create(proto);\n\t\tif (readIndex)\n\t\t\tobj.__read = true;\n\t\tobj = obj.initialize.apply(obj, begin > 0 || begin + amount < length\n\t\t\t\t? Base.slice(list, begin, begin + amount)\n\t\t\t\t: list) || obj;\n\t\tif (readIndex) {\n\t\t\tlist.__index = begin + obj.__read;\n\t\t\tvar filtered = obj.__filtered;\n\t\t\tif (filtered) {\n\t\t\t\tlist.__filtered = filtered;\n\t\t\t\tobj.__filtered = undefined;\n\t\t\t}\n\t\t\tobj.__read = undefined;\n\t\t}\n\t\treturn obj;\n\t},\n\n\tpeek: function(list, start) {\n\t\treturn list[list.__index = start || list.__index || 0];\n\t},\n\n\tremain: function(list) {\n\t\treturn list.length - (list.__index || 0);\n\t},\n\n\treadList: function(list, start, options, amount) {\n\t\tvar res = [],\n\t\t\tentry,\n\t\t\tbegin = start || 0,\n\t\t\tend = amount ? begin + amount : list.length;\n\t\tfor (var i = begin; i < end; i++) {\n\t\t\tres.push(Array.isArray(entry = list[i])\n\t\t\t\t\t? this.read(entry, 0, options)\n\t\t\t\t\t: this.read(list, i, options, 1));\n\t\t}\n\t\treturn res;\n\t},\n\n\treadNamed: function(list, name, start, options, amount) {\n\t\tvar value = this.getNamed(list, name),\n\t\t\thasValue = value !== undefined;\n\t\tif (hasValue) {\n\t\t\tvar filtered = list.__filtered;\n\t\t\tif (!filtered) {\n\t\t\t\tvar source = this.getSource(list);\n\t\t\t\tfiltered = list.__filtered = Base.create(source);\n\t\t\t\tfiltered.__unfiltered = source;\n\t\t\t}\n\t\t\tfiltered[name] = undefined;\n\t\t}\n\t\treturn this.read(hasValue ? [value] : list, start, options, amount);\n\t},\n\n\treadSupported: function(list, dest) {\n\t\tvar source = this.getSource(list),\n\t\t\tthat = this,\n\t\t\tread = false;\n\t\tif (source) {\n\t\t\tObject.keys(source).forEach(function(key) {\n\t\t\t\tif (key in dest) {\n\t\t\t\t\tvar value = that.readNamed(list, key);\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\tdest[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tread = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn read;\n\t},\n\n\tgetSource: function(list) {\n\t\tvar source = list.__source;\n\t\tif (source === undefined) {\n\t\t\tvar arg = list.length === 1 && list[0];\n\t\t\tsource = list.__source = arg && Base.isPlainObject(arg)\n\t\t\t\t? arg : null;\n\t\t}\n\t\treturn source;\n\t},\n\n\tgetNamed: function(list, name) {\n\t\tvar source = this.getSource(list);\n\t\tif (source) {\n\t\t\treturn name ? source[name] : list.__filtered || source;\n\t\t}\n\t},\n\n\thasNamed: function(list, name) {\n\t\treturn !!this.getNamed(list, name);\n\t},\n\n\tfilter: function(dest, source, exclude, prioritize) {\n\t\tvar processed;\n\n\t\tfunction handleKey(key) {\n\t\t\tif (!(exclude && key in exclude) &&\n\t\t\t\t!(processed && key in processed)) {\n\t\t\t\tvar value = source[key];\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tdest[key] = value;\n\t\t\t}\n\t\t}\n\n\t\tif (prioritize) {\n\t\t\tvar keys = {};\n\t\t\tfor (var i = 0, key, l = prioritize.length; i < l; i++) {\n\t\t\t\tif ((key = prioritize[i]) in source) {\n\t\t\t\t\thandleKey(key);\n\t\t\t\t\tkeys[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprocessed = keys;\n\t\t}\n\n\t\tObject.keys(source.__unfiltered || source).forEach(handleKey);\n\t\treturn dest;\n\t},\n\n\tisPlainValue: function(obj, asString) {\n\t\treturn Base.isPlainObject(obj) || Array.isArray(obj)\n\t\t\t\t|| asString && typeof obj === 'string';\n\t},\n\n\tserialize: function(obj, options, compact, dictionary) {\n\t\toptions = options || {};\n\n\t\tvar isRoot = !dictionary,\n\t\t\tres;\n\t\tif (isRoot) {\n\t\t\toptions.formatter = new Formatter(options.precision);\n\t\t\tdictionary = {\n\t\t\t\tlength: 0,\n\t\t\t\tdefinitions: {},\n\t\t\t\treferences: {},\n\t\t\t\tadd: function(item, create) {\n\t\t\t\t\tvar id = '#' + item._id,\n\t\t\t\t\t\tref = this.references[id];\n\t\t\t\t\tif (!ref) {\n\t\t\t\t\t\tthis.length++;\n\t\t\t\t\t\tvar res = create.call(item),\n\t\t\t\t\t\t\tname = item._class;\n\t\t\t\t\t\tif (name && res[0] !== name)\n\t\t\t\t\t\t\tres.unshift(name);\n\t\t\t\t\t\tthis.definitions[id] = res;\n\t\t\t\t\t\tref = this.references[id] = [id];\n\t\t\t\t\t}\n\t\t\t\t\treturn ref;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tif (obj && obj._serialize) {\n\t\t\tres = obj._serialize(options, dictionary);\n\t\t\tvar name = obj._class;\n\t\t\tif (name && !obj._compactSerialize && (isRoot || !compact)\n\t\t\t\t\t&& res[0] !== name) {\n\t\t\t\tres.unshift(name);\n\t\t\t}\n\t\t} else if (Array.isArray(obj)) {\n\t\t\tres = [];\n\t\t\tfor (var i = 0, l = obj.length; i < l; i++)\n\t\t\t\tres[i] = Base.serialize(obj[i], options, compact, dictionary);\n\t\t} else if (Base.isPlainObject(obj)) {\n\t\t\tres = {};\n\t\t\tvar keys = Object.keys(obj);\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tres[key] = Base.serialize(obj[key], options, compact,\n\t\t\t\t\t\tdictionary);\n\t\t\t}\n\t\t} else if (typeof obj === 'number') {\n\t\t\tres = options.formatter.number(obj, options.precision);\n\t\t} else {\n\t\t\tres = obj;\n\t\t}\n\t\treturn isRoot && dictionary.length > 0\n\t\t\t\t? [['dictionary', dictionary.definitions], res]\n\t\t\t\t: res;\n\t},\n\n\tdeserialize: function(json, create, _data, _setDictionary, _isRoot) {\n\t\tvar res = json,\n\t\t\tisFirst = !_data,\n\t\t\thasDictionary = isFirst && json && json.length\n\t\t\t\t&& json[0][0] === 'dictionary';\n\t\t_data = _data || {};\n\t\tif (Array.isArray(json)) {\n\t\t\tvar type = json[0],\n\t\t\t\tisDictionary = type === 'dictionary';\n\t\t\tif (json.length == 1 && /^#/.test(type)) {\n\t\t\t\treturn _data.dictionary[type];\n\t\t\t}\n\t\t\ttype = Base.exports[type];\n\t\t\tres = [];\n\t\t\tfor (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n\t\t\t\tres.push(Base.deserialize(json[i], create, _data,\n\t\t\t\t\t\tisDictionary, hasDictionary));\n\t\t\t}\n\t\t\tif (type) {\n\t\t\t\tvar args = res;\n\t\t\t\tif (create) {\n\t\t\t\t\tres = create(type, args, isFirst || _isRoot);\n\t\t\t\t} else {\n\t\t\t\t\tres = new type(args);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Base.isPlainObject(json)) {\n\t\t\tres = {};\n\t\t\tif (_setDictionary)\n\t\t\t\t_data.dictionary = res;\n\t\t\tfor (var key in json)\n\t\t\t\tres[key] = Base.deserialize(json[key], create, _data);\n\t\t}\n\t\treturn hasDictionary ? res[1] : res;\n\t},\n\n\texportJSON: function(obj, options) {\n\t\tvar json = Base.serialize(obj, options);\n\t\treturn options && options.asString == false\n\t\t\t\t? json\n\t\t\t\t: JSON.stringify(json);\n\t},\n\n\timportJSON: function(json, target) {\n\t\treturn Base.deserialize(\n\t\t\t\ttypeof json === 'string' ? JSON.parse(json) : json,\n\t\t\t\tfunction(ctor, args, isRoot) {\n\t\t\t\t\tvar useTarget = isRoot && target\n\t\t\t\t\t\t\t&& target.constructor === ctor,\n\t\t\t\t\t\tobj = useTarget ? target\n\t\t\t\t\t\t\t: Base.create(ctor.prototype);\n\t\t\t\t\tif (args.length === 1 && obj instanceof Item\n\t\t\t\t\t\t\t&& (useTarget || !(obj instanceof Layer))) {\n\t\t\t\t\t\tvar arg = args[0];\n\t\t\t\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\t\t\t\targ.insert = false;\n\t\t\t\t\t\t\tif (useTarget) {\n\t\t\t\t\t\t\t\targs = args.concat([Item.INSERT]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t(useTarget ? obj.set : ctor).apply(obj, args);\n\t\t\t\t\tif (useTarget)\n\t\t\t\t\t\ttarget = null;\n\t\t\t\t\treturn obj;\n\t\t\t\t});\n\t},\n\n\tpush: function(list, items) {\n\t\tvar itemsLength = items.length;\n\t\tif (itemsLength < 4096) {\n\t\t\tlist.push.apply(list, items);\n\t\t} else {\n\t\t\tvar startLength = list.length;\n\t\t\tlist.length += itemsLength;\n\t\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\t\tlist[startLength + i] = items[i];\n\t\t\t}\n\t\t}\n\t\treturn list;\n\t},\n\n\tsplice: function(list, items, index, remove) {\n\t\tvar amount = items && items.length,\n\t\t\tappend = index === undefined;\n\t\tindex = append ? list.length : index;\n\t\tif (index > list.length)\n\t\t\tindex = list.length;\n\t\tfor (var i = 0; i < amount; i++)\n\t\t\titems[i]._index = index + i;\n\t\tif (append) {\n\t\t\tBase.push(list, items);\n\t\t\treturn [];\n\t\t} else {\n\t\t\tvar args = [index, remove];\n\t\t\tif (items)\n\t\t\t\tBase.push(args, items);\n\t\t\tvar removed = list.splice.apply(list, args);\n\t\t\tfor (var i = 0, l = removed.length; i < l; i++)\n\t\t\t\tremoved[i]._index = undefined;\n\t\t\tfor (var i = index + amount, l = list.length; i < l; i++)\n\t\t\t\tlist[i]._index = i;\n\t\t\treturn removed;\n\t\t}\n\t},\n\n\tcapitalize: function(str) {\n\t\treturn str.replace(/\\b[a-z]/g, function(match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n\t},\n\n\tcamelize: function(str) {\n\t\treturn str.replace(/-(.)/g, function(match, chr) {\n\t\t\treturn chr.toUpperCase();\n\t\t});\n\t},\n\n\thyphenate: function(str) {\n\t\treturn str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t}\n}});\n\nvar Emitter = {\n\ton: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.on(key, value);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tvar types = this._eventTypes,\n\t\t\t\tentry = types && types[type],\n\t\t\t\thandlers = this._callbacks = this._callbacks || {};\n\t\t\thandlers = handlers[type] = handlers[type] || [];\n\t\t\tif (handlers.indexOf(func) === -1) {\n\t\t\t\thandlers.push(func);\n\t\t\t\tif (entry && entry.install && handlers.length === 1)\n\t\t\t\t\tentry.install.call(this, type);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\toff: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.off(key, value);\n\t\t\t}, this);\n\t\t\treturn;\n\t\t}\n\t\tvar types = this._eventTypes,\n\t\t\tentry = types && types[type],\n\t\t\thandlers = this._callbacks && this._callbacks[type],\n\t\t\tindex;\n\t\tif (handlers) {\n\t\t\tif (!func || (index = handlers.indexOf(func)) !== -1\n\t\t\t\t\t&& handlers.length === 1) {\n\t\t\t\tif (entry && entry.uninstall)\n\t\t\t\t\tentry.uninstall.call(this, type);\n\t\t\t\tdelete this._callbacks[type];\n\t\t\t} else if (index !== -1) {\n\t\t\t\thandlers.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\tonce: function(type, func) {\n\t\treturn this.on(type, function handler() {\n\t\t\tfunc.apply(this, arguments);\n\t\t\tthis.off(type, handler);\n\t\t});\n\t},\n\n\temit: function(type, event) {\n\t\tvar handlers = this._callbacks && this._callbacks[type];\n\t\tif (!handlers)\n\t\t\treturn false;\n\t\tvar args = Base.slice(arguments, 1),\n\t\t\tsetTarget = event && event.target && !event.currentTarget;\n\t\thandlers = handlers.slice();\n\t\tif (setTarget)\n\t\t\tevent.currentTarget = this;\n\t\tfor (var i = 0, l = handlers.length; i < l; i++) {\n\t\t\tif (handlers[i].apply(this, args) == false) {\n\t\t\t\tif (event && event.stop)\n\t\t\t\t\tevent.stop();\n\t\t\t\tbreak;\n\t\t   }\n\t\t}\n\t\tif (setTarget)\n\t\t\tdelete event.currentTarget;\n\t\treturn true;\n\t},\n\n\tresponds: function(type) {\n\t\treturn !!(this._callbacks && this._callbacks[type]);\n\t},\n\n\tattach: '#on',\n\tdetach: '#off',\n\tfire: '#emit',\n\n\t_installEvents: function(install) {\n\t\tvar types = this._eventTypes,\n\t\t\thandlers = this._callbacks,\n\t\t\tkey = install ? 'install' : 'uninstall';\n\t\tif (types) {\n\t\t\tfor (var type in handlers) {\n\t\t\t\tif (handlers[type].length > 0) {\n\t\t\t\t\tvar entry = types[type],\n\t\t\t\t\t\tfunc = entry && entry[key];\n\t\t\t\t\tif (func)\n\t\t\t\t\t\tfunc.call(this, type);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstatics: {\n\t\tinject: function inject(src) {\n\t\t\tvar events = src._events;\n\t\t\tif (events) {\n\t\t\t\tvar types = {};\n\t\t\t\tBase.each(events, function(entry, key) {\n\t\t\t\t\tvar isString = typeof entry === 'string',\n\t\t\t\t\t\tname = isString ? entry : key,\n\t\t\t\t\t\tpart = Base.capitalize(name),\n\t\t\t\t\t\ttype = name.substring(2).toLowerCase();\n\t\t\t\t\ttypes[type] = isString ? {} : entry;\n\t\t\t\t\tname = '_' + name;\n\t\t\t\t\tsrc['get' + part] = function() {\n\t\t\t\t\t\treturn this[name];\n\t\t\t\t\t};\n\t\t\t\t\tsrc['set' + part] = function(func) {\n\t\t\t\t\t\tvar prev = this[name];\n\t\t\t\t\t\tif (prev)\n\t\t\t\t\t\t\tthis.off(type, prev);\n\t\t\t\t\t\tif (func)\n\t\t\t\t\t\t\tthis.on(type, func);\n\t\t\t\t\t\tthis[name] = func;\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsrc._eventTypes = types;\n\t\t\t}\n\t\t\treturn inject.base.apply(this, arguments);\n\t\t}\n\t}\n};\n\nvar PaperScope = Base.extend({\n\t_class: 'PaperScope',\n\n\tinitialize: function PaperScope() {\n\t\tpaper = this;\n\t\tthis.settings = new Base({\n\t\t\tapplyMatrix: true,\n\t\t\tinsertItems: true,\n\t\t\thandleSize: 4,\n\t\t\thitTolerance: 0\n\t\t});\n\t\tthis.project = null;\n\t\tthis.projects = [];\n\t\tthis.tools = [];\n\t\tthis._id = PaperScope._id++;\n\t\tPaperScope._scopes[this._id] = this;\n\t\tvar proto = PaperScope.prototype;\n\t\tif (!this.support) {\n\t\t\tvar ctx = CanvasProvider.getContext(1, 1) || {};\n\t\t\tproto.support = {\n\t\t\t\tnativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n\t\t\t\tnativeBlendModes: BlendMode.nativeModes\n\t\t\t};\n\t\t\tCanvasProvider.release(ctx);\n\t\t}\n\t\tif (!this.agent) {\n\t\t\tvar user = self.navigator.userAgent.toLowerCase(),\n\t\t\t\tos = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user)||[])[0],\n\t\t\t\tplatform = os === 'darwin' ? 'mac' : os,\n\t\t\t\tagent = proto.agent = proto.browser = { platform: platform };\n\t\t\tif (platform)\n\t\t\t\tagent[platform] = true;\n\t\t\tuser.replace(\n\t\t\t\t/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g,\n\t\t\t\tfunction(match, n, v1, v2, rv) {\n\t\t\t\t\tif (!agent.chrome) {\n\t\t\t\t\t\tvar v = n === 'opera' ? v2 :\n\t\t\t\t\t\t\t\t/^(node|trident)$/.test(n) ? rv : v1;\n\t\t\t\t\t\tagent.version = v;\n\t\t\t\t\t\tagent.versionNumber = parseFloat(v);\n\t\t\t\t\t\tn = { trident: 'msie', jsdom: 'node' }[n] || n;\n\t\t\t\t\t\tagent.name = n;\n\t\t\t\t\t\tagent[n] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (agent.chrome)\n\t\t\t\tdelete agent.webkit;\n\t\t\tif (agent.atom)\n\t\t\t\tdelete agent.chrome;\n\t\t}\n\t},\n\n\tversion: \"0.12.17\",\n\n\tgetView: function() {\n\t\tvar project = this.project;\n\t\treturn project && project._view;\n\t},\n\n\tgetPaper: function() {\n\t\treturn this;\n\t},\n\n\texecute: function(code, options) {\n\t\t\tvar exports = paper.PaperScript.execute(code, this, options);\n\t\t\tView.updateFocus();\n\t\t\treturn exports;\n\t},\n\n\tinstall: function(scope) {\n\t\tvar that = this;\n\t\tBase.each(['project', 'view', 'tool'], function(key) {\n\t\t\tBase.define(scope, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\treturn that[key];\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tfor (var key in this)\n\t\t\tif (!/^_/.test(key) && this[key])\n\t\t\t\tscope[key] = this[key];\n\t},\n\n\tsetup: function(element) {\n\t\tpaper = this;\n\t\tthis.project = new Project(element);\n\t\treturn this;\n\t},\n\n\tcreateCanvas: function(width, height) {\n\t\treturn CanvasProvider.getCanvas(width, height);\n\t},\n\n\tactivate: function() {\n\t\tpaper = this;\n\t},\n\n\tclear: function() {\n\t\tvar projects = this.projects,\n\t\t\ttools = this.tools;\n\t\tfor (var i = projects.length - 1; i >= 0; i--)\n\t\t\tprojects[i].remove();\n\t\tfor (var i = tools.length - 1; i >= 0; i--)\n\t\t\ttools[i].remove();\n\t},\n\n\tremove: function() {\n\t\tthis.clear();\n\t\tdelete PaperScope._scopes[this._id];\n\t},\n\n\tstatics: new function() {\n\t\tfunction handleAttribute(name) {\n\t\t\tname += 'Attribute';\n\t\t\treturn function(el, attr) {\n\t\t\t\treturn el[name](attr) || el[name]('data-paper-' + attr);\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t_scopes: {},\n\t\t\t_id: 0,\n\n\t\t\tget: function(id) {\n\t\t\t\treturn this._scopes[id] || null;\n\t\t\t},\n\n\t\t\tgetAttribute: handleAttribute('get'),\n\t\t\thasAttribute: handleAttribute('has')\n\t\t};\n\t}\n});\n\nvar PaperScopeItem = Base.extend(Emitter, {\n\n\tinitialize: function(activate) {\n\t\tthis._scope = paper;\n\t\tthis._index = this._scope[this._list].push(this) - 1;\n\t\tif (activate || !this._scope[this._reference])\n\t\t\tthis.activate();\n\t},\n\n\tactivate: function() {\n\t\tif (!this._scope)\n\t\t\treturn false;\n\t\tvar prev = this._scope[this._reference];\n\t\tif (prev && prev !== this)\n\t\t\tprev.emit('deactivate');\n\t\tthis._scope[this._reference] = this;\n\t\tthis.emit('activate', prev);\n\t\treturn true;\n\t},\n\n\tisActive: function() {\n\t\treturn this._scope[this._reference] === this;\n\t},\n\n\tremove: function() {\n\t\tif (this._index == null)\n\t\t\treturn false;\n\t\tBase.splice(this._scope[this._list], null, this._index, 1);\n\t\tif (this._scope[this._reference] == this)\n\t\t\tthis._scope[this._reference] = null;\n\t\tthis._scope = null;\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._scope.getView();\n\t}\n});\n\nvar CollisionDetection = {\n\tfindItemBoundsCollisions: function(items1, items2, tolerance) {\n\t\tfunction getBounds(items) {\n\t\t\tvar bounds = new Array(items.length);\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar rect = items[i].getBounds();\n\t\t\t\tbounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(items1),\n\t\t\tbounds2 = !items2 || items2 === items1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(items2);\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindCurveBoundsCollisions: function(curves1, curves2, tolerance, bothAxis) {\n\t\tfunction getBounds(curves) {\n\t\t\tvar min = Math.min,\n\t\t\t\tmax = Math.max,\n\t\t\t\tbounds = new Array(curves.length);\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar v = curves[i];\n\t\t\t\tbounds[i] = [\n\t\t\t\t\tmin(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmin(v[1], v[3], v[5], v[7]),\n\t\t\t\t\tmax(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmax(v[1], v[3], v[5], v[7])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(curves1),\n\t\t\tbounds2 = !curves2 || curves2 === curves1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(curves2);\n\t\tif (bothAxis) {\n\t\t\tvar hor = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, false, true),\n\t\t\t\tver = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, true, true),\n\t\t\t\tlist = [];\n\t\t\tfor (var i = 0, l = hor.length; i < l; i++) {\n\t\t\t\tlist[i] = { hor: hor[i], ver: ver[i] };\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindBoundsCollisions: function(boundsA, boundsB, tolerance,\n\t\tsweepVertical, onlySweepAxisCollisions) {\n\t\tvar self = !boundsB || boundsA === boundsB,\n\t\t\tallBounds = self ? boundsA : boundsA.concat(boundsB),\n\t\t\tlengthA = boundsA.length,\n\t\t\tlengthAll = allBounds.length;\n\n\t\tfunction binarySearch(indices, coord, value) {\n\t\t\tvar lo = 0,\n\t\t\t\thi = indices.length;\n\t\t\twhile (lo < hi) {\n\t\t\t\tvar mid = (hi + lo) >>> 1;\n\t\t\t\tif (allBounds[indices[mid]][coord] < value) {\n\t\t\t\t\tlo = mid + 1;\n\t\t\t\t} else {\n\t\t\t\t\thi = mid;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lo - 1;\n\t\t}\n\n\t\tvar pri0 = sweepVertical ? 1 : 0,\n\t\t\tpri1 = pri0 + 2,\n\t\t\tsec0 = sweepVertical ? 0 : 1,\n\t\t\tsec1 = sec0 + 2;\n\t\tvar allIndicesByPri0 = new Array(lengthAll);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tallIndicesByPri0[i] = i;\n\t\t}\n\t\tallIndicesByPri0.sort(function(i1, i2) {\n\t\t\treturn allBounds[i1][pri0] - allBounds[i2][pri0];\n\t\t});\n\t\tvar activeIndicesByPri1 = [],\n\t\t\tallCollisions = new Array(lengthA);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tvar curIndex = allIndicesByPri0[i],\n\t\t\t\tcurBounds = allBounds[curIndex],\n\t\t\t\torigIndex = self ? curIndex : curIndex - lengthA,\n\t\t\t\tisCurrentA = curIndex < lengthA,\n\t\t\t\tisCurrentB = self || !isCurrentA,\n\t\t\t\tcurCollisions = isCurrentA ? [] : null;\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar pruneCount = binarySearch(activeIndicesByPri1, pri1,\n\t\t\t\t\t\tcurBounds[pri0] - tolerance) + 1;\n\t\t\t\tactiveIndicesByPri1.splice(0, pruneCount);\n\t\t\t\tif (self && onlySweepAxisCollisions) {\n\t\t\t\t\tcurCollisions = curCollisions.concat(activeIndicesByPri1);\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j];\n\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar curSec1 = curBounds[sec1],\n\t\t\t\t\t\tcurSec0 = curBounds[sec0];\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j],\n\t\t\t\t\t\t\tactiveBounds = allBounds[activeIndex],\n\t\t\t\t\t\t\tisActiveA = activeIndex < lengthA,\n\t\t\t\t\t\t\tisActiveB = self || activeIndex >= lengthA;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tonlySweepAxisCollisions ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tisCurrentA && isActiveB ||\n\t\t\t\t\t\t\t\tisCurrentB && isActiveA\n\t\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t\tcurSec1 >= activeBounds[sec0] - tolerance &&\n\t\t\t\t\t\t\t\tcurSec0 <= activeBounds[sec1] + tolerance\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (isCurrentA && isActiveB) {\n\t\t\t\t\t\t\t\tcurCollisions.push(\n\t\t\t\t\t\t\t\t\tself ? activeIndex : activeIndex - lengthA);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isCurrentB && isActiveA) {\n\t\t\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isCurrentA) {\n\t\t\t\tif (boundsA === boundsB) {\n\t\t\t\t\tcurCollisions.push(curIndex);\n\t\t\t\t}\n\t\t\t\tallCollisions[curIndex] = curCollisions;\n\t\t\t}\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar curPri1 = curBounds[pri1],\n\t\t\t\t\tindex = binarySearch(activeIndicesByPri1, pri1, curPri1);\n\t\t\t\tactiveIndicesByPri1.splice(index + 1, 0, curIndex);\n\t\t\t} else {\n\t\t\t\tactiveIndicesByPri1.push(curIndex);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < allCollisions.length; i++) {\n\t\t\tvar collisions = allCollisions[i];\n\t\t\tif (collisions) {\n\t\t\t\tcollisions.sort(function(i1, i2) { return i1 - i2; });\n\t\t\t}\n\t\t}\n\t\treturn allCollisions;\n\t}\n};\n\nvar Formatter = Base.extend({\n\tinitialize: function(precision) {\n\t\tthis.precision = Base.pick(precision, 5);\n\t\tthis.multiplier = Math.pow(10, this.precision);\n\t},\n\n\tnumber: function(val) {\n\t\treturn this.precision < 16\n\t\t\t\t? Math.round(val * this.multiplier) / this.multiplier : val;\n\t},\n\n\tpair: function(val1, val2, separator) {\n\t\treturn this.number(val1) + (separator || ',') + this.number(val2);\n\t},\n\n\tpoint: function(val, separator) {\n\t\treturn this.number(val.x) + (separator || ',') + this.number(val.y);\n\t},\n\n\tsize: function(val, separator) {\n\t\treturn this.number(val.width) + (separator || ',')\n\t\t\t\t+ this.number(val.height);\n\t},\n\n\trectangle: function(val, separator) {\n\t\treturn this.point(val, separator) + (separator || ',')\n\t\t\t\t+ this.size(val, separator);\n\t}\n});\n\nFormatter.instance = new Formatter();\n\nvar Numerical = new function() {\n\n\tvar abscissas = [\n\t\t[  0.5773502691896257645091488],\n\t\t[0,0.7745966692414833770358531],\n\t\t[  0.3399810435848562648026658,0.8611363115940525752239465],\n\t\t[0,0.5384693101056830910363144,0.9061798459386639927976269],\n\t\t[  0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],\n\t\t[0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],\n\t\t[  0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],\n\t\t[0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],\n\t\t[  0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],\n\t\t[0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],\n\t\t[  0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],\n\t\t[0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],\n\t\t[  0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],\n\t\t[0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],\n\t\t[  0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]\n\t];\n\n\tvar weights = [\n\t\t[1],\n\t\t[0.8888888888888888888888889,0.5555555555555555555555556],\n\t\t[0.6521451548625461426269361,0.3478548451374538573730639],\n\t\t[0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],\n\t\t[0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],\n\t\t[0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],\n\t\t[0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],\n\t\t[0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],\n\t\t[0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],\n\t\t[0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],\n\t\t[0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],\n\t\t[0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],\n\t\t[0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],\n\t\t[0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],\n\t\t[0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]\n\t];\n\n\tvar abs = Math.abs,\n\t\tsqrt = Math.sqrt,\n\t\tpow = Math.pow,\n\t\tlog2 = Math.log2 || function(x) {\n\t\t\treturn Math.log(x) * Math.LOG2E;\n\t\t},\n\t\tEPSILON = 1e-12,\n\t\tMACHINE_EPSILON = 1.12e-16;\n\n\tfunction clamp(value, min, max) {\n\t\treturn value < min ? min : value > max ? max : value;\n\t}\n\n\tfunction getDiscriminant(a, b, c) {\n\t\tfunction split(v) {\n\t\t\tvar x = v * 134217729,\n\t\t\t\ty = v - x,\n\t\t\t\thi = y + x,\n\t\t\t\tlo = v - hi;\n\t\t\treturn [hi, lo];\n\t\t}\n\n\t\tvar D = b * b - a * c,\n\t\t\tE = b * b + a * c;\n\t\tif (abs(D) * 3 < E) {\n\t\t\tvar ad = split(a),\n\t\t\t\tbd = split(b),\n\t\t\t\tcd = split(c),\n\t\t\t\tp = b * b,\n\t\t\t\tdp = (bd[0] * bd[0] - p + 2 * bd[0] * bd[1]) + bd[1] * bd[1],\n\t\t\t\tq = a * c,\n\t\t\t\tdq = (ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0])\n\t\t\t\t\t\t+ ad[1] * cd[1];\n\t\t\tD = (p - q) + (dp - dq);\n\t\t}\n\t\treturn D;\n\t}\n\n\tfunction getNormalizationFactor() {\n\t\tvar norm = Math.max.apply(Math, arguments);\n\t\treturn norm && (norm < 1e-8 || norm > 1e8)\n\t\t\t\t? pow(2, -Math.round(log2(norm)))\n\t\t\t\t: 0;\n\t}\n\n\treturn {\n\t\tEPSILON: EPSILON,\n\t\tMACHINE_EPSILON: MACHINE_EPSILON,\n\t\tCURVETIME_EPSILON: 1e-8,\n\t\tGEOMETRIC_EPSILON: 1e-7,\n\t\tTRIGONOMETRIC_EPSILON: 1e-8,\n\t\tANGULAR_EPSILON: 1e-5,\n\t\tKAPPA: 4 * (sqrt(2) - 1) / 3,\n\n\t\tisZero: function(val) {\n\t\t\treturn val >= -EPSILON && val <= EPSILON;\n\t\t},\n\n\t\tisMachineZero: function(val) {\n\t\t\treturn val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n\t\t},\n\n\t\tclamp: clamp,\n\n\t\tintegrate: function(f, a, b, n) {\n\t\t\tvar x = abscissas[n - 2],\n\t\t\t\tw = weights[n - 2],\n\t\t\t\tA = (b - a) * 0.5,\n\t\t\t\tB = A + a,\n\t\t\t\ti = 0,\n\t\t\t\tm = (n + 1) >> 1,\n\t\t\t\tsum = n & 1 ? w[i++] * f(B) : 0;\n\t\t\twhile (i < m) {\n\t\t\t\tvar Ax = A * x[i];\n\t\t\t\tsum += w[i++] * (f(B + Ax) + f(B - Ax));\n\t\t\t}\n\t\t\treturn A * sum;\n\t\t},\n\n\t\tfindRoot: function(f, df, x, a, b, n, tolerance) {\n\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\tvar fx = f(x),\n\t\t\t\t\tdx = fx / df(x),\n\t\t\t\t\tnx = x - dx;\n\t\t\t\tif (abs(dx) < tolerance) {\n\t\t\t\t\tx = nx;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (fx > 0) {\n\t\t\t\t\tb = x;\n\t\t\t\t\tx = nx <= a ? (a + b) * 0.5 : nx;\n\t\t\t\t} else {\n\t\t\t\t\ta = x;\n\t\t\t\t\tx = nx >= b ? (a + b) * 0.5 : nx;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clamp(x, a, b);\n\t\t},\n\n\t\tsolveQuadratic: function(a, b, c, roots, min, max) {\n\t\t\tvar x1, x2 = Infinity;\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\tif (abs(b) < EPSILON)\n\t\t\t\t\treturn abs(c) < EPSILON ? -1 : 0;\n\t\t\t\tx1 = -c / b;\n\t\t\t} else {\n\t\t\t\tb *= -0.5;\n\t\t\t\tvar D = getDiscriminant(a, b, c);\n\t\t\t\tif (D && abs(D) < MACHINE_EPSILON) {\n\t\t\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\t\t\t\t\tif (f) {\n\t\t\t\t\t\ta *= f;\n\t\t\t\t\t\tb *= f;\n\t\t\t\t\t\tc *= f;\n\t\t\t\t\t\tD = getDiscriminant(a, b, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (D >= -MACHINE_EPSILON) {\n\t\t\t\t\tvar Q = D < 0 ? 0 : sqrt(D),\n\t\t\t\t\t\tR = b + (b < 0 ? -Q : Q);\n\t\t\t\t\tif (R === 0) {\n\t\t\t\t\t\tx1 = c / a;\n\t\t\t\t\t\tx2 = -x1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx1 = R / a;\n\t\t\t\t\t\tx2 = c / R;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = 0,\n\t\t\t\tboundless = min == null,\n\t\t\t\tminB = min - EPSILON,\n\t\t\t\tmaxB = max + EPSILON;\n\t\t\tif (isFinite(x1) && (boundless || x1 > minB && x1 < maxB))\n\t\t\t\troots[count++] = boundless ? x1 : clamp(x1, min, max);\n\t\t\tif (x2 !== x1\n\t\t\t\t\t&& isFinite(x2) && (boundless || x2 > minB && x2 < maxB))\n\t\t\t\troots[count++] = boundless ? x2 : clamp(x2, min, max);\n\t\t\treturn count;\n\t\t},\n\n\t\tsolveCubic: function(a, b, c, d, roots, min, max) {\n\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n\t\t\t\tx, b1, c2, qd, q;\n\t\t\tif (f) {\n\t\t\t\ta *= f;\n\t\t\t\tb *= f;\n\t\t\t\tc *= f;\n\t\t\t\td *= f;\n\t\t\t}\n\n\t\t\tfunction evaluate(x0) {\n\t\t\t\tx = x0;\n\t\t\t\tvar tmp = a * x;\n\t\t\t\tb1 = tmp + b;\n\t\t\t\tc2 = b1 * x + c;\n\t\t\t\tqd = (tmp + b1) * x + c2;\n\t\t\t\tq = c2 * x + d;\n\t\t\t}\n\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\ta = b;\n\t\t\t\tb1 = c;\n\t\t\t\tc2 = d;\n\t\t\t\tx = Infinity;\n\t\t\t} else if (abs(d) < EPSILON) {\n\t\t\t\tb1 = b;\n\t\t\t\tc2 = c;\n\t\t\t\tx = 0;\n\t\t\t} else {\n\t\t\t\tevaluate(-(b / a) / 3);\n\t\t\t\tvar t = q / a,\n\t\t\t\t\tr = pow(abs(t), 1/3),\n\t\t\t\t\ts = t < 0 ? -1 : 1,\n\t\t\t\t\ttd = -qd / a,\n\t\t\t\t\trd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n\t\t\t\t\tx0 = x - s * rd;\n\t\t\t\tif (x0 !== x) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tevaluate(x0);\n\t\t\t\t\t\tx0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n\t\t\t\t\t} while (s * x0 > s * x);\n\t\t\t\t\tif (abs(a) * x * x > abs(d / x)) {\n\t\t\t\t\t\tc2 = -d / x;\n\t\t\t\t\t\tb1 = (c2 - c) / x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n\t\t\t\tboundless = min == null;\n\t\t\tif (isFinite(x) && (count === 0\n\t\t\t\t\t|| count > 0 && x !== roots[0] && x !== roots[1])\n\t\t\t\t\t&& (boundless || x > min - EPSILON && x < max + EPSILON))\n\t\t\t\troots[count++] = boundless ? x : clamp(x, min, max);\n\t\t\treturn count;\n\t\t}\n\t};\n};\n\nvar UID = {\n\t_id: 1,\n\t_pools: {},\n\n\tget: function(name) {\n\t\tif (name) {\n\t\t\tvar pool = this._pools[name];\n\t\t\tif (!pool)\n\t\t\t\tpool = this._pools[name] = { _id: 1 };\n\t\t\treturn pool._id++;\n\t\t} else {\n\t\t\treturn this._id++;\n\t\t}\n\t}\n};\n\nvar Point = Base.extend({\n\t_class: 'Point',\n\t_readIndex: true,\n\n\tinitialize: function Point(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasY = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasY ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasY ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('angle' in obj) {\n\t\t\t\tthis._set(obj.length || 0, 0);\n\t\t\t\tthis.setAngle(obj.angle || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t},\n\n\tequals: function(point) {\n\t\treturn this === point || point\n\t\t\t\t&& (this.x === point.x && this.y === point.y\n\t\t\t\t\t|| Array.isArray(point)\n\t\t\t\t\t\t&& this.x === point[0] && this.y === point[1])\n\t\t\t\t|| false;\n\t},\n\n\tclone: function() {\n\t\treturn new Point(this.x, this.y);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x), f.number(this.y)];\n\t},\n\n\tgetLength: function() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t},\n\n\tsetLength: function(length) {\n\t\tif (this.isZero()) {\n\t\t\tvar angle = this._angle || 0;\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t} else {\n\t\t\tvar scale = length / this.getLength();\n\t\t\tif (Numerical.isZero(scale))\n\t\t\t\tthis.getAngle();\n\t\t\tthis._set(\n\t\t\t\tthis.x * scale,\n\t\t\t\tthis.y * scale\n\t\t\t);\n\t\t}\n\t},\n\tgetAngle: function() {\n\t\treturn this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n\t},\n\n\tsetAngle: function(angle) {\n\t\tthis.setAngleInRadians.call(this, angle * Math.PI / 180);\n\t},\n\n\tgetAngleInDegrees: '#getAngle',\n\tsetAngleInDegrees: '#setAngle',\n\n\tgetAngleInRadians: function() {\n\t\tif (!arguments.length) {\n\t\t\treturn this.isZero()\n\t\t\t\t\t? this._angle || 0\n\t\t\t\t\t: this._angle = Math.atan2(this.y, this.x);\n\t\t} else {\n\t\t\tvar point = Point.read(arguments),\n\t\t\t\tdiv = this.getLength() * point.getLength();\n\t\t\tif (Numerical.isZero(div)) {\n\t\t\t\treturn NaN;\n\t\t\t} else {\n\t\t\t\tvar a = this.dot(point) / div;\n\t\t\t\treturn Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n\t\t\t}\n\t\t}\n\t},\n\n\tsetAngleInRadians: function(angle) {\n\t\tthis._angle = angle;\n\t\tif (!this.isZero()) {\n\t\t\tvar length = this.getLength();\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t}\n\t},\n\n\tgetQuadrant: function() {\n\t\treturn this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n\t}\n}, {\n\tbeans: false,\n\n\tgetDirectedAngle: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n\t},\n\n\tgetDistance: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tx = point.x - this.x,\n\t\t\ty = point.y - this.y,\n\t\t\td = x * x + y * y,\n\t\t\tsquared = Base.read(args);\n\t\treturn squared ? d : Math.sqrt(d);\n\t},\n\n\tnormalize: function(length) {\n\t\tif (length === undefined)\n\t\t\tlength = 1;\n\t\tvar current = this.getLength(),\n\t\t\tscale = current !== 0 ? length / current : 0,\n\t\t\tpoint = new Point(this.x * scale, this.y * scale);\n\t\tif (scale >= 0)\n\t\t\tpoint._angle = this._angle;\n\t\treturn point;\n\t},\n\n\trotate: function(angle, center) {\n\t\tif (angle === 0)\n\t\t\treturn this.clone();\n\t\tangle = angle * Math.PI / 180;\n\t\tvar point = center ? this.subtract(center) : this,\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle);\n\t\tpoint = new Point(\n\t\t\tpoint.x * cos - point.y * sin,\n\t\t\tpoint.x * sin + point.y * cos\n\t\t);\n\t\treturn center ? point.add(center) : point;\n\t},\n\n\ttransform: function(matrix) {\n\t\treturn matrix ? matrix._transformPoint(this) : this;\n\t},\n\n\tadd: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x + point.x, this.y + point.y);\n\t},\n\n\tsubtract: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x - point.x, this.y - point.y);\n\t},\n\n\tmultiply: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x * point.x, this.y * point.y);\n\t},\n\n\tdivide: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x / point.x, this.y / point.y);\n\t},\n\n\tmodulo: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x % point.x, this.y % point.y);\n\t},\n\n\tnegate: function() {\n\t\treturn new Point(-this.x, -this.y);\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this);\n\t},\n\n\tisClose: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\ttolerance = Base.read(args);\n\t\treturn this.getDistance(point) <= tolerance;\n\t},\n\n\tisCollinear: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isCollinear(this.x, this.y, point.x, point.y);\n\t},\n\n\tisColinear: '#isCollinear',\n\n\tisOrthogonal: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isOrthogonal(this.x, this.y, point.x, point.y);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.x) && isZero(this.y);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.x) || isNaN(this.y);\n\t},\n\n\tisInQuadrant: function(q) {\n\t\treturn this.x * (q > 1 && q < 4 ? -1 : 1) >= 0\n\t\t\t&& this.y * (q > 2 ? -1 : 1) >= 0;\n\t},\n\n\tdot: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.x + this.y * point.y;\n\t},\n\n\tcross: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.y - this.y * point.x;\n\t},\n\n\tproject: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tscale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n\t\treturn new Point(\n\t\t\tpoint.x * scale,\n\t\t\tpoint.y * scale\n\t\t);\n\t},\n\n\tstatics: {\n\t\tmin: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.min(point1.x, point2.x),\n\t\t\t\tMath.min(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\tmax: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.max(point1.x, point2.x),\n\t\t\t\tMath.max(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Point(Math.random(), Math.random());\n\t\t},\n\n\t\tisCollinear: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * y2 - y1 * x2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t},\n\n\t\tisOrthogonal: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * x2 + y1 * y2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Point(op(this.x), op(this.y));\n\t};\n}, {}));\n\nvar LinkedPoint = Point.extend({\n\tinitialize: function Point(x, y, owner, setter) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\treturn this._setter === 'setPosition' ? 4 : 0;\n\t}\n});\n\nvar Size = Base.extend({\n\t_class: 'Size',\n\t_readIndex: true,\n\n\tinitialize: function Size(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasHeight = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasHeight ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasHeight ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(width, height) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tequals: function(size) {\n\t\treturn size === this || size && (this.width === size.width\n\t\t\t\t&& this.height === size.height\n\t\t\t\t|| Array.isArray(size) && this.width === size[0]\n\t\t\t\t\t&& this.height === size[1]) || false;\n\t},\n\n\tclone: function() {\n\t\treturn new Size(this.width, this.height);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tadd: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width + size.width, this.height + size.height);\n\t},\n\n\tsubtract: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width - size.width, this.height - size.height);\n\t},\n\n\tmultiply: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width * size.width, this.height * size.height);\n\t},\n\n\tdivide: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width / size.width, this.height / size.height);\n\t},\n\n\tmodulo: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width % size.width, this.height % size.height);\n\t},\n\n\tnegate: function() {\n\t\treturn new Size(-this.width, -this.height);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.width) && isZero(this.height);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.width) || isNaN(this.height);\n\t},\n\n\tstatics: {\n\t\tmin: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.min(size1.width, size2.width),\n\t\t\t\tMath.min(size1.height, size2.height));\n\t\t},\n\n\t\tmax: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.max(size1.width, size2.width),\n\t\t\t\tMath.max(size1.height, size2.height));\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Size(Math.random(), Math.random());\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Size(op(this.width), op(this.height));\n\t};\n}, {}));\n\nvar LinkedSize = Size.extend({\n\tinitialize: function Size(width, height, owner, setter) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(width, height, _dontNotify) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._width;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis._width = width;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._height;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis._height = height;\n\t\tthis._owner[this._setter](this);\n\t}\n});\n\nvar Rectangle = Base.extend({\n\t_class: 'Rectangle',\n\t_readIndex: true,\n\tbeans: true,\n\n\tinitialize: function Rectangle(arg0, arg1, arg2, arg3) {\n\t\tvar args = arguments,\n\t\t\ttype = typeof arg0,\n\t\t\tread;\n\t\tif (type === 'number') {\n\t\t\tthis._set(arg0, arg1, arg2, arg3);\n\t\t\tread = 4;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0, 0, 0);\n\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else if (args.length === 1) {\n\t\t\tif (Array.isArray(arg0)) {\n\t\t\t\tthis._set.apply(this, arg0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.x !== undefined || arg0.width !== undefined) {\n\t\t\t\tthis._set(arg0.x || 0, arg0.y || 0,\n\t\t\t\t\t\targ0.width || 0, arg0.height || 0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.from === undefined && arg0.to === undefined) {\n\t\t\t\tthis._set(0, 0, 0, 0);\n\t\t\t\tif (Base.readSupported(args, this)) {\n\t\t\t\t\tread = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (read === undefined) {\n\t\t\tvar frm = Point.readNamed(args, 'from'),\n\t\t\t\tnext = Base.peek(args),\n\t\t\t\tx = frm.x,\n\t\t\t\ty = frm.y,\n\t\t\t\twidth,\n\t\t\t\theight;\n\t\t\tif (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n\t\t\t\tvar to = Point.readNamed(args, 'to');\n\t\t\t\twidth = to.x - x;\n\t\t\t\theight = to.y - y;\n\t\t\t\tif (width < 0) {\n\t\t\t\t\tx = to.x;\n\t\t\t\t\twidth = -width;\n\t\t\t\t}\n\t\t\t\tif (height < 0) {\n\t\t\t\t\ty = to.y;\n\t\t\t\t\theight = -height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar size = Size.read(args);\n\t\t\t\twidth = size.width;\n\t\t\t\theight = size.height;\n\t\t\t}\n\t\t\tthis._set(x, y, width, height);\n\t\t\tread = args.__index;\n\t\t}\n\t\tvar filtered = args.__filtered;\n\t\tif (filtered)\n\t\t\tthis.__filtered = filtered;\n\t\tif (this.__read)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tclone: function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t},\n\n\tequals: function(rect) {\n\t\tvar rt = Base.isPlainValue(rect)\n\t\t\t\t? Rectangle.read(arguments)\n\t\t\t\t: rect;\n\t\treturn rt === this\n\t\t\t\t|| rt && this.x === rt.x && this.y === rt.y\n\t\t\t\t\t&& this.width === rt.width && this.height === rt.height\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x)\n\t\t\t\t+ ', y: ' + f.number(this.y)\n\t\t\t\t+ ', width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height)\n\t\t\t\t+ ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x),\n\t\t\t\tf.number(this.y),\n\t\t\t\tf.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tgetPoint: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.x, this.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t},\n\n\tgetSize: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Size : LinkedSize;\n\t\treturn new ctor(this.width, this.height, this, 'setSize');\n\t},\n\n\t_fw: 1,\n\t_fh: 1,\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tsx = this._sx,\n\t\t\tsy = this._sy,\n\t\t\tw = size.width,\n\t\t\th = size.height;\n\t\tif (sx) {\n\t\t\tthis.x += (this.width - w) * sx;\n\t\t}\n\t\tif (sy) {\n\t\t\tthis.y += (this.height - h) * sy;\n\t\t}\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis._fw = this._fh = 1;\n\t},\n\n\tgetLeft: function() {\n\t\treturn this.x;\n\t},\n\n\tsetLeft: function(left) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = left - this.x;\n\t\t\tthis.width -= this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = left;\n\t\tthis._sx = this._fw = 0;\n\t},\n\n\tgetTop: function() {\n\t\treturn this.y;\n\t},\n\n\tsetTop: function(top) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = top - this.y;\n\t\t\tthis.height -= this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = top;\n\t\tthis._sy = this._fh = 0;\n\t},\n\n\tgetRight: function() {\n\t\treturn this.x + this.width;\n\t},\n\n\tsetRight: function(right) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = right - this.x;\n\t\t\tthis.width = this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = right - this.width;\n\t\tthis._sx = 1;\n\t\tthis._fw = 0;\n\t},\n\n\tgetBottom: function() {\n\t\treturn this.y + this.height;\n\t},\n\n\tsetBottom: function(bottom) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = bottom - this.y;\n\t\t\tthis.height = this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = bottom - this.height;\n\t\tthis._sy = 1;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenterX: function() {\n\t\treturn this.x + this.width / 2;\n\t},\n\n\tsetCenterX: function(x) {\n\t\tif (this._fw || this._sx === 0.5) {\n\t\t\tthis.x = x - this.width / 2;\n\t\t} else {\n\t\t\tif (this._sx) {\n\t\t\t\tthis.x += (x - this.x) * 2 * this._sx;\n\t\t\t}\n\t\t\tthis.width = (x - this.x) * 2;\n\t\t}\n\t\tthis._sx = 0.5;\n\t\tthis._fw = 0;\n\t},\n\n\tgetCenterY: function() {\n\t\treturn this.y + this.height / 2;\n\t},\n\n\tsetCenterY: function(y) {\n\t\tif (this._fh || this._sy === 0.5) {\n\t\t\tthis.y = y - this.height / 2;\n\t\t} else {\n\t\t\tif (this._sy) {\n\t\t\t\tthis.y += (y - this.y) * 2 * this._sy;\n\t\t\t}\n\t\t\tthis.height = (y - this.y) * 2;\n\t\t}\n\t\tthis._sy = 0.5;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenter: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n\t},\n\n\tsetCenter: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.setCenterX(point.x);\n\t\tthis.setCenterY(point.y);\n\t\treturn this;\n\t},\n\n\tgetArea: function() {\n\t\treturn this.width * this.height;\n\t},\n\n\tisEmpty: function() {\n\t\treturn this.width === 0 || this.height === 0;\n\t},\n\n\tcontains: function(arg) {\n\t\treturn arg && arg.width !== undefined\n\t\t\t\t|| (Array.isArray(arg) ? arg : arguments).length === 4\n\t\t\t\t? this._containsRectangle(Rectangle.read(arguments))\n\t\t\t\t: this._containsPoint(Point.read(arguments));\n\t},\n\n\t_containsPoint: function(point) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x <= this.x + this.width\n\t\t\t\t&& y <= this.y + this.height;\n\t},\n\n\t_containsRectangle: function(rect) {\n\t\tvar x = rect.x,\n\t\t\ty = rect.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x + rect.width <= this.x + this.width\n\t\t\t\t&& y + rect.height <= this.y + this.height;\n\t},\n\n\tintersects: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tepsilon = Base.read(arguments) || 0;\n\t\treturn rect.x + rect.width > this.x - epsilon\n\t\t\t\t&& rect.y + rect.height > this.y - epsilon\n\t\t\t\t&& rect.x < this.x + this.width + epsilon\n\t\t\t\t&& rect.y < this.y + this.height + epsilon;\n\t},\n\n\tintersect: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.max(this.x, rect.x),\n\t\t\ty1 = Math.max(this.y, rect.y),\n\t\t\tx2 = Math.min(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.min(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tunite: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.min(this.x, rect.x),\n\t\t\ty1 = Math.min(this.y, rect.y),\n\t\t\tx2 = Math.max(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.max(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tinclude: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar x1 = Math.min(this.x, point.x),\n\t\t\ty1 = Math.min(this.y, point.y),\n\t\t\tx2 = Math.max(this.x + this.width, point.x),\n\t\t\ty2 = Math.max(this.y + this.height, point.y);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\texpand: function() {\n\t\tvar amount = Size.read(arguments),\n\t\t\thor = amount.width,\n\t\t\tver = amount.height;\n\t\treturn new Rectangle(this.x - hor / 2, this.y - ver / 2,\n\t\t\t\tthis.width + hor, this.height + ver);\n\t},\n\n\tscale: function(hor, ver) {\n\t\treturn this.expand(this.width * hor - this.width,\n\t\t\t\tthis.height * (ver === undefined ? hor : ver) - this.height);\n\t}\n}, Base.each([\n\t\t['Top', 'Left'], ['Top', 'Right'],\n\t\t['Bottom', 'Left'], ['Bottom', 'Right'],\n\t\t['Left', 'Center'], ['Top', 'Center'],\n\t\t['Right', 'Center'], ['Bottom', 'Center']\n\t],\n\tfunction(parts, index) {\n\t\tvar part = parts.join(''),\n\t\t\txFirst = /^[RL]/.test(part);\n\t\tif (index >= 4)\n\t\t\tparts[1] += xFirst ? 'Y' : 'X';\n\t\tvar x = parts[xFirst ? 0 : 1],\n\t\t\ty = parts[xFirst ? 1 : 0],\n\t\t\tgetX = 'get' + x,\n\t\t\tgetY = 'get' + y,\n\t\t\tsetX = 'set' + x,\n\t\t\tsetY = 'set' + y,\n\t\t\tget = 'get' + part,\n\t\t\tset = 'set' + part;\n\t\tthis[get] = function(_dontLink) {\n\t\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\t\treturn new ctor(this[getX](), this[getY](), this, set);\n\t\t};\n\t\tthis[set] = function() {\n\t\t\tvar point = Point.read(arguments);\n\t\t\tthis[setX](point.x);\n\t\t\tthis[setY](point.y);\n\t\t};\n\t}, {\n\t\tbeans: true\n\t}\n));\n\nvar LinkedRectangle = Rectangle.extend({\n\tinitialize: function Rectangle(x, y, width, height, owner, setter) {\n\t\tthis._set(x, y, width, height, true);\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, width, height, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t}\n},\nnew function() {\n\tvar proto = Rectangle.prototype;\n\n\treturn Base.each(['x', 'y', 'width', 'height'], function(key) {\n\t\tvar part = Base.capitalize(key),\n\t\t\tinternal = '_' + key;\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[internal];\n\t\t};\n\n\t\tthis['set' + part] = function(value) {\n\t\t\tthis[internal] = value;\n\t\t\tif (!this._dontNotify)\n\t\t\t\tthis._owner[this._setter](this);\n\t\t};\n\t}, Base.each(['Point', 'Size', 'Center',\n\t\t\t'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY',\n\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'],\n\t\tfunction(key) {\n\t\t\tvar name = 'set' + key;\n\t\t\tthis[name] = function() {\n\t\t\t\tthis._dontNotify = true;\n\t\t\t\tproto[name].apply(this, arguments);\n\t\t\t\tthis._dontNotify = false;\n\t\t\t\tthis._owner[this._setter](this);\n\t\t\t};\n\t\t}, {\n\t\t\tisSelected: function() {\n\t\t\t\treturn !!(this._owner._selection & 2);\n\t\t\t},\n\n\t\t\tsetSelected: function(selected) {\n\t\t\t\tvar owner = this._owner;\n\t\t\t\tif (owner._changeSelection) {\n\t\t\t\t\towner._changeSelection(2, selected);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n});\n\nvar Matrix = Base.extend({\n\t_class: 'Matrix',\n\n\tinitialize: function Matrix(arg, _dontNotify) {\n\t\tvar args = arguments,\n\t\t\tcount = args.length,\n\t\t\tok = true;\n\t\tif (count >= 6) {\n\t\t\tthis._set.apply(this, args);\n\t\t} else if (count === 1 || count === 2) {\n\t\t\tif (arg instanceof Matrix) {\n\t\t\t\tthis._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty,\n\t\t\t\t\t\t_dontNotify);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tthis._set.apply(this,\n\t\t\t\t\t\t_dontNotify ? arg.concat([_dontNotify]) : arg);\n\t\t\t} else {\n\t\t\t\tok = false;\n\t\t\t}\n\t\t} else if (!count) {\n\t\t\tthis.reset();\n\t\t} else {\n\t\t\tok = false;\n\t\t}\n\t\tif (!ok) {\n\t\t\tthrow new Error('Unsupported matrix parameters');\n\t\t}\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(a, b, c, d, tx, ty, _dontNotify) {\n\t\tthis._a = a;\n\t\tthis._b = b;\n\t\tthis._c = c;\n\t\tthis._d = d;\n\t\tthis._tx = tx;\n\t\tthis._ty = ty;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.getValues(), options, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\tif (owner._applyMatrix) {\n\t\t\t\towner.transform(null, true);\n\t\t\t} else {\n\t\t\t\towner._changed(25);\n\t\t\t}\n\t\t}\n\t},\n\n\tclone: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d,\n\t\t\t\tthis._tx, this._ty);\n\t},\n\n\tequals: function(mx) {\n\t\treturn mx === this || mx && this._a === mx._a && this._b === mx._b\n\t\t\t\t&& this._c === mx._c && this._d === mx._d\n\t\t\t\t&& this._tx === mx._tx && this._ty === mx._ty;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '[[' + [f.number(this._a), f.number(this._c),\n\t\t\t\t\tf.number(this._tx)].join(', ') + '], ['\n\t\t\t\t+ [f.number(this._b), f.number(this._d),\n\t\t\t\t\tf.number(this._ty)].join(', ') + ']]';\n\t},\n\n\treset: function(_dontNotify) {\n\t\tthis._a = this._d = 1;\n\t\tthis._b = this._c = this._tx = this._ty = 0;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tapply: function(recursively, _setApplyMatrix) {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\towner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n\t\t\treturn this.isIdentity();\n\t\t}\n\t\treturn false;\n\t},\n\n\ttranslate: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tx = point.x,\n\t\t\ty = point.y;\n\t\tthis._tx += x * this._a + y * this._c;\n\t\tthis._ty += x * this._b + y * this._d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tscale: function() {\n\t\tvar args = arguments,\n\t\t\tscale = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tthis._a *= scale.x;\n\t\tthis._b *= scale.x;\n\t\tthis._c *= scale.y;\n\t\tthis._d *= scale.y;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\trotate: function(angle ) {\n\t\tangle *= Math.PI / 180;\n\t\tvar center = Point.read(arguments, 1),\n\t\t\tx = center.x,\n\t\t\ty = center.y,\n\t\t\tcos = Math.cos(angle),\n\t\t\tsin = Math.sin(angle),\n\t\t\ttx = x - x * cos + y * sin,\n\t\t\tty = y - x * sin - y * cos,\n\t\t\ta = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d;\n\t\tthis._a = cos * a + sin * c;\n\t\tthis._b = cos * b + sin * d;\n\t\tthis._c = -sin * a + cos * c;\n\t\tthis._d = -sin * b + cos * d;\n\t\tthis._tx += tx * a + ty * c;\n\t\tthis._ty += tx * b + ty * d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tshear: function() {\n\t\tvar args = arguments,\n\t\t\tshear = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tvar a = this._a,\n\t\t\tb = this._b;\n\t\tthis._a += shear.y * this._c;\n\t\tthis._b += shear.y * this._d;\n\t\tthis._c += shear.x * a;\n\t\tthis._d += shear.x * b;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tskew: function() {\n\t\tvar args = arguments,\n\t\t\tskew = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true }),\n\t\t\ttoRadians = Math.PI / 180,\n\t\t\tshear = new Point(Math.tan(skew.x * toRadians),\n\t\t\t\tMath.tan(skew.y * toRadians));\n\t\treturn this.shear(shear, center);\n\t},\n\n\tappend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + c2 * c1;\n\t\t\tthis._c = b2 * a1 + d2 * c1;\n\t\t\tthis._b = a2 * b1 + c2 * d1;\n\t\t\tthis._d = b2 * b1 + d2 * d1;\n\t\t\tthis._tx += tx2 * a1 + ty2 * c1;\n\t\t\tthis._ty += tx2 * b1 + ty2 * d1;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tprepend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ttx1 = this._tx,\n\t\t\t\tty1 = this._ty,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + b2 * b1;\n\t\t\tthis._c = a2 * c1 + b2 * d1;\n\t\t\tthis._b = c2 * a1 + d2 * b1;\n\t\t\tthis._d = c2 * c1 + d2 * d1;\n\t\t\tthis._tx = a2 * tx1 + b2 * ty1 + tx2;\n\t\t\tthis._ty = c2 * tx1 + d2 * ty1 + ty2;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tappended: function(mx) {\n\t\treturn this.clone().append(mx);\n\t},\n\n\tprepended: function(mx) {\n\t\treturn this.clone().prepend(mx);\n\t},\n\n\tinvert: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tthis._a = d / det;\n\t\t\tthis._b = -b / det;\n\t\t\tthis._c = -c / det;\n\t\t\tthis._d = a / det;\n\t\t\tthis._tx = (c * ty - d * tx) / det;\n\t\t\tthis._ty = (b * tx - a * ty) / det;\n\t\t\tres = this;\n\t\t}\n\t\treturn res;\n\t},\n\n\tinverted: function() {\n\t\treturn this.clone().invert();\n\t},\n\n\tconcatenate: '#append',\n\tpreConcatenate: '#prepend',\n\tchain: '#appended',\n\n\t_shiftless: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n\t},\n\n\t_orNullIfIdentity: function() {\n\t\treturn this.isIdentity() ? null : this;\n\t},\n\n\tisIdentity: function() {\n\t\treturn this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1\n\t\t\t\t&& this._tx === 0 && this._ty === 0;\n\t},\n\n\tisInvertible: function() {\n\t\tvar det = this._a * this._d - this._c * this._b;\n\t\treturn det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n\t},\n\n\tisSingular: function() {\n\t\treturn !this.isInvertible();\n\t},\n\n\ttransform: function( src, dst, count) {\n\t\treturn arguments.length < 3\n\t\t\t? this._transformPoint(Point.read(arguments))\n\t\t\t: this._transformCoordinates(src, dst, count);\n\t},\n\n\t_transformPoint: function(point, dest, _dontNotify) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\tif (!dest)\n\t\t\tdest = new Point();\n\t\treturn dest._set(\n\t\t\t\tx * this._a + y * this._c + this._tx,\n\t\t\t\tx * this._b + y * this._d + this._ty,\n\t\t\t\t_dontNotify);\n\t},\n\n\t_transformCoordinates: function(src, dst, count) {\n\t\tfor (var i = 0, max = 2 * count; i < max; i += 2) {\n\t\t\tvar x = src[i],\n\t\t\t\ty = src[i + 1];\n\t\t\tdst[i] = x * this._a + y * this._c + this._tx;\n\t\t\tdst[i + 1] = x * this._b + y * this._d + this._ty;\n\t\t}\n\t\treturn dst;\n\t},\n\n\t_transformCorners: function(rect) {\n\t\tvar x1 = rect.x,\n\t\t\ty1 = rect.y,\n\t\t\tx2 = x1 + rect.width,\n\t\t\ty2 = y1 + rect.height,\n\t\t\tcoords = [ x1, y1, x2, y1, x2, y2, x1, y2 ];\n\t\treturn this._transformCoordinates(coords, coords, 4);\n\t},\n\n\t_transformBounds: function(bounds, dest, _dontNotify) {\n\t\tvar coords = this._transformCorners(bounds),\n\t\t\tmin = coords.slice(0, 2),\n\t\t\tmax = min.slice();\n\t\tfor (var i = 2; i < 8; i++) {\n\t\t\tvar val = coords[i],\n\t\t\t\tj = i & 1;\n\t\t\tif (val < min[j]) {\n\t\t\t\tmin[j] = val;\n\t\t\t} else if (val > max[j]) {\n\t\t\t\tmax[j] = val;\n\t\t\t}\n\t\t}\n\t\tif (!dest)\n\t\t\tdest = new Rectangle();\n\t\treturn dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1],\n\t\t\t\t_dontNotify);\n\t},\n\n\tinverseTransform: function() {\n\t\treturn this._inverseTransform(Point.read(arguments));\n\t},\n\n\t_inverseTransform: function(point, dest, _dontNotify) {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tvar x = point.x - this._tx,\n\t\t\t\ty = point.y - this._ty;\n\t\t\tif (!dest)\n\t\t\t\tdest = new Point();\n\t\t\tres = dest._set(\n\t\t\t\t\t(x * d - y * c) / det,\n\t\t\t\t\t(y * a - x * b) / det,\n\t\t\t\t\t_dontNotify);\n\t\t}\n\t\treturn res;\n\t},\n\n\tdecompose: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\tdet = a * d - b * c,\n\t\t\tsqrt = Math.sqrt,\n\t\t\tatan2 = Math.atan2,\n\t\t\tdegrees = 180 / Math.PI,\n\t\t\trotate,\n\t\t\tscale,\n\t\t\tskew;\n\t\tif (a !== 0 || b !== 0) {\n\t\t\tvar r = sqrt(a * a + b * b);\n\t\t\trotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n\t\t\tscale = [r, det / r];\n\t\t\tskew = [atan2(a * c + b * d, r * r), 0];\n\t\t} else if (c !== 0 || d !== 0) {\n\t\t\tvar s = sqrt(c * c + d * d);\n\t\t\trotate = Math.asin(c / s)  * (d > 0 ? 1 : -1);\n\t\t\tscale = [det / s, s];\n\t\t\tskew = [0, atan2(a * c + b * d, s * s)];\n\t\t} else {\n\t\t\trotate = 0;\n\t\t\tskew = scale = [0, 0];\n\t\t}\n\t\treturn {\n\t\t\ttranslation: this.getTranslation(),\n\t\t\trotation: rotate * degrees,\n\t\t\tscaling: new Point(scale),\n\t\t\tskewing: new Point(skew[0] * degrees, skew[1] * degrees)\n\t\t};\n\t},\n\n\tgetValues: function() {\n\t\treturn [ this._a, this._b, this._c, this._d, this._tx, this._ty ];\n\t},\n\n\tgetTranslation: function() {\n\t\treturn new Point(this._tx, this._ty);\n\t},\n\n\tgetScaling: function() {\n\t\treturn this.decompose().scaling;\n\t},\n\n\tgetRotation: function() {\n\t\treturn this.decompose().rotation;\n\t},\n\n\tapplyToContext: function(ctx) {\n\t\tif (!this.isIdentity()) {\n\t\t\tctx.transform(this._a, this._b, this._c, this._d,\n\t\t\t\t\tthis._tx, this._ty);\n\t\t}\n\t}\n}, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function(key) {\n\tvar part = Base.capitalize(key),\n\t\tprop = '_' + key;\n\tthis['get' + part] = function() {\n\t\treturn this[prop];\n\t};\n\tthis['set' + part] = function(value) {\n\t\tthis[prop] = value;\n\t\tthis._changed();\n\t};\n}, {}));\n\nvar Line = Base.extend({\n\t_class: 'Line',\n\n\tinitialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n\t\tvar asVector = false;\n\t\tif (arguments.length >= 4) {\n\t\t\tthis._px = arg0;\n\t\t\tthis._py = arg1;\n\t\t\tthis._vx = arg2;\n\t\t\tthis._vy = arg3;\n\t\t\tasVector = arg4;\n\t\t} else {\n\t\t\tthis._px = arg0.x;\n\t\t\tthis._py = arg0.y;\n\t\t\tthis._vx = arg1.x;\n\t\t\tthis._vy = arg1.y;\n\t\t\tasVector = arg2;\n\t\t}\n\t\tif (!asVector) {\n\t\t\tthis._vx -= this._px;\n\t\t\tthis._vy -= this._py;\n\t\t}\n\t},\n\n\tgetPoint: function() {\n\t\treturn new Point(this._px, this._py);\n\t},\n\n\tgetVector: function() {\n\t\treturn new Point(this._vx, this._vy);\n\t},\n\n\tgetLength: function() {\n\t\treturn this.getVector().getLength();\n\t},\n\n\tintersect: function(line, isInfinite) {\n\t\treturn Line.intersect(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tline._px, line._py, line._vx, line._vy,\n\t\t\t\ttrue, isInfinite);\n\t},\n\n\tgetSide: function(point, isInfinite) {\n\t\treturn Line.getSide(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true, isInfinite);\n\t},\n\n\tgetDistance: function(point) {\n\t\treturn Math.abs(this.getSignedDistance(point));\n\t},\n\n\tgetSignedDistance: function(point) {\n\t\treturn Line.getSignedDistance(this._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true);\n\t},\n\n\tisCollinear: function(line) {\n\t\treturn Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tisOrthogonal: function(line) {\n\t\treturn Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tstatics: {\n\t\tintersect: function(p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector,\n\t\t\t\tisInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tv1x -= p1x;\n\t\t\t\tv1y -= p1y;\n\t\t\t\tv2x -= p2x;\n\t\t\t\tv2y -= p2y;\n\t\t\t}\n\t\t\tvar cross = v1x * v2y - v1y * v2x;\n\t\t\tif (!Numerical.isMachineZero(cross)) {\n\t\t\t\tvar dx = p1x - p2x,\n\t\t\t\t\tdy = p1y - p2y,\n\t\t\t\t\tu1 = (v2x * dy - v2y * dx) / cross,\n\t\t\t\t\tu2 = (v1x * dy - v1y * dx) / cross,\n\t\t\t\t\tepsilon = 1e-12,\n\t\t\t\t\tuMin = -epsilon,\n\t\t\t\t\tuMax = 1 + epsilon;\n\t\t\t\tif (isInfinite\n\t\t\t\t\t\t|| uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n\t\t\t\t\tif (!isInfinite) {\n\t\t\t\t\t\tu1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n\t\t\t\t\t}\n\t\t\t\t\treturn new Point(\n\t\t\t\t\t\t\tp1x + u1 * v1x,\n\t\t\t\t\t\t\tp1y + u1 * v1y);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetSide: function(px, py, vx, vy, x, y, asVector, isInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\tvar v2x = x - px,\n\t\t\t\tv2y = y - py,\n\t\t\t\tccw = v2x * vy - v2y * vx;\n\t\t\tif (!isInfinite && Numerical.isMachineZero(ccw)) {\n\t\t\t\tccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n\t\t\t\tif (ccw >= 0 && ccw <= 1)\n\t\t\t\t\tccw = 0;\n\t\t\t}\n\t\t\treturn ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n\t\t},\n\n\t\tgetSignedDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\t  return  vx === 0 ? (vy > 0 ? x - px : px - x)\n\t\t\t\t\t: vy === 0 ? (vx < 0 ? y - py : py - y)\n\t\t\t\t\t: ((x - px) * vy - (y - py) * vx) / (\n\t\t\t\t\t\tvy > vx\n\t\t\t\t\t\t\t? vy * Math.sqrt(1 + (vx * vx) / (vy * vy))\n\t\t\t\t\t\t\t: vx * Math.sqrt(1 + (vy * vy) / (vx * vx))\n\t\t\t\t\t);\n\t\t},\n\n\t\tgetDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\treturn Math.abs(\n\t\t\t\t\tLine.getSignedDistance(px, py, vx, vy, x, y, asVector));\n\t\t}\n\t}\n});\n\nvar Project = PaperScopeItem.extend({\n\t_class: 'Project',\n\t_list: 'projects',\n\t_reference: 'project',\n\t_compactSerialize: true,\n\n\tinitialize: function Project(element) {\n\t\tPaperScopeItem.call(this, true);\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tthis._activeLayer = null;\n\t\tthis._currentStyle = new Style(null, null, this);\n\t\tthis._view = View.create(this,\n\t\t\t\telement || CanvasProvider.getCanvas(1, 1));\n\t\tthis._selectionItems = {};\n\t\tthis._selectionCount = 0;\n\t\tthis._updateVersion = 0;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this._children, options, true, dictionary);\n\t},\n\n\t_changed: function(flags, item) {\n\t\tif (flags & 1) {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview._needsUpdate = true;\n\t\t\t\tif (!view._requested && view._autoUpdate)\n\t\t\t\t\tview.requestUpdate();\n\t\t\t}\n\t\t}\n\t\tvar changes = this._changes;\n\t\tif (changes && item) {\n\t\t\tvar changesById = this._changesById,\n\t\t\t\tid = item._id,\n\t\t\t\tentry = changesById[id];\n\t\t\tif (entry) {\n\t\t\t\tentry.flags |= flags;\n\t\t\t} else {\n\t\t\t\tchanges.push(changesById[id] = { item: item, flags: flags });\n\t\t\t}\n\t\t}\n\t},\n\n\tclear: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--)\n\t\t\tchildren[i].remove();\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._children.length;\n\t},\n\n\tremove: function remove() {\n\t\tif (!remove.base.call(this))\n\t\t\treturn false;\n\t\tif (this._view)\n\t\t\tthis._view.remove();\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._view;\n\t},\n\n\tgetCurrentStyle: function() {\n\t\treturn this._currentStyle;\n\t},\n\n\tsetCurrentStyle: function(style) {\n\t\tthis._currentStyle.set(style);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tgetOptions: function() {\n\t\treturn this._scope.settings;\n\t},\n\n\tgetLayers: function() {\n\t\treturn this._children;\n\t},\n\n\tgetActiveLayer: function() {\n\t\treturn this._activeLayer || new Layer({ project: this, insert: true });\n\t},\n\n\tgetSymbolDefinitions: function() {\n\t\tvar definitions = [],\n\t\t\tids = {};\n\t\tthis.getItems({\n\t\t\tclass: SymbolItem,\n\t\t\tmatch: function(item) {\n\t\t\t\tvar definition = item._definition,\n\t\t\t\t\tid = definition._id;\n\t\t\t\tif (!ids[id]) {\n\t\t\t\t\tids[id] = true;\n\t\t\t\t\tdefinitions.push(definition);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn definitions;\n\t},\n\n\tgetSymbols: 'getSymbolDefinitions',\n\n\tgetSelectedItems: function() {\n\t\tvar selectionItems = this._selectionItems,\n\t\t\titems = [];\n\t\tfor (var id in selectionItems) {\n\t\t\tvar item = selectionItems[id],\n\t\t\t\tselection = item._selection;\n\t\t\tif ((selection & 1) && item.isInserted()) {\n\t\t\t\titems.push(item);\n\t\t\t} else if (!selection) {\n\t\t\t\tthis._updateSelection(item);\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t},\n\n\t_updateSelection: function(item) {\n\t\tvar id = item._id,\n\t\t\tselectionItems = this._selectionItems;\n\t\tif (item._selection) {\n\t\t\tif (selectionItems[id] !== item) {\n\t\t\t\tthis._selectionCount++;\n\t\t\t\tselectionItems[id] = item;\n\t\t\t}\n\t\t} else if (selectionItems[id] === item) {\n\t\t\tthis._selectionCount--;\n\t\t\tdelete selectionItems[id];\n\t\t}\n\t},\n\n\tselectAll: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].setFullySelected(true);\n\t},\n\n\tdeselectAll: function() {\n\t\tvar selectionItems = this._selectionItems;\n\t\tfor (var i in selectionItems)\n\t\t\tselectionItems[i].setFullySelected(false);\n\t},\n\n\taddLayer: function(layer) {\n\t\treturn this.insertLayer(undefined, layer);\n\t},\n\n\tinsertLayer: function(index, layer) {\n\t\tif (layer instanceof Layer) {\n\t\t\tlayer._remove(false, true);\n\t\t\tBase.splice(this._children, [layer], index, 0);\n\t\t\tlayer._setProject(this, true);\n\t\t\tvar name = layer._name;\n\t\t\tif (name)\n\t\t\t\tlayer.setName(name);\n\t\t\tif (this._changes)\n\t\t\t\tlayer._changed(5);\n\t\t\tif (!this._activeLayer)\n\t\t\t\tthis._activeLayer = layer;\n\t\t} else {\n\t\t\tlayer = null;\n\t\t}\n\t\treturn layer;\n\t},\n\n\t_insertItem: function(index, item, _created) {\n\t\titem = this.insertLayer(index, item)\n\t\t\t\t|| (this._activeLayer || this._insertItem(undefined,\n\t\t\t\t\t\tnew Layer(Item.NO_INSERT), true))\n\t\t\t\t\t\t.insertChild(index, item);\n\t\tif (_created && item.activate)\n\t\t\titem.activate();\n\t\treturn item;\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, null, null, true)[0] || null;\n\t},\n\n\timportJSON: function(json) {\n\t\tthis.activate();\n\t\tvar layer = this._activeLayer;\n\t\treturn Base.importJSON(json, layer && layer.isEmpty() && layer);\n\t},\n\n\tremoveOn: function(type) {\n\t\tvar sets = this._removeSets;\n\t\tif (sets) {\n\t\t\tif (type === 'mouseup')\n\t\t\t\tsets.mousedrag = null;\n\t\t\tvar set = sets[type];\n\t\t\tif (set) {\n\t\t\t\tfor (var id in set) {\n\t\t\t\t\tvar item = set[id];\n\t\t\t\t\tfor (var key in sets) {\n\t\t\t\t\t\tvar other = sets[key];\n\t\t\t\t\t\tif (other && other != set)\n\t\t\t\t\t\t\tdelete other[item._id];\n\t\t\t\t\t}\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t\tsets[type] = null;\n\t\t\t}\n\t\t}\n\t},\n\n\tdraw: function(ctx, matrix, pixelRatio) {\n\t\tthis._updateVersion++;\n\t\tctx.save();\n\t\tmatrix.applyToContext(ctx);\n\t\tvar children = this._children,\n\t\t\tparam = new Base({\n\t\t\t\toffset: new Point(0, 0),\n\t\t\t\tpixelRatio: pixelRatio,\n\t\t\t\tviewMatrix: matrix.isIdentity() ? null : matrix,\n\t\t\t\tmatrices: [new Matrix()],\n\t\t\t\tupdateMatrix: true\n\t\t\t});\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].draw(ctx, param);\n\t\t}\n\t\tctx.restore();\n\n\t\tif (this._selectionCount > 0) {\n\t\t\tctx.save();\n\t\t\tctx.strokeWidth = 1;\n\t\t\tvar items = this._selectionItems,\n\t\t\t\tsize = this._scope.settings.handleSize,\n\t\t\t\tversion = this._updateVersion;\n\t\t\tfor (var id in items) {\n\t\t\t\titems[id]._drawSelection(ctx, matrix, size, items, version);\n\t\t\t}\n\t\t\tctx.restore();\n\t\t}\n\t}\n});\n\nvar Item = Base.extend(Emitter, {\n\tstatics: {\n\t\textend: function extend(src) {\n\t\t\tif (src._serializeFields)\n\t\t\t\tsrc._serializeFields = Base.set({},\n\t\t\t\t\tthis.prototype._serializeFields, src._serializeFields);\n\t\t\treturn extend.base.apply(this, arguments);\n\t\t},\n\n\t\tINSERT: { insert: true },\n\t\tNO_INSERT: { insert: false }\n\t},\n\n\t_class: 'Item',\n\t_name: null,\n\t_applyMatrix: true,\n\t_canApplyMatrix: true,\n\t_canScaleStroke: false,\n\t_pivot: null,\n\t_visible: true,\n\t_blendMode: 'normal',\n\t_opacity: 1,\n\t_locked: false,\n\t_guide: false,\n\t_clipMask: false,\n\t_selection: 0,\n\t_selectBounds: true,\n\t_selectChildren: false,\n\t_serializeFields: {\n\t\tname: null,\n\t\tapplyMatrix: null,\n\t\tmatrix: new Matrix(),\n\t\tpivot: null,\n\t\tvisible: true,\n\t\tblendMode: 'normal',\n\t\topacity: 1,\n\t\tlocked: false,\n\t\tguide: false,\n\t\tclipMask: false,\n\t\tselected: false,\n\t\tdata: {}\n\t},\n\t_prioritize: ['applyMatrix']\n},\nnew function() {\n\tvar handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick',\n\t\t\t'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n\treturn Base.each(handlers,\n\t\tfunction(name) {\n\t\t\tthis._events[name] = {\n\t\t\t\tinstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, 1);\n\t\t\t\t},\n\n\t\t\t\tuninstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, -1);\n\t\t\t\t}\n\t\t\t};\n\t\t}, {\n\t\t\t_events: {\n\t\t\t\tonFrame: {\n\t\t\t\t\tinstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, true);\n\t\t\t\t\t},\n\n\t\t\t\t\tuninstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, false);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tonLoad: {},\n\t\t\t\tonError: {}\n\t\t\t},\n\t\t\tstatics: {\n\t\t\t\t_itemHandlers: handlers\n\t\t\t}\n\t\t}\n\t);\n}, {\n\tinitialize: function Item() {\n\t},\n\n\t_initialize: function(props, point) {\n\t\tvar hasProps = props && Base.isPlainObject(props),\n\t\t\tinternal = hasProps && props.internal === true,\n\t\t\tmatrix = this._matrix = new Matrix(),\n\t\t\tproject = hasProps && props.project || paper.project,\n\t\t\tsettings = paper.settings;\n\t\tthis._id = internal ? null : UID.get();\n\t\tthis._parent = this._index = null;\n\t\tthis._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n\t\tif (point)\n\t\t\tmatrix.translate(point);\n\t\tmatrix._owner = this;\n\t\tthis._style = new Style(project._currentStyle, this, project);\n\t\tif (internal || hasProps && props.insert == false\n\t\t\t|| !settings.insertItems && !(hasProps && props.insert == true)) {\n\t\t\tthis._setProject(project);\n\t\t} else {\n\t\t\t(hasProps && props.parent || project)\n\t\t\t\t\t._insertItem(undefined, this, true);\n\t\t}\n\t\tif (hasProps && props !== Item.NO_INSERT && props !== Item.INSERT) {\n\t\t\tthis.set(props, {\n\t\t\t\tinternal: true, insert: true, project: true, parent: true\n\t\t\t});\n\t\t}\n\t\treturn hasProps;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar props = {},\n\t\t\tthat = this;\n\n\t\tfunction serialize(fields) {\n\t\t\tfor (var key in fields) {\n\t\t\t\tvar value = that[key];\n\t\t\t\tif (!Base.equals(value, key === 'leading'\n\t\t\t\t\t\t? fields.fontSize * 1.2 : fields[key])) {\n\t\t\t\t\tprops[key] = Base.serialize(value, options,\n\t\t\t\t\t\t\tkey !== 'data', dictionary);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tserialize(this._serializeFields);\n\t\tif (!(this instanceof Group))\n\t\t\tserialize(this._style._defaults);\n\t\treturn [ this._class, props ];\n\t},\n\n\t_changed: function(flags) {\n\t\tvar symbol = this._symbol,\n\t\t\tcacheParent = this._parent || symbol,\n\t\t\tproject = this._project;\n\t\tif (flags & 8) {\n\t\t\tthis._bounds = this._position = this._decomposed = undefined;\n\t\t}\n\t\tif (flags & 16) {\n\t\t\tthis._globalMatrix = undefined;\n\t\t}\n\t\tif (cacheParent\n\t\t\t\t&& (flags & 72)) {\n\t\t\tItem._clearBoundsCache(cacheParent);\n\t\t}\n\t\tif (flags & 2) {\n\t\t\tItem._clearBoundsCache(this);\n\t\t}\n\t\tif (project)\n\t\t\tproject._changed(flags, this);\n\t\tif (symbol)\n\t\t\tsymbol._changed(flags);\n\t},\n\n\tgetId: function() {\n\t\treturn this._id;\n\t},\n\n\tgetName: function() {\n\t\treturn this._name;\n\t},\n\n\tsetName: function(name) {\n\n\t\tif (this._name)\n\t\t\tthis._removeNamed();\n\t\tif (name === (+name) + '')\n\t\t\tthrow new Error(\n\t\t\t\t\t'Names consisting only of numbers are not supported.');\n\t\tvar owner = this._getOwner();\n\t\tif (name && owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren;\n\t\t\t(namedChildren[name] = namedChildren[name] || []).push(this);\n\t\t\tif (!(name in children))\n\t\t\t\tchildren[name] = this;\n\t\t}\n\t\tthis._name = name || undefined;\n\t\tthis._changed(256);\n\t},\n\n\tgetStyle: function() {\n\t\treturn this._style;\n\t},\n\n\tsetStyle: function(style) {\n\t\tthis.getStyle().set(style);\n\t}\n}, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'],\n\tfunction(name) {\n\t\tvar part = Base.capitalize(name),\n\t\t\tkey = '_' + name,\n\t\t\tflags = {\n\t\t\t\tlocked: 256,\n\t\t\t\tvisible: 265\n\t\t\t};\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[key];\n\t\t};\n\t\tthis['set' + part] = function(value) {\n\t\t\tif (value != this[key]) {\n\t\t\t\tthis[key] = value;\n\t\t\t\tthis._changed(flags[name] || 257);\n\t\t\t}\n\t\t};\n\t},\n{}), {\n\tbeans: true,\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tif (selection !== this._selection) {\n\t\t\tthis._selection = selection;\n\t\t\tvar project = this._project;\n\t\t\tif (project) {\n\t\t\t\tproject._updateSelection(this);\n\t\t\t\tthis._changed(257);\n\t\t\t}\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (children[i].isSelected())\n\t\t\t\t\treturn true;\n\t\t}\n\t\treturn !!(this._selection & 1);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setSelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisFullySelected: function() {\n\t\tvar children = this._children,\n\t\t\tselected = !!(this._selection & 1);\n\t\tif (children && selected) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (!children[i].isFullySelected())\n\t\t\t\t\treturn false;\n\t\t\treturn true;\n\t\t}\n\t\treturn selected;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setFullySelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisClipMask: function() {\n\t\treturn this._clipMask;\n\t},\n\n\tsetClipMask: function(clipMask) {\n\t\tif (this._clipMask != (clipMask = !!clipMask)) {\n\t\t\tthis._clipMask = clipMask;\n\t\t\tif (clipMask) {\n\t\t\t\tthis.setFillColor(null);\n\t\t\t\tthis.setStrokeColor(null);\n\t\t\t}\n\t\t\tthis._changed(257);\n\t\t\tif (this._parent)\n\t\t\t\tthis._parent._changed(2048);\n\t\t}\n\t},\n\n\tgetData: function() {\n\t\tif (!this._data)\n\t\t\tthis._data = {};\n\t\treturn this._data;\n\t},\n\n\tsetData: function(data) {\n\t\tthis._data = data;\n\t},\n\n\tgetPosition: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\tvar position = this._position ||\n\t\t\t(this._position = this._getPositionFromBounds());\n\t\treturn new ctor(position.x, position.y, this, 'setPosition');\n\t},\n\n\tsetPosition: function() {\n\t\tthis.translate(Point.read(arguments).subtract(this.getPosition(true)));\n\t},\n\n\t_getPositionFromBounds: function(bounds) {\n\t\treturn this._pivot\n\t\t\t\t? this._matrix._transformPoint(this._pivot)\n\t\t\t\t: (bounds || this.getBounds()).getCenter(true);\n\t},\n\n\tgetPivot: function() {\n\t\tvar pivot = this._pivot;\n\t\treturn pivot\n\t\t\t\t? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot')\n\t\t\t\t: null;\n\t},\n\n\tsetPivot: function() {\n\t\tthis._pivot = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tthis._position = undefined;\n\t}\n}, Base.each({\n\t\tgetStrokeBounds: { stroke: true },\n\t\tgetHandleBounds: { handle: true },\n\t\tgetInternalBounds: { internal: true }\n\t},\n\tfunction(options, key) {\n\t\tthis[key] = function(matrix) {\n\t\t\treturn this.getBounds(matrix, options);\n\t\t};\n\t},\n{\n\tbeans: true,\n\n\tgetBounds: function(matrix, options) {\n\t\tvar hasMatrix = options || matrix instanceof Matrix,\n\t\t\topts = Base.set({}, hasMatrix ? options : matrix,\n\t\t\t\t\tthis._boundsOptions);\n\t\tif (!opts.stroke || this.getStrokeScaling())\n\t\t\topts.cacheItem = this;\n\t\tvar rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\t\treturn !arguments.length\n\t\t\t\t? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height,\n\t\t\t\t\tthis, 'setBounds')\n\t\t\t\t: rect;\n\t},\n\n\tsetBounds: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tbounds = this.getBounds(),\n\t\t\t_matrix = this._matrix,\n\t\t\tmatrix = new Matrix(),\n\t\t\tcenter = rect.getCenter();\n\t\tmatrix.translate(center);\n\t\tif (rect.width != bounds.width || rect.height != bounds.height) {\n\t\t\tif (!_matrix.isInvertible()) {\n\t\t\t\t_matrix.set(_matrix._backup\n\t\t\t\t\t\t|| new Matrix().translate(_matrix.getTranslation()));\n\t\t\t\tbounds = this.getBounds();\n\t\t\t}\n\t\t\tmatrix.scale(\n\t\t\t\t\tbounds.width !== 0 ? rect.width / bounds.width : 0,\n\t\t\t\t\tbounds.height !== 0 ? rect.height / bounds.height : 0);\n\t\t}\n\t\tcenter = bounds.getCenter();\n\t\tmatrix.translate(-center.x, -center.y);\n\t\tthis.transform(matrix);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar children = this._children;\n\t\tif (!children || !children.length)\n\t\t\treturn new Rectangle();\n\t\tItem._updateBoundsCache(this, options.cacheItem);\n\t\treturn Item._getBounds(children, matrix, options);\n\t},\n\n\t_getBoundsCacheKey: function(options, internal) {\n\t\treturn [\n\t\t\toptions.stroke ? 1 : 0,\n\t\t\toptions.handle ? 1 : 0,\n\t\t\tinternal ? 1 : 0\n\t\t].join('');\n\t},\n\n\t_getCachedBounds: function(matrix, options, noInternal) {\n\t\tmatrix = matrix && matrix._orNullIfIdentity();\n\t\tvar internal = options.internal && !noInternal,\n\t\t\tcacheItem = options.cacheItem,\n\t\t\t_matrix = internal ? null : this._matrix._orNullIfIdentity(),\n\t\t\tcacheKey = cacheItem && (!matrix || matrix.equals(_matrix))\n\t\t\t\t&& this._getBoundsCacheKey(options, internal),\n\t\t\tbounds = this._bounds;\n\t\tItem._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\t\tif (cacheKey && bounds && cacheKey in bounds) {\n\t\t\tvar cached = bounds[cacheKey];\n\t\t\treturn {\n\t\t\t\trect: cached.rect.clone(),\n\t\t\t\tnonscaling: cached.nonscaling\n\t\t\t};\n\t\t}\n\t\tvar res = this._getBounds(matrix || _matrix, options),\n\t\t\trect = res.rect || res,\n\t\t\tstyle = this._style,\n\t\t\tnonscaling = res.nonscaling || style.hasStroke()\n\t\t\t\t&& !style.getStrokeScaling();\n\t\tif (cacheKey) {\n\t\t\tif (!bounds) {\n\t\t\t\tthis._bounds = bounds = {};\n\t\t\t}\n\t\t\tvar cached = bounds[cacheKey] = {\n\t\t\t\trect: rect.clone(),\n\t\t\t\tnonscaling: nonscaling,\n\t\t\t\tinternal: internal\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\trect: rect,\n\t\t\tnonscaling: nonscaling\n\t\t};\n\t},\n\n\t_getStrokeMatrix: function(matrix, options) {\n\t\tvar parent = this.getStrokeScaling() ? null\n\t\t\t\t: options && options.internal ? this\n\t\t\t\t\t: this._parent || this._symbol && this._symbol._item,\n\t\t\tmx = parent ? parent.getViewMatrix().invert() : matrix;\n\t\treturn mx && mx._shiftless();\n\t},\n\n\tstatics: {\n\t\t_updateBoundsCache: function(parent, item) {\n\t\t\tif (parent && item) {\n\t\t\t\tvar id = item._id,\n\t\t\t\t\tref = parent._boundsCache = parent._boundsCache || {\n\t\t\t\t\t\tids: {},\n\t\t\t\t\t\tlist: []\n\t\t\t\t\t};\n\t\t\t\tif (!ref.ids[id]) {\n\t\t\t\t\tref.list.push(item);\n\t\t\t\t\tref.ids[id] = item;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_clearBoundsCache: function(item) {\n\t\t\tvar cache = item._boundsCache;\n\t\t\tif (cache) {\n\t\t\t\titem._bounds = item._position = item._boundsCache = undefined;\n\t\t\t\tfor (var i = 0, list = cache.list, l = list.length; i < l; i++){\n\t\t\t\t\tvar other = list[i];\n\t\t\t\t\tif (other !== item) {\n\t\t\t\t\t\tother._bounds = other._position = undefined;\n\t\t\t\t\t\tif (other._boundsCache)\n\t\t\t\t\t\t\tItem._clearBoundsCache(other);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_getBounds: function(items, matrix, options) {\n\t\t\tvar x1 = Infinity,\n\t\t\t\tx2 = -x1,\n\t\t\t\ty1 = x1,\n\t\t\t\ty2 = x2,\n\t\t\t\tnonscaling = false;\n\t\t\toptions = options || {};\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tif (item._visible && !item.isEmpty(true)) {\n\t\t\t\t\tvar bounds = item._getCachedBounds(\n\t\t\t\t\t\tmatrix && matrix.appended(item._matrix), options, true),\n\t\t\t\t\t\trect = bounds.rect;\n\t\t\t\t\tx1 = Math.min(rect.x, x1);\n\t\t\t\t\ty1 = Math.min(rect.y, y1);\n\t\t\t\t\tx2 = Math.max(rect.x + rect.width, x2);\n\t\t\t\t\ty2 = Math.max(rect.y + rect.height, y2);\n\t\t\t\t\tif (bounds.nonscaling)\n\t\t\t\t\t\tnonscaling = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\trect: isFinite(x1)\n\t\t\t\t\t? new Rectangle(x1, y1, x2 - x1, y2 - y1)\n\t\t\t\t\t: new Rectangle(),\n\t\t\t\tnonscaling: nonscaling\n\t\t\t};\n\t\t}\n\t}\n\n}), {\n\tbeans: true,\n\n\t_decompose: function() {\n\t\treturn this._applyMatrix\n\t\t\t? null\n\t\t\t: this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\tgetRotation: function() {\n\t\tvar decomposed = this._decompose();\n\t\treturn decomposed ? decomposed.rotation : 0;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tvar decomposed = this._decomposed;\n\t\t\tthis.rotate(rotation - current);\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.rotation = rotation;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar decomposed = this._decompose(),\n\t\t\ts = decomposed && decomposed.scaling;\n\t\treturn new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling && !current.equals(scaling)) {\n\t\t\tvar rotation = this.getRotation(),\n\t\t\t\tdecomposed = this._decomposed,\n\t\t\t\tmatrix = new Matrix(),\n\t\t\t\tisZero = Numerical.isZero;\n\t\t\tif (isZero(current.x) || isZero(current.y)) {\n\t\t\t\tmatrix.translate(decomposed.translation);\n\t\t\t\tif (rotation) {\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\t}\n\t\t\t\tmatrix.scale(scaling.x, scaling.y);\n\t\t\t\tthis._matrix.set(matrix);\n\t\t\t} else {\n\t\t\t\tvar center = this.getPosition(true);\n\t\t\t\tmatrix.translate(center);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\tmatrix.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(-rotation);\n\t\t\t\tmatrix.translate(center.negate());\n\t\t\t\tthis.transform(matrix);\n\t\t\t}\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.scaling = scaling;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\tgetGlobalMatrix: function(_dontClone) {\n\t\tvar matrix = this._globalMatrix;\n\t\tif (matrix) {\n\t\t\tvar parent = this._parent;\n\t\t\tvar parents = [];\n\t\t\twhile (parent) {\n\t\t\t\tif (!parent._globalMatrix) {\n\t\t\t\t\tmatrix = null;\n\t\t\t\t\tfor (var i = 0, l = parents.length; i < l; i++) {\n\t\t\t\t\t\tparents[i]._globalMatrix = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparents.push(parent);\n\t\t\t\tparent = parent._parent;\n\t\t\t}\n\t\t}\n\t\tif (!matrix) {\n\t\t\tmatrix = this._globalMatrix = this._matrix.clone();\n\t\t\tvar parent = this._parent;\n\t\t\tif (parent)\n\t\t\t\tmatrix.prepend(parent.getGlobalMatrix(true));\n\t\t}\n\t\treturn _dontClone ? matrix : matrix.clone();\n\t},\n\n\tgetViewMatrix: function() {\n\t\treturn this.getGlobalMatrix().prepend(this.getView()._matrix);\n\t},\n\n\tgetApplyMatrix: function() {\n\t\treturn this._applyMatrix;\n\t},\n\n\tsetApplyMatrix: function(apply) {\n\t\tif (this._applyMatrix = this._canApplyMatrix && !!apply)\n\t\t\tthis.transform(null, true);\n\t},\n\n\tgetTransformContent: '#getApplyMatrix',\n\tsetTransformContent: '#setApplyMatrix',\n}, {\n\tgetProject: function() {\n\t\treturn this._project;\n\t},\n\n\t_setProject: function(project, installEvents) {\n\t\tif (this._project !== project) {\n\t\t\tif (this._project)\n\t\t\t\tthis._installEvents(false);\n\t\t\tthis._project = project;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\t\tchildren[i]._setProject(project);\n\t\t\tinstallEvents = true;\n\t\t}\n\t\tif (installEvents)\n\t\t\tthis._installEvents(true);\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\t_installEvents: function _installEvents(install) {\n\t\t_installEvents.base.call(this, install);\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\tchildren[i]._installEvents(install);\n\t},\n\n\tgetLayer: function() {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent instanceof Layer)\n\t\t\t\treturn parent;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetParent: function() {\n\t\treturn this._parent;\n\t},\n\n\tsetParent: function(item) {\n\t\treturn item.addChild(this);\n\t},\n\n\t_getOwner: '#getParent',\n\n\tgetChildren: function() {\n\t\treturn this._children;\n\t},\n\n\tsetChildren: function(items) {\n\t\tthis.removeChildren();\n\t\tthis.addChildren(items);\n\t},\n\n\tgetFirstChild: function() {\n\t\treturn this._children && this._children[0] || null;\n\t},\n\n\tgetLastChild: function() {\n\t\treturn this._children && this._children[this._children.length - 1]\n\t\t\t\t|| null;\n\t},\n\n\tgetNextSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index + 1] || null;\n\t},\n\n\tgetPreviousSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index - 1] || null;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tequals: function(item) {\n\t\treturn item === this || item && this._class === item._class\n\t\t\t\t&& this._style.equals(item._style)\n\t\t\t\t&& this._matrix.equals(item._matrix)\n\t\t\t\t&& this._locked === item._locked\n\t\t\t\t&& this._visible === item._visible\n\t\t\t\t&& this._blendMode === item._blendMode\n\t\t\t\t&& this._opacity === item._opacity\n\t\t\t\t&& this._clipMask === item._clipMask\n\t\t\t\t&& this._guide === item._guide\n\t\t\t\t&& this._equals(item)\n\t\t\t\t|| false;\n\t},\n\n\t_equals: function(item) {\n\t\treturn Base.equals(this._children, item._children);\n\t},\n\n\tclone: function(options) {\n\t\tvar copy = new this.constructor(Item.NO_INSERT),\n\t\t\tchildren = this._children,\n\t\t\tinsert = Base.pick(options ? options.insert : undefined,\n\t\t\t\t\toptions === undefined || options === true),\n\t\t\tdeep = Base.pick(options ? options.deep : undefined, true);\n\t\tif (children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (!children || deep)\n\t\t\tcopy.copyContent(this);\n\t\tif (!children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (insert)\n\t\t\tcopy.insertAbove(this);\n\t\tvar name = this._name,\n\t\t\tparent = this._parent;\n\t\tif (name && parent) {\n\t\t\tvar children = parent._children,\n\t\t\t\torig = name,\n\t\t\t\ti = 1;\n\t\t\twhile (children[name])\n\t\t\t\tname = orig + ' ' + (i++);\n\t\t\tif (name !== orig)\n\t\t\t\tcopy.setName(name);\n\t\t}\n\t\treturn copy;\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar children = source._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\tthis.addChild(children[i].clone(false), true);\n\t\t}\n\t},\n\n\tcopyAttributes: function(source, excludeMatrix) {\n\t\tthis.setStyle(source._style);\n\t\tvar keys = ['_locked', '_visible', '_blendMode', '_opacity',\n\t\t\t\t'_clipMask', '_guide'];\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (source.hasOwnProperty(key))\n\t\t\t\tthis[key] = source[key];\n\t\t}\n\t\tif (!excludeMatrix)\n\t\t\tthis._matrix.set(source._matrix, true);\n\t\tthis.setApplyMatrix(source._applyMatrix);\n\t\tthis.setPivot(source._pivot);\n\t\tthis.setSelection(source._selection);\n\t\tvar data = source._data,\n\t\t\tname = source._name;\n\t\tthis._data = data ? Base.clone(data) : null;\n\t\tif (name)\n\t\t\tthis.setName(name);\n\t},\n\n\trasterize: function(arg0, arg1) {\n\t\tvar resolution,\n\t\t\tinsert,\n\t\t\traster;\n\t\tif (Base.isPlainObject(arg0)) {\n\t\t\tresolution = arg0.resolution;\n\t\t\tinsert = arg0.insert;\n\t\t\traster = arg0.raster;\n\t\t} else {\n\t\t\tresolution = arg0;\n\t\t\tinsert = arg1;\n\t\t}\n\t\tif (!raster) {\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\t}\n\t\tvar bounds = this.getStrokeBounds(),\n\t\t\tscale = (resolution || this.getView().getResolution()) / 72,\n\t\t\ttopLeft = bounds.getTopLeft().floor(),\n\t\t\tbottomRight = bounds.getBottomRight().ceil(),\n\t\t\tboundsSize = new Size(bottomRight.subtract(topLeft)),\n\t\t\trasterSize = boundsSize.multiply(scale);\n\t\traster.setSize(rasterSize, true);\n\n\t\tif (!rasterSize.isZero()) {\n\t\t\tvar ctx = raster.getContext(true),\n\t\t\t\tmatrix = new Matrix().scale(scale).translate(topLeft.negate());\n\t\t\tctx.save();\n\t\t\tmatrix.applyToContext(ctx);\n\t\t\tthis.draw(ctx, new Base({ matrices: [matrix] }));\n\t\t\tctx.restore();\n\t\t}\n\t\traster._matrix.set(\n\t\t\tnew Matrix()\n\t\t\t\t.translate(topLeft.add(boundsSize.divide(2)))\n\t\t\t\t.scale(1 / scale)\n\t\t);\n\t\tif (insert === undefined || insert) {\n\t\t\traster.insertAbove(this);\n\t\t}\n\t\treturn raster;\n\t},\n\n\tcontains: function() {\n\t\tvar matrix = this._matrix;\n\t\treturn (\n\t\t\tmatrix.isInvertible() &&\n\t\t\t!!this._contains(matrix._inverseTransform(Point.read(arguments)))\n\t\t);\n\t},\n\n\t_contains: function(point) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tif (children[i].contains(point))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn point.isInside(this.getInternalBounds());\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this.getBounds());\n\t},\n\n\t_asPathItem: function() {\n\t\treturn new Path.Rectangle({\n\t\t\trectangle: this.getInternalBounds(),\n\t\t\tmatrix: this._matrix,\n\t\t\tinsert: false,\n\t\t});\n\t},\n\n\tintersects: function(item, _matrix) {\n\t\tif (!(item instanceof Item))\n\t\t\treturn false;\n\t\treturn this._asPathItem().getIntersections(item._asPathItem(), null,\n\t\t\t\t_matrix, true).length > 0;\n\t}\n},\nnew function() {\n\tfunction hitTest() {\n\t\tvar args = arguments;\n\t\treturn this._hitTest(\n\t\t\t\tPoint.read(args),\n\t\t\t\tHitResult.getOptions(args));\n\t}\n\n\tfunction hitTestAll() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\toptions = HitResult.getOptions(args),\n\t\t\tall = [];\n\t\tthis._hitTest(point, new Base({ all: all }, options));\n\t\treturn all;\n\t}\n\n\tfunction hitTestChildren(point, options, viewMatrix, _exclude) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tvar child = children[i];\n\t\t\t\tvar res = child !== _exclude && child._hitTest(point, options,\n\t\t\t\t\t\tviewMatrix);\n\t\t\t\tif (res && !options.all)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tProject.inject({\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTest: hitTestChildren\n\t});\n\n\treturn {\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTestChildren: hitTestChildren,\n\t};\n}, {\n\n\t_hitTest: function(point, options, parentViewMatrix) {\n\t\tif (this._locked || !this._visible || this._guide && !options.guides\n\t\t\t\t|| this.isEmpty()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar matrix = this._matrix,\n\t\t\tviewMatrix = parentViewMatrix\n\t\t\t\t\t? parentViewMatrix.appended(matrix)\n\t\t\t\t\t: this.getGlobalMatrix().prepend(this.getView()._matrix),\n\t\t\ttolerance = Math.max(options.tolerance, 1e-12),\n\t\t\ttolerancePadding = options._tolerancePadding = new Size(\n\t\t\t\t\tPath._getStrokePadding(tolerance,\n\t\t\t\t\t\tmatrix._shiftless().invert()));\n\t\tpoint = matrix._inverseTransform(point);\n\t\tif (!point || !this._children &&\n\t\t\t!this.getBounds({ internal: true, stroke: true, handle: true })\n\t\t\t\t.expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar checkSelf = !(options.guides && !this._guide\n\t\t\t\t|| options.selected && !this.isSelected()\n\t\t\t\t|| options.type && options.type !== Base.hyphenate(this._class)\n\t\t\t\t|| options.class && !(this instanceof options.class)),\n\t\t\tmatch = options.match,\n\t\t\tthat = this,\n\t\t\tbounds,\n\t\t\tres;\n\n\t\tfunction filter(hit) {\n\t\t\tif (hit && match && !match(hit))\n\t\t\t\thit = null;\n\t\t\tif (hit && options.all)\n\t\t\t\toptions.all.push(hit);\n\t\t\treturn hit;\n\t\t}\n\n\t\tfunction checkPoint(type, part) {\n\t\t\tvar pt = part ? bounds['get' + part]() : that.getPosition();\n\t\t\tif (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n\t\t\t\treturn new HitResult(type, that, {\n\t\t\t\t\tname: part ? Base.hyphenate(part) : type,\n\t\t\t\t\tpoint: pt\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar checkPosition = options.position,\n\t\t\tcheckCenter = options.center,\n\t\t\tcheckBounds = options.bounds;\n\t\tif (checkSelf && this._parent\n\t\t\t\t&& (checkPosition || checkCenter || checkBounds)) {\n\t\t\tif (checkCenter || checkBounds) {\n\t\t\t\tbounds = this.getInternalBounds();\n\t\t\t}\n\t\t\tres = checkPosition && checkPoint('position') ||\n\t\t\t\t\tcheckCenter && checkPoint('center', 'Center');\n\t\t\tif (!res && checkBounds) {\n\t\t\t\tvar points = [\n\t\t\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'\n\t\t\t\t];\n\t\t\t\tfor (var i = 0; i < 8 && !res; i++) {\n\t\t\t\t\tres = checkPoint('bounds', points[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = filter(res);\n\t\t}\n\n\t\tif (!res) {\n\t\t\tres = this._hitTestChildren(point, options, viewMatrix)\n\t\t\t\t|| checkSelf\n\t\t\t\t\t&& filter(this._hitTestSelf(point, options, viewMatrix,\n\t\t\t\t\t\tthis.getStrokeScaling() ? null\n\t\t\t\t\t\t\t: viewMatrix._shiftless().invert()))\n\t\t\t\t|| null;\n\t\t}\n\t\tif (res && res.point) {\n\t\t\tres.point = matrix.transform(res.point);\n\t\t}\n\t\treturn res;\n\t},\n\n\t_hitTestSelf: function(point, options) {\n\t\tif (options.fill && this.hasFill() && this._contains(point))\n\t\t\treturn new HitResult('fill', this);\n\t},\n\n\tmatches: function(name, compare) {\n\t\tfunction matchObject(obj1, obj2) {\n\t\t\tfor (var i in obj1) {\n\t\t\t\tif (obj1.hasOwnProperty(i)) {\n\t\t\t\t\tvar val1 = obj1[i],\n\t\t\t\t\t\tval2 = obj2[i];\n\t\t\t\t\tif (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n\t\t\t\t\t\tif (!matchObject(val1, val2))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!Base.equals(val1, val2)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tvar type = typeof name;\n\t\tif (type === 'object') {\n\t\t\tfor (var key in name) {\n\t\t\t\tif (name.hasOwnProperty(key) && !this.matches(key, name[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t} else if (type === 'function') {\n\t\t\treturn name(this);\n\t\t} else if (name === 'match') {\n\t\t\treturn compare(this);\n\t\t} else {\n\t\t\tvar value = /^(empty|editable)$/.test(name)\n\t\t\t\t\t? this['is' + Base.capitalize(name)]()\n\t\t\t\t\t: name === 'type'\n\t\t\t\t\t\t? Base.hyphenate(this._class)\n\t\t\t\t\t\t: this[name];\n\t\t\tif (name === 'class') {\n\t\t\t\tif (typeof compare === 'function')\n\t\t\t\t\treturn this instanceof compare;\n\t\t\t\tvalue = this._class;\n\t\t\t}\n\t\t\tif (typeof compare === 'function') {\n\t\t\t\treturn !!compare(value);\n\t\t\t} else if (compare) {\n\t\t\t\tif (compare.test) {\n\t\t\t\t\treturn compare.test(value);\n\t\t\t\t} else if (Base.isPlainObject(compare)) {\n\t\t\t\t\treturn matchObject(compare, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Base.equals(value, compare);\n\t\t}\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix, null, true)[0]\n\t\t\t\t|| null;\n\t},\n\n\tstatics: {\n\t\t_getItems: function _getItems(item, options, matrix, param, firstOnly) {\n\t\t\tif (!param) {\n\t\t\t\tvar obj = typeof options === 'object' && options,\n\t\t\t\t\toverlapping = obj && obj.overlapping,\n\t\t\t\t\tinside = obj && obj.inside,\n\t\t\t\t\tbounds = overlapping || inside,\n\t\t\t\t\trect = bounds && Rectangle.read([bounds]);\n\t\t\t\tparam = {\n\t\t\t\t\titems: [],\n\t\t\t\t\trecursive: obj && obj.recursive !== false,\n\t\t\t\t\tinside: !!inside,\n\t\t\t\t\toverlapping: !!overlapping,\n\t\t\t\t\trect: rect,\n\t\t\t\t\tpath: overlapping && new Path.Rectangle({\n\t\t\t\t\t\trectangle: rect,\n\t\t\t\t\t\tinsert: false\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\tif (obj) {\n\t\t\t\t\toptions = Base.filter({}, options, {\n\t\t\t\t\t\trecursive: true, inside: true, overlapping: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar children = item._children,\n\t\t\t\titems = param.items,\n\t\t\t\trect = param.rect;\n\t\t\tmatrix = rect && (matrix || new Matrix());\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\t\tvar child = children[i],\n\t\t\t\t\tchildMatrix = matrix && matrix.appended(child._matrix),\n\t\t\t\t\tadd = true;\n\t\t\t\tif (rect) {\n\t\t\t\t\tvar bounds = child.getBounds(childMatrix);\n\t\t\t\t\tif (!rect.intersects(bounds))\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif (!(rect.contains(bounds)\n\t\t\t\t\t\t\t|| param.overlapping && (bounds.contains(rect)\n\t\t\t\t\t\t\t\t|| param.path.intersects(child, childMatrix))))\n\t\t\t\t\t\tadd = false;\n\t\t\t\t}\n\t\t\t\tif (add && child.matches(options)) {\n\t\t\t\t\titems.push(child);\n\t\t\t\t\tif (firstOnly)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (param.recursive !== false) {\n\t\t\t\t\t_getItems(child, options, childMatrix, param, firstOnly);\n\t\t\t\t}\n\t\t\t\tif (firstOnly && items.length > 0)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn items;\n\t\t}\n\t}\n}, {\n\n\timportJSON: function(json) {\n\t\tvar res = Base.importJSON(json, this);\n\t\treturn res !== this ? this.addChild(res) : res;\n\t},\n\n\taddChild: function(item) {\n\t\treturn this.insertChild(undefined, item);\n\t},\n\n\tinsertChild: function(index, item) {\n\t\tvar res = item ? this.insertChildren(index, [item]) : null;\n\t\treturn res && res[0];\n\t},\n\n\taddChildren: function(items) {\n\t\treturn this.insertChildren(this._children.length, items);\n\t},\n\n\tinsertChildren: function(index, items) {\n\t\tvar children = this._children;\n\t\tif (children && items && items.length > 0) {\n\t\t\titems = Base.slice(items);\n\t\t\tvar inserted = {};\n\t\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tid = item && item._id;\n\t\t\t\tif (!item || inserted[id]) {\n\t\t\t\t\titems.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\titem._remove(false, true);\n\t\t\t\t\tinserted[id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tBase.splice(children, items, index, 0);\n\t\t\tvar project = this._project,\n\t\t\t\tnotifySelf = project._changes;\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tname = item._name;\n\t\t\t\titem._parent = this;\n\t\t\t\titem._setProject(project, true);\n\t\t\t\tif (name)\n\t\t\t\t\titem.setName(name);\n\t\t\t\tif (notifySelf)\n\t\t\t\t\titem._changed(5);\n\t\t\t}\n\t\t\tthis._changed(11);\n\t\t} else {\n\t\t\titems = null;\n\t\t}\n\t\treturn items;\n\t},\n\n\t_insertItem: '#insertChild',\n\n\t_insertAt: function(item, offset) {\n\t\tvar owner = item && item._getOwner(),\n\t\t\tres = item !== this && owner ? this : null;\n\t\tif (res) {\n\t\t\tres._remove(false, true);\n\t\t\towner._insertItem(item._index + offset, res);\n\t\t}\n\t\treturn res;\n\t},\n\n\tinsertAbove: function(item) {\n\t\treturn this._insertAt(item, 1);\n\t},\n\n\tinsertBelow: function(item) {\n\t\treturn this._insertAt(item, 0);\n\t},\n\n\tsendToBack: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(0, this) : null;\n\t},\n\n\tbringToFront: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(undefined, this) : null;\n\t},\n\n\tappendTop: '#addChild',\n\n\tappendBottom: function(item) {\n\t\treturn this.insertChild(0, item);\n\t},\n\n\tmoveAbove: '#insertAbove',\n\n\tmoveBelow: '#insertBelow',\n\n\taddTo: function(owner) {\n\t\treturn owner._insertItem(undefined, this);\n\t},\n\n\tcopyTo: function(owner) {\n\t\treturn this.clone(false).addTo(owner);\n\t},\n\n\treduce: function(options) {\n\t\tvar children = this._children;\n\t\tif (children && children.length === 1) {\n\t\t\tvar child = children[0].reduce(options);\n\t\t\tif (this._parent) {\n\t\t\t\tchild.insertAbove(this);\n\t\t\t\tthis.remove();\n\t\t\t} else {\n\t\t\t\tchild.remove();\n\t\t\t}\n\t\t\treturn child;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_removeNamed: function() {\n\t\tvar owner = this._getOwner();\n\t\tif (owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren,\n\t\t\t\tname = this._name,\n\t\t\t\tnamedArray = namedChildren[name],\n\t\t\t\tindex = namedArray ? namedArray.indexOf(this) : -1;\n\t\t\tif (index !== -1) {\n\t\t\t\tif (children[name] == this)\n\t\t\t\t\tdelete children[name];\n\t\t\t\tnamedArray.splice(index, 1);\n\t\t\t\tif (namedArray.length) {\n\t\t\t\t\tchildren[name] = namedArray[0];\n\t\t\t\t} else {\n\t\t\t\t\tdelete namedChildren[name];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_remove: function(notifySelf, notifyParent) {\n\t\tvar owner = this._getOwner(),\n\t\t\tproject = this._project,\n\t\t\tindex = this._index;\n\t\tif (this._style)\n\t\t\tthis._style._dispose();\n\t\tif (owner) {\n\t\t\tif (this._name)\n\t\t\t\tthis._removeNamed();\n\t\t\tif (index != null) {\n\t\t\t\tif (project._activeLayer === this)\n\t\t\t\t\tproject._activeLayer = this.getNextSibling()\n\t\t\t\t\t\t\t|| this.getPreviousSibling();\n\t\t\t\tBase.splice(owner._children, null, index, 1);\n\t\t\t}\n\t\t\tthis._installEvents(false);\n\t\t\tif (notifySelf && project._changes)\n\t\t\t\tthis._changed(5);\n\t\t\tif (notifyParent)\n\t\t\t\towner._changed(11, this);\n\t\t\tthis._parent = null;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tremove: function() {\n\t\treturn this._remove(true, true);\n\t},\n\n\treplaceWith: function(item) {\n\t\tvar ok = item && item.insertBelow(this);\n\t\tif (ok)\n\t\t\tthis.remove();\n\t\treturn ok;\n\t},\n\n\tremoveChildren: function(start, end) {\n\t\tif (!this._children)\n\t\t\treturn null;\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._children.length);\n\t\tvar removed = Base.splice(this._children, null, start, end - start);\n\t\tfor (var i = removed.length - 1; i >= 0; i--) {\n\t\t\tremoved[i]._remove(true, false);\n\t\t}\n\t\tif (removed.length > 0)\n\t\t\tthis._changed(11);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeChildren',\n\n\treverseChildren: function() {\n\t\tif (this._children) {\n\t\t\tthis._children.reverse();\n\t\t\tfor (var i = 0, l = this._children.length; i < l; i++)\n\t\t\t\tthis._children[i]._index = i;\n\t\t\tthis._changed(11);\n\t\t}\n\t},\n\n\tisEmpty: function(recursively) {\n\t\tvar children = this._children;\n\t\tvar numChildren = children ? children.length : 0;\n\t\tif (recursively) {\n\t\t\tfor (var i = 0; i < numChildren; i++) {\n\t\t\t\tif (!children[i].isEmpty(recursively)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn !numChildren;\n\t},\n\n\tisEditable: function() {\n\t\tvar item = this;\n\t\twhile (item) {\n\t\t\tif (!item._visible || item._locked)\n\t\t\t\treturn false;\n\t\t\titem = item._parent;\n\t\t}\n\t\treturn true;\n\t},\n\n\thasFill: function() {\n\t\treturn this.getStyle().hasFill();\n\t},\n\n\thasStroke: function() {\n\t\treturn this.getStyle().hasStroke();\n\t},\n\n\thasShadow: function() {\n\t\treturn this.getStyle().hasShadow();\n\t},\n\n\t_getOrder: function(item) {\n\t\tfunction getList(item) {\n\t\t\tvar list = [];\n\t\t\tdo {\n\t\t\t\tlist.unshift(item);\n\t\t\t} while (item = item._parent);\n\t\t\treturn list;\n\t\t}\n\t\tvar list1 = getList(this),\n\t\t\tlist2 = getList(item);\n\t\tfor (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n\t\t\tif (list1[i] != list2[i]) {\n\t\t\t\treturn list1[i]._index < list2[i]._index ? 1 : -1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t},\n\n\thasChildren: function() {\n\t\treturn this._children && this._children.length > 0;\n\t},\n\n\tisInserted: function() {\n\t\treturn this._parent ? this._parent.isInserted() : false;\n\t},\n\n\tisAbove: function(item) {\n\t\treturn this._getOrder(item) === -1;\n\t},\n\n\tisBelow: function(item) {\n\t\treturn this._getOrder(item) === 1;\n\t},\n\n\tisParent: function(item) {\n\t\treturn this._parent === item;\n\t},\n\n\tisChild: function(item) {\n\t\treturn item && item._parent === this;\n\t},\n\n\tisDescendant: function(item) {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent === item)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tisAncestor: function(item) {\n\t\treturn item ? item.isDescendant(this) : false;\n\t},\n\n\tisSibling: function(item) {\n\t\treturn this._parent === item._parent;\n\t},\n\n\tisGroupedWith: function(item) {\n\t\tvar parent = this._parent;\n\t\twhile (parent) {\n\t\t\tif (parent._parent\n\t\t\t\t&& /^(Group|Layer|CompoundPath)$/.test(parent._class)\n\t\t\t\t&& item.isDescendant(parent))\n\t\t\t\t\treturn true;\n\t\t\tparent = parent._parent;\n\t\t}\n\t\treturn false;\n\t},\n\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getPosition(true)));\n\t};\n}, {\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\ttransform: function(matrix, _applyRecursively, _setApplyMatrix) {\n\t\tvar _matrix = this._matrix,\n\t\t\ttransformMatrix = matrix && !matrix.isIdentity(),\n\t\t\tapplyMatrix = (\n\t\t\t\t_setApplyMatrix && this._canApplyMatrix ||\n\t\t\t\tthis._applyMatrix && (\n\t\t\t\t\ttransformMatrix || !_matrix.isIdentity() ||\n\t\t\t\t\t_applyRecursively && this._children\n\t\t\t\t)\n\t\t\t);\n\t\tif (!transformMatrix && !applyMatrix)\n\t\t\treturn this;\n\t\tif (transformMatrix) {\n\t\t\tif (!matrix.isInvertible() && _matrix.isInvertible())\n\t\t\t\t_matrix._backup = _matrix.getValues();\n\t\t\t_matrix.prepend(matrix, true);\n\t\t\tvar style = this._style,\n\t\t\t\tfillColor = style.getFillColor(true),\n\t\t\t\tstrokeColor = style.getStrokeColor(true);\n\t\t\tif (fillColor)\n\t\t\t\tfillColor.transform(matrix);\n\t\t\tif (strokeColor)\n\t\t\t\tstrokeColor.transform(matrix);\n\t\t}\n\n\t\tif (applyMatrix && (applyMatrix = this._transformContent(\n\t\t\t\t_matrix, _applyRecursively, _setApplyMatrix))) {\n\t\t\tvar pivot = this._pivot;\n\t\t\tif (pivot)\n\t\t\t\t_matrix._transformPoint(pivot, pivot, true);\n\t\t\t_matrix.reset(true);\n\t\t\tif (_setApplyMatrix && this._canApplyMatrix)\n\t\t\t\tthis._applyMatrix = true;\n\t\t}\n\t\tvar bounds = this._bounds,\n\t\t\tposition = this._position;\n\t\tif (transformMatrix || applyMatrix) {\n\t\t\tthis._changed(25);\n\t\t}\n\t\tvar decomp = transformMatrix && bounds && matrix.decompose();\n\t\tif (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n\t\t\tfor (var key in bounds) {\n\t\t\t\tvar cache = bounds[key];\n\t\t\t\tif (cache.nonscaling) {\n\t\t\t\t\tdelete bounds[key];\n\t\t\t\t} else if (applyMatrix || !cache.internal) {\n\t\t\t\t\tvar rect = cache.rect;\n\t\t\t\t\tmatrix._transformBounds(rect, rect);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bounds = bounds;\n\t\t\tvar cached = bounds[this._getBoundsCacheKey(\n\t\t\t\tthis._boundsOptions || {})];\n\t\t\tif (cached) {\n\t\t\t\tthis._position = this._getPositionFromBounds(cached.rect);\n\t\t\t}\n\t\t} else if (transformMatrix && position && this._pivot) {\n\t\t\tthis._position = matrix._transformPoint(position, position);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_transformContent: function(matrix, applyRecursively, setApplyMatrix) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tchildren[i].transform(matrix, applyRecursively, setApplyMatrix);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tglobalToLocal: function() {\n\t\treturn this.getGlobalMatrix(true)._inverseTransform(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tlocalToGlobal: function() {\n\t\treturn this.getGlobalMatrix(true)._transformPoint(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tparentToLocal: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tlocalToParent: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tfitBounds: function(rectangle, fill) {\n\t\trectangle = Rectangle.read(arguments);\n\t\tvar bounds = this.getBounds(),\n\t\t\titemRatio = bounds.height / bounds.width,\n\t\t\trectRatio = rectangle.height / rectangle.width,\n\t\t\tscale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio)\n\t\t\t\t\t? rectangle.width / bounds.width\n\t\t\t\t\t: rectangle.height / bounds.height,\n\t\t\tnewBounds = new Rectangle(new Point(),\n\t\t\t\t\tnew Size(bounds.width * scale, bounds.height * scale));\n\t\tnewBounds.setCenter(rectangle.getCenter());\n\t\tthis.setBounds(newBounds);\n\t}\n}), {\n\n\t_setStyles: function(ctx, param, viewMatrix) {\n\t\tvar style = this._style,\n\t\t\tmatrix = this._matrix;\n\t\tif (style.hasFill()) {\n\t\t\tctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n\t\t}\n\t\tif (style.hasStroke()) {\n\t\t\tctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n\t\t\tctx.lineWidth = style.getStrokeWidth();\n\t\t\tvar strokeJoin = style.getStrokeJoin(),\n\t\t\t\tstrokeCap = style.getStrokeCap(),\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\tif (strokeJoin)\n\t\t\t\tctx.lineJoin = strokeJoin;\n\t\t\tif (strokeCap)\n\t\t\t\tctx.lineCap = strokeCap;\n\t\t\tif (miterLimit)\n\t\t\t\tctx.miterLimit = miterLimit;\n\t\t\tif (paper.support.nativeDash) {\n\t\t\t\tvar dashArray = style.getDashArray(),\n\t\t\t\t\tdashOffset = style.getDashOffset();\n\t\t\t\tif (dashArray && dashArray.length) {\n\t\t\t\t\tif ('setLineDash' in ctx) {\n\t\t\t\t\t\tctx.setLineDash(dashArray);\n\t\t\t\t\t\tctx.lineDashOffset = dashOffset;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.mozDash = dashArray;\n\t\t\t\t\t\tctx.mozDashOffset = dashOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (style.hasShadow()) {\n\t\t\tvar pixelRatio = param.pixelRatio || 1,\n\t\t\t\tmx = viewMatrix._shiftless().prepend(\n\t\t\t\t\tnew Matrix().scale(pixelRatio, pixelRatio)),\n\t\t\t\tblur = mx.transform(new Point(style.getShadowBlur(), 0)),\n\t\t\t\toffset = mx.transform(this.getShadowOffset());\n\t\t\tctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n\t\t\tctx.shadowBlur = blur.getLength();\n\t\t\tctx.shadowOffsetX = offset.x;\n\t\t\tctx.shadowOffsetY = offset.y;\n\t\t}\n\t},\n\n\tdraw: function(ctx, param, parentStrokeMatrix) {\n\t\tvar updateVersion = this._updateVersion = this._project._updateVersion;\n\t\tif (!this._visible || this._opacity === 0)\n\t\t\treturn;\n\t\tvar matrices = param.matrices,\n\t\t\tviewMatrix = param.viewMatrix,\n\t\t\tmatrix = this._matrix,\n\t\t\tglobalMatrix = matrices[matrices.length - 1].appended(matrix);\n\t\tif (!globalMatrix.isInvertible())\n\t\t\treturn;\n\n\t\tviewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix)\n\t\t\t\t: globalMatrix;\n\n\t\tmatrices.push(globalMatrix);\n\t\tif (param.updateMatrix) {\n\t\t\tthis._globalMatrix = globalMatrix;\n\t\t}\n\n\t\tvar blendMode = this._blendMode,\n\t\t\topacity = Numerical.clamp(this._opacity, 0, 1),\n\t\t\tnormalBlend = blendMode === 'normal',\n\t\t\tnativeBlend = BlendMode.nativeModes[blendMode],\n\t\t\tdirect = normalBlend && opacity === 1\n\t\t\t\t\t|| param.dontStart\n\t\t\t\t\t|| param.clip\n\t\t\t\t\t|| (nativeBlend || normalBlend && opacity < 1)\n\t\t\t\t\t\t&& this._canComposite(),\n\t\t\tpixelRatio = param.pixelRatio || 1,\n\t\t\tmainCtx, itemOffset, prevOffset;\n\t\tif (!direct) {\n\t\t\tvar bounds = this.getStrokeBounds(viewMatrix);\n\t\t\tif (!bounds.width || !bounds.height) {\n\t\t\t\tmatrices.pop();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprevOffset = param.offset;\n\t\t\titemOffset = param.offset = bounds.getTopLeft().floor();\n\t\t\tmainCtx = ctx;\n\t\t\tctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1)\n\t\t\t\t\t.multiply(pixelRatio));\n\t\t\tif (pixelRatio !== 1)\n\t\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t\tctx.save();\n\t\tvar strokeMatrix = parentStrokeMatrix\n\t\t\t\t? parentStrokeMatrix.appended(matrix)\n\t\t\t\t: this._canScaleStroke && !this.getStrokeScaling(true)\n\t\t\t\t\t&& viewMatrix,\n\t\t\tclip = !direct && param.clipItem,\n\t\t\ttransform = !strokeMatrix || clip;\n\t\tif (direct) {\n\t\t\tctx.globalAlpha = opacity;\n\t\t\tif (nativeBlend)\n\t\t\t\tctx.globalCompositeOperation = blendMode;\n\t\t} else if (transform) {\n\t\t\tctx.translate(-itemOffset.x, -itemOffset.y);\n\t\t}\n\t\tif (transform) {\n\t\t\t(direct ? matrix : viewMatrix).applyToContext(ctx);\n\t\t}\n\t\tif (clip) {\n\t\t\tparam.clipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tif (strokeMatrix) {\n\t\t\tctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\t\t\tvar offset = param.offset;\n\t\t\tif (offset)\n\t\t\t\tctx.translate(-offset.x, -offset.y);\n\t\t}\n\t\tthis._draw(ctx, param, viewMatrix, strokeMatrix);\n\t\tctx.restore();\n\t\tmatrices.pop();\n\t\tif (param.clip && !param.dontFinish) {\n\t\t\tctx.clip(this.getFillRule());\n\t\t}\n\t\tif (!direct) {\n\t\t\tBlendMode.process(blendMode, ctx, mainCtx, opacity,\n\t\t\t\t\titemOffset.subtract(prevOffset).multiply(pixelRatio));\n\t\t\tCanvasProvider.release(ctx);\n\t\t\tparam.offset = prevOffset;\n\t\t}\n\t},\n\n\t_isUpdated: function(updateVersion) {\n\t\tvar parent = this._parent;\n\t\tif (parent instanceof CompoundPath)\n\t\t\treturn parent._isUpdated(updateVersion);\n\t\tvar updated = this._updateVersion === updateVersion;\n\t\tif (!updated && parent && parent._visible\n\t\t\t\t&& parent._isUpdated(updateVersion)) {\n\t\t\tthis._updateVersion = updateVersion;\n\t\t\tupdated = true;\n\t\t}\n\t\treturn updated;\n\t},\n\n\t_drawSelection: function(ctx, matrix, size, selectionItems, updateVersion) {\n\t\tvar selection = this._selection,\n\t\t\titemSelected = selection & 1,\n\t\t\tboundsSelected = selection & 2\n\t\t\t\t\t|| itemSelected && this._selectBounds,\n\t\t\tpositionSelected = selection & 4;\n\t\tif (!this._drawSelected)\n\t\t\titemSelected = false;\n\t\tif ((itemSelected || boundsSelected || positionSelected)\n\t\t\t\t&& this._isUpdated(updateVersion)) {\n\t\t\tvar layer,\n\t\t\t\tcolor = this.getSelectedColor(true) || (layer = this.getLayer())\n\t\t\t\t\t&& layer.getSelectedColor(true),\n\t\t\t\tmx = matrix.appended(this.getGlobalMatrix(true)),\n\t\t\t\thalf = size / 2;\n\t\t\tctx.strokeStyle = ctx.fillStyle = color\n\t\t\t\t\t? color.toCanvasStyle(ctx) : '#009dec';\n\t\t\tif (itemSelected)\n\t\t\t\tthis._drawSelected(ctx, mx, selectionItems);\n\t\t\tif (positionSelected) {\n\t\t\t\tvar pos = this.getPosition(true),\n\t\t\t\t\tparent = this._parent,\n\t\t\t\t\tpoint = parent ? parent.localToGlobal(pos) : pos,\n\t\t\t\t\tx = point.x,\n\t\t\t\t\ty = point.y;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(x, y, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.stroke();\n\t\t\t\tvar deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n\t\t\t\t\tstart = half,\n\t\t\t\t\tend = size + 1;\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tvar delta = deltas[i],\n\t\t\t\t\t\tdx = delta[0],\n\t\t\t\t\t\tdy = delta[1];\n\t\t\t\t\tctx.moveTo(x + dx * start, y + dy * start);\n\t\t\t\t\tctx.lineTo(x + dx * end, y + dy * end);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (boundsSelected) {\n\t\t\t\tvar coords = mx._transformCorners(this.getInternalBounds());\n\t\t\t\tctx.beginPath();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n\t\t\t\t}\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.stroke();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx.fillRect(coords[i] - half, coords[++i] - half,\n\t\t\t\t\t\t\tsize, size);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn false;\n\t}\n}, Base.each(['down', 'drag', 'up', 'move'], function(key) {\n\tthis['removeOn' + Base.capitalize(key)] = function() {\n\t\tvar hash = {};\n\t\thash[key] = true;\n\t\treturn this.removeOn(hash);\n\t};\n}, {\n\n\tremoveOn: function(obj) {\n\t\tfor (var name in obj) {\n\t\t\tif (obj[name]) {\n\t\t\t\tvar key = 'mouse' + name,\n\t\t\t\t\tproject = this._project,\n\t\t\t\t\tsets = project._removeSets = project._removeSets || {};\n\t\t\t\tsets[key] = sets[key] || {};\n\t\t\t\tsets[key][this._id] = this;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n}), {\n\ttween: function(from, to, options) {\n\t\tif (!options) {\n\t\t\toptions = to;\n\t\t\tto = from;\n\t\t\tfrom = null;\n\t\t\tif (!options) {\n\t\t\t\toptions = to;\n\t\t\t\tto = null;\n\t\t\t}\n\t\t}\n\t\tvar easing = options && options.easing,\n\t\t\tstart = options && options.start,\n\t\t\tduration = options != null && (\n\t\t\t\ttypeof options === 'number' ? options : options.duration\n\t\t\t),\n\t\t\ttween = new Tween(this, from, to, duration, easing, start);\n\t\tfunction onFrame(event) {\n\t\t\ttween._handleFrame(event.time * 1000);\n\t\t\tif (!tween.running) {\n\t\t\t\tthis.off('frame', onFrame);\n\t\t\t}\n\t\t}\n\t\tif (duration) {\n\t\t\tthis.on('frame', onFrame);\n\t\t}\n\t\treturn tween;\n\t},\n\n\ttweenTo: function(to, options) {\n\t\treturn this.tween(null, to, options);\n\t},\n\n\ttweenFrom: function(from, options) {\n\t\treturn this.tween(from, null, options);\n\t}\n});\n\nvar Group = Item.extend({\n\t_class: 'Group',\n\t_selectBounds: false,\n\t_selectChildren: true,\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\n\tinitialize: function Group(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg))\n\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 2050) {\n\t\t\tthis._clipItem = undefined;\n\t\t}\n\t},\n\n\t_getClipItem: function() {\n\t\tvar clipItem = this._clipItem;\n\t\tif (clipItem === undefined) {\n\t\t\tclipItem = null;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i]._clipMask) {\n\t\t\t\t\tclipItem = children[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._clipItem = clipItem;\n\t\t}\n\t\treturn clipItem;\n\t},\n\n\tisClipped: function() {\n\t\treturn !!this._getClipItem();\n\t},\n\n\tsetClipped: function(clipped) {\n\t\tvar child = this.getFirstChild();\n\t\tif (child)\n\t\t\tchild.setClipMask(clipped);\n\t},\n\n\t_getBounds: function _getBounds(matrix, options) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn clipItem\n\t\t\t? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix),\n\t\t\t\tBase.set({}, options, { stroke: false }))\n\t\t\t: _getBounds.base.call(this, matrix, options);\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn (!clipItem || clipItem.contains(point))\n\t\t\t\t&& _hitTestChildren.base.call(this, point, options, viewMatrix,\n\t\t\t\t\tclipItem);\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tvar clip = param.clip,\n\t\t\tclipItem = !clip && this._getClipItem();\n\t\tparam = param.extend({ clipItem: clipItem, clip: false });\n\t\tif (clip) {\n\t\t\tctx.beginPath();\n\t\t\tparam.dontStart = param.dontFinish = true;\n\t\t} else if (clipItem) {\n\t\t\tclipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar item = children[i];\n\t\t\tif (item !== clipItem)\n\t\t\t\titem.draw(ctx, param);\n\t\t}\n\t}\n});\n\nvar Layer = Group.extend({\n\t_class: 'Layer',\n\n\tinitialize: function Layer() {\n\t\tGroup.apply(this, arguments);\n\t},\n\n\t_getOwner: function() {\n\t\treturn this._parent || this._index != null && this._project;\n\t},\n\n\tisInserted: function isInserted() {\n\t\treturn this._parent ? isInserted.base.call(this) : this._index != null;\n\t},\n\n\tactivate: function() {\n\t\tthis._project._activeLayer = this;\n\t},\n\n\t_hitTestSelf: function() {\n\t}\n});\n\nvar Shape = Item.extend({\n\t_class: 'Shape',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_canScaleStroke: true,\n\t_serializeFields: {\n\t\ttype: null,\n\t\tsize: null,\n\t\tradius: null\n\t},\n\n\tinitialize: function Shape(props, point) {\n\t\tthis._initialize(props, point);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._type === item._type\n\t\t\t&& this._size.equals(item._size)\n\t\t\t&& Base.equals(this._radius, item._radius);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setType(source._type);\n\t\tthis.setSize(source._size);\n\t\tthis.setRadius(source._radius);\n\t},\n\n\tgetType: function() {\n\t\treturn this._type;\n\t},\n\n\tsetType: function(type) {\n\t\tthis._type = type;\n\t},\n\n\tgetShape: '#getType',\n\tsetShape: '#setType',\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setSize');\n\t},\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments);\n\t\tif (!this._size) {\n\t\t\tthis._size = size.clone();\n\t\t} else if (!this._size.equals(size)) {\n\t\t\tvar type = this._type,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tif (type === 'rectangle') {\n\t\t\t\tthis._radius.set(Size.min(this._radius, size.divide(2).abs()));\n\t\t\t} else if (type === 'circle') {\n\t\t\t\twidth = height = (width + height) / 2;\n\t\t\t\tthis._radius = width / 2;\n\t\t\t} else if (type === 'ellipse') {\n\t\t\t\tthis._radius._set(width / 2, height / 2);\n\t\t\t}\n\t\t\tthis._size._set(width, height);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tgetRadius: function() {\n\t\tvar rad = this._radius;\n\t\treturn this._type === 'circle'\n\t\t\t\t? rad\n\t\t\t\t: new LinkedSize(rad.width, rad.height, this, 'setRadius');\n\t},\n\n\tsetRadius: function(radius) {\n\t\tvar type = this._type;\n\t\tif (type === 'circle') {\n\t\t\tif (radius === this._radius)\n\t\t\t\treturn;\n\t\t\tvar size = radius * 2;\n\t\t\tthis._radius = radius;\n\t\t\tthis._size._set(size, size);\n\t\t} else {\n\t\t\tradius = Size.read(arguments);\n\t\t\tif (!this._radius) {\n\t\t\t\tthis._radius = radius.clone();\n\t\t\t} else {\n\t\t\t\tif (this._radius.equals(radius))\n\t\t\t\t\treturn;\n\t\t\t\tthis._radius.set(radius);\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar size = Size.max(this._size, radius.multiply(2));\n\t\t\t\t\tthis._size.set(size);\n\t\t\t\t} else if (type === 'ellipse') {\n\t\t\t\t\tthis._size._set(radius.width * 2, radius.height * 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._changed(9);\n\t},\n\n\tisEmpty: function() {\n\t\treturn false;\n\t},\n\n\ttoPath: function(insert) {\n\t\tvar path = new Path[Base.capitalize(this._type)]({\n\t\t\tcenter: new Point(),\n\t\t\tsize: this._size,\n\t\t\tradius: this._radius,\n\t\t\tinsert: false\n\t\t});\n\t\tpath.copyAttributes(this);\n\t\tif (paper.settings.applyMatrix)\n\t\t\tpath.setApplyMatrix(true);\n\t\tif (insert === undefined || insert)\n\t\t\tpath.insertAbove(this);\n\t\treturn path;\n\t},\n\n\ttoShape: '#clone',\n\n\t_asPathItem: function() {\n\t\treturn this.toPath(false);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar style = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\tuntransformed = !strokeMatrix;\n\t\tif (hasFill || hasStroke || dontPaint) {\n\t\t\tvar type = this._type,\n\t\t\t\tradius = this._radius,\n\t\t\t\tisCircle = type === 'circle';\n\t\t\tif (!param.dontStart)\n\t\t\t\tctx.beginPath();\n\t\t\tif (untransformed && isCircle) {\n\t\t\t\tctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n\t\t\t} else {\n\t\t\t\tvar rx = isCircle ? radius : radius.width,\n\t\t\t\t\try = isCircle ? radius : radius.height,\n\t\t\t\t\tsize = this._size,\n\t\t\t\t\twidth = size.width,\n\t\t\t\t\theight = size.height;\n\t\t\t\tif (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n\t\t\t\t\tctx.rect(-width / 2, -height / 2, width, height);\n\t\t\t\t} else {\n\t\t\t\t\tvar x = width / 2,\n\t\t\t\t\t\ty = height / 2,\n\t\t\t\t\t\tkappa = 1 - 0.5522847498307936,\n\t\t\t\t\t\tcx = rx * kappa,\n\t\t\t\t\t\tcy = ry * kappa,\n\t\t\t\t\t\tc = [\n\t\t\t\t\t\t\t-x, -y + ry,\n\t\t\t\t\t\t\t-x, -y + cy,\n\t\t\t\t\t\t\t-x + cx, -y,\n\t\t\t\t\t\t\t-x + rx, -y,\n\t\t\t\t\t\t\tx - rx, -y,\n\t\t\t\t\t\t\tx - cx, -y,\n\t\t\t\t\t\t\tx, -y + cy,\n\t\t\t\t\t\t\tx, -y + ry,\n\t\t\t\t\t\t\tx, y - ry,\n\t\t\t\t\t\t\tx, y - cy,\n\t\t\t\t\t\t\tx - cx, y,\n\t\t\t\t\t\t\tx - rx, y,\n\t\t\t\t\t\t\t-x + rx, y,\n\t\t\t\t\t\t\t-x + cx, y,\n\t\t\t\t\t\t\t-x, y - cy,\n\t\t\t\t\t\t\t-x, y - ry\n\t\t\t\t\t\t];\n\t\t\t\t\tif (strokeMatrix)\n\t\t\t\t\t\tstrokeMatrix.transform(c, c, 32);\n\t\t\t\t\tctx.moveTo(c[0], c[1]);\n\t\t\t\t\tctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[8], c[9]);\n\t\t\t\t\tctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n\t\t\t\t\tif (y !== ry)\n\t\t\t\t\t\tctx.lineTo(c[16], c[17]);\n\t\t\t\t\tctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[24], c[25]);\n\t\t\t\t\tctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.closePath();\n\t\t}\n\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\tstyle = this._style,\n\t\t\tstrokeWidth = options.stroke && style.hasStroke()\n\t\t\t\t\t&& style.getStrokeWidth();\n\t\tif (matrix)\n\t\t\trect = matrix._transformBounds(rect);\n\t\treturn strokeWidth\n\t\t\t\t? rect.expand(Path._getStrokePadding(strokeWidth,\n\t\t\t\t\tthis._getStrokeMatrix(matrix, options)))\n\t\t\t\t: rect;\n\t}\n},\nnew function() {\n\tfunction getCornerCenter(that, point, expand) {\n\t\tvar radius = that._radius;\n\t\tif (!radius.isZero()) {\n\t\t\tvar halfSize = that._size.divide(2);\n\t\t\tfor (var q = 1; q <= 4; q++) {\n\t\t\t\tvar dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n\t\t\t\t\tcorner = dir.multiply(halfSize),\n\t\t\t\t\tcenter = corner.subtract(dir.multiply(radius)),\n\t\t\t\t\trect = new Rectangle(\n\t\t\t\t\t\t\texpand ? corner.add(dir.multiply(expand)) : corner,\n\t\t\t\t\t\t\tcenter);\n\t\t\t\tif (rect.contains(point))\n\t\t\t\t\treturn { point: center, quadrant: q };\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction isOnEllipseStroke(point, radius, padding, quadrant) {\n\t\tvar vector = point.divide(radius);\n\t\treturn (!quadrant || vector.isInQuadrant(quadrant)) &&\n\t\t\t\tvector.subtract(vector.normalize()).multiply(radius)\n\t\t\t\t\t.divide(padding).length <= 1;\n\t}\n\n\treturn {\n\t\t_contains: function _contains(point) {\n\t\t\tif (this._type === 'rectangle') {\n\t\t\t\tvar center = getCornerCenter(this, point);\n\t\t\t\treturn center\n\t\t\t\t\t\t? point.subtract(center.point).divide(this._radius)\n\t\t\t\t\t\t\t.getLength() <= 1\n\t\t\t\t\t\t: _contains.base.call(this, point);\n\t\t\t} else {\n\t\t\t\treturn point.divide(this.size).getLength() <= 0.5;\n\t\t\t}\n\t\t},\n\n\t\t_hitTestSelf: function _hitTestSelf(point, options, viewMatrix,\n\t\t\t\tstrokeMatrix) {\n\t\t\tvar hit = false,\n\t\t\t\tstyle = this._style,\n\t\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\t\thitFill = options.fill && style.hasFill();\n\t\t\tif (hitStroke || hitFill) {\n\t\t\t\tvar type = this._type,\n\t\t\t\t\tradius = this._radius,\n\t\t\t\t\tstrokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n\t\t\t\t\tstrokePadding = options._tolerancePadding.add(\n\t\t\t\t\t\tPath._getStrokePadding(strokeRadius,\n\t\t\t\t\t\t\t!style.getStrokeScaling() && strokeMatrix));\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar padding = strokePadding.multiply(2),\n\t\t\t\t\t\tcenter = getCornerCenter(this, point, padding);\n\t\t\t\t\tif (center) {\n\t\t\t\t\t\thit = isOnEllipseStroke(point.subtract(center.point),\n\t\t\t\t\t\t\t\tradius, strokePadding, center.quadrant);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\t\t\t\t\touter = rect.expand(padding),\n\t\t\t\t\t\t\tinner = rect.expand(padding.negate());\n\t\t\t\t\t\thit = outer._containsPoint(point)\n\t\t\t\t\t\t\t\t&& !inner._containsPoint(point);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thit = isOnEllipseStroke(point, radius, strokePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this)\n\t\t\t\t\t: _hitTestSelf.base.apply(this, arguments);\n\t\t}\n\t};\n}, {\n\nstatics: new function() {\n\tfunction createShape(type, point, size, radius, args) {\n\t\tvar item = Base.create(Shape.prototype);\n\t\titem._type = type;\n\t\titem._size = size;\n\t\titem._radius = radius;\n\t\titem._initialize(Base.getNamed(args), point);\n\t\treturn item;\n\t}\n\n\treturn {\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createShape('circle', center, new Size(radius * 2), radius,\n\t\t\t\t\targs);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.min(Size.readNamed(args, 'radius'),\n\t\t\t\t\t\trect.getSize(true).divide(2));\n\t\t\treturn createShape('rectangle', rect.getCenter(true),\n\t\t\t\t\trect.getSize(true), radius, args);\n\t\t},\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args),\n\t\t\t\tradius = ellipse.radius;\n\t\t\treturn createShape('ellipse', ellipse.center, radius.multiply(2),\n\t\t\t\t\tradius, args);\n\t\t},\n\n\t\t_readEllipse: function(args) {\n\t\t\tvar center,\n\t\t\t\tradius;\n\t\t\tif (Base.hasNamed(args, 'radius')) {\n\t\t\t\tcenter = Point.readNamed(args, 'center');\n\t\t\t\tradius = Size.readNamed(args, 'radius');\n\t\t\t} else {\n\t\t\t\tvar rect = Rectangle.readNamed(args, 'rectangle');\n\t\t\t\tcenter = rect.getCenter(true);\n\t\t\t\tradius = rect.getSize(true).divide(2);\n\t\t\t}\n\t\t\treturn { center: center, radius: radius };\n\t\t}\n\t};\n}});\n\nvar Raster = Item.extend({\n\t_class: 'Raster',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: false, handle: false },\n\t_serializeFields: {\n\t\tcrossOrigin: null,\n\t\tsource: null\n\t},\n\t_prioritize: ['crossOrigin'],\n\t_smoothing: 'low',\n\tbeans: true,\n\n\tinitialize: function Raster(source, position) {\n\t\tif (!this._initialize(source,\n\t\t\t\tposition !== undefined && Point.read(arguments))) {\n\t\t\tvar image,\n\t\t\t\ttype = typeof source,\n\t\t\t\tobject = type === 'string'\n\t\t\t\t\t? document.getElementById(source)\n\t\t\t\t\t: type  === 'object'\n\t\t\t\t\t\t? source\n\t\t\t\t\t\t: null;\n\t\t\tif (object && object !== Item.NO_INSERT) {\n\t\t\t\tif (object.getContext || object.naturalHeight != null) {\n\t\t\t\t\timage = object;\n\t\t\t\t} else if (object) {\n\t\t\t\t\tvar size = Size.read(arguments);\n\t\t\t\t\tif (!size.isZero()) {\n\t\t\t\t\t\timage = CanvasProvider.getCanvas(size);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (image) {\n\t\t\t\tthis.setImage(image);\n\t\t\t} else {\n\t\t\t\tthis.setSource(source);\n\t\t\t}\n\t\t}\n\t\tif (!this._size) {\n\t\t\tthis._size = new Size();\n\t\t\tthis._loaded = false;\n\t\t}\n\t},\n\n\t_equals: function(item) {\n\t\treturn this.getSource() === item.getSource();\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar image = source._image,\n\t\t\tcanvas = source._canvas;\n\t\tif (image) {\n\t\t\tthis._setImage(image);\n\t\t} else if (canvas) {\n\t\t\tvar copyCanvas = CanvasProvider.getCanvas(source._size);\n\t\t\tcopyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\t\t\tthis._setImage(copyCanvas);\n\t\t}\n\t\tthis._crossOrigin = source._crossOrigin;\n\t},\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size ? size.width : 0, size ? size.height : 0,\n\t\t\t\tthis, 'setSize');\n\t},\n\n\tsetSize: function(_size, _clear) {\n\t\tvar size = Size.read(arguments);\n\t\tif (!size.equals(this._size)) {\n\t\t\tif (size.width > 0 && size.height > 0) {\n\t\t\t\tvar element = !_clear && this.getElement();\n\t\t\t\tthis._setImage(CanvasProvider.getCanvas(size));\n\t\t\t\tif (element) {\n\t\t\t\t\tthis.getContext(true).drawImage(element, 0, 0,\n\t\t\t\t\t\t\tsize.width, size.height);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._canvas)\n\t\t\t\t\tCanvasProvider.release(this._canvas);\n\t\t\t\tthis._size = size.clone();\n\t\t\t}\n\t\t} else if (_clear) {\n\t\t\tthis.clear();\n\t\t}\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._size ? this._size.width : 0;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis.setSize(width, this.getHeight());\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._size ? this._size.height : 0;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis.setSize(this.getWidth(), height);\n\t},\n\n\tgetLoaded: function() {\n\t\treturn this._loaded;\n\t},\n\n\tisEmpty: function() {\n\t\tvar size = this._size;\n\t\treturn !size || size.width === 0 && size.height === 0;\n\t},\n\n\tgetResolution: function() {\n\t\tvar matrix = this._matrix,\n\t\t\torig = new Point(0, 0).transform(matrix),\n\t\t\tu = new Point(1, 0).transform(matrix).subtract(orig),\n\t\t\tv = new Point(0, 1).transform(matrix).subtract(orig);\n\t\treturn new Size(\n\t\t\t72 / u.getLength(),\n\t\t\t72 / v.getLength()\n\t\t);\n\t},\n\n\tgetPpi: '#getResolution',\n\n\tgetImage: function() {\n\t\treturn this._image;\n\t},\n\n\tsetImage: function(image) {\n\t\tvar that = this;\n\n\t\tfunction emit(event) {\n\t\t\tvar view = that.getView(),\n\t\t\t\ttype = event && event.type || 'load';\n\t\t\tif (view && that.responds(type)) {\n\t\t\t\tpaper = view._scope;\n\t\t\t\tthat.emit(type, new Event(event));\n\t\t\t}\n\t\t}\n\n\t\tthis._setImage(image);\n\t\tif (this._loaded) {\n\t\t\tsetTimeout(emit, 0);\n\t\t} else if (image) {\n\t\t\tDomEvent.add(image, {\n\t\t\t\tload: function(event) {\n\t\t\t\t\tthat._setImage(image);\n\t\t\t\t\temit(event);\n\t\t\t\t},\n\t\t\t\terror: emit\n\t\t\t});\n\t\t}\n\t},\n\n\t_setImage: function(image) {\n\t\tif (this._canvas)\n\t\t\tCanvasProvider.release(this._canvas);\n\t\tif (image && image.getContext) {\n\t\t\tthis._image = null;\n\t\t\tthis._canvas = image;\n\t\t\tthis._loaded = true;\n\t\t} else {\n\t\t\tthis._image = image;\n\t\t\tthis._canvas = null;\n\t\t\tthis._loaded = !!(image && image.src && image.complete);\n\t\t}\n\t\tthis._size = new Size(\n\t\t\t\timage ? image.naturalWidth || image.width : 0,\n\t\t\t\timage ? image.naturalHeight || image.height : 0);\n\t\tthis._context = null;\n\t\tthis._changed(1033);\n\t},\n\n\tgetCanvas: function() {\n\t\tif (!this._canvas) {\n\t\t\tvar ctx = CanvasProvider.getContext(this._size);\n\t\t\ttry {\n\t\t\t\tif (this._image)\n\t\t\t\t\tctx.drawImage(this._image, 0, 0);\n\t\t\t\tthis._canvas = ctx.canvas;\n\t\t\t} catch (e) {\n\t\t\t\tCanvasProvider.release(ctx);\n\t\t\t}\n\t\t}\n\t\treturn this._canvas;\n\t},\n\n\tsetCanvas: '#setImage',\n\n\tgetContext: function(_change) {\n\t\tif (!this._context)\n\t\t\tthis._context = this.getCanvas().getContext('2d');\n\t\tif (_change) {\n\t\t\tthis._image = null;\n\t\t\tthis._changed(1025);\n\t\t}\n\t\treturn this._context;\n\t},\n\n\tsetContext: function(context) {\n\t\tthis._context = context;\n\t},\n\n\tgetSource: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.src || this.toDataURL();\n\t},\n\n\tsetSource: function(src) {\n\t\tvar image = new self.Image(),\n\t\t\tcrossOrigin = this._crossOrigin;\n\t\tif (crossOrigin)\n\t\t\timage.crossOrigin = crossOrigin;\n\t\tif (src)\n\t\t\timage.src = src;\n\t\tthis.setImage(image);\n\t},\n\n\tgetCrossOrigin: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.crossOrigin || this._crossOrigin || '';\n\t},\n\n\tsetCrossOrigin: function(crossOrigin) {\n\t\tthis._crossOrigin = crossOrigin;\n\t\tvar image = this._image;\n\t\tif (image)\n\t\t\timage.crossOrigin = crossOrigin;\n\t},\n\n\tgetSmoothing: function() {\n\t\treturn this._smoothing;\n\t},\n\n\tsetSmoothing: function(smoothing) {\n\t\tthis._smoothing = typeof smoothing === 'string'\n\t\t\t? smoothing\n\t\t\t: smoothing ? 'low' : 'off';\n\t\tthis._changed(257);\n\t},\n\n\tgetElement: function() {\n\t\treturn this._canvas || this._loaded && this._image;\n\t}\n}, {\n\tbeans: false,\n\n\tgetSubCanvas: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tctx = CanvasProvider.getContext(rect.getSize());\n\t\tctx.drawImage(this.getCanvas(), rect.x, rect.y,\n\t\t\t\trect.width, rect.height, 0, 0, rect.width, rect.height);\n\t\treturn ctx.canvas;\n\t},\n\n\tgetSubRaster: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\traster._setImage(this.getSubCanvas(rect));\n\t\traster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\t\traster._matrix.prepend(this._matrix);\n\t\traster.insertAbove(this);\n\t\treturn raster;\n\t},\n\n\ttoDataURL: function() {\n\t\tvar image = this._image,\n\t\t\tsrc = image && image.src;\n\t\tif (/^data:/.test(src))\n\t\t\treturn src;\n\t\tvar canvas = this.getCanvas();\n\t\treturn canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n\t},\n\n\tdrawImage: function(image ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).drawImage(image, point.x, point.y);\n\t},\n\n\tgetAverageColor: function(object) {\n\t\tvar bounds, path;\n\t\tif (!object) {\n\t\t\tbounds = this.getBounds();\n\t\t} else if (object instanceof PathItem) {\n\t\t\tpath = object;\n\t\t\tbounds = object.getBounds();\n\t\t} else if (typeof object === 'object') {\n\t\t\tif ('width' in object) {\n\t\t\t\tbounds = new Rectangle(object);\n\t\t\t} else if ('x' in object) {\n\t\t\t\tbounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n\t\t\t}\n\t\t}\n\t\tif (!bounds)\n\t\t\treturn null;\n\t\tvar sampleSize = 32,\n\t\t\twidth = Math.min(bounds.width, sampleSize),\n\t\t\theight = Math.min(bounds.height, sampleSize);\n\t\tvar ctx = Raster._sampleContext;\n\t\tif (!ctx) {\n\t\t\tctx = Raster._sampleContext = CanvasProvider.getContext(\n\t\t\t\t\tnew Size(sampleSize));\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n\t\t}\n\t\tctx.save();\n\t\tvar matrix = new Matrix()\n\t\t\t\t.scale(width / bounds.width, height / bounds.height)\n\t\t\t\t.translate(-bounds.x, -bounds.y);\n\t\tmatrix.applyToContext(ctx);\n\t\tif (path)\n\t\t\tpath.draw(ctx, new Base({ clip: true, matrices: [matrix] }));\n\t\tthis._matrix.applyToContext(ctx);\n\t\tvar element = this.getElement(),\n\t\t\tsize = this._size;\n\t\tif (element)\n\t\t\tctx.drawImage(element, -size.width / 2, -size.height / 2);\n\t\tctx.restore();\n\t\tvar pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width),\n\t\t\t\tMath.ceil(height)).data,\n\t\t\tchannels = [0, 0, 0],\n\t\t\ttotal = 0;\n\t\tfor (var i = 0, l = pixels.length; i < l; i += 4) {\n\t\t\tvar alpha = pixels[i + 3];\n\t\t\ttotal += alpha;\n\t\t\talpha /= 255;\n\t\t\tchannels[0] += pixels[i] * alpha;\n\t\t\tchannels[1] += pixels[i + 1] * alpha;\n\t\t\tchannels[2] += pixels[i + 2] * alpha;\n\t\t}\n\t\tfor (var i = 0; i < 3; i++)\n\t\t\tchannels[i] /= total;\n\t\treturn total ? Color.read(channels) : null;\n\t},\n\n\tgetPixel: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n\t\treturn new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255],\n\t\t\t\tdata[3] / 255);\n\t},\n\n\tsetPixel: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tcolor = Color.read(args),\n\t\t\tcomponents = color._convert('rgb'),\n\t\t\talpha = color._alpha,\n\t\t\tctx = this.getContext(true),\n\t\t\timageData = ctx.createImageData(1, 1),\n\t\t\tdata = imageData.data;\n\t\tdata[0] = components[0] * 255;\n\t\tdata[1] = components[1] * 255;\n\t\tdata[2] = components[2] * 255;\n\t\tdata[3] = alpha != null ? alpha * 255 : 255;\n\t\tctx.putImageData(imageData, point.x, point.y);\n\t},\n\n\tclear: function() {\n\t\tvar size = this._size;\n\t\tthis.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n\t},\n\n\tcreateImageData: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn this.getContext().createImageData(size.width, size.height);\n\t},\n\n\tgetImageData: function() {\n\t\tvar rect = Rectangle.read(arguments);\n\t\tif (rect.isEmpty())\n\t\t\trect = new Rectangle(this._size);\n\t\treturn this.getContext().getImageData(rect.x, rect.y,\n\t\t\t\trect.width, rect.height);\n\t},\n\n\tputImageData: function(data ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).putImageData(data, point.x, point.y);\n\t},\n\n\tsetImageData: function(data) {\n\t\tthis.setSize(data);\n\t\tthis.getContext(true).putImageData(data, 0, 0);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0);\n\t\treturn matrix ? matrix._transformBounds(rect) : rect;\n\t},\n\n\t_hitTestSelf: function(point) {\n\t\tif (this._contains(point)) {\n\t\t\tvar that = this;\n\t\t\treturn new HitResult('pixel', that, {\n\t\t\t\toffset: point.add(that._size.divide(2)).round(),\n\t\t\t\tcolor: {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn that.getPixel(this.offset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tvar element = this.getElement();\n\t\tif (element && element.width > 0 && element.height > 0) {\n\t\t\tctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\n\t\t\tvar smoothing = this._smoothing,\n\t\t\t\tdisabled = smoothing === 'off';\n\t\t\tDomElement.setPrefixed(\n\t\t\t\tctx,\n\t\t\t\tdisabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality',\n\t\t\t\tdisabled ? false : smoothing\n\t\t\t);\n\n\t\t\tctx.drawImage(element,\n\t\t\t\t\t-this._size.width / 2, -this._size.height / 2);\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn true;\n\t}\n});\n\nvar SymbolItem = Item.extend({\n\t_class: 'SymbolItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: true },\n\t_serializeFields: {\n\t\tsymbol: null\n\t},\n\n\tinitialize: function SymbolItem(arg0, arg1) {\n\t\tif (!this._initialize(arg0,\n\t\t\t\targ1 !== undefined && Point.read(arguments, 1)))\n\t\t\tthis.setDefinition(arg0 instanceof SymbolDefinition ?\n\t\t\t\t\targ0 : new SymbolDefinition(arg0));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._definition === item._definition;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setDefinition(source._definition);\n\t},\n\n\tgetDefinition: function() {\n\t\treturn this._definition;\n\t},\n\n\tsetDefinition: function(definition) {\n\t\tthis._definition = definition;\n\t\tthis._changed(9);\n\t},\n\n\tgetSymbol: '#getDefinition',\n\tsetSymbol: '#setDefinition',\n\n\tisEmpty: function() {\n\t\treturn this._definition._item.isEmpty();\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar item = this._definition._item;\n\t\treturn item._getCachedBounds(item._matrix.prepended(matrix), options);\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix) {\n\t\tvar opts = options.extend({ all: false });\n\t\tvar res = this._definition._item._hitTest(point, opts, viewMatrix);\n\t\tif (res)\n\t\t\tres.item = this;\n\t\treturn res;\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tthis._definition._item.draw(ctx, param);\n\t}\n\n});\n\nvar SymbolDefinition = Base.extend({\n\t_class: 'SymbolDefinition',\n\n\tinitialize: function SymbolDefinition(item, dontCenter) {\n\t\tthis._id = UID.get();\n\t\tthis.project = paper.project;\n\t\tif (item)\n\t\t\tthis.setItem(item, dontCenter);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._class, this._item],\n\t\t\t\t\toptions, false, dictionary);\n\t\t});\n\t},\n\n\t_changed: function(flags) {\n\t\tif (flags & 8)\n\t\t\tItem._clearBoundsCache(this);\n\t\tif (flags & 1)\n\t\t\tthis.project._changed(flags);\n\t},\n\n\tgetItem: function() {\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item, _dontCenter) {\n\t\tif (item._symbol)\n\t\t\titem = item.clone();\n\t\tif (this._item)\n\t\t\tthis._item._symbol = null;\n\t\tthis._item = item;\n\t\titem.remove();\n\t\titem.setSelected(false);\n\t\tif (!_dontCenter)\n\t\t\titem.setPosition(new Point());\n\t\titem._symbol = this;\n\t\tthis._changed(9);\n\t},\n\n\tgetDefinition: '#getItem',\n\tsetDefinition: '#setItem',\n\n\tplace: function(position) {\n\t\treturn new SymbolItem(this, position);\n\t},\n\n\tclone: function() {\n\t\treturn new SymbolDefinition(this._item.clone(false));\n\t},\n\n\tequals: function(symbol) {\n\t\treturn symbol === this\n\t\t\t\t|| symbol && this._item.equals(symbol._item)\n\t\t\t\t|| false;\n\t}\n});\n\nvar HitResult = Base.extend({\n\t_class: 'HitResult',\n\n\tinitialize: function HitResult(type, item, values) {\n\t\tthis.type = type;\n\t\tthis.item = item;\n\t\tif (values)\n\t\t\tthis.inject(values);\n\t},\n\n\tstatics: {\n\t\tgetOptions: function(args) {\n\t\t\tvar options = args && Base.read(args);\n\t\t\treturn new Base({\n\t\t\t\ttype: null,\n\t\t\t\ttolerance: paper.settings.hitTolerance,\n\t\t\t\tfill: !options,\n\t\t\t\tstroke: !options,\n\t\t\t\tsegments: !options,\n\t\t\t\thandles: false,\n\t\t\t\tends: false,\n\t\t\t\tposition: false,\n\t\t\t\tcenter: false,\n\t\t\t\tbounds: false,\n\t\t\t\tguides: false,\n\t\t\t\tselected: false\n\t\t\t}, options);\n\t\t}\n\t}\n});\n\nvar Segment = Base.extend({\n\t_class: 'Segment',\n\tbeans: true,\n\t_selection: 0,\n\n\tinitialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n\t\tvar count = arguments.length,\n\t\t\tpoint, handleIn, handleOut, selection;\n\t\tif (count > 0) {\n\t\t\tif (arg0 == null || typeof arg0 === 'object') {\n\t\t\t\tif (count === 1 && arg0 && 'point' in arg0) {\n\t\t\t\t\tpoint = arg0.point;\n\t\t\t\t\thandleIn = arg0.handleIn;\n\t\t\t\t\thandleOut = arg0.handleOut;\n\t\t\t\t\tselection = arg0.selection;\n\t\t\t\t} else {\n\t\t\t\t\tpoint = arg0;\n\t\t\t\t\thandleIn = arg1;\n\t\t\t\t\thandleOut = arg2;\n\t\t\t\t\tselection = arg3;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpoint = [ arg0, arg1 ];\n\t\t\t\thandleIn = arg2 !== undefined ? [ arg2, arg3 ] : null;\n\t\t\t\thandleOut = arg4 !== undefined ? [ arg4, arg5 ] : null;\n\t\t\t}\n\t\t}\n\t\tnew SegmentPoint(point, this, '_point');\n\t\tnew SegmentPoint(handleIn, this, '_handleIn');\n\t\tnew SegmentPoint(handleOut, this, '_handleOut');\n\t\tif (selection)\n\t\t\tthis.setSelection(selection);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar point = this._point,\n\t\t\tselection = this._selection,\n\t\t\tobj = selection || this.hasHandles()\n\t\t\t\t\t? [point, this._handleIn, this._handleOut]\n\t\t\t\t\t: point;\n\t\tif (selection)\n\t\t\tobj.push(selection);\n\t\treturn Base.serialize(obj, options, true, dictionary);\n\t},\n\n\t_changed: function(point) {\n\t\tvar path = this._path;\n\t\tif (!path)\n\t\t\treturn;\n\t\tvar curves = path._curves,\n\t\t\tindex = this._index,\n\t\t\tcurve;\n\t\tif (curves) {\n\t\t\tif ((!point || point === this._point || point === this._handleIn)\n\t\t\t\t\t&& (curve = index > 0 ? curves[index - 1] : path._closed\n\t\t\t\t\t\t? curves[curves.length - 1] : null))\n\t\t\t\tcurve._changed();\n\t\t\tif ((!point || point === this._point || point === this._handleOut)\n\t\t\t\t\t&& (curve = curves[index]))\n\t\t\t\tcurve._changed();\n\t\t}\n\t\tpath._changed(41);\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tsetPoint: function() {\n\t\tthis._point.set(Point.read(arguments));\n\t},\n\n\tgetHandleIn: function() {\n\t\treturn this._handleIn;\n\t},\n\n\tsetHandleIn: function() {\n\t\tthis._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetHandleOut: function() {\n\t\treturn this._handleOut;\n\t},\n\n\tsetHandleOut: function() {\n\t\tthis._handleOut.set(Point.read(arguments));\n\t},\n\n\thasHandles: function() {\n\t\treturn !this._handleIn.isZero() || !this._handleOut.isZero();\n\t},\n\n\tisSmooth: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut;\n\t\treturn !handleIn.isZero() && !handleOut.isZero()\n\t\t\t\t&& handleIn.isCollinear(handleOut);\n\t},\n\n\tclearHandles: function() {\n\t\tthis._handleIn._set(0, 0);\n\t\tthis._handleOut._set(0, 0);\n\t},\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tvar oldSelection = this._selection,\n\t\t\tpath = this._path;\n\t\tthis._selection = selection = selection || 0;\n\t\tif (path && selection !== oldSelection) {\n\t\t\tpath._updateSelection(this, oldSelection, selection);\n\t\t\tpath._changed(257);\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._selection & 7);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._changeSelection(7, selected);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index !== undefined ? this._index : null;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path || null;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tindex = this._index;\n\t\tif (path) {\n\t\t\tif (index > 0 && !path._closed\n\t\t\t\t\t&& index === path._segments.length - 1)\n\t\t\t\tindex--;\n\t\t\treturn path.getCurves()[index] || null;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetLocation: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve\n\t\t\t\t? new CurveLocation(curve, this === curve._segment1 ? 0 : 1)\n\t\t\t\t: null;\n\t},\n\n\tgetNext: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index + 1]\n\t\t\t\t|| this._path._closed && segments[0]) || null;\n\t},\n\n\tsmooth: function(options, _first, _last) {\n\t\tvar opts = options || {},\n\t\t\ttype = opts.type,\n\t\t\tfactor = opts.factor,\n\t\t\tprev = this.getPrevious(),\n\t\t\tnext = this.getNext(),\n\t\t\tp0 = (prev || this)._point,\n\t\t\tp1 = this._point,\n\t\t\tp2 = (next || this)._point,\n\t\t\td1 = p0.getDistance(p1),\n\t\t\td2 = p1.getDistance(p2);\n\t\tif (!type || type === 'catmull-rom') {\n\t\t\tvar a = factor === undefined ? 0.5 : factor,\n\t\t\t\td1_a = Math.pow(d1, a),\n\t\t\t\td1_2a = d1_a * d1_a,\n\t\t\t\td2_a = Math.pow(d2, a),\n\t\t\t\td2_2a = d2_a * d2_a;\n\t\t\tif (!_first && prev) {\n\t\t\t\tvar A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n\t\t\t\t\tN = 3 * d2_a * (d2_a + d1_a);\n\t\t\t\tthis.setHandleIn(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x,\n\t\t\t\t\t\t(d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t\tif (!_last && next) {\n\t\t\t\tvar A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n\t\t\t\t\tN = 3 * d1_a * (d1_a + d2_a);\n\t\t\t\tthis.setHandleOut(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x,\n\t\t\t\t\t\t(d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t} else if (type === 'geometric') {\n\t\t\tif (prev && next) {\n\t\t\t\tvar vector = p0.subtract(p2),\n\t\t\t\t\tt = factor === undefined ? 0.4 : factor,\n\t\t\t\t\tk = t * d1 / (d1 + d2);\n\t\t\t\tif (!_first)\n\t\t\t\t\tthis.setHandleIn(vector.multiply(k));\n\t\t\t\tif (!_last)\n\t\t\t\t\tthis.setHandleOut(vector.multiply(k - t));\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Smoothing method \\'' + type + '\\' not supported.');\n\t\t}\n\t},\n\n\tgetPrevious: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index - 1]\n\t\t\t\t|| this._path._closed && segments[segments.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._index === path._segments.length - 1 || false;\n\t},\n\n\treverse: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut,\n\t\t\ttmp = handleIn.clone();\n\t\thandleIn.set(handleOut);\n\t\thandleOut.set(tmp);\n\t},\n\n\treversed: function() {\n\t\treturn new Segment(this._point, this._handleOut, this._handleIn);\n\t},\n\n\tremove: function() {\n\t\treturn this._path ? !!this._path.removeSegment(this._index) : false;\n\t},\n\n\tclone: function() {\n\t\treturn new Segment(this._point, this._handleIn, this._handleOut);\n\t},\n\n\tequals: function(segment) {\n\t\treturn segment === this || segment && this._class === segment._class\n\t\t\t\t&& this._point.equals(segment._point)\n\t\t\t\t&& this._handleIn.equals(segment._handleIn)\n\t\t\t\t&& this._handleOut.equals(segment._handleOut)\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point: ' + this._point ];\n\t\tif (!this._handleIn.isZero())\n\t\t\tparts.push('handleIn: ' + this._handleIn);\n\t\tif (!this._handleOut.isZero())\n\t\t\tparts.push('handleOut: ' + this._handleOut);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._transformCoordinates(matrix, new Array(6), true);\n\t\tthis._changed();\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar u = 1 - factor,\n\t\t\tv = factor,\n\t\t\tpoint1 = from._point,\n\t\t\tpoint2 = to._point,\n\t\t\thandleIn1 = from._handleIn,\n\t\t\thandleIn2 = to._handleIn,\n\t\t\thandleOut2 = to._handleOut,\n\t\t\thandleOut1 = from._handleOut;\n\t\tthis._point._set(\n\t\t\t\tu * point1._x + v * point2._x,\n\t\t\t\tu * point1._y + v * point2._y, true);\n\t\tthis._handleIn._set(\n\t\t\t\tu * handleIn1._x + v * handleIn2._x,\n\t\t\t\tu * handleIn1._y + v * handleIn2._y, true);\n\t\tthis._handleOut._set(\n\t\t\t\tu * handleOut1._x + v * handleOut2._x,\n\t\t\t\tu * handleOut1._y + v * handleOut2._y, true);\n\t\tthis._changed();\n\t},\n\n\t_transformCoordinates: function(matrix, coords, change) {\n\t\tvar point = this._point,\n\t\t\thandleIn = !change || !this._handleIn.isZero()\n\t\t\t\t\t? this._handleIn : null,\n\t\t\thandleOut = !change || !this._handleOut.isZero()\n\t\t\t\t\t? this._handleOut : null,\n\t\t\tx = point._x,\n\t\t\ty = point._y,\n\t\t\ti = 2;\n\t\tcoords[0] = x;\n\t\tcoords[1] = y;\n\t\tif (handleIn) {\n\t\t\tcoords[i++] = handleIn._x + x;\n\t\t\tcoords[i++] = handleIn._y + y;\n\t\t}\n\t\tif (handleOut) {\n\t\t\tcoords[i++] = handleOut._x + x;\n\t\t\tcoords[i++] = handleOut._y + y;\n\t\t}\n\t\tif (matrix) {\n\t\t\tmatrix._transformCoordinates(coords, coords, i / 2);\n\t\t\tx = coords[0];\n\t\t\ty = coords[1];\n\t\t\tif (change) {\n\t\t\t\tpoint._x = x;\n\t\t\t\tpoint._y = y;\n\t\t\t\ti = 2;\n\t\t\t\tif (handleIn) {\n\t\t\t\t\thandleIn._x = coords[i++] - x;\n\t\t\t\t\thandleIn._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t\tif (handleOut) {\n\t\t\t\t\thandleOut._x = coords[i++] - x;\n\t\t\t\t\thandleOut._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!handleIn) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t\tif (!handleOut) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn coords;\n\t}\n});\n\nvar SegmentPoint = Point.extend({\n\tinitialize: function SegmentPoint(point, owner, key) {\n\t\tvar x, y,\n\t\t\tselected;\n\t\tif (!point) {\n\t\t\tx = y = 0;\n\t\t} else if ((x = point[0]) !== undefined) {\n\t\t\ty = point[1];\n\t\t} else {\n\t\t\tvar pt = point;\n\t\t\tif ((x = pt.x) === undefined) {\n\t\t\t\tpt = Point.read(arguments);\n\t\t\t\tx = pt.x;\n\t\t\t}\n\t\t\ty = pt.y;\n\t\t\tselected = pt.selected;\n\t\t}\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\towner[key] = this;\n\t\tif (selected)\n\t\t\tthis.setSelected(true);\n\t},\n\n\t_set: function(x, y) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner._changed(this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this._x) && isZero(this._y);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\tvar owner = this._owner;\n\t\treturn this === owner._point ? 1\n\t\t\t: this === owner._handleIn ? 2\n\t\t\t: this === owner._handleOut ? 4\n\t\t\t: 0;\n\t}\n});\n\nvar Curve = Base.extend({\n\t_class: 'Curve',\n\tbeans: true,\n\n\tinitialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n\t\tvar count = arguments.length,\n\t\t\tseg1, seg2,\n\t\t\tpoint1, point2,\n\t\t\thandle1, handle2;\n\t\tif (count === 3) {\n\t\t\tthis._path = arg0;\n\t\t\tseg1 = arg1;\n\t\t\tseg2 = arg2;\n\t\t} else if (!count) {\n\t\t\tseg1 = new Segment();\n\t\t\tseg2 = new Segment();\n\t\t} else if (count === 1) {\n\t\t\tif ('segment1' in arg0) {\n\t\t\t\tseg1 = new Segment(arg0.segment1);\n\t\t\t\tseg2 = new Segment(arg0.segment2);\n\t\t\t} else if ('point1' in arg0) {\n\t\t\t\tpoint1 = arg0.point1;\n\t\t\t\thandle1 = arg0.handle1;\n\t\t\t\thandle2 = arg0.handle2;\n\t\t\t\tpoint2 = arg0.point2;\n\t\t\t} else if (Array.isArray(arg0)) {\n\t\t\t\tpoint1 = [arg0[0], arg0[1]];\n\t\t\t\tpoint2 = [arg0[6], arg0[7]];\n\t\t\t\thandle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n\t\t\t\thandle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n\t\t\t}\n\t\t} else if (count === 2) {\n\t\t\tseg1 = new Segment(arg0);\n\t\t\tseg2 = new Segment(arg1);\n\t\t} else if (count === 4) {\n\t\t\tpoint1 = arg0;\n\t\t\thandle1 = arg1;\n\t\t\thandle2 = arg2;\n\t\t\tpoint2 = arg3;\n\t\t} else if (count === 8) {\n\t\t\tpoint1 = [arg0, arg1];\n\t\t\tpoint2 = [arg6, arg7];\n\t\t\thandle1 = [arg2 - arg0, arg3 - arg1];\n\t\t\thandle2 = [arg4 - arg6, arg5 - arg7];\n\t\t}\n\t\tthis._segment1 = seg1 || new Segment(point1, null, handle1);\n\t\tthis._segment2 = seg2 || new Segment(point2, handle2, null);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.hasHandles()\n\t\t\t\t? [this.getPoint1(), this.getHandle1(), this.getHandle2(),\n\t\t\t\t\tthis.getPoint2()]\n\t\t\t\t: [this.getPoint1(), this.getPoint2()],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tthis._length = this._bounds = undefined;\n\t},\n\n\tclone: function() {\n\t\treturn new Curve(this._segment1, this._segment2);\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point1: ' + this._segment1._point ];\n\t\tif (!this._segment1._handleOut.isZero())\n\t\t\tparts.push('handle1: ' + this._segment1._handleOut);\n\t\tif (!this._segment2._handleIn.isZero())\n\t\t\tparts.push('handle2: ' + this._segment2._handleIn);\n\t\tparts.push('point2: ' + this._segment2._point);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tclassify: function() {\n\t\treturn Curve.classify(this.getValues());\n\t},\n\n\tremove: function() {\n\t\tvar removed = false;\n\t\tif (this._path) {\n\t\t\tvar segment2 = this._segment2,\n\t\t\t\thandleOut = segment2._handleOut;\n\t\t\tremoved = segment2.remove();\n\t\t\tif (removed)\n\t\t\t\tthis._segment1._handleOut.set(handleOut);\n\t\t}\n\t\treturn removed;\n\t},\n\n\tgetPoint1: function() {\n\t\treturn this._segment1._point;\n\t},\n\n\tsetPoint1: function() {\n\t\tthis._segment1._point.set(Point.read(arguments));\n\t},\n\n\tgetPoint2: function() {\n\t\treturn this._segment2._point;\n\t},\n\n\tsetPoint2: function() {\n\t\tthis._segment2._point.set(Point.read(arguments));\n\t},\n\n\tgetHandle1: function() {\n\t\treturn this._segment1._handleOut;\n\t},\n\n\tsetHandle1: function() {\n\t\tthis._segment1._handleOut.set(Point.read(arguments));\n\t},\n\n\tgetHandle2: function() {\n\t\treturn this._segment2._handleIn;\n\t},\n\n\tsetHandle2: function() {\n\t\tthis._segment2._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetSegment1: function() {\n\t\treturn this._segment1;\n\t},\n\n\tgetSegment2: function() {\n\t\treturn this._segment2;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._segment1._index;\n\t},\n\n\tgetNext: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index + 1]\n\t\t\t\t|| this._path._closed && curves[0]) || null;\n\t},\n\n\tgetPrevious: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index - 1]\n\t\t\t\t|| this._path._closed && curves[curves.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._segment1._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._segment1._index === path._curves.length - 1\n\t\t\t\t|| false;\n\t},\n\n\tisSelected: function() {\n\t\treturn this.getPoint1().isSelected()\n\t\t\t\t&& this.getHandle1().isSelected()\n\t\t\t\t&& this.getHandle2().isSelected()\n\t\t\t\t&& this.getPoint2().isSelected();\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis.getPoint1().setSelected(selected);\n\t\tthis.getHandle1().setSelected(selected);\n\t\tthis.getHandle2().setSelected(selected);\n\t\tthis.getPoint2().setSelected(selected);\n\t},\n\n\tgetValues: function(matrix) {\n\t\treturn Curve.getValues(this._segment1, this._segment2, matrix);\n\t},\n\n\tgetPoints: function() {\n\t\tvar coords = this.getValues(),\n\t\t\tpoints = [];\n\t\tfor (var i = 0; i < 8; i += 2)\n\t\t\tpoints.push(new Point(coords[i], coords[i + 1]));\n\t\treturn points;\n\t}\n}, {\n\tgetLength: function() {\n\t\tif (this._length == null)\n\t\t\tthis._length = Curve.getLength(this.getValues(), 0, 1);\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\treturn Curve.getArea(this.getValues());\n\t},\n\n\tgetLine: function() {\n\t\treturn new Line(this._segment1._point, this._segment2._point);\n\t},\n\n\tgetPart: function(from, to) {\n\t\treturn new Curve(Curve.getPart(this.getValues(), from, to));\n\t},\n\n\tgetPartLength: function(from, to) {\n\t\treturn Curve.getLength(this.getValues(), from, to);\n\t},\n\n\tdivideAt: function(location) {\n\t\treturn this.divideAtTime(location && location.curve === this\n\t\t\t\t? location.time : this.getTimeAt(location));\n\t},\n\n\tdivideAtTime: function(time, _setHandles) {\n\t\tvar tMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tres = null;\n\t\tif (time >= tMin && time <= tMax) {\n\t\t\tvar parts = Curve.subdivide(this.getValues(), time),\n\t\t\t\tleft = parts[0],\n\t\t\t\tright = parts[1],\n\t\t\t\tsetHandles = _setHandles || this.hasHandles(),\n\t\t\t\tseg1 = this._segment1,\n\t\t\t\tseg2 = this._segment2,\n\t\t\t\tpath = this._path;\n\t\t\tif (setHandles) {\n\t\t\t\tseg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\t\t\t\tseg2._handleIn._set(right[4] - right[6],right[5] - right[7]);\n\t\t\t}\n\t\t\tvar x = left[6], y = left[7],\n\t\t\t\tsegment = new Segment(new Point(x, y),\n\t\t\t\t\t\tsetHandles && new Point(left[4] - x, left[5] - y),\n\t\t\t\t\t\tsetHandles && new Point(right[2] - x, right[3] - y));\n\t\t\tif (path) {\n\t\t\t\tpath.insert(seg1._index + 1, segment);\n\t\t\t\tres = this.getNext();\n\t\t\t} else {\n\t\t\t\tthis._segment2 = segment;\n\t\t\t\tthis._changed();\n\t\t\t\tres = new Curve(segment, seg2);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar path = this._path;\n\t\treturn path ? path.splitAt(location) : null;\n\t},\n\n\tsplitAtTime: function(time) {\n\t\treturn this.splitAt(this.getLocationAtTime(time));\n\t},\n\n\tdivide: function(offset, isTime) {\n\t\treturn this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\tsplit: function(offset, isTime) {\n\t\treturn this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\treversed: function() {\n\t\treturn new Curve(this._segment2.reversed(), this._segment1.reversed());\n\t},\n\n\tclearHandles: function() {\n\t\tthis._segment1._handleOut._set(0, 0);\n\t\tthis._segment2._handleIn._set(0, 0);\n\t},\n\nstatics: {\n\tgetValues: function(segment1, segment2, matrix, straight) {\n\t\tvar p1 = segment1._point,\n\t\t\th1 = segment1._handleOut,\n\t\t\th2 = segment2._handleIn,\n\t\t\tp2 = segment2._point,\n\t\t\tx1 = p1.x, y1 = p1.y,\n\t\t\tx2 = p2.x, y2 = p2.y,\n\t\t\tvalues = straight\n\t\t\t\t? [ x1, y1, x1, y1, x2, y2, x2, y2 ]\n\t\t\t\t: [\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx1 + h1._x, y1 + h1._y,\n\t\t\t\t\tx2 + h2._x, y2 + h2._y,\n\t\t\t\t\tx2, y2\n\t\t\t\t];\n\t\tif (matrix)\n\t\t\tmatrix._transformCoordinates(values, values, 4);\n\t\treturn values;\n\t},\n\n\tsubdivide: function(v, t) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\tif (t === undefined)\n\t\t\tt = 0.5;\n\t\tvar u = 1 - t,\n\t\t\tx4 = u * x0 + t * x1, y4 = u * y0 + t * y1,\n\t\t\tx5 = u * x1 + t * x2, y5 = u * y1 + t * y2,\n\t\t\tx6 = u * x2 + t * x3, y6 = u * y2 + t * y3,\n\t\t\tx7 = u * x4 + t * x5, y7 = u * y4 + t * y5,\n\t\t\tx8 = u * x5 + t * x6, y8 = u * y5 + t * y6,\n\t\t\tx9 = u * x7 + t * x8, y9 = u * y7 + t * y8;\n\t\treturn [\n\t\t\t[x0, y0, x4, y4, x7, y7, x9, y9],\n\t\t\t[x9, y9, x8, y8, x6, y6, x3, y3]\n\t\t];\n\t},\n\n\tgetMonoCurves: function(v, dir) {\n\t\tvar curves = [],\n\t\t\tio = dir ? 0 : 1,\n\t\t\to0 = v[io + 0],\n\t\t\to1 = v[io + 2],\n\t\t\to2 = v[io + 4],\n\t\t\to3 = v[io + 6];\n\t\tif ((o0 >= o1) === (o1 >= o2) && (o1 >= o2) === (o2 >= o3)\n\t\t\t\t|| Curve.isStraight(v)) {\n\t\t\tcurves.push(v);\n\t\t} else {\n\t\t\tvar a = 3 * (o1 - o2) - o0 + o3,\n\t\t\t\tb = 2 * (o0 + o2) - 4 * o1,\n\t\t\t\tc = o1 - o0,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [],\n\t\t\t\tn = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\t\t\tif (!n) {\n\t\t\t\tcurves.push(v);\n\t\t\t} else {\n\t\t\t\troots.sort();\n\t\t\t\tvar t = roots[0],\n\t\t\t\t\tparts = Curve.subdivide(v, t);\n\t\t\t\tcurves.push(parts[0]);\n\t\t\t\tif (n > 1) {\n\t\t\t\t\tt = (roots[1] - t) / (1 - t);\n\t\t\t\t\tparts = Curve.subdivide(parts[1], t);\n\t\t\t\t\tcurves.push(parts[0]);\n\t\t\t\t}\n\t\t\t\tcurves.push(parts[1]);\n\t\t\t}\n\t\t}\n\t\treturn curves;\n\t},\n\n\tsolveCubic: function (v, coord, val, roots, min, max) {\n\t\tvar v0 = v[coord],\n\t\t\tv1 = v[coord + 2],\n\t\t\tv2 = v[coord + 4],\n\t\t\tv3 = v[coord + 6],\n\t\t\tres = 0;\n\t\tif (  !(v0 < val && v3 < val && v1 < val && v2 < val ||\n\t\t\t\tv0 > val && v3 > val && v1 > val && v2 > val)) {\n\t\t\tvar c = 3 * (v1 - v0),\n\t\t\t\tb = 3 * (v2 - v1) - c,\n\t\t\t\ta = v3 - v0 - c - b;\n\t\t\tres = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n\t\t}\n\t\treturn res;\n\t},\n\n\tgetTimeOf: function(v, point) {\n\t\tvar p0 = new Point(v[0], v[1]),\n\t\t\tp3 = new Point(v[6], v[7]),\n\t\t\tepsilon = 1e-12,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tt = point.isClose(p0, epsilon) ? 0\n\t\t\t  : point.isClose(p3, epsilon) ? 1\n\t\t\t  : null;\n\t\tif (t === null) {\n\t\t\tvar coords = [point.x, point.y],\n\t\t\t\troots = [];\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\tvar count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar u = roots[i];\n\t\t\t\t\tif (point.isClose(Curve.getPoint(v, u), geomEpsilon))\n\t\t\t\t\t\treturn u;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn point.isClose(p0, geomEpsilon) ? 0\n\t\t\t : point.isClose(p3, geomEpsilon) ? 1\n\t\t\t : null;\n\t},\n\n\tgetNearestTime: function(v, point) {\n\t\tif (Curve.isStraight(v)) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tvx = x3 - x0, vy = y3 - y0,\n\t\t\t\tdet = vx * vx + vy * vy;\n\t\t\tif (det === 0)\n\t\t\t\treturn 0;\n\t\t\tvar u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n\t\t\treturn u < 1e-12 ? 0\n\t\t\t\t : u > 0.999999999999 ? 1\n\t\t\t\t : Curve.getTimeOf(v,\n\t\t\t\t\tnew Point(x0 + u * vx, y0 + u * vy));\n\t\t}\n\n\t\tvar count = 100,\n\t\t\tminDist = Infinity,\n\t\t\tminT = 0;\n\n\t\tfunction refine(t) {\n\t\t\tif (t >= 0 && t <= 1) {\n\t\t\t\tvar dist = point.getDistance(Curve.getPoint(v, t), true);\n\t\t\t\tif (dist < minDist) {\n\t\t\t\t\tminDist = dist;\n\t\t\t\t\tminT = t;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i <= count; i++)\n\t\t\trefine(i / count);\n\n\t\tvar step = 1 / (count * 2);\n\t\twhile (step > 1e-8) {\n\t\t\tif (!refine(minT - step) && !refine(minT + step))\n\t\t\t\tstep /= 2;\n\t\t}\n\t\treturn minT;\n\t},\n\n\tgetPart: function(v, from, to) {\n\t\tvar flip = from > to;\n\t\tif (flip) {\n\t\t\tvar tmp = from;\n\t\t\tfrom = to;\n\t\t\tto = tmp;\n\t\t}\n\t\tif (from > 0)\n\t\t\tv = Curve.subdivide(v, from)[1];\n\t\tif (to < 1)\n\t\t\tv = Curve.subdivide(v, (to - from) / (1 - from))[0];\n\t\treturn flip\n\t\t\t\t? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]]\n\t\t\t\t: v;\n\t},\n\n\tisFlatEnough: function(v, flatness) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tux = 3 * x1 - 2 * x0 - x3,\n\t\t\tuy = 3 * y1 - 2 * y0 - y3,\n\t\t\tvx = 3 * x2 - 2 * x3 - x0,\n\t\t\tvy = 3 * y2 - 2 * y3 - y0;\n\t\treturn Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy)\n\t\t\t\t<= 16 * flatness * flatness;\n\t},\n\n\tgetArea: function(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2)\n\t\t\t\t+ y1 * (x0 - x2) - x1 * (y0 - y2)\n\t\t\t\t+ y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n\t},\n\n\tgetBounds: function(v) {\n\t\tvar min = v.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = [0, 0];\n\t\tfor (var i = 0; i < 2; i++)\n\t\t\tCurve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6],\n\t\t\t\t\ti, 0, min, max, roots);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\t_addBounds: function(v0, v1, v2, v3, coord, padding, min, max, roots) {\n\t\tfunction add(value, padding) {\n\t\t\tvar left = value - padding,\n\t\t\t\tright = value + padding;\n\t\t\tif (left < min[coord])\n\t\t\t\tmin[coord] = left;\n\t\t\tif (right > max[coord])\n\t\t\t\tmax[coord] = right;\n\t\t}\n\n\t\tpadding /= 2;\n\t\tvar minPad = min[coord] + padding,\n\t\t\tmaxPad = max[coord] - padding;\n\t\tif (    v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad ||\n\t\t\t\tv0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n\t\t\tif (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n\t\t\t\tadd(v0, 0);\n\t\t\t\tadd(v3, 0);\n\t\t\t} else {\n\t\t\t\tvar a = 3 * (v1 - v2) - v0 + v3,\n\t\t\t\t\tb = 2 * (v0 + v2) - 4 * v1,\n\t\t\t\t\tc = v1 - v0,\n\t\t\t\t\tcount = Numerical.solveQuadratic(a, b, c, roots),\n\t\t\t\t\ttMin = 1e-8,\n\t\t\t\t\ttMax = 1 - tMin;\n\t\t\t\tadd(v3, 0);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar t = roots[i],\n\t\t\t\t\t\tu = 1 - t;\n\t\t\t\t\tif (tMin <= t && t <= tMax)\n\t\t\t\t\t\tadd(u * u * u * v0\n\t\t\t\t\t\t\t+ 3 * u * u * t * v1\n\t\t\t\t\t\t\t+ 3 * u * t * t * v2\n\t\t\t\t\t\t\t+ t * t * t * v3,\n\t\t\t\t\t\t\tpadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}}, Base.each(\n\t['getBounds', 'getStrokeBounds', 'getHandleBounds'],\n\tfunction(name) {\n\t\tthis[name] = function() {\n\t\t\tif (!this._bounds)\n\t\t\t\tthis._bounds = {};\n\t\t\tvar bounds = this._bounds[name];\n\t\t\tif (!bounds) {\n\t\t\t\tbounds = this._bounds[name] = Path[name](\n\t\t\t\t\t\t[this._segment1, this._segment2], false, this._path);\n\t\t\t}\n\t\t\treturn bounds.clone();\n\t\t};\n\t},\n{\n\n}), Base.each({\n\tisStraight: function(p1, h1, h2, p2) {\n\t\tif (h1.isZero() && h2.isZero()) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tvar v = p2.subtract(p1);\n\t\t\tif (v.isZero()) {\n\t\t\t\treturn false;\n\t\t\t} else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n\t\t\t\tvar l = new Line(p1, p2),\n\t\t\t\t\tepsilon = 1e-7;\n\t\t\t\tif (l.getDistance(p1.add(h1)) < epsilon &&\n\t\t\t\t\tl.getDistance(p2.add(h2)) < epsilon) {\n\t\t\t\t\tvar div = v.dot(v),\n\t\t\t\t\t\ts1 = v.dot(h1) / div,\n\t\t\t\t\t\ts2 = v.dot(h2) / div;\n\t\t\t\t\treturn s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tisLinear: function(p1, h1, h2, p2) {\n\t\tvar third = p2.subtract(p1).divide(3);\n\t\treturn h1.equals(third) && h2.negate().equals(third);\n\t}\n}, function(test, name) {\n\tthis[name] = function(epsilon) {\n\t\tvar seg1 = this._segment1,\n\t\t\tseg2 = this._segment2;\n\t\treturn test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point,\n\t\t\t\tepsilon);\n\t};\n\n\tthis.statics[name] = function(v, epsilon) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn test(\n\t\t\t\tnew Point(x0, y0),\n\t\t\t\tnew Point(v[2] - x0, v[3] - y0),\n\t\t\t\tnew Point(v[4] - x3, v[5] - y3),\n\t\t\t\tnew Point(x3, y3), epsilon);\n\t};\n}, {\n\tstatics: {},\n\n\thasHandles: function() {\n\t\treturn !this._segment1._handleOut.isZero()\n\t\t\t\t|| !this._segment2._handleIn.isZero();\n\t},\n\n\thasLength: function(epsilon) {\n\t\treturn (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles())\n\t\t\t\t&& this.getLength() > (epsilon || 0);\n\t},\n\n\tisCollinear: function(curve) {\n\t\treturn curve && this.isStraight() && curve.isStraight()\n\t\t\t\t&& this.getLine().isCollinear(curve.getLine());\n\t},\n\n\tisHorizontal: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y)\n\t\t\t\t< 1e-8;\n\t},\n\n\tisVertical: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x)\n\t\t\t\t< 1e-8;\n\t}\n}), {\n\tbeans: false,\n\n\tgetLocationAt: function(offset, _isTime) {\n\t\treturn this.getLocationAtTime(\n\t\t\t\t_isTime ? offset : this.getTimeAt(offset));\n\t},\n\n\tgetLocationAtTime: function(t) {\n\t\treturn t != null && t >= 0 && t <= 1\n\t\t\t\t? new CurveLocation(this, t)\n\t\t\t\t: null;\n\t},\n\n\tgetTimeAt: function(offset, start) {\n\t\treturn Curve.getTimeAt(this.getValues(), offset, start);\n\t},\n\n\tgetParameterAt: '#getTimeAt',\n\n\tgetTimesWithTangent: function () {\n\t\tvar tangent = Point.read(arguments);\n\t\treturn tangent.isZero()\n\t\t\t\t? []\n\t\t\t\t: Curve.getTimesWithTangent(this.getValues(), tangent);\n\t},\n\n\tgetOffsetAtTime: function(t) {\n\t\treturn this.getPartLength(0, t);\n\t},\n\n\tgetLocationOf: function() {\n\t\treturn this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetTimeOf: function() {\n\t\treturn Curve.getTimeOf(this.getValues(), Point.read(arguments));\n\t},\n\n\tgetParameterOf: '#getTimeOf',\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tvalues = this.getValues(),\n\t\t\tt = Curve.getNearestTime(values, point),\n\t\t\tpt = Curve.getPoint(values, t);\n\t\treturn new CurveLocation(this, t, pt, null, point.getDistance(pt));\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t}\n\n},\nnew function() {\n\tvar methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent',\n\t\t'getWeightedNormal', 'getCurvature'];\n\treturn Base.each(methods,\n\t\tfunction(name) {\n\t\t\tthis[name + 'At'] = function(location, _isTime) {\n\t\t\t\tvar values = this.getValues();\n\t\t\t\treturn Curve[name](values, _isTime ? location\n\t\t\t\t\t\t: Curve.getTimeAt(values, location));\n\t\t\t};\n\n\t\t\tthis[name + 'AtTime'] = function(time) {\n\t\t\t\treturn Curve[name](this.getValues(), time);\n\t\t\t};\n\t\t}, {\n\t\t\tstatics: {\n\t\t\t\t_evaluateMethods: methods\n\t\t\t}\n\t\t}\n\t);\n},\nnew function() {\n\n\tfunction getLengthIntegrand(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\n\t\t\tax = 9 * (x1 - x2) + 3 * (x3 - x0),\n\t\t\tbx = 6 * (x0 + x2) - 12 * x1,\n\t\t\tcx = 3 * (x1 - x0),\n\n\t\t\tay = 9 * (y1 - y2) + 3 * (y3 - y0),\n\t\t\tby = 6 * (y0 + y2) - 12 * y1,\n\t\t\tcy = 3 * (y1 - y0);\n\n\t\treturn function(t) {\n\t\t\tvar dx = (ax * t + bx) * t + cx,\n\t\t\t\tdy = (ay * t + by) * t + cy;\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t};\n\t}\n\n\tfunction getIterations(a, b) {\n\t\treturn Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n\t}\n\n\tfunction evaluate(v, t, type, normalized) {\n\t\tif (t == null || t < 0 || t > 1)\n\t\t\treturn null;\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tisZero = Numerical.isZero;\n\t\tif (isZero(x1 - x0) && isZero(y1 - y0)) {\n\t\t\tx1 = x0;\n\t\t\ty1 = y0;\n\t\t}\n\t\tif (isZero(x2 - x3) && isZero(y2 - y3)) {\n\t\t\tx2 = x3;\n\t\t\ty2 = y3;\n\t\t}\n\t\tvar cx = 3 * (x1 - x0),\n\t\t\tbx = 3 * (x2 - x1) - cx,\n\t\t\tax = x3 - x0 - cx - bx,\n\t\t\tcy = 3 * (y1 - y0),\n\t\t\tby = 3 * (y2 - y1) - cy,\n\t\t\tay = y3 - y0 - cy - by,\n\t\t\tx, y;\n\t\tif (type === 0) {\n\t\t\tx = t === 0 ? x0 : t === 1 ? x3\n\t\t\t\t\t: ((ax * t + bx) * t + cx) * t + x0;\n\t\t\ty = t === 0 ? y0 : t === 1 ? y3\n\t\t\t\t\t: ((ay * t + by) * t + cy) * t + y0;\n\t\t} else {\n\t\t\tvar tMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin;\n\t\t\tif (t < tMin) {\n\t\t\t\tx = cx;\n\t\t\t\ty = cy;\n\t\t\t} else if (t > tMax) {\n\t\t\t\tx = 3 * (x3 - x2);\n\t\t\t\ty = 3 * (y3 - y2);\n\t\t\t} else {\n\t\t\t\tx = (3 * ax * t + 2 * bx) * t + cx;\n\t\t\t\ty = (3 * ay * t + 2 * by) * t + cy;\n\t\t\t}\n\t\t\tif (normalized) {\n\t\t\t\tif (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n\t\t\t\t\tx = x2 - x1;\n\t\t\t\t\ty = y2 - y1;\n\t\t\t\t}\n\t\t\t\tvar len = Math.sqrt(x * x + y * y);\n\t\t\t\tif (len) {\n\t\t\t\t\tx /= len;\n\t\t\t\t\ty /= len;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (type === 3) {\n\t\t\t\tvar x2 = 6 * ax * t + 2 * bx,\n\t\t\t\t\ty2 = 6 * ay * t + 2 * by,\n\t\t\t\t\td = Math.pow(x * x + y * y, 3 / 2);\n\t\t\t\tx = d !== 0 ? (x * y2 - y * x2) / d : 0;\n\t\t\t\ty = 0;\n\t\t\t}\n\t\t}\n\t\treturn type === 2 ? new Point(y, -x) : new Point(x, y);\n\t}\n\n\treturn { statics: {\n\n\t\tclassify: function(v) {\n\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\ta1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n\t\t\t\ta2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n\t\t\t\ta3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n\t\t\t\td3 = 3 * a3,\n\t\t\t\td2 = d3 - a2,\n\t\t\t\td1 = d2 - a2 + a1,\n\t\t\t\tl = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n\t\t\t\ts = l !== 0 ? 1 / l : 0,\n\t\t\t\tisZero = Numerical.isZero,\n\t\t\t\tserpentine = 'serpentine';\n\t\t\td1 *= s;\n\t\t\td2 *= s;\n\t\t\td3 *= s;\n\n\t\t\tfunction type(type, t1, t2) {\n\t\t\t\tvar hasRoots = t1 !== undefined,\n\t\t\t\t\tt1Ok = hasRoots && t1 > 0 && t1 < 1,\n\t\t\t\t\tt2Ok = hasRoots && t2 > 0 && t2 < 1;\n\t\t\t\tif (hasRoots && (!(t1Ok || t2Ok)\n\t\t\t\t\t\t|| type === 'loop' && !(t1Ok && t2Ok))) {\n\t\t\t\t\ttype = 'arch';\n\t\t\t\t\tt1Ok = t2Ok = false;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: type,\n\t\t\t\t\troots: t1Ok || t2Ok\n\t\t\t\t\t\t\t? t1Ok && t2Ok\n\t\t\t\t\t\t\t\t? t1 < t2 ? [t1, t2] : [t2, t1]\n\t\t\t\t\t\t\t\t: [t1Ok ? t1 : t2]\n\t\t\t\t\t\t\t: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (isZero(d1)) {\n\t\t\t\treturn isZero(d2)\n\t\t\t\t\t\t? type(isZero(d3) ? 'line' : 'quadratic')\n\t\t\t\t\t\t: type(serpentine, d3 / (3 * d2));\n\t\t\t}\n\t\t\tvar d = 3 * d2 * d2 - 4 * d1 * d3;\n\t\t\tif (isZero(d)) {\n\t\t\t\treturn type('cusp', d2 / (2 * d1));\n\t\t\t}\n\t\t\tvar f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n\t\t\t\tf2 = 2 * d1;\n\t\t\treturn type(d > 0 ? serpentine : 'loop',\n\t\t\t\t\t(d2 + f1) / f2,\n\t\t\t\t\t(d2 - f1) / f2);\n\t\t},\n\n\t\tgetLength: function(v, a, b, ds) {\n\t\t\tif (a === undefined)\n\t\t\t\ta = 0;\n\t\t\tif (b === undefined)\n\t\t\t\tb = 1;\n\t\t\tif (Curve.isStraight(v)) {\n\t\t\t\tvar c = v;\n\t\t\t\tif (b < 1) {\n\t\t\t\t\tc = Curve.subdivide(c, b)[0];\n\t\t\t\t\ta /= b;\n\t\t\t\t}\n\t\t\t\tif (a > 0) {\n\t\t\t\t\tc = Curve.subdivide(c, a)[1];\n\t\t\t\t}\n\t\t\t\tvar dx = c[6] - c[0],\n\t\t\t\t\tdy = c[7] - c[1];\n\t\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t\t}\n\t\t\treturn Numerical.integrate(ds || getLengthIntegrand(v), a, b,\n\t\t\t\t\tgetIterations(a, b));\n\t\t},\n\n\t\tgetTimeAt: function(v, offset, start) {\n\t\t\tif (start === undefined)\n\t\t\t\tstart = offset < 0 ? 1 : 0;\n\t\t\tif (offset === 0)\n\t\t\t\treturn start;\n\t\t\tvar abs = Math.abs,\n\t\t\t\tepsilon = 1e-12,\n\t\t\t\tforward = offset > 0,\n\t\t\t\ta = forward ? start : 0,\n\t\t\t\tb = forward ? 1 : start,\n\t\t\t\tds = getLengthIntegrand(v),\n\t\t\t\trangeLength = Curve.getLength(v, a, b, ds),\n\t\t\t\tdiff = abs(offset) - rangeLength;\n\t\t\tif (abs(diff) < epsilon) {\n\t\t\t\treturn forward ? b : a;\n\t\t\t} else if (diff > epsilon) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar guess = offset / rangeLength,\n\t\t\t\tlength = 0;\n\t\t\tfunction f(t) {\n\t\t\t\tlength += Numerical.integrate(ds, start, t,\n\t\t\t\t\t\tgetIterations(start, t));\n\t\t\t\tstart = t;\n\t\t\t\treturn length - offset;\n\t\t\t}\n\t\t\treturn Numerical.findRoot(f, ds, start + guess, a, b, 32,\n\t\t\t\t\t1e-12);\n\t\t},\n\n\t\tgetPoint: function(v, t) {\n\t\t\treturn evaluate(v, t, 0, false);\n\t\t},\n\n\t\tgetTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, true);\n\t\t},\n\n\t\tgetWeightedTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, false);\n\t\t},\n\n\t\tgetNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, true);\n\t\t},\n\n\t\tgetWeightedNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, false);\n\t\t},\n\n\t\tgetCurvature: function(v, t) {\n\t\t\treturn evaluate(v, t, 3, false).x;\n\t\t},\n\n\t\tgetPeaks: function(v) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tax =     -x0 + 3 * x1 - 3 * x2 + x3,\n\t\t\t\tbx =  3 * x0 - 6 * x1 + 3 * x2,\n\t\t\t\tcx = -3 * x0 + 3 * x1,\n\t\t\t\tay =     -y0 + 3 * y1 - 3 * y2 + y3,\n\t\t\t\tby =  3 * y0 - 6 * y1 + 3 * y2,\n\t\t\t\tcy = -3 * y0 + 3 * y1,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [];\n\t\t\tNumerical.solveCubic(\n\t\t\t\t\t9 * (ax * ax + ay * ay),\n\t\t\t\t\t9 * (ax * bx + by * ay),\n\t\t\t\t\t2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay),\n\t\t\t\t\t(cx * bx + by * cy),\n\t\t\t\t\troots, tMin, tMax);\n\t\t\treturn roots.sort();\n\t\t}\n\t}};\n},\nnew function() {\n\n\tfunction addLocation(locations, include, c1, t1, c2, t2, overlap) {\n\t\tvar excludeStart = !overlap && c1.getPrevious() === c2,\n\t\t\texcludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (t1 !== null && t1 >= (excludeStart ? tMin : 0) &&\n\t\t\tt1 <= (excludeEnd ? tMax : 1)) {\n\t\t\tif (t2 !== null && t2 >= (excludeEnd ? tMin : 0) &&\n\t\t\t\tt2 <= (excludeStart ? tMax : 1)) {\n\t\t\t\tvar loc1 = new CurveLocation(c1, t1, null, overlap),\n\t\t\t\t\tloc2 = new CurveLocation(c2, t2, null, overlap);\n\t\t\t\tloc1._intersection = loc2;\n\t\t\t\tloc2._intersection = loc1;\n\t\t\t\tif (!include || include(loc1)) {\n\t\t\t\t\tCurveLocation.insert(locations, loc1, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addCurveIntersections(v1, v2, c1, c2, locations, include, flip,\n\t\t\trecursion, calls, tMin, tMax, uMin, uMax) {\n\t\tif (++calls >= 4096 || ++recursion >= 40)\n\t\t\treturn calls;\n\t\tvar fatLineEpsilon = 1e-9,\n\t\t\tq0x = v2[0], q0y = v2[1], q3x = v2[6], q3y = v2[7],\n\t\t\tgetSignedDistance = Line.getSignedDistance,\n\t\t\td1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n\t\t\td2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n\t\t\tfactor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n\t\t\tdMin = factor * Math.min(0, d1, d2),\n\t\t\tdMax = factor * Math.max(0, d1, d2),\n\t\t\tdp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n\t\t\tdp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n\t\t\tdp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n\t\t\tdp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n\t\t\thull = getConvexHull(dp0, dp1, dp2, dp3),\n\t\t\ttop = hull[0],\n\t\t\tbottom = hull[1],\n\t\t\ttMinClip,\n\t\t\ttMaxClip;\n\t\tif (d1 === 0 && d2 === 0\n\t\t\t\t&& dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0\n\t\t\t|| (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null\n\t\t\t|| (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(),\n\t\t\t\tdMin, dMax)) == null)\n\t\t\treturn calls;\n\t\tvar tMinNew = tMin + (tMax - tMin) * tMinClip,\n\t\t\ttMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\t\tif (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n\t\t\tvar t = (tMinNew + tMaxNew) / 2,\n\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tflip ? c2 : c1, flip ? u : t,\n\t\t\t\t\tflip ? c1 : c2, flip ? t : u);\n\t\t} else {\n\t\t\tv1 = Curve.getPart(v1, tMinClip, tMaxClip);\n\t\t\tvar uDiff = uMax - uMin;\n\t\t\tif (tMaxClip - tMinClip > 0.8) {\n\t\t\t\tif (tMaxNew - tMinNew > uDiff) {\n\t\t\t\t\tvar parts = Curve.subdivide(v1, 0.5),\n\t\t\t\t\t\tt = (tMinNew + tMaxNew) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[0], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, t);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[1], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, t, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tvar parts = Curve.subdivide(v2, 0.5),\n\t\t\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[0], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, u, tMinNew, tMaxNew);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[1], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, u, uMax, tMinNew, tMaxNew);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (uDiff === 0 || uDiff >= fatLineEpsilon) {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv1, v2, c1, c2, locations, include, flip,\n\t\t\t\t\t\t\trecursion, calls, tMinNew, tMaxNew, uMin, uMax);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn calls;\n\t}\n\n\tfunction getConvexHull(dq0, dq1, dq2, dq3) {\n\t\tvar p0 = [ 0, dq0 ],\n\t\t\tp1 = [ 1 / 3, dq1 ],\n\t\t\tp2 = [ 2 / 3, dq2 ],\n\t\t\tp3 = [ 1, dq3 ],\n\t\t\tdist1 = dq1 - (2 * dq0 + dq3) / 3,\n\t\t\tdist2 = dq2 - (dq0 + 2 * dq3) / 3,\n\t\t\thull;\n\t\tif (dist1 * dist2 < 0) {\n\t\t\thull = [[p0, p1, p3], [p0, p2, p3]];\n\t\t} else {\n\t\t\tvar distRatio = dist1 / dist2;\n\t\t\thull = [\n\t\t\t\tdistRatio >= 2 ? [p0, p1, p3]\n\t\t\t\t: distRatio <= 0.5 ? [p0, p2, p3]\n\t\t\t\t: [p0, p1, p2, p3],\n\t\t\t\t[p0, p3]\n\t\t\t];\n\t\t}\n\t\treturn (dist1 || dist2) < 0 ? hull.reverse() : hull;\n\t}\n\n\tfunction clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n\t\tif (hullTop[0][1] < dMin) {\n\t\t\treturn clipConvexHullPart(hullTop, true, dMin);\n\t\t} else if (hullBottom[0][1] > dMax) {\n\t\t\treturn clipConvexHullPart(hullBottom, false, dMax);\n\t\t} else {\n\t\t\treturn hullTop[0][0];\n\t\t}\n\t}\n\n\tfunction clipConvexHullPart(part, top, threshold) {\n\t\tvar px = part[0][0],\n\t\t\tpy = part[0][1];\n\t\tfor (var i = 1, l = part.length; i < l; i++) {\n\t\t\tvar qx = part[i][0],\n\t\t\t\tqy = part[i][1];\n\t\t\tif (top ? qy >= threshold : qy <= threshold) {\n\t\t\t\treturn qy === threshold ? qx\n\t\t\t\t\t\t: px + (threshold - py) * (qx - px) / (qy - py);\n\t\t\t}\n\t\t\tpx = qx;\n\t\t\tpy = qy;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction getCurveLineIntersections(v, px, py, vx, vy) {\n\t\tvar isZero = Numerical.isZero;\n\t\tif (isZero(vx) && isZero(vy)) {\n\t\t\tvar t = Curve.getTimeOf(v, new Point(px, py));\n\t\t\treturn t === null ? [] : [t];\n\t\t}\n\t\tvar angle = Math.atan2(-vy, vx),\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle),\n\t\t\trv = [],\n\t\t\troots = [];\n\t\tfor (var i = 0; i < 8; i += 2) {\n\t\t\tvar x = v[i] - px,\n\t\t\t\ty = v[i + 1] - py;\n\t\t\trv.push(\n\t\t\t\tx * cos - y * sin,\n\t\t\t\tx * sin + y * cos);\n\t\t}\n\t\tCurve.solveCubic(rv, 1, 0, roots, 0, 1);\n\t\treturn roots;\n\t}\n\n\tfunction addCurveLineIntersections(v1, v2, c1, c2, locations, include,\n\t\t\tflip) {\n\t\tvar x1 = v2[0], y1 = v2[1],\n\t\t\tx2 = v2[6], y2 = v2[7],\n\t\t\troots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\t\tfor (var i = 0, l = roots.length; i < l; i++) {\n\t\t\tvar t1 = roots[i],\n\t\t\t\tp1 = Curve.getPoint(v1, t1),\n\t\t\t\tt2 = Curve.getTimeOf(v2, p1);\n\t\t\tif (t2 !== null) {\n\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\tflip ? c2 : c1, flip ? t2 : t1,\n\t\t\t\t\t\tflip ? c1 : c2, flip ? t1 : t2);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addLineIntersection(v1, v2, c1, c2, locations, include) {\n\t\tvar pt = Line.intersect(\n\t\t\t\tv1[0], v1[1], v1[6], v1[7],\n\t\t\t\tv2[0], v2[1], v2[6], v2[7]);\n\t\tif (pt) {\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, Curve.getTimeOf(v1, pt),\n\t\t\t\t\tc2, Curve.getTimeOf(v2, pt));\n\t\t}\n\t}\n\n\tfunction getCurveIntersections(v1, v2, c1, c2, locations, include) {\n\t\tvar epsilon = 1e-12,\n\t\t\tmin = Math.min,\n\t\t\tmax = Math.max;\n\n\t\tif (max(v1[0], v1[2], v1[4], v1[6]) + epsilon >\n\t\t\tmin(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmin(v1[0], v1[2], v1[4], v1[6]) - epsilon <\n\t\t\tmax(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmax(v1[1], v1[3], v1[5], v1[7]) + epsilon >\n\t\t\tmin(v2[1], v2[3], v2[5], v2[7]) &&\n\t\t\tmin(v1[1], v1[3], v1[5], v1[7]) - epsilon <\n\t\t\tmax(v2[1], v2[3], v2[5], v2[7])) {\n\t\t\tvar overlaps = getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\t\tvar overlap = overlaps[i];\n\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\tc1, overlap[0],\n\t\t\t\t\t\t\tc2, overlap[1], true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar straight1 = Curve.isStraight(v1),\n\t\t\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\t\t\tstraight = straight1 && straight2,\n\t\t\t\t\tflip = straight1 && !straight2,\n\t\t\t\t\tbefore = locations.length;\n\t\t\t\t(straight\n\t\t\t\t\t? addLineIntersection\n\t\t\t\t\t: straight1 || straight2\n\t\t\t\t\t\t? addCurveLineIntersections\n\t\t\t\t\t\t: addCurveIntersections)(\n\t\t\t\t\t\t\tflip ? v2 : v1, flip ? v1 : v2,\n\t\t\t\t\t\t\tflip ? c2 : c1, flip ? c1 : c2,\n\t\t\t\t\t\t\tlocations, include, flip,\n\t\t\t\t\t\t\t0, 0, 0, 1, 0, 1);\n\t\t\t\tif (!straight || locations.length === before) {\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\t\tvar t1 = i >> 1,\n\t\t\t\t\t\t\tt2 = i & 1,\n\t\t\t\t\t\t\ti1 = t1 * 6,\n\t\t\t\t\t\t\ti2 = t2 * 6,\n\t\t\t\t\t\t\tp1 = new Point(v1[i1], v1[i1 + 1]),\n\t\t\t\t\t\t\tp2 = new Point(v2[i2], v2[i2 + 1]);\n\t\t\t\t\t\tif (p1.isClose(p2, epsilon)) {\n\t\t\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\t\t\tc1, t1,\n\t\t\t\t\t\t\t\t\tc2, t2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getSelfIntersection(v1, c1, locations, include) {\n\t\tvar info = Curve.classify(v1);\n\t\tif (info.type === 'loop') {\n\t\t\tvar roots = info.roots;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, roots[0],\n\t\t\t\t\tc1, roots[1]);\n\t\t}\n\t  return locations;\n\t}\n\n\tfunction getIntersections(curves1, curves2, include, matrix1, matrix2,\n\t\t\t_returnFirst) {\n\t\tvar epsilon = 1e-7,\n\t\t\tself = !curves2;\n\t\tif (self)\n\t\t\tcurves2 = curves1;\n\t\tvar length1 = curves1.length,\n\t\t\tlength2 = curves2.length,\n\t\t\tvalues1 = new Array(length1),\n\t\t\tvalues2 = self ? values1 : new Array(length2),\n\t\t\tlocations = [];\n\n\t\tfor (var i = 0; i < length1; i++) {\n\t\t\tvalues1[i] = curves1[i].getValues(matrix1);\n\t\t}\n\t\tif (!self) {\n\t\t\tfor (var i = 0; i < length2; i++) {\n\t\t\t\tvalues2[i] = curves2[i].getValues(matrix2);\n\t\t\t}\n\t\t}\n\t\tvar boundsCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\tvalues1, values2, epsilon);\n\t\tfor (var index1 = 0; index1 < length1; index1++) {\n\t\t\tvar curve1 = curves1[index1],\n\t\t\t\tv1 = values1[index1];\n\t\t\tif (self) {\n\t\t\t\tgetSelfIntersection(v1, curve1, locations, include);\n\t\t\t}\n\t\t\tvar collisions1 = boundsCollisions[index1];\n\t\t\tif (collisions1) {\n\t\t\t\tfor (var j = 0; j < collisions1.length; j++) {\n\t\t\t\t\tif (_returnFirst && locations.length)\n\t\t\t\t\t\treturn locations;\n\t\t\t\t\tvar index2 = collisions1[j];\n\t\t\t\t\tif (!self || index2 > index1) {\n\t\t\t\t\t\tvar curve2 = curves2[index2],\n\t\t\t\t\t\t\tv2 = values2[index2];\n\t\t\t\t\t\tgetCurveIntersections(\n\t\t\t\t\t\t\t\tv1, v2, curve1, curve2, locations, include);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getOverlaps(v1, v2) {\n\n\t\tfunction getSquaredLineLength(v) {\n\t\t\tvar x = v[6] - v[0],\n\t\t\t\ty = v[7] - v[1];\n\t\t\treturn x * x + y * y;\n\t\t}\n\n\t\tvar abs = Math.abs,\n\t\t\tgetDistance = Line.getDistance,\n\t\t\ttimeEpsilon = 1e-8,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tstraight1 = Curve.isStraight(v1),\n\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\tstraightBoth = straight1 && straight2,\n\t\t\tflip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n\t\t\tl1 = flip ? v2 : v1,\n\t\t\tl2 = flip ? v1 : v2,\n\t\t\tpx = l1[0], py = l1[1],\n\t\t\tvx = l1[6] - px, vy = l1[7] - py;\n\t\tif (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon &&\n\t\t\tgetDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n\t\t\tif (!straightBoth &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n\t\t\t\tstraight1 = straight2 = straightBoth = true;\n\t\t\t}\n\t\t} else if (straightBoth) {\n\t\t\treturn null;\n\t\t}\n\t\tif (straight1 ^ straight2) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar v = [v1, v2],\n\t\t\tpairs = [];\n\t\tfor (var i = 0; i < 4 && pairs.length < 2; i++) {\n\t\t\tvar i1 = i & 1,\n\t\t\t\ti2 = i1 ^ 1,\n\t\t\t\tt1 = i >> 1,\n\t\t\t\tt2 = Curve.getTimeOf(v[i1], new Point(\n\t\t\t\t\tv[i2][t1 ? 6 : 0],\n\t\t\t\t\tv[i2][t1 ? 7 : 1]));\n\t\t\tif (t2 != null) {\n\t\t\t\tvar pair = i1 ? [t1, t2] : [t2, t1];\n\t\t\t\tif (!pairs.length ||\n\t\t\t\t\tabs(pair[0] - pairs[0][0]) > timeEpsilon &&\n\t\t\t\t\tabs(pair[1] - pairs[0][1]) > timeEpsilon) {\n\t\t\t\t\tpairs.push(pair);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i > 2 && !pairs.length)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (pairs.length !== 2) {\n\t\t\tpairs = null;\n\t\t} else if (!straightBoth) {\n\t\t\tvar o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n\t\t\t\to2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n\t\t\tif (abs(o2[2] - o1[2]) > geomEpsilon ||\n\t\t\t\tabs(o2[3] - o1[3]) > geomEpsilon ||\n\t\t\t\tabs(o2[4] - o1[4]) > geomEpsilon ||\n\t\t\t\tabs(o2[5] - o1[5]) > geomEpsilon)\n\t\t\t\tpairs = null;\n\t\t}\n\t\treturn pairs;\n\t}\n\n\tfunction getTimesWithTangent(v, tangent) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tnormalized = tangent.normalize(),\n\t\t\ttx = normalized.x,\n\t\t\tty = normalized.y,\n\t\t\tax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n\t\t\tay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n\t\t\tbx = 6 * x2 - 12 * x1 + 6 * x0,\n\t\t\tby = 6 * y2 - 12 * y1 + 6 * y0,\n\t\t\tcx = 3 * x1 - 3 * x0,\n\t\t\tcy = 3 * y1 - 3 * y0,\n\t\t\tden = 2 * ax * ty - 2 * ay * tx,\n\t\t\ttimes = [];\n\t\tif (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n\t\t\tvar num = ax * cy - ay * cx,\n\t\t\t\tden = ax * by - ay * bx;\n\t\t\tif (den != 0) {\n\t\t\t\tvar t = -num / den;\n\t\t\t\tif (t >= 0 && t <= 1) times.push(t);\n\t\t\t}\n\t\t} else {\n\t\t\tvar delta = (bx * bx - 4 * ax * cx) * ty * ty +\n\t\t\t\t(-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty +\n\t\t\t\t(by * by - 4 * ay * cy) * tx * tx,\n\t\t\t\tk = bx * ty - by * tx;\n\t\t\tif (delta >= 0 && den != 0) {\n\t\t\t\tvar d = Math.sqrt(delta),\n\t\t\t\t\tt0 = -(k + d) / den,\n\t\t\t\t\tt1 = (-k + d) / den;\n\t\t\t\tif (t0 >= 0 && t0 <= 1) times.push(t0);\n\t\t\t\tif (t1 >= 0 && t1 <= 1) times.push(t1);\n\t\t\t}\n\t\t}\n\t\treturn times;\n\t}\n\n\treturn {\n\t\tgetIntersections: function(curve) {\n\t\t\tvar v1 = this.getValues(),\n\t\t\t\tv2 = curve && curve !== this && curve.getValues();\n\t\t\treturn v2 ? getCurveIntersections(v1, v2, this, curve, [])\n\t\t\t\t\t  : getSelfIntersection(v1, this, []);\n\t\t},\n\n\t\tstatics: {\n\t\t\tgetOverlaps: getOverlaps,\n\t\t\tgetIntersections: getIntersections,\n\t\t\tgetCurveLineIntersections: getCurveLineIntersections,\n\t\t\tgetTimesWithTangent: getTimesWithTangent\n\t\t}\n\t};\n});\n\nvar CurveLocation = Base.extend({\n\t_class: 'CurveLocation',\n\n\tinitialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n\t\tif (time >= 0.99999999) {\n\t\t\tvar next = curve.getNext();\n\t\t\tif (next) {\n\t\t\t\ttime = 0;\n\t\t\t\tcurve = next;\n\t\t\t}\n\t\t}\n\t\tthis._setCurve(curve);\n\t\tthis._time = time;\n\t\tthis._point = point || curve.getPointAtTime(time);\n\t\tthis._overlap = _overlap;\n\t\tthis._distance = _distance;\n\t\tthis._intersection = this._next = this._previous = null;\n\t},\n\n\t_setPath: function(path) {\n\t\tthis._path = path;\n\t\tthis._version = path ? path._version : 0;\n\t},\n\n\t_setCurve: function(curve) {\n\t\tthis._setPath(curve._path);\n\t\tthis._curve = curve;\n\t\tthis._segment = null;\n\t\tthis._segment1 = curve._segment1;\n\t\tthis._segment2 = curve._segment2;\n\t},\n\n\t_setSegment: function(segment) {\n\t\tvar curve = segment.getCurve();\n\t\tif (curve) {\n\t\t\tthis._setCurve(curve);\n\t\t} else {\n\t\t\tthis._setPath(segment._path);\n\t\t\tthis._segment1 = segment;\n\t\t\tthis._segment2 = null;\n\t\t}\n\t\tthis._segment = segment;\n\t\tthis._time = segment === this._segment1 ? 0 : 1;\n\t\tthis._point = segment._point.clone();\n\t},\n\n\tgetSegment: function() {\n\t\tvar segment = this._segment;\n\t\tif (!segment) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tif (time === 0) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time === 1) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else if (time != null) {\n\t\t\t\tsegment = curve.getPartLength(0, time)\n\t\t\t\t\t< curve.getPartLength(time, 1)\n\t\t\t\t\t\t? curve._segment1\n\t\t\t\t\t\t: curve._segment2;\n\t\t\t}\n\t\t\tthis._segment = segment;\n\t\t}\n\t\treturn segment;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tthat = this;\n\t\tif (path && path._version !== this._version) {\n\t\t\tthis._time = this._offset = this._curveOffset = this._curve = null;\n\t\t}\n\n\t\tfunction trySegment(segment) {\n\t\t\tvar curve = segment && segment.getCurve();\n\t\t\tif (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n\t\t\t\tthat._setCurve(curve);\n\t\t\t\treturn curve;\n\t\t\t}\n\t\t}\n\n\t\treturn this._curve\n\t\t\t|| trySegment(this._segment)\n\t\t\t|| trySegment(this._segment1)\n\t\t\t|| trySegment(this._segment2.getPrevious());\n\t},\n\n\tgetPath: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve._path;\n\t},\n\n\tgetIndex: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve.getIndex();\n\t},\n\n\tgetTime: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this._time;\n\t\treturn curve && time == null\n\t\t\t? this._time = curve.getTimeOf(this._point)\n\t\t\t: time;\n\t},\n\n\tgetParameter: '#getTime',\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tgetOffset: function() {\n\t\tvar offset = this._offset;\n\t\tif (offset == null) {\n\t\t\toffset = 0;\n\t\t\tvar path = this.getPath(),\n\t\t\t\tindex = this.getIndex();\n\t\t\tif (path && index != null) {\n\t\t\t\tvar curves = path.getCurves();\n\t\t\t\tfor (var i = 0; i < index; i++)\n\t\t\t\t\toffset += curves[i].getLength();\n\t\t\t}\n\t\t\tthis._offset = offset += this.getCurveOffset();\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetCurveOffset: function() {\n\t\tvar offset = this._curveOffset;\n\t\tif (offset == null) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tthis._curveOffset = offset = time != null && curve\n\t\t\t\t\t&& curve.getPartLength(0, time);\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetIntersection: function() {\n\t\treturn this._intersection;\n\t},\n\n\tgetDistance: function() {\n\t\treturn this._distance;\n\t},\n\n\tdivide: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tres = curve && curve.divideAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(res._segment1);\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplit: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tpath = curve._path,\n\t\t\tres = curve && curve.splitAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(path.getLastSegment());\n\t\t}\n\t\treturn  res;\n\t},\n\n\tequals: function(loc, _ignoreOther) {\n\t\tvar res = this === loc;\n\t\tif (!res && loc instanceof CurveLocation) {\n\t\t\tvar c1 = this.getCurve(),\n\t\t\t\tc2 = loc.getCurve(),\n\t\t\t\tp1 = c1._path,\n\t\t\t\tp2 = c2._path;\n\t\t\tif (p1 === p2) {\n\t\t\t\tvar abs = Math.abs,\n\t\t\t\t\tepsilon = 1e-7,\n\t\t\t\t\tdiff = abs(this.getOffset() - loc.getOffset()),\n\t\t\t\t\ti1 = !_ignoreOther && this._intersection,\n\t\t\t\t\ti2 = !_ignoreOther && loc._intersection;\n\t\t\t\tres = (diff < epsilon\n\t\t\t\t\t\t|| p1 && abs(p1.getLength() - diff) < epsilon)\n\t\t\t\t\t&& (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [],\n\t\t\tpoint = this.getPoint(),\n\t\t\tf = Formatter.instance;\n\t\tif (point)\n\t\t\tparts.push('point: ' + point);\n\t\tvar index = this.getIndex();\n\t\tif (index != null)\n\t\t\tparts.push('index: ' + index);\n\t\tvar time = this.getTime();\n\t\tif (time != null)\n\t\t\tparts.push('time: ' + f.number(time));\n\t\tif (this._distance != null)\n\t\t\tparts.push('distance: ' + f.number(this._distance));\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tisTouching: function() {\n\t\tvar inter = this._intersection;\n\t\tif (inter && this.getTangent().isCollinear(inter.getTangent())) {\n\t\t\tvar curve1 = this.getCurve(),\n\t\t\t\tcurve2 = inter.getCurve();\n\t\t\treturn !(curve1.isStraight() && curve2.isStraight()\n\t\t\t\t\t&& curve1.getLine().intersect(curve2.getLine()));\n\t\t}\n\t\treturn false;\n\t},\n\n\tisCrossing: function() {\n\t\tvar inter = this._intersection;\n\t\tif (!inter)\n\t\t\treturn false;\n\t\tvar t1 = this.getTime(),\n\t\t\tt2 = inter.getTime(),\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tt1Inside = t1 >= tMin && t1 <= tMax,\n\t\t\tt2Inside = t2 >= tMin && t2 <= tMax;\n\t\tif (t1Inside && t2Inside)\n\t\t\treturn !this.isTouching();\n\t\tvar c2 = this.getCurve(),\n\t\t\tc1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n\t\t\tc4 = inter.getCurve(),\n\t\t\tc3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n\t\tif (t1 > tMax)\n\t\t\tc2 = c2.getNext();\n\t\tif (t2 > tMax)\n\t\t\tc4 = c4.getNext();\n\t\tif (!c1 || !c2 || !c3 || !c4)\n\t\t\treturn false;\n\n\t\tvar offsets = [];\n\n\t\tfunction addOffsets(curve, end) {\n\t\t\tvar v = curve.getValues(),\n\t\t\t\troots = Curve.classify(v).roots || Curve.getPeaks(v),\n\t\t\t\tcount = roots.length,\n\t\t\t\toffset = Curve.getLength(v,\n\t\t\t\t\tend && count ? roots[count - 1] : 0,\n\t\t\t\t\t!end && count ? roots[0] : 1);\n\t\t\toffsets.push(count ? offset : offset / 32);\n\t\t}\n\n\t\tfunction isInRange(angle, min, max) {\n\t\t\treturn min < max\n\t\t\t\t\t? angle > min && angle < max\n\t\t\t\t\t: angle > min || angle < max;\n\t\t}\n\n\t\tif (!t1Inside) {\n\t\t\taddOffsets(c1, true);\n\t\t\taddOffsets(c2, false);\n\t\t}\n\t\tif (!t2Inside) {\n\t\t\taddOffsets(c3, true);\n\t\t\taddOffsets(c4, false);\n\t\t}\n\t\tvar pt = this.getPoint(),\n\t\t\toffset = Math.min.apply(Math, offsets),\n\t\t\tv2 = t1Inside ? c2.getTangentAtTime(t1)\n\t\t\t\t\t: c2.getPointAt(offset).subtract(pt),\n\t\t\tv1 = t1Inside ? v2.negate()\n\t\t\t\t\t: c1.getPointAt(-offset).subtract(pt),\n\t\t\tv4 = t2Inside ? c4.getTangentAtTime(t2)\n\t\t\t\t\t: c4.getPointAt(offset).subtract(pt),\n\t\t\tv3 = t2Inside ? v4.negate()\n\t\t\t\t\t: c3.getPointAt(-offset).subtract(pt),\n\t\t\ta1 = v1.getAngle(),\n\t\t\ta2 = v2.getAngle(),\n\t\t\ta3 = v3.getAngle(),\n\t\t\ta4 = v4.getAngle();\n\t\treturn !!(t1Inside\n\t\t\t\t? (isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4)) &&\n\t\t\t\t  (isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3))\n\t\t\t\t: (isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2)) &&\n\t\t\t\t  (isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1)));\n\t},\n\n\thasOverlap: function() {\n\t\treturn !!this._overlap;\n\t}\n}, Base.each(Curve._evaluateMethods, function(name) {\n\tvar get = name + 'At';\n\tthis[name] = function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this.getTime();\n\t\treturn time != null && curve && curve[get](time, true);\n\t};\n}, {\n\tpreserve: true\n}),\nnew function() {\n\n\tfunction insert(locations, loc, merge) {\n\t\tvar length = locations.length,\n\t\t\tl = 0,\n\t\t\tr = length - 1;\n\n\t\tfunction search(index, dir) {\n\t\t\tfor (var i = index + dir; i >= -1 && i <= length; i += dir) {\n\t\t\t\tvar loc2 = locations[((i % length) + length) % length];\n\t\t\t\tif (!loc.getPoint().isClose(loc2.getPoint(),\n\t\t\t\t\t\t1e-7))\n\t\t\t\t\tbreak;\n\t\t\t\tif (loc.equals(loc2))\n\t\t\t\t\treturn loc2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (l <= r) {\n\t\t\tvar m = (l + r) >>> 1,\n\t\t\t\tloc2 = locations[m],\n\t\t\t\tfound;\n\t\t\tif (merge && (found = loc.equals(loc2) ? loc2\n\t\t\t\t\t: (search(m, -1) || search(m, 1)))) {\n\t\t\t\tif (loc._overlap) {\n\t\t\t\t\tfound._overlap = found._intersection._overlap = true;\n\t\t\t\t}\n\t\t\t\treturn found;\n\t\t\t}\n\t\tvar path1 = loc.getPath(),\n\t\t\tpath2 = loc2.getPath(),\n\t\t\tdiff = path1 !== path2\n\t\t\t\t? path1._id - path2._id\n\t\t\t\t: (loc.getIndex() + loc.getTime())\n\t\t\t\t- (loc2.getIndex() + loc2.getTime());\n\t\t\tif (diff < 0) {\n\t\t\t\tr = m - 1;\n\t\t\t} else {\n\t\t\t\tl = m + 1;\n\t\t\t}\n\t\t}\n\t\tlocations.splice(l, 0, loc);\n\t\treturn loc;\n\t}\n\n\treturn { statics: {\n\t\tinsert: insert,\n\n\t\texpand: function(locations) {\n\t\t\tvar expanded = locations.slice();\n\t\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\t\tinsert(expanded, locations[i]._intersection, false);\n\t\t\t}\n\t\t\treturn expanded;\n\t\t}\n\t}};\n});\n\nvar PathItem = Item.extend({\n\t_class: 'PathItem',\n\t_selectBounds: false,\n\t_canScaleStroke: true,\n\tbeans: true,\n\n\tinitialize: function PathItem() {\n\t},\n\n\tstatics: {\n\t\tcreate: function(arg) {\n\t\t\tvar data,\n\t\t\t\tsegments,\n\t\t\t\tcompound;\n\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\tsegments = arg.segments;\n\t\t\t\tdata = arg.pathData;\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tsegments = arg;\n\t\t\t} else if (typeof arg === 'string') {\n\t\t\t\tdata = arg;\n\t\t\t}\n\t\t\tif (segments) {\n\t\t\t\tvar first = segments[0];\n\t\t\t\tcompound = first && Array.isArray(first[0]);\n\t\t\t} else if (data) {\n\t\t\t\tcompound = (data.match(/m/gi) || []).length > 1\n\t\t\t\t\t\t|| /z\\s*\\S+/i.test(data);\n\t\t\t}\n\t\t\tvar ctor = compound ? CompoundPath : Path;\n\t\t\treturn new ctor(arg);\n\t\t}\n\t},\n\n\t_asPathItem: function() {\n\t\treturn this;\n\t},\n\n\tisClockwise: function() {\n\t\treturn this.getArea() >= 0;\n\t},\n\n\tsetClockwise: function(clockwise) {\n\t\tif (this.isClockwise() != (clockwise = !!clockwise))\n\t\t\tthis.reverse();\n\t},\n\n\tsetPathData: function(data) {\n\n\t\tvar parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n\t\t\tcoords,\n\t\t\trelative = false,\n\t\t\tprevious,\n\t\t\tcontrol,\n\t\t\tcurrent = new Point(),\n\t\t\tstart = new Point();\n\n\t\tfunction getCoord(index, coord) {\n\t\t\tvar val = +coords[index];\n\t\t\tif (relative)\n\t\t\t\tval += current[coord];\n\t\t\treturn val;\n\t\t}\n\n\t\tfunction getPoint(index) {\n\t\t\treturn new Point(\n\t\t\t\tgetCoord(index, 'x'),\n\t\t\t\tgetCoord(index + 1, 'y')\n\t\t\t);\n\t\t}\n\n\t\tthis.clear();\n\n\t\tfor (var i = 0, l = parts && parts.length; i < l; i++) {\n\t\t\tvar part = parts[i],\n\t\t\t\tcommand = part[0],\n\t\t\t\tlower = command.toLowerCase();\n\t\t\tcoords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n\t\t\tvar length = coords && coords.length;\n\t\t\trelative = command === lower;\n\t\t\tif (previous === 'z' && !/[mz]/.test(lower))\n\t\t\t\tthis.moveTo(current);\n\t\t\tswitch (lower) {\n\t\t\tcase 'm':\n\t\t\tcase 'l':\n\t\t\t\tvar move = lower === 'm';\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tstart = current;\n\t\t\t\t\t\tmove = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'h':\n\t\t\tcase 'v':\n\t\t\t\tvar coord = lower === 'h' ? 'x' : 'y';\n\t\t\t\tcurrent = current.clone();\n\t\t\t\tfor (var j = 0; j < length; j++) {\n\t\t\t\t\tcurrent[coord] = getCoord(j, coord);\n\t\t\t\t\tthis.lineTo(current);\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'c':\n\t\t\t\tfor (var j = 0; j < length; j += 6) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\tgetPoint(j),\n\t\t\t\t\t\t\tcontrol = getPoint(j + 2),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 4));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 's':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\t/[cs]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current,\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'q':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 't':\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = (/[qt]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current),\n\t\t\t\t\t\t\tcurrent = getPoint(j));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'a':\n\t\t\t\tfor (var j = 0; j < length; j += 7) {\n\t\t\t\t\tthis.arcTo(current = getPoint(j + 5),\n\t\t\t\t\t\t\tnew Size(+coords[j], +coords[j + 1]),\n\t\t\t\t\t\t\t+coords[j + 2], +coords[j + 4], +coords[j + 3]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'z':\n\t\t\t\tthis.closePath(1e-12);\n\t\t\t\tcurrent = start;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tprevious = lower;\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_contains: function(point) {\n\t\tvar winding = point.isInside(\n\t\t\t\tthis.getBounds({ internal: true, handle: true }))\n\t\t\t\t\t? this._getWinding(point)\n\t\t\t\t\t: {};\n\t\treturn winding.onPath || !!(this.getFillRule() === 'evenodd'\n\t\t\t\t? winding.windingL & 1 || winding.windingR & 1\n\t\t\t\t: winding.winding);\n\t},\n\n\tgetIntersections: function(path, include, _matrix, _returnFirst) {\n\t\tvar self = this === path || !path,\n\t\t\tmatrix1 = this._matrix._orNullIfIdentity(),\n\t\t\tmatrix2 = self ? matrix1\n\t\t\t\t: (_matrix || path._matrix)._orNullIfIdentity();\n\t\treturn self || this.getBounds(matrix1).intersects(\n\t\t\t\tpath.getBounds(matrix2), 1e-12)\n\t\t\t\t? Curve.getIntersections(\n\t\t\t\t\t\tthis.getCurves(), !self && path.getCurves(), include,\n\t\t\t\t\t\tmatrix1, matrix2, _returnFirst)\n\t\t\t\t: [];\n\t},\n\n\tgetCrossings: function(path) {\n\t\treturn this.getIntersections(path, function(inter) {\n\t\t\treturn inter.isCrossing();\n\t\t});\n\t},\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves(),\n\t\t\tminDist = Infinity,\n\t\t\tminLoc = null;\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getNearestLocation(point);\n\t\t\tif (loc._distance < minDist) {\n\t\t\t\tminDist = loc._distance;\n\t\t\t\tminLoc = loc;\n\t\t\t}\n\t\t}\n\t\treturn minLoc;\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar isPath = !this._children,\n\t\t\tname = isPath ? '_segments' : '_children',\n\t\t\titemsFrom = from[name],\n\t\t\titemsTo = to[name],\n\t\t\titems = this[name];\n\t\tif (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n\t\t\tthrow new Error('Invalid operands in interpolate() call: ' +\n\t\t\t\t\tfrom + ', ' + to);\n\t\t}\n\t\tvar current = items.length,\n\t\t\tlength = itemsTo.length;\n\t\tif (current < length) {\n\t\t\tvar ctor = isPath ? Segment : Path;\n\t\t\tfor (var i = current; i < length; i++) {\n\t\t\t\tthis.add(new ctor());\n\t\t\t}\n\t\t} else if (current > length) {\n\t\t\tthis[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n\t\t}\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\titems[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n\t\t}\n\t\tif (isPath) {\n\t\t\tthis.setClosed(from._closed);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tcompare: function(path) {\n\t\tvar ok = false;\n\t\tif (path) {\n\t\t\tvar paths1 = this._children || [this],\n\t\t\t\tpaths2 = path._children ? path._children.slice() : [path],\n\t\t\t\tlength1 = paths1.length,\n\t\t\t\tlength2 = paths2.length,\n\t\t\t\tmatched = [],\n\t\t\t\tcount = 0;\n\t\t\tok = true;\n\t\t\tvar boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\t\t\tfor (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n\t\t\t\tvar path1 = paths1[i1];\n\t\t\t\tok = false;\n\t\t\t\tvar pathBoundsOverlaps = boundsOverlaps[i1];\n\t\t\t\tif (pathBoundsOverlaps) {\n\t\t\t\t\tfor (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n\t\t\t\t\t\tif (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n\t\t\t\t\t\t\tif (!matched[pathBoundsOverlaps[i2]]) {\n\t\t\t\t\t\t\t\tmatched[pathBoundsOverlaps[i2]] = true;\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tok = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tok = ok && count === length2;\n\t\t}\n\t\treturn ok;\n\t},\n\n});\n\nvar Path = PathItem.extend({\n\t_class: 'Path',\n\t_serializeFields: {\n\t\tsegments: [],\n\t\tclosed: false\n\t},\n\n\tinitialize: function Path(arg) {\n\t\tthis._closed = false;\n\t\tthis._segments = [];\n\t\tthis._version = 0;\n\t\tvar args = arguments,\n\t\t\tsegments = Array.isArray(arg)\n\t\t\t? typeof arg[0] === 'object'\n\t\t\t\t? arg\n\t\t\t\t: args\n\t\t\t: arg && (arg.size === undefined && (arg.x !== undefined\n\t\t\t\t\t|| arg.point !== undefined))\n\t\t\t\t? args\n\t\t\t\t: null;\n\t\tif (segments && segments.length > 0) {\n\t\t\tthis.setSegments(segments);\n\t\t} else {\n\t\t\tthis._curves = undefined;\n\t\t\tthis._segmentSelection = 0;\n\t\t\tif (!segments && typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t\targ = null;\n\t\t\t}\n\t\t}\n\t\tthis._initialize(!segments && arg);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._closed === item._closed\n\t\t\t\t&& Base.equals(this._segments, item._segments);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setSegments(source._segments);\n\t\tthis._closed = source._closed;\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 8) {\n\t\t\tthis._length = this._area = undefined;\n\t\t\tif (flags & 32) {\n\t\t\t\tthis._version++;\n\t\t\t} else if (this._curves) {\n\t\t\t   for (var i = 0, l = this._curves.length; i < l; i++)\n\t\t\t\t\tthis._curves[i]._changed();\n\t\t\t}\n\t\t} else if (flags & 64) {\n\t\t\tthis._bounds = undefined;\n\t\t}\n\t},\n\n\tgetStyle: function() {\n\t\tvar parent = this._parent;\n\t\treturn (parent instanceof CompoundPath ? parent : this)._style;\n\t},\n\n\tgetSegments: function() {\n\t\treturn this._segments;\n\t},\n\n\tsetSegments: function(segments) {\n\t\tvar fullySelected = this.isFullySelected(),\n\t\t\tlength = segments && segments.length;\n\t\tthis._segments.length = 0;\n\t\tthis._segmentSelection = 0;\n\t\tthis._curves = undefined;\n\t\tif (length) {\n\t\t\tvar last = segments[length - 1];\n\t\t\tif (typeof last === 'boolean') {\n\t\t\t\tthis.setClosed(last);\n\t\t\t\tlength--;\n\t\t\t}\n\t\t\tthis._add(Segment.readList(segments, 0, {}, length));\n\t\t}\n\t\tif (fullySelected)\n\t\t\tthis.setFullySelected(true);\n\t},\n\n\tgetFirstSegment: function() {\n\t\treturn this._segments[0];\n\t},\n\n\tgetLastSegment: function() {\n\t\treturn this._segments[this._segments.length - 1];\n\t},\n\n\tgetCurves: function() {\n\t\tvar curves = this._curves,\n\t\t\tsegments = this._segments;\n\t\tif (!curves) {\n\t\t\tvar length = this._countCurves();\n\t\t\tcurves = this._curves = new Array(length);\n\t\t\tfor (var i = 0; i < length; i++)\n\t\t\t\tcurves[i] = new Curve(this, segments[i],\n\t\t\t\t\tsegments[i + 1] || segments[0]);\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\treturn this.getCurves()[0];\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar curves = this.getCurves();\n\t\treturn curves[curves.length - 1];\n\t},\n\n\tisClosed: function() {\n\t\treturn this._closed;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tif (this._closed != (closed = !!closed)) {\n\t\t\tthis._closed = closed;\n\t\t\tif (this._curves) {\n\t\t\t\tvar length = this._curves.length = this._countCurves();\n\t\t\t\tif (closed)\n\t\t\t\t\tthis._curves[length - 1] = new Curve(this,\n\t\t\t\t\t\tthis._segments[length - 1], this._segments[0]);\n\t\t\t}\n\t\t\tthis._changed(41);\n\t\t}\n\t}\n}, {\n\tbeans: true,\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tf = new Formatter(_precision),\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY,\n\t\t\tparts = [];\n\n\t\tfunction addSegment(segment, skipLine) {\n\t\t\tsegment._transformCoordinates(_matrix, coords);\n\t\t\tcurX = coords[0];\n\t\t\tcurY = coords[1];\n\t\t\tif (first) {\n\t\t\t\tparts.push('M' + f.pair(curX, curY));\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tinX = coords[2];\n\t\t\t\tinY = coords[3];\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tif (!skipLine) {\n\t\t\t\t\t\tvar dx = curX - prevX,\n\t\t\t\t\t\t\tdy = curY - prevY;\n\t\t\t\t\t\tparts.push(\n\t\t\t\t\t\t\t  dx === 0 ? 'v' + f.number(dy)\n\t\t\t\t\t\t\t: dy === 0 ? 'h' + f.number(dx)\n\t\t\t\t\t\t\t: 'l' + f.pair(dx, dy));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tparts.push('c' + f.pair(outX - prevX, outY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair( inX - prevX,  inY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair(curX - prevX, curY - prevY));\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\toutX = coords[4];\n\t\t\toutY = coords[5];\n\t\t}\n\n\t\tif (!length)\n\t\t\treturn '';\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\taddSegment(segments[i]);\n\t\tif (this._closed && length > 0) {\n\t\t\taddSegment(segments[0], true);\n\t\t\tparts.push('z');\n\t\t}\n\t\treturn parts.join('');\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._segments.length;\n\t},\n\n\t_transformContent: function(matrix) {\n\t\tvar segments = this._segments,\n\t\t\tcoords = new Array(6);\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._transformCoordinates(matrix, coords, true);\n\t\treturn true;\n\t},\n\n\t_add: function(segs, index) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tamount = segs.length,\n\t\t\tappend = index == null,\n\t\t\tindex = append ? segments.length : index;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = segs[i];\n\t\t\tif (segment._path)\n\t\t\t\tsegment = segs[i] = segment.clone();\n\t\t\tsegment._path = this;\n\t\t\tsegment._index = index + i;\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, 0, segment._selection);\n\t\t}\n\t\tif (append) {\n\t\t\tBase.push(segments, segs);\n\t\t} else {\n\t\t\tsegments.splice.apply(segments, [index, 0].concat(segs));\n\t\t\tfor (var i = index + amount, l = segments.length; i < l; i++)\n\t\t\t\tsegments[i]._index = i;\n\t\t}\n\t\tif (curves) {\n\t\t\tvar total = this._countCurves(),\n\t\t\t\tstart = index > 0 && index + amount - 1 === total ? index - 1\n\t\t\t\t\t: index,\n\t\t\t\tinsert = start,\n\t\t\t\tend = Math.min(start + amount, total);\n\t\t\tif (segs._curves) {\n\t\t\t\tcurves.splice.apply(curves, [start, 0].concat(segs._curves));\n\t\t\t\tinsert += segs._curves.length;\n\t\t\t}\n\t\t\tfor (var i = insert; i < end; i++)\n\t\t\t\tcurves.splice(i, 0, new Curve(this, null, null));\n\t\t\tthis._adjustCurves(start, end);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn segs;\n\t},\n\n\t_adjustCurves: function(start, end) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcurve;\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tcurve = curves[i];\n\t\t\tcurve._path = this;\n\t\t\tcurve._segment1 = segments[i];\n\t\t\tcurve._segment2 = segments[i + 1] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[this._closed && !start ? segments.length - 1\n\t\t\t\t: start - 1]) {\n\t\t\tcurve._segment2 = segments[start] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[end]) {\n\t\t\tcurve._segment1 = segments[end];\n\t\t\tcurve._changed();\n\t\t}\n\t},\n\n\t_countCurves: function() {\n\t\tvar length = this._segments.length;\n\t\treturn !this._closed && length > 0 ? length - 1 : length;\n\t},\n\n\tadd: function(segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 1 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args))\n\t\t\t: this._add([ Segment.read(args) ])[0];\n\t},\n\n\tinsert: function(index, segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 2 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args, 1), index)\n\t\t\t: this._add([ Segment.read(args, 1) ], index)[0];\n\t},\n\n\taddSegment: function() {\n\t\treturn this._add([ Segment.read(arguments) ])[0];\n\t},\n\n\tinsertSegment: function(index ) {\n\t\treturn this._add([ Segment.read(arguments, 1) ], index)[0];\n\t},\n\n\taddSegments: function(segments) {\n\t\treturn this._add(Segment.readList(segments));\n\t},\n\n\tinsertSegments: function(index, segments) {\n\t\treturn this._add(Segment.readList(segments), index);\n\t},\n\n\tremoveSegment: function(index) {\n\t\treturn this.removeSegments(index, index + 1)[0] || null;\n\t},\n\n\tremoveSegments: function(start, end, _includeCurves) {\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._segments.length);\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcount = segments.length,\n\t\t\tremoved = segments.splice(start, end - start),\n\t\t\tamount = removed.length;\n\t\tif (!amount)\n\t\t\treturn removed;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = removed[i];\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, segment._selection, 0);\n\t\t\tsegment._index = segment._path = null;\n\t\t}\n\t\tfor (var i = start, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._index = i;\n\t\tif (curves) {\n\t\t\tvar index = start > 0 && end === count + (this._closed ? 1 : 0)\n\t\t\t\t\t? start - 1\n\t\t\t\t\t: start,\n\t\t\t\tcurves = curves.splice(index, amount);\n\t\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\t\tcurves[i]._path = null;\n\t\t\tif (_includeCurves)\n\t\t\t\tremoved._curves = curves.slice(1);\n\t\t\tthis._adjustCurves(index, index);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeSegments',\n\n\thasHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tif (segments[i].hasHandles())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tclearHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i].clearHandles();\n\t},\n\n\tgetLength: function() {\n\t\tif (this._length == null) {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++)\n\t\t\t\tlength += curves[i].getLength();\n\t\t\tthis._length = length;\n\t\t}\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\tvar area = this._area;\n\t\tif (area == null) {\n\t\t\tvar segments = this._segments,\n\t\t\t\tclosed = this._closed;\n\t\t\tarea = 0;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar last = i + 1 === l;\n\t\t\t\tarea += Curve.getArea(Curve.getValues(\n\t\t\t\t\t\tsegments[i], segments[last ? 0 : i + 1],\n\t\t\t\t\t\tnull, last && !closed));\n\t\t\t}\n\t\t\tthis._area = area;\n\t\t}\n\t\treturn area;\n\t},\n\n\tisFullySelected: function() {\n\t\tvar length = this._segments.length;\n\t\treturn this.isSelected() && length > 0 && this._segmentSelection\n\t\t\t\t=== length * 7;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tif (selected)\n\t\t\tthis._selectSegments(true);\n\t\tthis.setSelected(selected);\n\t},\n\n\tsetSelection: function setSelection(selection) {\n\t\tif (!(selection & 1))\n\t\t\tthis._selectSegments(false);\n\t\tsetSelection.base.call(this, selection);\n\t},\n\n\t_selectSegments: function(selected) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tselection = selected ? 7 : 0;\n\t\tthis._segmentSelection = selection * length;\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tsegments[i]._selection = selection;\n\t},\n\n\t_updateSelection: function(segment, oldSelection, newSelection) {\n\t\tsegment._selection = newSelection;\n\t\tvar selection = this._segmentSelection += newSelection - oldSelection;\n\t\tif (selection > 0)\n\t\t\tthis.setSelected(true);\n\t},\n\n\tdivideAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tcurve;\n\t\treturn loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset()))\n\t\t\t\t? curve._segment1\n\t\t\t\t: null;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tindex = loc && loc.index,\n\t\t\ttime = loc && loc.time,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (time > tMax) {\n\t\t\tindex++;\n\t\t\ttime = 0;\n\t\t}\n\t\tvar curves = this.getCurves();\n\t\tif (index >= 0 && index < curves.length) {\n\t\t\tif (time >= tMin) {\n\t\t\t\tcurves[index++].divideAtTime(time);\n\t\t\t}\n\t\t\tvar segs = this.removeSegments(index, this._segments.length, true),\n\t\t\t\tpath;\n\t\t\tif (this._closed) {\n\t\t\t\tthis.setClosed(false);\n\t\t\t\tpath = this;\n\t\t\t} else {\n\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\tpath.insertAbove(this);\n\t\t\t\tpath.copyAttributes(this);\n\t\t\t}\n\t\t\tpath._add(segs, 0);\n\t\t\tthis.addSegment(segs[0]);\n\t\t\treturn path;\n\t\t}\n\t\treturn null;\n\t},\n\n\tsplit: function(index, time) {\n\t\tvar curve,\n\t\t\tlocation = time === undefined ? index\n\t\t\t\t: (curve = this.getCurves()[index])\n\t\t\t\t\t&& curve.getLocationAtTime(time);\n\t\treturn location != null ? this.splitAt(location) : null;\n\t},\n\n\tjoin: function(path, tolerance) {\n\t\tvar epsilon = tolerance || 0;\n\t\tif (path && path !== this) {\n\t\t\tvar segments = path._segments,\n\t\t\t\tlast1 = this.getLastSegment(),\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\tif (!last2)\n\t\t\t\treturn this;\n\t\t\tif (last1 && last1._point.isClose(last2._point, epsilon))\n\t\t\t\tpath.reverse();\n\t\t\tvar first2 = path.getFirstSegment();\n\t\t\tif (last1 && last1._point.isClose(first2._point, epsilon)) {\n\t\t\t\tlast1.setHandleOut(first2._handleOut);\n\t\t\t\tthis._add(segments.slice(1));\n\t\t\t} else {\n\t\t\t\tvar first1 = this.getFirstSegment();\n\t\t\t\tif (first1 && first1._point.isClose(first2._point, epsilon))\n\t\t\t\t\tpath.reverse();\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\t\tif (first1 && first1._point.isClose(last2._point, epsilon)) {\n\t\t\t\t\tfirst1.setHandleIn(last2._handleIn);\n\t\t\t\t\tthis._add(segments.slice(0, segments.length - 1), 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis._add(segments.slice());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (path._closed)\n\t\t\t\tthis._add([segments[0]]);\n\t\t\tpath.remove();\n\t\t}\n\t\tvar first = this.getFirstSegment(),\n\t\t\tlast = this.getLastSegment();\n\t\tif (first !== last && first._point.isClose(last._point, epsilon)) {\n\t\t\tfirst.setHandleIn(last._handleIn);\n\t\t\tlast.remove();\n\t\t\tthis.setClosed(true);\n\t\t}\n\t\treturn this;\n\t},\n\n\treduce: function(options) {\n\t\tvar curves = this.getCurves(),\n\t\t\tsimplify = options && options.simplify,\n\t\t\ttolerance = simplify ? 1e-7 : 0;\n\t\tfor (var i = curves.length - 1; i >= 0; i--) {\n\t\t\tvar curve = curves[i];\n\t\t\tif (!curve.hasHandles() && (!curve.hasLength(tolerance)\n\t\t\t\t\t|| simplify && curve.isCollinear(curve.getNext())))\n\t\t\t\tcurve.remove();\n\t\t}\n\t\treturn this;\n\t},\n\n\treverse: function() {\n\t\tthis._segments.reverse();\n\t\tfor (var i = 0, l = this._segments.length; i < l; i++) {\n\t\t\tvar segment = this._segments[i];\n\t\t\tvar handleIn = segment._handleIn;\n\t\t\tsegment._handleIn = segment._handleOut;\n\t\t\tsegment._handleOut = handleIn;\n\t\t\tsegment._index = i;\n\t\t}\n\t\tthis._curves = null;\n\t\tthis._changed(9);\n\t},\n\n\tflatten: function(flatness) {\n\t\tvar flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n\t\t\tparts = flattener.parts,\n\t\t\tlength = parts.length,\n\t\t\tsegments = [];\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tsegments.push(new Segment(parts[i].curve.slice(0, 2)));\n\t\t}\n\t\tif (!this._closed && length > 0) {\n\t\t\tsegments.push(new Segment(parts[length - 1].curve.slice(6)));\n\t\t}\n\t\tthis.setSegments(segments);\n\t},\n\n\tsimplify: function(tolerance) {\n\t\tvar segments = new PathFitter(this).fit(tolerance || 2.5);\n\t\tif (segments)\n\t\t\tthis.setSegments(segments);\n\t\treturn !!segments;\n\t},\n\n\tsmooth: function(options) {\n\t\tvar that = this,\n\t\t\topts = options || {},\n\t\t\ttype = opts.type || 'asymmetric',\n\t\t\tsegments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tclosed = this._closed;\n\n\t\tfunction getIndex(value, _default) {\n\t\t\tvar index = value && value.index;\n\t\t\tif (index != null) {\n\t\t\t\tvar path = value.path;\n\t\t\t\tif (path && path !== that)\n\t\t\t\t\tthrow new Error(value._class + ' ' + index + ' of ' + path\n\t\t\t\t\t\t\t+ ' is not part of ' + that);\n\t\t\t\tif (_default && value instanceof Curve)\n\t\t\t\t\tindex++;\n\t\t\t} else {\n\t\t\t\tindex = typeof value === 'number' ? value : _default;\n\t\t\t}\n\t\t\treturn Math.min(index < 0 && closed\n\t\t\t\t\t? index % length\n\t\t\t\t\t: index < 0 ? index + length : index, length - 1);\n\t\t}\n\n\t\tvar loop = closed && opts.from === undefined && opts.to === undefined,\n\t\t\tfrom = getIndex(opts.from, 0),\n\t\t\tto = getIndex(opts.to, length - 1);\n\n\t\tif (from > to) {\n\t\t\tif (closed) {\n\t\t\t\tfrom -= length;\n\t\t\t} else {\n\t\t\t\tvar tmp = from;\n\t\t\t\tfrom = to;\n\t\t\t\tto = tmp;\n\t\t\t}\n\t\t}\n\t\tif (/^(?:asymmetric|continuous)$/.test(type)) {\n\t\t\tvar asymmetric = type === 'asymmetric',\n\t\t\t\tmin = Math.min,\n\t\t\t\tamount = to - from + 1,\n\t\t\t\tn = amount - 1,\n\t\t\t\tpadding = loop ? min(amount, 4) : 1,\n\t\t\t\tpaddingLeft = padding,\n\t\t\t\tpaddingRight = padding,\n\t\t\t\tknots = [];\n\t\t\tif (!closed) {\n\t\t\t\tpaddingLeft = min(1, from);\n\t\t\t\tpaddingRight = min(1, length - to - 1);\n\t\t\t}\n\t\t\tn += paddingLeft + paddingRight;\n\t\t\tif (n <= 1)\n\t\t\t\treturn;\n\t\t\tfor (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n\t\t\t\tknots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n\t\t\t}\n\n\t\t\tvar x = knots[0]._x + 2 * knots[1]._x,\n\t\t\t\ty = knots[0]._y + 2 * knots[1]._y,\n\t\t\t\tf = 2,\n\t\t\t\tn_1 = n - 1,\n\t\t\t\trx = [x],\n\t\t\t\try = [y],\n\t\t\t\trf = [f],\n\t\t\t\tpx = [],\n\t\t\t\tpy = [];\n\t\t\tfor (var i = 1; i < n; i++) {\n\t\t\t\tvar internal = i < n_1,\n\t\t\t\t\ta = internal ? 1 : asymmetric ? 1 : 2,\n\t\t\t\t\tb = internal ? 4 : asymmetric ? 2 : 7,\n\t\t\t\t\tu = internal ? 4 : asymmetric ? 3 : 8,\n\t\t\t\t\tv = internal ? 2 : asymmetric ? 0 : 1,\n\t\t\t\t\tm = a / f;\n\t\t\t\tf = rf[i] = b - m;\n\t\t\t\tx = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n\t\t\t\ty = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n\t\t\t}\n\n\t\t\tpx[n_1] = rx[n_1] / rf[n_1];\n\t\t\tpy[n_1] = ry[n_1] / rf[n_1];\n\t\t\tfor (var i = n - 2; i >= 0; i--) {\n\t\t\t\tpx[i] = (rx[i] - px[i + 1]) / rf[i];\n\t\t\t\tpy[i] = (ry[i] - py[i + 1]) / rf[i];\n\t\t\t}\n\t\t\tpx[n] = (3 * knots[n]._x - px[n_1]) / 2;\n\t\t\tpy[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n\t\t\tfor (var i = paddingLeft, max = n - paddingRight, j = from;\n\t\t\t\t\ti <= max; i++, j++) {\n\t\t\t\tvar segment = segments[j < 0 ? j + length : j],\n\t\t\t\t\tpt = segment._point,\n\t\t\t\t\thx = px[i] - pt._x,\n\t\t\t\t\thy = py[i] - pt._y;\n\t\t\t\tif (loop || i < max)\n\t\t\t\t\tsegment.setHandleOut(hx, hy);\n\t\t\t\tif (loop || i > paddingLeft)\n\t\t\t\t\tsegment.setHandleIn(-hx, -hy);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = from; i <= to; i++) {\n\t\t\t\tsegments[i < 0 ? i + length : i].smooth(opts,\n\t\t\t\t\t\t!loop && i === from, !loop && i === to);\n\t\t\t}\n\t\t}\n\t},\n\n\ttoShape: function(insert) {\n\t\tif (!this._closed)\n\t\t\treturn null;\n\n\t\tvar segments = this._segments,\n\t\t\ttype,\n\t\t\tsize,\n\t\t\tradius,\n\t\t\ttopCenter;\n\n\t\tfunction isCollinear(i, j) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\tseg3 = segments[j],\n\t\t\t\tseg4 = seg3.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg3._handleOut.isZero() && seg4._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isCollinear(\n\t\t\t\t\t\tseg4._point.subtract(seg3._point));\n\t\t}\n\n\t\tfunction isOrthogonal(i) {\n\t\t\tvar seg2 = segments[i],\n\t\t\t\tseg1 = seg2.getPrevious(),\n\t\t\t\tseg3 = seg2.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg2._handleOut.isZero() && seg3._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isOrthogonal(\n\t\t\t\t\t\tseg3._point.subtract(seg2._point));\n\t\t}\n\n\t\tfunction isArc(i) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\thandle1 = seg1._handleOut,\n\t\t\t\thandle2 = seg2._handleIn,\n\t\t\t\tkappa = 0.5522847498307936;\n\t\t\tif (handle1.isOrthogonal(handle2)) {\n\t\t\t\tvar pt1 = seg1._point,\n\t\t\t\t\tpt2 = seg2._point,\n\t\t\t\t\tcorner = new Line(pt1, handle1, true).intersect(\n\t\t\t\t\t\t\tnew Line(pt2, handle2, true), true);\n\t\t\t\treturn corner && Numerical.isZero(handle1.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt1).getLength() - kappa)\n\t\t\t\t\t&& Numerical.isZero(handle2.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt2).getLength() - kappa);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction getDistance(i, j) {\n\t\t\treturn segments[i]._point.getDistance(segments[j]._point);\n\t\t}\n\n\t\tif (!this.hasHandles() && segments.length === 4\n\t\t\t\t&& isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(0, 3), getDistance(0, 1));\n\t\t\ttopCenter = segments[1]._point.add(segments[2]._point).divide(2);\n\t\t} else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4)\n\t\t\t\t&& isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(1, 6), getDistance(0, 3));\n\t\t\tradius = size.subtract(new Size(getDistance(0, 7),\n\t\t\t\t\tgetDistance(1, 2))).divide(2);\n\t\t\ttopCenter = segments[3]._point.add(segments[4]._point).divide(2);\n\t\t} else if (segments.length === 4\n\t\t\t\t&& isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n\t\t\tif (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n\t\t\t\ttype = Shape.Circle;\n\t\t\t\tradius = getDistance(0, 2) / 2;\n\t\t\t} else {\n\t\t\t\ttype = Shape.Ellipse;\n\t\t\t\tradius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n\t\t\t}\n\t\t\ttopCenter = segments[1]._point;\n\t\t}\n\n\t\tif (type) {\n\t\t\tvar center = this.getPosition(true),\n\t\t\t\tshape = new type({\n\t\t\t\t\tcenter: center,\n\t\t\t\t\tsize: size,\n\t\t\t\t\tradius: radius,\n\t\t\t\t\tinsert: false\n\t\t\t\t});\n\t\t\tshape.copyAttributes(this, true);\n\t\t\tshape._matrix.prepend(this._matrix);\n\t\t\tshape.rotate(topCenter.subtract(center).getAngle() + 90);\n\t\t\tif (insert === undefined || insert)\n\t\t\t\tshape.insertAbove(this);\n\t\t\treturn shape;\n\t\t}\n\t\treturn null;\n\t},\n\n\ttoPath: '#clone',\n\n\tcompare: function compare(path) {\n\t\tif (!path || path instanceof CompoundPath)\n\t\t\treturn compare.base.call(this, path);\n\t\tvar curves1 = this.getCurves(),\n\t\t\tcurves2 = path.getCurves(),\n\t\t\tlength1 = curves1.length,\n\t\t\tlength2 = curves2.length;\n\t\tif (!length1 || !length2) {\n\t\t\treturn length1 == length2;\n\t\t}\n\t\tvar v1 = curves1[0].getValues(),\n\t\t\tvalues2 = [],\n\t\t\tpos1 = 0, pos2,\n\t\t\tend1 = 0, end2;\n\t\tfor (var i = 0; i < length2; i++) {\n\t\t\tvar v2 = curves2[i].getValues();\n\t\t\tvalues2.push(v2);\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tpos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n\t\t\t\tend2 = overlaps[0][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar abs = Math.abs,\n\t\t\tepsilon = 1e-8,\n\t\t\tv2 = values2[pos2],\n\t\t\tstart2;\n\t\twhile (v1 && v2) {\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tvar t1 = overlaps[0][0];\n\t\t\t\tif (abs(t1 - end1) < epsilon) {\n\t\t\t\t\tend1 = overlaps[1][0];\n\t\t\t\t\tif (end1 === 1) {\n\t\t\t\t\t\tv1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n\t\t\t\t\t\tend1 = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar t2 = overlaps[0][1];\n\t\t\t\t\tif (abs(t2 - end2) < epsilon) {\n\t\t\t\t\t\tif (!start2)\n\t\t\t\t\t\t\tstart2 = [pos2, t2];\n\t\t\t\t\t\tend2 = overlaps[1][1];\n\t\t\t\t\t\tif (end2 === 1) {\n\t\t\t\t\t\t\tif (++pos2 >= length2)\n\t\t\t\t\t\t\t\tpos2 = 0;\n\t\t\t\t\t\t\tv2 = values2[pos2] || curves2[pos2].getValues();\n\t\t\t\t\t\t\tend2 = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!v1) {\n\t\t\t\t\t\t\treturn start2[0] === pos2 && start2[1] === end2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix, strokeMatrix) {\n\t\tvar that = this,\n\t\t\tstyle = this.getStyle(),\n\t\t\tsegments = this._segments,\n\t\t\tnumSegments = segments.length,\n\t\t\tclosed = this._closed,\n\t\t\ttolerancePadding = options._tolerancePadding,\n\t\t\tstrokePadding = tolerancePadding,\n\t\t\tjoin, cap, miterLimit,\n\t\t\tarea, loc, res,\n\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\thitFill = options.fill && style.hasFill(),\n\t\t\thitCurves = options.curves,\n\t\t\tstrokeRadius = hitStroke\n\t\t\t\t\t? style.getStrokeWidth() / 2\n\t\t\t\t\t: hitFill && options.tolerance > 0 || hitCurves\n\t\t\t\t\t\t? 0 : null;\n\t\tif (strokeRadius !== null) {\n\t\t\tif (strokeRadius > 0) {\n\t\t\t\tjoin = style.getStrokeJoin();\n\t\t\t\tcap = style.getStrokeCap();\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\t\tstrokePadding = strokePadding.add(\n\t\t\t\t\tPath._getStrokePadding(strokeRadius, strokeMatrix));\n\t\t\t} else {\n\t\t\t\tjoin = cap = 'round';\n\t\t\t}\n\t\t}\n\n\t\tfunction isCloseEnough(pt, padding) {\n\t\t\treturn point.subtract(pt).divide(padding).length <= 1;\n\t\t}\n\n\t\tfunction checkSegmentPoint(seg, pt, name) {\n\t\t\tif (!options.selected || pt.isSelected()) {\n\t\t\t\tvar anchor = seg._point;\n\t\t\t\tif (pt !== anchor)\n\t\t\t\t\tpt = pt.add(anchor);\n\t\t\t\tif (isCloseEnough(pt, strokePadding)) {\n\t\t\t\t\treturn new HitResult(name, that, {\n\t\t\t\t\t\tsegment: seg,\n\t\t\t\t\t\tpoint: pt\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction checkSegmentPoints(seg, ends) {\n\t\t\treturn (ends || options.segments)\n\t\t\t\t&& checkSegmentPoint(seg, seg._point, 'segment')\n\t\t\t\t|| (!ends && options.handles) && (\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleIn, 'handle-in') ||\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleOut, 'handle-out'));\n\t\t}\n\n\t\tfunction addToArea(point) {\n\t\t\tarea.add(point);\n\t\t}\n\n\t\tfunction checkSegmentStroke(segment) {\n\t\t\tvar isJoin = closed || segment._index > 0\n\t\t\t\t\t&& segment._index < numSegments - 1;\n\t\t\tif ((isJoin ? join : cap) === 'round') {\n\t\t\t\treturn isCloseEnough(segment._point, strokePadding);\n\t\t\t} else {\n\t\t\t\tarea = new Path({ internal: true, closed: true });\n\t\t\t\tif (isJoin) {\n\t\t\t\t\tif (!segment.isSmooth()) {\n\t\t\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius,\n\t\t\t\t\t\t\t   miterLimit, null, strokeMatrix, addToArea, true);\n\t\t\t\t\t}\n\t\t\t\t} else if (cap === 'square') {\n\t\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, null,\n\t\t\t\t\t\t\tstrokeMatrix, addToArea, true);\n\t\t\t\t}\n\t\t\t\tif (!area.isEmpty()) {\n\t\t\t\t\tvar loc;\n\t\t\t\t\treturn area.contains(point)\n\t\t\t\t\t\t|| (loc = area.getNearestLocation(point))\n\t\t\t\t\t\t\t&& isCloseEnough(loc.getPoint(), tolerancePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.ends && !options.segments && !closed) {\n\t\t\tif (res = checkSegmentPoints(segments[0], true)\n\t\t\t\t\t|| checkSegmentPoints(segments[numSegments - 1], true))\n\t\t\t\treturn res;\n\t\t} else if (options.segments || options.handles) {\n\t\t\tfor (var i = 0; i < numSegments; i++)\n\t\t\t\tif (res = checkSegmentPoints(segments[i]))\n\t\t\t\t\treturn res;\n\t\t}\n\t\tif (strokeRadius !== null) {\n\t\t\tloc = this.getNearestLocation(point);\n\t\t\tif (loc) {\n\t\t\t\tvar time = loc.getTime();\n\t\t\t\tif (time === 0 || time === 1 && numSegments > 1) {\n\t\t\t\t\tif (!checkSegmentStroke(loc.getSegment()))\n\t\t\t\t\t\tloc = null;\n\t\t\t\t} else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n\t\t\t\t\tloc = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!loc && join === 'miter' && numSegments > 1) {\n\t\t\t\tfor (var i = 0; i < numSegments; i++) {\n\t\t\t\t\tvar segment = segments[i];\n\t\t\t\t\tif (point.getDistance(segment._point)\n\t\t\t\t\t\t\t<= miterLimit * strokeRadius\n\t\t\t\t\t\t\t&& checkSegmentStroke(segment)) {\n\t\t\t\t\t\tloc = segment.getLocation();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !loc && hitFill && this._contains(point)\n\t\t\t\t|| loc && !hitStroke && !hitCurves\n\t\t\t\t\t? new HitResult('fill', this)\n\t\t\t\t\t: loc\n\t\t\t\t\t\t? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n\t\t\t\t\t\t\tlocation: loc,\n\t\t\t\t\t\t\tpoint: loc.getPoint()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t: null;\n\t}\n\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar loc = this.getLocationAt(offset);\n\t\t\treturn loc && loc[name]();\n\t\t};\n\t},\n{\n\tbeans: false,\n\n\tgetLocationOf: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getLocationOf(point);\n\t\t\tif (loc)\n\t\t\t\treturn loc;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetLocationAt: function(offset) {\n\t\tif (typeof offset === 'number') {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tvar start = length,\n\t\t\t\t\tcurve = curves[i];\n\t\t\t\tlength += curve.getLength();\n\t\t\t\tif (length > offset) {\n\t\t\t\t\treturn curve.getLocationAt(offset - start);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curves.length > 0 && offset <= this.getLength()) {\n\t\t\t\treturn new CurveLocation(curves[curves.length - 1], 1);\n\t\t\t}\n\t\t} else if (offset && offset.getPath && offset.getPath() === this) {\n\t\t\treturn offset;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetsWithTangent: function() {\n\t\tvar tangent = Point.read(arguments);\n\t\tif (tangent.isZero()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar offsets = [];\n\t\tvar curveStart = 0;\n\t\tvar curves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar curveTimes = curve.getTimesWithTangent(tangent);\n\t\t\tfor (var j = 0, m = curveTimes.length; j < m; j++) {\n\t\t\t\tvar offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\t\t\t\tif (offsets.indexOf(offset) < 0) {\n\t\t\t\t\toffsets.push(offset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcurveStart += curve.length;\n\t\t}\n\t\treturn offsets;\n\t}\n}),\nnew function() {\n\n\tfunction drawHandles(ctx, segments, matrix, size) {\n\t\tif (size <= 0) return;\n\n\t\tvar half = size / 2,\n\t\t\tminiSize = size - 2,\n\t\t\tminiHalf = half - 1,\n\t\t\tcoords = new Array(6),\n\t\t\tpX, pY;\n\n\t\tfunction drawHandle(index) {\n\t\t\tvar hX = coords[index],\n\t\t\t\thY = coords[index + 1];\n\t\t\tif (pX != hX || pY != hY) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(pX, pY);\n\t\t\t\tctx.lineTo(hX, hY);\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i],\n\t\t\t\tselection = segment._selection;\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tpX = coords[0];\n\t\t\tpY = coords[1];\n\t\t\tif (selection & 2)\n\t\t\t\tdrawHandle(2);\n\t\t\tif (selection & 4)\n\t\t\t\tdrawHandle(4);\n\t\t\tctx.fillRect(pX - half, pY - half, size, size);\n\t\t\tif (miniSize > 0 && !(selection & 1)) {\n\t\t\t\tvar fillStyle = ctx.fillStyle;\n\t\t\t\tctx.fillStyle = '#ffffff';\n\t\t\t\tctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n\t\t\t\tctx.fillStyle = fillStyle;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawSegments(ctx, path, matrix) {\n\t\tvar segments = path._segments,\n\t\t\tlength = segments.length,\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY;\n\n\t\tfunction drawSegment(segment) {\n\t\t\tif (matrix) {\n\t\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\t\tcurX = coords[0];\n\t\t\t\tcurY = coords[1];\n\t\t\t} else {\n\t\t\t\tvar point = segment._point;\n\t\t\t\tcurX = point._x;\n\t\t\t\tcurY = point._y;\n\t\t\t}\n\t\t\tif (first) {\n\t\t\t\tctx.moveTo(curX, curY);\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tif (matrix) {\n\t\t\t\t\tinX = coords[2];\n\t\t\t\t\tinY = coords[3];\n\t\t\t\t} else {\n\t\t\t\t\tvar handle = segment._handleIn;\n\t\t\t\t\tinX = curX + handle._x;\n\t\t\t\t\tinY = curY + handle._y;\n\t\t\t\t}\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tctx.lineTo(curX, curY);\n\t\t\t\t} else {\n\t\t\t\t\tctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\tif (matrix) {\n\t\t\t\toutX = coords[4];\n\t\t\t\toutY = coords[5];\n\t\t\t} else {\n\t\t\t\tvar handle = segment._handleOut;\n\t\t\t\toutX = prevX + handle._x;\n\t\t\t\toutY = prevY + handle._y;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tdrawSegment(segments[i]);\n\t\tif (path._closed && length > 0)\n\t\t\tdrawSegment(segments[0]);\n\t}\n\n\treturn {\n\t\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\t\tvar dontStart = param.dontStart,\n\t\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\t\tstyle = this.getStyle(),\n\t\t\t\thasFill = style.hasFill(),\n\t\t\t\thasStroke = style.hasStroke(),\n\t\t\t\tdashArray = style.getDashArray(),\n\t\t\t\tdashLength = !paper.support.nativeDash && hasStroke\n\t\t\t\t\t\t&& dashArray && dashArray.length;\n\n\t\t\tif (!dontStart)\n\t\t\t\tctx.beginPath();\n\n\t\t\tif (hasFill || hasStroke && !dashLength || dontPaint) {\n\t\t\t\tdrawSegments(ctx, this, strokeMatrix);\n\t\t\t\tif (this._closed)\n\t\t\t\t\tctx.closePath();\n\t\t\t}\n\n\t\t\tfunction getOffset(i) {\n\t\t\t\treturn dashArray[((i % dashLength) + dashLength) % dashLength];\n\t\t\t}\n\n\t\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\t\tif (hasFill) {\n\t\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t\t}\n\t\t\t\tif (hasStroke) {\n\t\t\t\t\tif (dashLength) {\n\t\t\t\t\t\tif (!dontStart)\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tvar flattener = new PathFlattener(this, 0.25, 32, false,\n\t\t\t\t\t\t\t\tstrokeMatrix),\n\t\t\t\t\t\t\tlength = flattener.length,\n\t\t\t\t\t\t\tfrom = -style.getDashOffset(), to,\n\t\t\t\t\t\t\ti = 0;\n\t\t\t\t\t\twhile (from > 0) {\n\t\t\t\t\t\t\tfrom -= getOffset(i--) + getOffset(i--);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (from < length) {\n\t\t\t\t\t\t\tto = from + getOffset(i++);\n\t\t\t\t\t\t\tif (from > 0 || to > 0)\n\t\t\t\t\t\t\t\tflattener.drawPart(ctx,\n\t\t\t\t\t\t\t\t\t\tMath.max(from, 0), Math.max(to, 0));\n\t\t\t\t\t\t\tfrom = to + getOffset(i++);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_drawSelected: function(ctx, matrix) {\n\t\t\tctx.beginPath();\n\t\t\tdrawSegments(ctx, this, matrix);\n\t\t\tctx.stroke();\n\t\t\tdrawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n\t\t}\n\t};\n},\nnew function() {\n\tfunction getCurrentSegment(that) {\n\t\tvar segments = that._segments;\n\t\tif (!segments.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn segments[segments.length - 1];\n\t}\n\n\treturn {\n\t\tmoveTo: function() {\n\t\t\tvar segments = this._segments;\n\t\t\tif (segments.length === 1)\n\t\t\t\tthis.removeSegment(0);\n\t\t\tif (!segments.length)\n\t\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tmoveBy: function() {\n\t\t\tthrow new Error('moveBy() is unsupported on Path items.');\n\t\t},\n\n\t\tlineTo: function() {\n\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tcubicCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this);\n\t\t\tcurrent.setHandleOut(handle1.subtract(current._point));\n\t\t\tthis._add([ new Segment(to, handle2.subtract(to)) ]);\n\t\t},\n\n\t\tquadraticCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(\n\t\t\t\thandle.add(current.subtract(handle).multiply(1 / 3)),\n\t\t\t\thandle.add(to.subtract(handle).multiply(1 / 3)),\n\t\t\t\tto\n\t\t\t);\n\t\t},\n\n\t\tcurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tt = Base.pick(Base.read(args), 0.5),\n\t\t\t\tt1 = 1 - t,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\thandle = through.subtract(current.multiply(t1 * t1))\n\t\t\t\t\t.subtract(to.multiply(t * t)).divide(2 * t * t1);\n\t\t\tif (handle.isNaN())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Cannot put a curve through points with parameter = ' + t);\n\t\t\tthis.quadraticCurveTo(handle, to);\n\t\t},\n\n\t\tarcTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tabs = Math.abs,\n\t\t\t\tsqrt = Math.sqrt,\n\t\t\t\tcurrent = getCurrentSegment(this),\n\t\t\t\tfrom = current._point,\n\t\t\t\tto = Point.read(args),\n\t\t\t\tthrough,\n\t\t\t\tpeek = Base.peek(args),\n\t\t\t\tclockwise = Base.pick(peek, true),\n\t\t\t\tcenter, extent, vector, matrix;\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tvar middle = from.add(to).divide(2),\n\t\t\t\tthrough = middle.add(middle.subtract(from).rotate(\n\t\t\t\t\t\tclockwise ? -90 : 90));\n\t\t\t} else if (Base.remain(args) <= 2) {\n\t\t\t\tthrough = to;\n\t\t\t\tto = Point.read(args);\n\t\t\t} else if (!from.equals(to)) {\n\t\t\t\tvar radius = Size.read(args),\n\t\t\t\t\tisZero = Numerical.isZero;\n\t\t\t\tif (isZero(radius.width) || isZero(radius.height))\n\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\tvar rotation = Base.read(args),\n\t\t\t\t\tclockwise = !!Base.read(args),\n\t\t\t\t\tlarge = !!Base.read(args),\n\t\t\t\t\tmiddle = from.add(to).divide(2),\n\t\t\t\t\tpt = from.subtract(middle).rotate(-rotation),\n\t\t\t\t\tx = pt.x,\n\t\t\t\t\ty = pt.y,\n\t\t\t\t\trx = abs(radius.width),\n\t\t\t\t\try = abs(radius.height),\n\t\t\t\t\trxSq = rx * rx,\n\t\t\t\t\trySq = ry * ry,\n\t\t\t\t\txSq = x * x,\n\t\t\t\t\tySq = y * y;\n\t\t\t\tvar factor = sqrt(xSq / rxSq + ySq / rySq);\n\t\t\t\tif (factor > 1) {\n\t\t\t\t\trx *= factor;\n\t\t\t\t\try *= factor;\n\t\t\t\t\trxSq = rx * rx;\n\t\t\t\t\trySq = ry * ry;\n\t\t\t\t}\n\t\t\t\tfactor = (rxSq * rySq - rxSq * ySq - rySq * xSq) /\n\t\t\t\t\t\t(rxSq * ySq + rySq * xSq);\n\t\t\t\tif (abs(factor) < 1e-12)\n\t\t\t\t\tfactor = 0;\n\t\t\t\tif (factor < 0)\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\tcenter = new Point(rx * y / ry, -ry * x / rx)\n\t\t\t\t\t\t.multiply((large === clockwise ? -1 : 1) * sqrt(factor))\n\t\t\t\t\t\t.rotate(rotation).add(middle);\n\t\t\t\tmatrix = new Matrix().translate(center).rotate(rotation)\n\t\t\t\t\t\t.scale(rx, ry);\n\t\t\t\tvector = matrix._inverseTransform(from);\n\t\t\t\textent = vector.getDirectedAngle(matrix._inverseTransform(to));\n\t\t\t\tif (!clockwise && extent > 0)\n\t\t\t\t\textent -= 360;\n\t\t\t\telse if (clockwise && extent < 0)\n\t\t\t\t\textent += 360;\n\t\t\t}\n\t\t\tif (through) {\n\t\t\t\tvar l1 = new Line(from.add(through).divide(2),\n\t\t\t\t\t\t\tthrough.subtract(from).rotate(90), true),\n\t\t\t\t\tl2 = new Line(through.add(to).divide(2),\n\t\t\t\t\t\t\tto.subtract(through).rotate(90), true),\n\t\t\t\t\tline = new Line(from, to),\n\t\t\t\t\tthroughSide = line.getSide(through);\n\t\t\t\tcenter = l1.intersect(l2, true);\n\t\t\t\tif (!center) {\n\t\t\t\t\tif (!throughSide)\n\t\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\t}\n\t\t\t\tvector = from.subtract(center);\n\t\t\t\textent = vector.getDirectedAngle(to.subtract(center));\n\t\t\t\tvar centerSide = line.getSide(center, true);\n\t\t\t\tif (centerSide === 0) {\n\t\t\t\t\textent = throughSide * abs(extent);\n\t\t\t\t} else if (throughSide === centerSide) {\n\t\t\t\t\textent += extent < 0 ? 360 : -360;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extent) {\n\t\t\t\tvar epsilon = 1e-5,\n\t\t\t\t\text = abs(extent),\n\t\t\t\t\tcount = ext >= 360\n\t\t\t\t\t\t? 4\n\t\t\t\t\t\t: Math.ceil((ext - epsilon) / 90),\n\t\t\t\t\tinc = extent / count,\n\t\t\t\t\thalf = inc * Math.PI / 360,\n\t\t\t\t\tz = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n\t\t\t\t\tsegments = [];\n\t\t\t\tfor (var i = 0; i <= count; i++) {\n\t\t\t\t\tvar pt = to,\n\t\t\t\t\t\tout = null;\n\t\t\t\t\tif (i < count) {\n\t\t\t\t\t\tout = vector.rotate(90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\tpt = matrix._transformPoint(vector);\n\t\t\t\t\t\t\tout = matrix._transformPoint(vector.add(out))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpt = center.add(vector);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tcurrent.setHandleOut(out);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar _in = vector.rotate(-90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\t_in = matrix._transformPoint(vector.add(_in))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsegments.push(new Segment(pt, _in, out));\n\t\t\t\t\t}\n\t\t\t\t\tvector = vector.rotate(inc);\n\t\t\t\t}\n\t\t\t\tthis._add(segments);\n\t\t\t}\n\t\t},\n\n\t\tlineBy: function() {\n\t\t\tvar to = Point.read(arguments),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.lineTo(current.add(to));\n\t\t},\n\n\t\tcurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tparameter = Base.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.curveTo(current.add(through), current.add(to), parameter);\n\t\t},\n\n\t\tcubicCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(current.add(handle1), current.add(handle2),\n\t\t\t\t\tcurrent.add(to));\n\t\t},\n\n\t\tquadraticCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.quadraticCurveTo(current.add(handle), current.add(to));\n\t\t},\n\n\t\tarcBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\tpoint = current.add(Point.read(args)),\n\t\t\t\tclockwise = Base.pick(Base.peek(args), true);\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tthis.arcTo(point, clockwise);\n\t\t\t} else {\n\t\t\t\tthis.arcTo(point, current.add(Point.read(args)));\n\t\t\t}\n\t\t},\n\n\t\tclosePath: function(tolerance) {\n\t\t\tthis.setClosed(true);\n\t\t\tthis.join(this, tolerance);\n\t\t}\n\t};\n}, {\n\n\t_getBounds: function(matrix, options) {\n\t\tvar method = options.handle\n\t\t\t\t? 'getHandleBounds'\n\t\t\t\t: options.stroke\n\t\t\t\t? 'getStrokeBounds'\n\t\t\t\t: 'getBounds';\n\t\treturn Path[method](this._segments, this._closed, this, matrix, options);\n\t},\n\nstatics: {\n\tgetBounds: function(segments, closed, path, matrix, options, strokePadding) {\n\t\tvar first = segments[0];\n\t\tif (!first)\n\t\t\treturn new Rectangle();\n\t\tvar coords = new Array(6),\n\t\t\tprevCoords = first._transformCoordinates(matrix, new Array(6)),\n\t\t\tmin = prevCoords.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = new Array(2);\n\n\t\tfunction processSegment(segment) {\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\tCurve._addBounds(\n\t\t\t\t\tprevCoords[i],\n\t\t\t\t\tprevCoords[i + 4],\n\t\t\t\t\tcoords[i + 2],\n\t\t\t\t\tcoords[i],\n\t\t\t\t\ti, strokePadding ? strokePadding[i] : 0, min, max, roots);\n\t\t\t}\n\t\t\tvar tmp = prevCoords;\n\t\t\tprevCoords = coords;\n\t\t\tcoords = tmp;\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++)\n\t\t\tprocessSegment(segments[i]);\n\t\tif (closed)\n\t\t\tprocessSegment(first);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\tgetStrokeBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = style.hasStroke(),\n\t\t\tstrokeWidth = style.getStrokeWidth(),\n\t\t\tstrokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n\t\t\tstrokePadding = stroke && Path._getStrokePadding(strokeWidth,\n\t\t\t\tstrokeMatrix),\n\t\t\tbounds = Path.getBounds(segments, closed, path, matrix, options,\n\t\t\t\tstrokePadding);\n\t\tif (!stroke)\n\t\t\treturn bounds;\n\t\tvar strokeRadius = strokeWidth / 2,\n\t\t\tjoin = style.getStrokeJoin(),\n\t\t\tcap = style.getStrokeCap(),\n\t\t\tmiterLimit = style.getMiterLimit(),\n\t\t\tjoinBounds = new Rectangle(new Size(strokePadding));\n\n\t\tfunction addPoint(point) {\n\t\t\tbounds = bounds.include(point);\n\t\t}\n\n\t\tfunction addRound(segment) {\n\t\t\tbounds = bounds.unite(\n\t\t\t\t\tjoinBounds.setCenter(segment._point.transform(matrix)));\n\t\t}\n\n\t\tfunction addJoin(segment, join) {\n\t\t\tif (join === 'round' || segment.isSmooth()) {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius, miterLimit,\n\t\t\t\t\t\tmatrix, strokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tfunction addCap(segment, cap) {\n\t\t\tif (cap === 'round') {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, matrix,\n\t\t\t\t\t\tstrokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tvar length = segments.length - (closed ? 0 : 1);\n\t\tif (length > 0) {\n\t\t\tfor (var i = 1; i < length; i++) {\n\t\t\t\taddJoin(segments[i], join);\n\t\t\t}\n\t\t\tif (closed) {\n\t\t\t\taddJoin(segments[0], join);\n\t\t\t} else {\n\t\t\t\taddCap(segments[0], cap);\n\t\t\t\taddCap(segments[segments.length - 1], cap);\n\t\t\t}\n\t\t}\n\t\treturn bounds;\n\t},\n\n\t_getStrokePadding: function(radius, matrix) {\n\t\tif (!matrix)\n\t\t\treturn [radius, radius];\n\t\tvar hor = new Point(radius, 0).transform(matrix),\n\t\t\tver = new Point(0, radius).transform(matrix),\n\t\t\tphi = hor.getAngleInRadians(),\n\t\t\ta = hor.getLength(),\n\t\t\tb = ver.getLength();\n\t\tvar sin = Math.sin(phi),\n\t\t\tcos = Math.cos(phi),\n\t\t\ttan = Math.tan(phi),\n\t\t\ttx = Math.atan2(b * tan, a),\n\t\t\tty = Math.atan2(b, tan * a);\n\t\treturn [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin),\n\t\t\t\tMath.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n\t},\n\n\t_addBevelJoin: function(segment, join, radius, miterLimit, matrix,\n\t\t\tstrokeMatrix, addPoint, isArea) {\n\t\tvar curve2 = segment.getCurve(),\n\t\t\tcurve1 = curve2.getPrevious(),\n\t\t\tpoint = curve2.getPoint1().transform(matrix),\n\t\t\tnormal1 = curve1.getNormalAtTime(1).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\tnormal2 = curve2.getNormalAtTime(0).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\t\tangle = normal1.getDirectedAngle(normal2);\n\t\tif (angle < 0 || angle >= 180) {\n\t\t\tnormal1 = normal1.negate();\n\t\t\tnormal2 = normal2.negate();\n\t\t}\n\t\tif (isArea)\n\t\t\taddPoint(point);\n\t\taddPoint(point.add(normal1));\n\t\tif (join === 'miter') {\n\t\t\tvar corner = new Line(point.add(normal1),\n\t\t\t\t\tnew Point(-normal1.y, normal1.x), true\n\t\t\t\t).intersect(new Line(point.add(normal2),\n\t\t\t\t\tnew Point(-normal2.y, normal2.x), true\n\t\t\t\t), true);\n\t\t\tif (corner && point.getDistance(corner) <= miterLimit * radius) {\n\t\t\t\taddPoint(corner);\n\t\t\t}\n\t\t}\n\t\taddPoint(point.add(normal2));\n\t},\n\n\t_addSquareCap: function(segment, cap, radius, matrix, strokeMatrix,\n\t\t\taddPoint, isArea) {\n\t\tvar point = segment._point.transform(matrix),\n\t\t\tloc = segment.getLocation(),\n\t\t\tnormal = loc.getNormal()\n\t\t\t\t\t.multiply(loc.getTime() === 0 ? radius : -radius)\n\t\t\t\t\t.transform(strokeMatrix);\n\t\tif (cap === 'square') {\n\t\t\tif (isArea) {\n\t\t\t\taddPoint(point.subtract(normal));\n\t\t\t\taddPoint(point.add(normal));\n\t\t\t}\n\t\t\tpoint = point.add(normal.rotate(-90));\n\t\t}\n\t\taddPoint(point.add(normal));\n\t\taddPoint(point.subtract(normal));\n\t},\n\n\tgetHandleBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = options.stroke && style.hasStroke(),\n\t\t\tstrokePadding,\n\t\t\tjoinPadding;\n\t\tif (stroke) {\n\t\t\tvar strokeMatrix = path._getStrokeMatrix(matrix, options),\n\t\t\t\tstrokeRadius = style.getStrokeWidth() / 2,\n\t\t\t\tjoinRadius = strokeRadius;\n\t\t\tif (style.getStrokeJoin() === 'miter')\n\t\t\t\tjoinRadius = strokeRadius * style.getMiterLimit();\n\t\t\tif (style.getStrokeCap() === 'square')\n\t\t\t\tjoinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n\t\t\tstrokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n\t\t\tjoinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n\t\t}\n\t\tvar coords = new Array(6),\n\t\t\tx1 = Infinity,\n\t\t\tx2 = -x1,\n\t\t\ty1 = x1,\n\t\t\ty2 = x2;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i];\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var j = 0; j < 6; j += 2) {\n\t\t\t\tvar padding = !j ? joinPadding : strokePadding,\n\t\t\t\t\tpaddingX = padding ? padding[0] : 0,\n\t\t\t\t\tpaddingY = padding ? padding[1] : 0,\n\t\t\t\t\tx = coords[j],\n\t\t\t\t\ty = coords[j + 1],\n\t\t\t\t\txn = x - paddingX,\n\t\t\t\t\txx = x + paddingX,\n\t\t\t\t\tyn = y - paddingY,\n\t\t\t\t\tyx = y + paddingY;\n\t\t\t\tif (xn < x1) x1 = xn;\n\t\t\t\tif (xx > x2) x2 = xx;\n\t\t\t\tif (yn < y1) y1 = yn;\n\t\t\t\tif (yx > y2) y2 = yx;\n\t\t\t}\n\t\t}\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t}\n}});\n\nPath.inject({ statics: new function() {\n\n\tvar kappa = 0.5522847498307936,\n\t\tellipseSegments = [\n\t\t\tnew Segment([-1, 0], [0, kappa ], [0, -kappa]),\n\t\t\tnew Segment([0, -1], [-kappa, 0], [kappa, 0 ]),\n\t\t\tnew Segment([1, 0], [0, -kappa], [0, kappa ]),\n\t\t\tnew Segment([0, 1], [kappa, 0 ], [-kappa, 0])\n\t\t];\n\n\tfunction createPath(segments, closed, args) {\n\t\tvar props = Base.getNamed(args),\n\t\t\tpath = new Path(props && (\n\t\t\t\tprops.insert == true ? Item.INSERT\n\t\t\t\t: props.insert == false ? Item.NO_INSERT\n\t\t\t\t: null\n\t\t\t));\n\t\tpath._add(segments);\n\t\tpath._closed = closed;\n\t\treturn path.set(props, Item.INSERT);\n\t}\n\n\tfunction createEllipse(center, radius, args) {\n\t\tvar segments = new Array(4);\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tvar segment = ellipseSegments[i];\n\t\t\tsegments[i] = new Segment(\n\t\t\t\tsegment._point.multiply(radius).add(center),\n\t\t\t\tsegment._handleIn.multiply(radius),\n\t\t\t\tsegment._handleOut.multiply(radius)\n\t\t\t);\n\t\t}\n\t\treturn createPath(segments, true, args);\n\t}\n\n\treturn {\n\t\tLine: function() {\n\t\t\tvar args = arguments;\n\t\t\treturn createPath([\n\t\t\t\tnew Segment(Point.readNamed(args, 'from')),\n\t\t\t\tnew Segment(Point.readNamed(args, 'to'))\n\t\t\t], false, args);\n\t\t},\n\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createEllipse(center, new Size(radius), args);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.readNamed(args, 'radius', 0,\n\t\t\t\t\t\t{ readNull: true }),\n\t\t\t\tbl = rect.getBottomLeft(true),\n\t\t\t\ttl = rect.getTopLeft(true),\n\t\t\t\ttr = rect.getTopRight(true),\n\t\t\t\tbr = rect.getBottomRight(true),\n\t\t\t\tsegments;\n\t\t\tif (!radius || radius.isZero()) {\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl),\n\t\t\t\t\tnew Segment(tl),\n\t\t\t\t\tnew Segment(tr),\n\t\t\t\t\tnew Segment(br)\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tradius = Size.min(radius, rect.getSize(true).divide(2));\n\t\t\t\tvar rx = radius.width,\n\t\t\t\t\try = radius.height,\n\t\t\t\t\thx = rx * kappa,\n\t\t\t\t\thy = ry * kappa;\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl.add(rx, 0), null, [-hx, 0]),\n\t\t\t\t\tnew Segment(bl.subtract(0, ry), [0, hy]),\n\t\t\t\t\tnew Segment(tl.add(0, ry), null, [0, -hy]),\n\t\t\t\t\tnew Segment(tl.add(rx, 0), [-hx, 0], null),\n\t\t\t\t\tnew Segment(tr.subtract(rx, 0), null, [hx, 0]),\n\t\t\t\t\tnew Segment(tr.add(0, ry), [0, -hy], null),\n\t\t\t\t\tnew Segment(br.subtract(0, ry), null, [0, hy]),\n\t\t\t\t\tnew Segment(br.subtract(rx, 0), [hx, 0])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tRoundRectangle: '#Rectangle',\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args);\n\t\t\treturn createEllipse(ellipse.center, ellipse.radius, args);\n\t\t},\n\n\t\tOval: '#Ellipse',\n\n\t\tArc: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tfrom = Point.readNamed(args, 'from'),\n\t\t\t\tthrough = Point.readNamed(args, 'through'),\n\t\t\t\tto = Point.readNamed(args, 'to'),\n\t\t\t\tprops = Base.getNamed(args),\n\t\t\t\tpath = new Path(props && props.insert == false\n\t\t\t\t\t\t&& Item.NO_INSERT);\n\t\t\tpath.moveTo(from);\n\t\t\tpath.arcTo(through, to);\n\t\t\treturn path.set(props);\n\t\t},\n\n\t\tRegularPolygon: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tsides = Base.readNamed(args, 'sides'),\n\t\t\t\tradius = Base.readNamed(args, 'radius'),\n\t\t\t\tstep = 360 / sides,\n\t\t\t\tthree = sides % 3 === 0,\n\t\t\t\tvector = new Point(0, three ? -radius : radius),\n\t\t\t\toffset = three ? -1 : 0.5,\n\t\t\t\tsegments = new Array(sides);\n\t\t\tfor (var i = 0; i < sides; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(\n\t\t\t\t\tvector.rotate((i + offset) * step)));\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tStar: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tpoints = Base.readNamed(args, 'points') * 2,\n\t\t\t\tradius1 = Base.readNamed(args, 'radius1'),\n\t\t\t\tradius2 = Base.readNamed(args, 'radius2'),\n\t\t\t\tstep = 360 / points,\n\t\t\t\tvector = new Point(0, -1),\n\t\t\t\tsegments = new Array(points);\n\t\t\tfor (var i = 0; i < points; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(vector.rotate(step * i)\n\t\t\t\t\t\t.multiply(i % 2 ? radius2 : radius1)));\n\t\t\treturn createPath(segments, true, args);\n\t\t}\n\t};\n}});\n\nvar CompoundPath = PathItem.extend({\n\t_class: 'CompoundPath',\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\tbeans: true,\n\n\tinitialize: function CompoundPath(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg)) {\n\t\t\tif (typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t} else {\n\t\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t\t\t}\n\t\t}\n\t},\n\n\tinsertChildren: function insertChildren(index, items) {\n\t\tvar list = items,\n\t\t\tfirst = list[0];\n\t\tif (first && typeof first[0] === 'number')\n\t\t\tlist = [list];\n\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\tvar item = list[i];\n\t\t\tif (list === items && !(item instanceof Path))\n\t\t\t\tlist = Base.slice(list);\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\tlist[i] = new Path({ segments: item, insert: false });\n\t\t\t} else if (item instanceof CompoundPath) {\n\t\t\t\tlist.splice.apply(list, [i, 1].concat(item.removeChildren()));\n\t\t\t\titem.remove();\n\t\t\t}\n\t\t}\n\t\treturn insertChildren.base.call(this, index, list);\n\t},\n\n\treduce: function reduce(options) {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\tvar path = children[i].reduce(options);\n\t\t\tif (path.isEmpty())\n\t\t\t\tpath.remove();\n\t\t}\n\t\tif (!children.length) {\n\t\t\tvar path = new Path(Item.NO_INSERT);\n\t\t\tpath.copyAttributes(this);\n\t\t\tpath.insertAbove(this);\n\t\t\tthis.remove();\n\t\t\treturn path;\n\t\t}\n\t\treturn reduce.base.call(this);\n\t},\n\n\tisClosed: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tif (!children[i]._closed)\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].setClosed(closed);\n\t\t}\n\t},\n\n\tgetFirstSegment: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstSegment();\n\t},\n\n\tgetLastSegment: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastSegment();\n\t},\n\n\tgetCurves: function() {\n\t\tvar children = this._children,\n\t\t\tcurves = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tBase.push(curves, children[i].getCurves());\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstCurve();\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastCurve();\n\t},\n\n\tgetArea: function() {\n\t\tvar children = this._children,\n\t\t\tarea = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tarea += children[i].getArea();\n\t\treturn area;\n\t},\n\n\tgetLength: function() {\n\t\tvar children = this._children,\n\t\t\tlength = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tlength += children[i].getLength();\n\t\treturn length;\n\t},\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar children = this._children,\n\t\t\tpaths = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tpaths.push(child.getPathData(_matrix && !mx.isIdentity()\n\t\t\t\t\t? _matrix.appended(mx) : _matrix, _precision));\n\t\t}\n\t\treturn paths.join('');\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\treturn _hitTestChildren.base.call(this, point,\n\t\t\t\toptions.class === Path || options.type === 'path' ? options\n\t\t\t\t\t: Base.set({}, options, { fill: false }),\n\t\t\t\tviewMatrix);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar children = this._children;\n\t\tif (!children.length)\n\t\t\treturn;\n\n\t\tparam = param.extend({ dontStart: true, dontFinish: true });\n\t\tctx.beginPath();\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].draw(ctx, param, strokeMatrix);\n\n\t\tif (!param.clip) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tvar style = this._style;\n\t\t\tif (style.hasFill()) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (style.hasStroke())\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_drawSelected: function(ctx, matrix, selectionItems) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tif (!selectionItems[child._id]) {\n\t\t\t\tchild._drawSelected(ctx, mx.isIdentity() ? matrix\n\t\t\t\t\t\t: matrix.appended(mx));\n\t\t\t}\n\t\t}\n\t}\n},\nnew function() {\n\tfunction getCurrentPath(that, check) {\n\t\tvar children = that._children;\n\t\tif (check && !children.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn children[children.length - 1];\n\t}\n\n\treturn Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo',\n\t\t\t'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy',\n\t\t\t'arcBy'],\n\t\tfunction(key) {\n\t\t\tthis[key] = function() {\n\t\t\t\tvar path = getCurrentPath(this, true);\n\t\t\t\tpath[key].apply(path, arguments);\n\t\t\t};\n\t\t}, {\n\t\t\tmoveTo: function() {\n\t\t\t\tvar current = getCurrentPath(this),\n\t\t\t\t\tpath = current && current.isEmpty() ? current\n\t\t\t\t\t\t\t: new Path(Item.NO_INSERT);\n\t\t\t\tif (path !== current)\n\t\t\t\t\tthis.addChild(path);\n\t\t\t\tpath.moveTo.apply(path, arguments);\n\t\t\t},\n\n\t\t\tmoveBy: function() {\n\t\t\t\tvar current = getCurrentPath(this, true),\n\t\t\t\t\tlast = current && current.getLastSegment(),\n\t\t\t\t\tpoint = Point.read(arguments);\n\t\t\t\tthis.moveTo(last ? point.add(last._point) : point);\n\t\t\t},\n\n\t\t\tclosePath: function(tolerance) {\n\t\t\t\tgetCurrentPath(this, true).closePath(tolerance);\n\t\t\t}\n\t\t}\n\t);\n}, Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function(key) {\n\tthis[key] = function(param) {\n\t\tvar children = this._children,\n\t\t\tres;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tres = children[i][key](param) || res;\n\t\t}\n\t\treturn res;\n\t};\n}, {}));\n\nPathItem.inject(new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\toperators = {\n\t\t\tunite:     { '1': true, '2': true },\n\t\t\tintersect: { '2': true },\n\t\t\tsubtract:  { '1': true },\n\t\t\texclude:   { '1': true, '-1': true }\n\t\t};\n\n\tfunction getPaths(path) {\n\t\treturn path._children || [path];\n\t}\n\n\tfunction preparePath(path, resolve) {\n\t\tvar res = path\n\t\t\t.clone(false)\n\t\t\t.reduce({ simplify: true })\n\t\t\t.transform(null, true, true);\n\t\tif (resolve) {\n\t\t\tvar paths = getPaths(res);\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tif (!path._closed && !path.isEmpty()) {\n\t\t\t\t\tpath.closePath(1e-12);\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t\tpath.getLastSegment().setHandleOut(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = res\n\t\t\t\t.resolveCrossings()\n\t\t\t\t.reorient(res.getFillRule() === 'nonzero', true);\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction createResult(paths, simplify, path1, path2, options) {\n\t\tvar result = new CompoundPath(Item.NO_INSERT);\n\t\tresult.addChildren(paths, true);\n\t\tresult = result.reduce({ simplify: simplify });\n\t\tif (!(options && options.insert == false)) {\n\t\t\tresult.insertAbove(path2 && path1.isSibling(path2)\n\t\t\t\t\t&& path1.getIndex() < path2.getIndex() ? path2 : path1);\n\t\t}\n\t\tresult.copyAttributes(path1, true);\n\t\treturn result;\n\t}\n\n\tfunction filterIntersection(inter) {\n\t\treturn inter.hasOverlap() || inter.isCrossing();\n\t}\n\n\tfunction traceBoolean(path1, path2, operation, options) {\n\t\tif (options && (options.trace == false || options.stroke) &&\n\t\t\t\t/^(subtract|intersect)$/.test(operation))\n\t\t\treturn splitBoolean(path1, path2, operation);\n\t\tvar _path1 = preparePath(path1, true),\n\t\t\t_path2 = path2 && path1 !== path2 && preparePath(path2, true),\n\t\t\toperator = operators[operation];\n\t\toperator[operation] = true;\n\t\tif (_path2 && (operator.subtract || operator.exclude)\n\t\t\t\t^ (_path2.isClockwise() ^ _path1.isClockwise()))\n\t\t\t_path2.reverse();\n\t\tvar crossings = divideLocations(CurveLocation.expand(\n\t\t\t\t_path1.getIntersections(_path2, filterIntersection))),\n\t\t\tpaths1 = getPaths(_path1),\n\t\t\tpaths2 = _path2 && getPaths(_path2),\n\t\t\tsegments = [],\n\t\t\tcurves = [],\n\t\t\tpaths;\n\n\t\tfunction collectPaths(paths) {\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tBase.push(segments, path._segments);\n\t\t\t\tBase.push(curves, path.getCurves());\n\t\t\t\tpath._overlapsOnly = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCurves(indices) {\n\t\t\tvar list = [];\n\t\t\tfor (var i = 0, l = indices && indices.length; i < l; i++) {\n\t\t\t\tlist.push(curves[indices[i]]);\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\n\t\tif (crossings.length) {\n\t\t\tcollectPaths(paths1);\n\t\t\tif (paths2)\n\t\t\t\tcollectPaths(paths2);\n\n\t\t\tvar curvesValues = new Array(curves.length);\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tcurvesValues[i] = curves[i].getValues();\n\t\t\t}\n\t\t\tvar curveCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\t\tcurvesValues, curvesValues, 0, true);\n\t\t\tvar curveCollisionsMap = {};\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar curve = curves[i],\n\t\t\t\t\tid = curve._path._id,\n\t\t\t\t\tmap = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n\t\t\t\tmap[curve.getIndex()] = {\n\t\t\t\t\thor: getCurves(curveCollisions[i].hor),\n\t\t\t\t\tver: getCurves(curveCollisions[i].ver)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = crossings.length; i < l; i++) {\n\t\t\t\tpropagateWinding(crossings[i]._segment, _path1, _path2,\n\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t}\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar segment = segments[i],\n\t\t\t\t\tinter = segment._intersection;\n\t\t\t\tif (!segment._winding) {\n\t\t\t\t\tpropagateWinding(segment, _path1, _path2,\n\t\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t\t}\n\t\t\t\tif (!(inter && inter._overlap))\n\t\t\t\t\tsegment._path._overlapsOnly = false;\n\t\t\t}\n\t\t\tpaths = tracePaths(segments, operator);\n\t\t} else {\n\t\t\tpaths = reorientPaths(\n\t\t\t\t\tpaths2 ? paths1.concat(paths2) : paths1.slice(),\n\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\treturn !!operator[w];\n\t\t\t\t\t});\n\t\t}\n\t\treturn createResult(paths, true, path1, path2, options);\n\t}\n\n\tfunction splitBoolean(path1, path2, operation) {\n\t\tvar _path1 = preparePath(path1),\n\t\t\t_path2 = preparePath(path2),\n\t\t\tcrossings = _path1.getIntersections(_path2, filterIntersection),\n\t\t\tsubtract = operation === 'subtract',\n\t\t\tdivide = operation === 'divide',\n\t\t\tadded = {},\n\t\t\tpaths = [];\n\n\t\tfunction addPath(path) {\n\t\t\tif (!added[path._id] && (divide ||\n\t\t\t\t\t_path2.contains(path.getPointAt(path.getLength() / 2))\n\t\t\t\t\t\t^ subtract)) {\n\t\t\t\tpaths.unshift(path);\n\t\t\t\treturn added[path._id] = true;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = crossings.length - 1; i >= 0; i--) {\n\t\t\tvar path = crossings[i].split();\n\t\t\tif (path) {\n\t\t\t\tif (addPath(path))\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t_path1.getLastSegment().setHandleOut(0, 0);\n\t\t\t}\n\t\t}\n\t\taddPath(_path1);\n\t\treturn createResult(paths, false, path1, path2);\n\t}\n\n\tfunction linkIntersections(from, to) {\n\t\tvar prev = from;\n\t\twhile (prev) {\n\t\t\tif (prev === to)\n\t\t\t\treturn;\n\t\t\tprev = prev._previous;\n\t\t}\n\t\twhile (from._next && from._next !== to)\n\t\t\tfrom = from._next;\n\t\tif (!from._next) {\n\t\t\twhile (to._previous)\n\t\t\t\tto = to._previous;\n\t\t\tfrom._next = to;\n\t\t\tto._previous = from;\n\t\t}\n\t}\n\n\tfunction clearCurveHandles(curves) {\n\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\tcurves[i].clearHandles();\n\t}\n\n\tfunction reorientPaths(paths, isInside, clockwise) {\n\t\tvar length = paths && paths.length;\n\t\tif (length) {\n\t\t\tvar lookup = Base.each(paths, function (path, i) {\n\t\t\t\t\tthis[path._id] = {\n\t\t\t\t\t\tcontainer: null,\n\t\t\t\t\t\twinding: path.isClockwise() ? 1 : -1,\n\t\t\t\t\t\tindex: i\n\t\t\t\t\t};\n\t\t\t\t}, {}),\n\t\t\t\tsorted = paths.slice().sort(function (a, b) {\n\t\t\t\t\treturn abs(b.getArea()) - abs(a.getArea());\n\t\t\t\t}),\n\t\t\t\tfirst = sorted[0];\n\t\t\tvar collisions = CollisionDetection.findItemBoundsCollisions(sorted,\n\t\t\t\t\tnull, Numerical.GEOMETRIC_EPSILON);\n\t\t\tif (clockwise == null)\n\t\t\t\tclockwise = first.isClockwise();\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar path1 = sorted[i],\n\t\t\t\t\tentry1 = lookup[path1._id],\n\t\t\t\t\tcontainerWinding = 0,\n\t\t\t\t\tindices = collisions[i];\n\t\t\t\tif (indices) {\n\t\t\t\t\tvar point = null;\n\t\t\t\t\tfor (var j = indices.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tif (indices[j] < i) {\n\t\t\t\t\t\t\tpoint = point || path1.getInteriorPoint();\n\t\t\t\t\t\t\tvar path2 = sorted[indices[j]];\n\t\t\t\t\t\t\tif (path2.contains(point)) {\n\t\t\t\t\t\t\t\tvar entry2 = lookup[path2._id];\n\t\t\t\t\t\t\t\tcontainerWinding = entry2.winding;\n\t\t\t\t\t\t\t\tentry1.winding += containerWinding;\n\t\t\t\t\t\t\t\tentry1.container = entry2.exclude\n\t\t\t\t\t\t\t\t\t? entry2.container : path2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isInside(entry1.winding) === isInside(containerWinding)) {\n\t\t\t\t\tentry1.exclude = true;\n\t\t\t\t\tpaths[entry1.index] = null;\n\t\t\t\t} else {\n\t\t\t\t\tvar container = entry1.container;\n\t\t\t\t\tpath1.setClockwise(\n\t\t\t\t\t\t\tcontainer ? !container.isClockwise() : clockwise);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\tfunction divideLocations(locations, include, clearLater) {\n\t\tvar results = include && [],\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tclearHandles = false,\n\t\t\tclearCurves = clearLater || [],\n\t\t\tclearLookup = clearLater && {},\n\t\t\trenormalizeLocs,\n\t\t\tprevCurve,\n\t\t\tprevTime;\n\n\t\tfunction getId(curve) {\n\t\t\treturn curve._path._id + '.' + curve._segment1._index;\n\t\t}\n\n\t\tfor (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n\t\t\tvar curve = clearLater[i];\n\t\t\tif (curve._path)\n\t\t\t\tclearLookup[getId(curve)] = true;\n\t\t}\n\n\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\tvar loc = locations[i],\n\t\t\t\ttime = loc._time,\n\t\t\t\torigTime = time,\n\t\t\t\texclude = include && !include(loc),\n\t\t\t\tcurve = loc._curve,\n\t\t\t\tsegment;\n\t\t\tif (curve) {\n\t\t\t\tif (curve !== prevCurve) {\n\t\t\t\t\tclearHandles = !curve.hasHandles()\n\t\t\t\t\t\t\t|| clearLookup && clearLookup[getId(curve)];\n\t\t\t\t\trenormalizeLocs = [];\n\t\t\t\t\tprevTime = null;\n\t\t\t\t\tprevCurve = curve;\n\t\t\t\t} else if (prevTime >= tMin) {\n\t\t\t\t\ttime /= prevTime;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (exclude) {\n\t\t\t\tif (renormalizeLocs)\n\t\t\t\t\trenormalizeLocs.push(loc);\n\t\t\t\tcontinue;\n\t\t\t} else if (include) {\n\t\t\t\tresults.unshift(loc);\n\t\t\t}\n\t\t\tprevTime = origTime;\n\t\t\tif (time < tMin) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time > tMax) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else {\n\t\t\t\tvar newCurve = curve.divideAtTime(time, true);\n\t\t\t\tif (clearHandles)\n\t\t\t\t\tclearCurves.push(curve, newCurve);\n\t\t\t\tsegment = newCurve._segment1;\n\t\t\t\tfor (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n\t\t\t\t\tvar l = renormalizeLocs[j];\n\t\t\t\t\tl._time = (l._time - time) / (1 - time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tloc._setSegment(segment);\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tdest = loc._intersection;\n\t\t\tif (inter) {\n\t\t\t\tlinkIntersections(inter, dest);\n\t\t\t\tvar other = inter;\n\t\t\t\twhile (other) {\n\t\t\t\t\tlinkIntersections(other._intersection, inter);\n\t\t\t\t\tother = other._next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsegment._intersection = dest;\n\t\t\t}\n\t\t}\n\t\tif (!clearLater)\n\t\t\tclearCurveHandles(clearCurves);\n\t\treturn results || locations;\n\t}\n\n\tfunction getWinding(point, curves, dir, closed, dontFlip) {\n\t\tvar curvesList = Array.isArray(curves)\n\t\t\t? curves\n\t\t\t: curves[dir ? 'hor' : 'ver'];\n\t\tvar ia = dir ? 1 : 0,\n\t\t\tio = ia ^ 1,\n\t\t\tpv = [point.x, point.y],\n\t\t\tpa = pv[ia],\n\t\t\tpo = pv[io],\n\t\t\twindingEpsilon = 1e-9,\n\t\t\tqualityEpsilon = 1e-6,\n\t\t\tpaL = pa - windingEpsilon,\n\t\t\tpaR = pa + windingEpsilon,\n\t\t\twindingL = 0,\n\t\t\twindingR = 0,\n\t\t\tpathWindingL = 0,\n\t\t\tpathWindingR = 0,\n\t\t\tonPath = false,\n\t\t\tonAnyPath = false,\n\t\t\tquality = 1,\n\t\t\troots = [],\n\t\t\tvPrev,\n\t\t\tvClose;\n\n\t\tfunction addWinding(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po < min(o0, o3) || po > max(o0, o3)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar a0 = v[ia + 0],\n\t\t\t\ta1 = v[ia + 2],\n\t\t\t\ta2 = v[ia + 4],\n\t\t\t\ta3 = v[ia + 6];\n\t\t\tif (o0 === o3) {\n\t\t\t\tif (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar t =   po === o0 ? 0\n\t\t\t\t\t: po === o3 ? 1\n\t\t\t\t\t: paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3)\n\t\t\t\t\t? 1\n\t\t\t\t\t: Curve.solveCubic(v, io, po, roots, 0, 1) > 0\n\t\t\t\t\t\t? roots[0]\n\t\t\t\t\t\t: 1,\n\t\t\t\ta =   t === 0 ? a0\n\t\t\t\t\t: t === 1 ? a3\n\t\t\t\t\t: Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n\t\t\t\twinding = o0 > o3 ? 1 : -1,\n\t\t\t\twindingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n\t\t\t\ta3Prev = vPrev[ia + 6];\n\t\t\tif (po !== o0) {\n\t\t\t\tif (a < paL) {\n\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t} else if (a > paR) {\n\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t} else {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\tif (a > pa - qualityEpsilon && a < pa + qualityEpsilon)\n\t\t\t\t\tquality /= 2;\n\t\t\t} else {\n\t\t\t\tif (winding !== windingPrev) {\n\t\t\t\t\tif (a0 < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t} else if (a0 > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t}\n\t\t\t\t} else if (a0 != a3Prev) {\n\t\t\t\t\tif (a3Prev < paR && a > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t} else if (a3Prev > paL && a < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tquality /= 4;\n\t\t\t}\n\t\t\tvPrev = v;\n\t\t\treturn !dontFlip && a > paL && a < paR\n\t\t\t\t\t&& Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0\n\t\t\t\t\t&& getWinding(point, curves, !dir, closed, true);\n\t\t}\n\n\t\tfunction handleCurve(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to1 = v[io + 2],\n\t\t\t\to2 = v[io + 4],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n\t\t\t\tvar a0 = v[ia + 0],\n\t\t\t\t\ta1 = v[ia + 2],\n\t\t\t\t\ta2 = v[ia + 4],\n\t\t\t\t\ta3 = v[ia + 6],\n\t\t\t\t\tmonoCurves = paL > max(a0, a1, a2, a3) ||\n\t\t\t\t\t\t\t\t paR < min(a0, a1, a2, a3)\n\t\t\t\t\t\t\t? [v] : Curve.getMonoCurves(v, dir),\n\t\t\t\t\tres;\n\t\t\t\tfor (var i = 0, l = monoCurves.length; i < l; i++) {\n\t\t\t\t\tif (res = addWinding(monoCurves[i]))\n\t\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = curvesList.length; i < l; i++) {\n\t\t\tvar curve = curvesList[i],\n\t\t\t\tpath = curve._path,\n\t\t\t\tv = curve.getValues(),\n\t\t\t\tres;\n\t\t\tif (!i || curvesList[i - 1]._path !== path) {\n\t\t\t\tvPrev = null;\n\t\t\t\tif (!path._closed) {\n\t\t\t\t\tvClose = Curve.getValues(\n\t\t\t\t\t\t\tpath.getLastCurve().getSegment2(),\n\t\t\t\t\t\t\tcurve.getSegment1(),\n\t\t\t\t\t\t\tnull, !closed);\n\t\t\t\t\tif (vClose[io] !== vClose[io + 6]) {\n\t\t\t\t\t\tvPrev = vClose;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!vPrev) {\n\t\t\t\t\tvPrev = v;\n\t\t\t\t\tvar prev = path.getLastCurve();\n\t\t\t\t\twhile (prev && prev !== curve) {\n\t\t\t\t\t\tvar v2 = prev.getValues();\n\t\t\t\t\t\tif (v2[io] !== v2[io + 6]) {\n\t\t\t\t\t\t\tvPrev = v2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprev = prev.getPrevious();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (res = handleCurve(v))\n\t\t\t\treturn res;\n\n\t\t\tif (i + 1 === l || curvesList[i + 1]._path !== path) {\n\t\t\t\tif (vClose && (res = handleCurve(vClose)))\n\t\t\t\t\treturn res;\n\t\t\t\tif (onPath && !pathWindingL && !pathWindingR) {\n\t\t\t\t\tpathWindingL = pathWindingR = path.isClockwise(closed) ^ dir\n\t\t\t\t\t\t\t? 1 : -1;\n\t\t\t\t}\n\t\t\t\twindingL += pathWindingL;\n\t\t\t\twindingR += pathWindingR;\n\t\t\t\tpathWindingL = pathWindingR = 0;\n\t\t\t\tif (onPath) {\n\t\t\t\t\tonAnyPath = true;\n\t\t\t\t\tonPath = false;\n\t\t\t\t}\n\t\t\t\tvClose = null;\n\t\t\t}\n\t\t}\n\t\twindingL = abs(windingL);\n\t\twindingR = abs(windingR);\n\t\treturn {\n\t\t\twinding: max(windingL, windingR),\n\t\t\twindingL: windingL,\n\t\t\twindingR: windingR,\n\t\t\tquality: quality,\n\t\t\tonPath: onAnyPath\n\t\t};\n\t}\n\n\tfunction propagateWinding(segment, path1, path2, curveCollisionsMap,\n\t\t\toperator) {\n\t\tvar chain = [],\n\t\t\tstart = segment,\n\t\t\ttotalLength = 0,\n\t\t\twinding;\n\t\tdo {\n\t\t\tvar curve = segment.getCurve();\n\t\t\tif (curve) {\n\t\t\t\tvar length = curve.getLength();\n\t\t\t\tchain.push({ segment: segment, curve: curve, length: length });\n\t\t\t\ttotalLength += length;\n\t\t\t}\n\t\t\tsegment = segment.getNext();\n\t\t} while (segment && !segment._intersection && segment !== start);\n\t\tvar offsets = [0.5, 0.25, 0.75],\n\t\t\twinding = { winding: 0, quality: -1 },\n\t\t\ttMin = 1e-3,\n\t\t\ttMax = 1 - tMin;\n\t\tfor (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n\t\t\tvar length = totalLength * offsets[i];\n\t\t\tfor (var j = 0, l = chain.length; j < l; j++) {\n\t\t\t\tvar entry = chain[j],\n\t\t\t\t\tcurveLength = entry.length;\n\t\t\t\tif (length <= curveLength) {\n\t\t\t\t\tvar curve = entry.curve,\n\t\t\t\t\t\tpath = curve._path,\n\t\t\t\t\t\tparent = path._parent,\n\t\t\t\t\t\toperand = parent instanceof CompoundPath ? parent : path,\n\t\t\t\t\t\tt = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n\t\t\t\t\t\tpt = curve.getPointAtTime(t),\n\t\t\t\t\t\tdir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n\t\t\t\t\tvar wind = null;\n\t\t\t\t\tif (operator.subtract && path2) {\n\t\t\t\t\t\tvar otherPath = operand === path1 ? path2 : path1,\n\t\t\t\t\t\t\tpathWinding = otherPath._getWinding(pt, dir, true);\n\t\t\t\t\t\tif (operand === path1 && pathWinding.winding ||\n\t\t\t\t\t\t\toperand === path2 && !pathWinding.winding) {\n\t\t\t\t\t\t\tif (pathWinding.quality < 1) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twind = { winding: 0, quality: 1 };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twind =  wind || getWinding(\n\t\t\t\t\t\t\tpt, curveCollisionsMap[path._id][curve.getIndex()],\n\t\t\t\t\t\t\tdir, true);\n\t\t\t\t\tif (wind.quality > winding.quality)\n\t\t\t\t\t\twinding = wind;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlength -= curveLength;\n\t\t\t}\n\t\t}\n\t\tfor (var j = chain.length - 1; j >= 0; j--) {\n\t\t\tchain[j].segment._winding = winding;\n\t\t}\n\t}\n\n\tfunction tracePaths(segments, operator) {\n\t\tvar paths = [],\n\t\t\tstarts;\n\n\t\tfunction isValid(seg) {\n\t\t\tvar winding;\n\t\t\treturn !!(seg && !seg._visited && (!operator\n\t\t\t\t\t|| operator[(winding = seg._winding || {}).winding]\n\t\t\t\t\t\t&& !(operator.unite && winding.winding === 2\n\t\t\t\t\t\t\t&& winding.windingL && winding.windingR)));\n\t\t}\n\n\t\tfunction isStart(seg) {\n\t\t\tif (seg) {\n\t\t\t\tfor (var i = 0, l = starts.length; i < l; i++) {\n\t\t\t\t\tif (seg === starts[i])\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction visitPath(path) {\n\t\t\tvar segments = path._segments;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tsegments[i]._visited = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCrossingSegments(segment, collectStarts) {\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tstart = inter,\n\t\t\t\tcrossings = [];\n\t\t\tif (collectStarts)\n\t\t\t\tstarts = [segment];\n\n\t\t\tfunction collect(inter, end) {\n\t\t\t\twhile (inter && inter !== end) {\n\t\t\t\t\tvar other = inter._segment,\n\t\t\t\t\t\tpath = other && other._path;\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tvar next = other.getNext() || path.getFirstSegment(),\n\t\t\t\t\t\t\tnextInter = next._intersection;\n\t\t\t\t\t\tif (other !== segment && (isStart(other)\n\t\t\t\t\t\t\t|| isStart(next)\n\t\t\t\t\t\t\t|| next && (isValid(other) && (isValid(next)\n\t\t\t\t\t\t\t\t|| nextInter && isValid(nextInter._segment))))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcrossings.push(other);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (collectStarts)\n\t\t\t\t\t\t\tstarts.push(other);\n\t\t\t\t\t}\n\t\t\t\t\tinter = inter._next;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (inter) {\n\t\t\t\tcollect(inter);\n\t\t\t\twhile (inter && inter._previous)\n\t\t\t\t\tinter = inter._previous;\n\t\t\t\tcollect(inter, start);\n\t\t\t}\n\t\t\treturn crossings;\n\t\t}\n\n\t\tsegments.sort(function(seg1, seg2) {\n\t\t\tvar inter1 = seg1._intersection,\n\t\t\t\tinter2 = seg2._intersection,\n\t\t\t\tover1 = !!(inter1 && inter1._overlap),\n\t\t\t\tover2 = !!(inter2 && inter2._overlap),\n\t\t\t\tpath1 = seg1._path,\n\t\t\t\tpath2 = seg2._path;\n\t\t\treturn over1 ^ over2\n\t\t\t\t\t? over1 ? 1 : -1\n\t\t\t\t\t: !inter1 ^ !inter2\n\t\t\t\t\t\t? inter1 ? 1 : -1\n\t\t\t\t\t\t: path1 !== path2\n\t\t\t\t\t\t\t? path1._id - path2._id\n\t\t\t\t\t\t\t: seg1._index - seg2._index;\n\t\t});\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar seg = segments[i],\n\t\t\t\tvalid = isValid(seg),\n\t\t\t\tpath = null,\n\t\t\t\tfinished = false,\n\t\t\t\tclosed = true,\n\t\t\t\tbranches = [],\n\t\t\t\tbranch,\n\t\t\t\tvisited,\n\t\t\t\thandleIn;\n\t\t\tif (valid && seg._path._overlapsOnly) {\n\t\t\t\tvar path1 = seg._path,\n\t\t\t\t\tpath2 = seg._intersection._segment._path;\n\t\t\t\tif (path1.compare(path2)) {\n\t\t\t\t\tif (path1.getArea())\n\t\t\t\t\t\tpaths.push(path1.clone(false));\n\t\t\t\t\tvisitPath(path1);\n\t\t\t\t\tvisitPath(path2);\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (valid) {\n\t\t\t\tvar first = !path,\n\t\t\t\t\tcrossings = getCrossingSegments(seg, first),\n\t\t\t\t\tother = crossings.shift(),\n\t\t\t\t\tfinished = !first && (isStart(seg) || isStart(other)),\n\t\t\t\t\tcross = !finished && other;\n\t\t\t\tif (first) {\n\t\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (finished) {\n\t\t\t\t\tif (seg.isFirst() || seg.isLast())\n\t\t\t\t\t\tclosed = seg._path._closed;\n\t\t\t\t\tseg._visited = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (cross && branch) {\n\t\t\t\t\tbranches.push(branch);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (!branch) {\n\t\t\t\t\tif (cross)\n\t\t\t\t\t\tcrossings.push(seg);\n\t\t\t\t\tbranch = {\n\t\t\t\t\t\tstart: path._segments.length,\n\t\t\t\t\t\tcrossings: crossings,\n\t\t\t\t\t\tvisited: visited = [],\n\t\t\t\t\t\thandleIn: handleIn\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (cross)\n\t\t\t\t\tseg = other;\n\t\t\t\tif (!isValid(seg)) {\n\t\t\t\t\tpath.removeSegments(branch.start);\n\t\t\t\t\tfor (var j = 0, k = visited.length; j < k; j++) {\n\t\t\t\t\t\tvisited[j]._visited = false;\n\t\t\t\t\t}\n\t\t\t\t\tvisited.length = 0;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tseg = branch && branch.crossings.shift();\n\t\t\t\t\t\tif (!seg || !seg._path) {\n\t\t\t\t\t\t\tseg = null;\n\t\t\t\t\t\t\tbranch = branches.pop();\n\t\t\t\t\t\t\tif (branch) {\n\t\t\t\t\t\t\t\tvisited = branch.visited;\n\t\t\t\t\t\t\t\thandleIn = branch.handleIn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} while (branch && !isValid(seg));\n\t\t\t\t\tif (!seg)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar next = seg.getNext();\n\t\t\t\tpath.add(new Segment(seg._point, handleIn,\n\t\t\t\t\t\tnext && seg._handleOut));\n\t\t\t\tseg._visited = true;\n\t\t\t\tvisited.push(seg);\n\t\t\t\tseg = next || seg._path.getFirstSegment();\n\t\t\t\thandleIn = next && next._handleIn;\n\t\t\t}\n\t\t\tif (finished) {\n\t\t\t\tif (closed) {\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(handleIn);\n\t\t\t\t\tpath.setClosed(closed);\n\t\t\t\t}\n\t\t\t\tif (path.getArea() !== 0) {\n\t\t\t\t\tpaths.push(path);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\treturn {\n\t\t_getWinding: function(point, dir, closed) {\n\t\t\treturn getWinding(point, this.getCurves(), dir, closed);\n\t\t},\n\n\t\tunite: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'unite', options);\n\t\t},\n\n\t\tintersect: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'intersect', options);\n\t\t},\n\n\t\tsubtract: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'subtract', options);\n\t\t},\n\n\t\texclude: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'exclude', options);\n\t\t},\n\n\t\tdivide: function(path, options) {\n\t\t\treturn options && (options.trace == false || options.stroke)\n\t\t\t\t\t? splitBoolean(this, path, 'divide')\n\t\t\t\t\t: createResult([\n\t\t\t\t\t\tthis.subtract(path, options),\n\t\t\t\t\t\tthis.intersect(path, options)\n\t\t\t\t\t], true, this, path, options);\n\t\t},\n\n\t\tresolveCrossings: function() {\n\t\t\tvar children = this._children,\n\t\t\t\tpaths = children || [this];\n\n\t\t\tfunction hasOverlap(seg, path) {\n\t\t\t\tvar inter = seg && seg._intersection;\n\t\t\t\treturn inter && inter._overlap && inter._path === path;\n\t\t\t}\n\n\t\t\tvar hasOverlaps = false,\n\t\t\t\thasCrossings = false,\n\t\t\t\tintersections = this.getIntersections(null, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap() && (hasOverlaps = true) ||\n\t\t\t\t\t\t\tinter.isCrossing() && (hasCrossings = true);\n\t\t\t\t}),\n\t\t\t\tclearCurves = hasOverlaps && hasCrossings && [];\n\t\t\tintersections = CurveLocation.expand(intersections);\n\t\t\tif (hasOverlaps) {\n\t\t\t\tvar overlaps = divideLocations(intersections, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap();\n\t\t\t\t}, clearCurves);\n\t\t\t\tfor (var i = overlaps.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar overlap = overlaps[i],\n\t\t\t\t\t\tpath = overlap._path,\n\t\t\t\t\t\tseg = overlap._segment,\n\t\t\t\t\t\tprev = seg.getPrevious(),\n\t\t\t\t\t\tnext = seg.getNext();\n\t\t\t\t\tif (hasOverlap(prev, path) && hasOverlap(next, path)) {\n\t\t\t\t\t\tseg.remove();\n\t\t\t\t\t\tprev._handleOut._set(0, 0);\n\t\t\t\t\t\tnext._handleIn._set(0, 0);\n\t\t\t\t\t\tif (prev !== seg && !prev.getCurve().hasLength()) {\n\t\t\t\t\t\t\tnext._handleIn.set(prev._handleIn);\n\t\t\t\t\t\t\tprev.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasCrossings) {\n\t\t\t\tdivideLocations(intersections, hasOverlaps && function(inter) {\n\t\t\t\t\tvar curve1 = inter.getCurve(),\n\t\t\t\t\t\tseg1 = inter.getSegment(),\n\t\t\t\t\t\tother = inter._intersection,\n\t\t\t\t\t\tcurve2 = other._curve,\n\t\t\t\t\t\tseg2 = other._segment;\n\t\t\t\t\tif (curve1 && curve2 && curve1._path && curve2._path)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif (seg1)\n\t\t\t\t\t\tseg1._intersection = null;\n\t\t\t\t\tif (seg2)\n\t\t\t\t\t\tseg2._intersection = null;\n\t\t\t\t}, clearCurves);\n\t\t\t\tif (clearCurves)\n\t\t\t\t\tclearCurveHandles(clearCurves);\n\t\t\t\tpaths = tracePaths(Base.each(paths, function(path) {\n\t\t\t\t\tBase.push(this, path._segments);\n\t\t\t\t}, []));\n\t\t\t}\n\t\t\tvar length = paths.length,\n\t\t\t\titem;\n\t\t\tif (length > 1 && children) {\n\t\t\t\tif (paths !== children)\n\t\t\t\t\tthis.setChildren(paths);\n\t\t\t\titem = this;\n\t\t\t} else if (length === 1 && !children) {\n\t\t\t\tif (paths[0] !== this)\n\t\t\t\t\tthis.setSegments(paths[0].removeSegments());\n\t\t\t\titem = this;\n\t\t\t}\n\t\t\tif (!item) {\n\t\t\t\titem = new CompoundPath(Item.NO_INSERT);\n\t\t\t\titem.addChildren(paths);\n\t\t\t\titem = item.reduce();\n\t\t\t\titem.copyAttributes(this);\n\t\t\t\tthis.replaceWith(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\n\t\treorient: function(nonZero, clockwise) {\n\t\t\tvar children = this._children;\n\t\t\tif (children && children.length) {\n\t\t\t\tthis.setChildren(reorientPaths(this.removeChildren(),\n\t\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\t\treturn !!(nonZero ? w : w & 1);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclockwise));\n\t\t\t} else if (clockwise !== undefined) {\n\t\t\t\tthis.setClockwise(clockwise);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tgetInteriorPoint: function() {\n\t\t\tvar bounds = this.getBounds(),\n\t\t\t\tpoint = bounds.getCenter(true);\n\t\t\tif (!this.contains(point)) {\n\t\t\t\tvar curves = this.getCurves(),\n\t\t\t\t\ty = point.y,\n\t\t\t\t\tintercepts = [],\n\t\t\t\t\troots = [];\n\t\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\t\tvar v = curves[i].getValues(),\n\t\t\t\t\t\to0 = v[1],\n\t\t\t\t\t\to1 = v[3],\n\t\t\t\t\t\to2 = v[5],\n\t\t\t\t\t\to3 = v[7];\n\t\t\t\t\tif (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n\t\t\t\t\t\tvar monoCurves = Curve.getMonoCurves(v);\n\t\t\t\t\t\tfor (var j = 0, m = monoCurves.length; j < m; j++) {\n\t\t\t\t\t\t\tvar mv = monoCurves[j],\n\t\t\t\t\t\t\t\tmo0 = mv[1],\n\t\t\t\t\t\t\t\tmo3 = mv[7];\n\t\t\t\t\t\t\tif ((mo0 !== mo3) &&\n\t\t\t\t\t\t\t\t(y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)){\n\t\t\t\t\t\t\t\tvar x = y === mo0 ? mv[0]\n\t\t\t\t\t\t\t\t\t: y === mo3 ? mv[6]\n\t\t\t\t\t\t\t\t\t: Curve.solveCubic(mv, 1, y, roots, 0, 1)\n\t\t\t\t\t\t\t\t\t\t=== 1\n\t\t\t\t\t\t\t\t\t\t? Curve.getPoint(mv, roots[0]).x\n\t\t\t\t\t\t\t\t\t\t: (mv[0] + mv[6]) / 2;\n\t\t\t\t\t\t\t\tintercepts.push(x);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (intercepts.length > 1) {\n\t\t\t\t\tintercepts.sort(function(a, b) { return a - b; });\n\t\t\t\t\tpoint.x = (intercepts[0] + intercepts[1]) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn point;\n\t\t}\n\t};\n});\n\nvar PathFlattener = Base.extend({\n\t_class: 'PathFlattener',\n\n\tinitialize: function(path, flatness, maxRecursion, ignoreStraight, matrix) {\n\t\tvar curves = [],\n\t\t\tparts = [],\n\t\t\tlength = 0,\n\t\t\tminSpan = 1 / (maxRecursion || 32),\n\t\t\tsegments = path._segments,\n\t\t\tsegment1 = segments[0],\n\t\t\tsegment2;\n\n\t\tfunction addCurve(segment1, segment2) {\n\t\t\tvar curve = Curve.getValues(segment1, segment2, matrix);\n\t\t\tcurves.push(curve);\n\t\t\tcomputeParts(curve, segment1._index, 0, 1);\n\t\t}\n\n\t\tfunction computeParts(curve, index, t1, t2) {\n\t\t\tif ((t2 - t1) > minSpan\n\t\t\t\t\t&& !(ignoreStraight && Curve.isStraight(curve))\n\t\t\t\t\t&& !Curve.isFlatEnough(curve, flatness || 0.25)) {\n\t\t\t\tvar halves = Curve.subdivide(curve, 0.5),\n\t\t\t\t\ttMid = (t1 + t2) / 2;\n\t\t\t\tcomputeParts(halves[0], index, t1, tMid);\n\t\t\t\tcomputeParts(halves[1], index, tMid, t2);\n\t\t\t} else {\n\t\t\t\tvar dx = curve[6] - curve[0],\n\t\t\t\t\tdy = curve[7] - curve[1],\n\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tif (dist > 0) {\n\t\t\t\t\tlength += dist;\n\t\t\t\t\tparts.push({\n\t\t\t\t\t\toffset: length,\n\t\t\t\t\t\tcurve: curve,\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\ttime: t2,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++) {\n\t\t\tsegment2 = segments[i];\n\t\t\taddCurve(segment1, segment2);\n\t\t\tsegment1 = segment2;\n\t\t}\n\t\tif (path._closed)\n\t\t\taddCurve(segment2 || segment1, segments[0]);\n\t\tthis.curves = curves;\n\t\tthis.parts = parts;\n\t\tthis.length = length;\n\t\tthis.index = 0;\n\t},\n\n\t_get: function(offset) {\n\t\tvar parts = this.parts,\n\t\t\tlength = parts.length,\n\t\t\tstart,\n\t\t\ti, j = this.index;\n\t\tfor (;;) {\n\t\t\ti = j;\n\t\t\tif (!j || parts[--j].offset < offset)\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (; i < length; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tif (part.offset >= offset) {\n\t\t\t\tthis.index = i;\n\t\t\t\tvar prev = parts[i - 1],\n\t\t\t\t\tprevTime = prev && prev.index === part.index ? prev.time : 0,\n\t\t\t\t\tprevOffset = prev ? prev.offset : 0;\n\t\t\t\treturn {\n\t\t\t\t\tindex: part.index,\n\t\t\t\t\ttime: prevTime + (part.time - prevTime)\n\t\t\t\t\t\t* (offset - prevOffset) / (part.offset - prevOffset)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tindex: parts[length - 1].index,\n\t\t\ttime: 1\n\t\t};\n\t},\n\n\tdrawPart: function(ctx, from, to) {\n\t\tvar start = this._get(from),\n\t\t\tend = this._get(to);\n\t\tfor (var i = start.index, l = end.index; i <= l; i++) {\n\t\t\tvar curve = Curve.getPart(this.curves[i],\n\t\t\t\t\ti === start.index ? start.time : 0,\n\t\t\t\t\ti === end.index ? end.time : 1);\n\t\t\tif (i === start.index)\n\t\t\t\tctx.moveTo(curve[0], curve[1]);\n\t\t\tctx.bezierCurveTo.apply(ctx, curve.slice(2));\n\t\t}\n\t}\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar param = this._get(offset);\n\t\t\treturn Curve[name](this.curves[param.index], param.time);\n\t\t};\n\t}, {})\n);\n\nvar PathFitter = Base.extend({\n\tinitialize: function(path) {\n\t\tvar points = this.points = [],\n\t\t\tsegments = path._segments,\n\t\t\tclosed = path._closed;\n\t\tfor (var i = 0, prev, l = segments.length; i < l; i++) {\n\t\t\tvar point = segments[i].point;\n\t\t\tif (!prev || !prev.equals(point)) {\n\t\t\t\tpoints.push(prev = point.clone());\n\t\t\t}\n\t\t}\n\t\tif (closed) {\n\t\t\tpoints.unshift(points[points.length - 1]);\n\t\t\tpoints.push(points[1]);\n\t\t}\n\t\tthis.closed = closed;\n\t},\n\n\tfit: function(error) {\n\t\tvar points = this.points,\n\t\t\tlength = points.length,\n\t\t\tsegments = null;\n\t\tif (length > 0) {\n\t\t\tsegments = [new Segment(points[0])];\n\t\t\tif (length > 1) {\n\t\t\t\tthis.fitCubic(segments, error, 0, length - 1,\n\t\t\t\t\t\tpoints[1].subtract(points[0]),\n\t\t\t\t\t\tpoints[length - 2].subtract(points[length - 1]));\n\t\t\t\tif (this.closed) {\n\t\t\t\t\tsegments.shift();\n\t\t\t\t\tsegments.pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn segments;\n\t},\n\n\tfitCubic: function(segments, error, first, last, tan1, tan2) {\n\t\tvar points = this.points;\n\t\tif (last - first === 1) {\n\t\t\tvar pt1 = points[first],\n\t\t\t\tpt2 = points[last],\n\t\t\t\tdist = pt1.getDistance(pt2) / 3;\n\t\t\tthis.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)),\n\t\t\t\t\tpt2.add(tan2.normalize(dist)), pt2]);\n\t\t\treturn;\n\t\t}\n\t\tvar uPrime = this.chordLengthParameterize(first, last),\n\t\t\tmaxError = Math.max(error, error * error),\n\t\t\tsplit,\n\t\t\tparametersInOrder = true;\n\t\tfor (var i = 0; i <= 4; i++) {\n\t\t\tvar curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n\t\t\tvar max = this.findMaxError(first, last, curve, uPrime);\n\t\t\tif (max.error < error && parametersInOrder) {\n\t\t\t\tthis.addCurve(segments, curve);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsplit = max.index;\n\t\t\tif (max.error >= maxError)\n\t\t\t\tbreak;\n\t\t\tparametersInOrder = this.reparameterize(first, last, uPrime, curve);\n\t\t\tmaxError = max.error;\n\t\t}\n\t\tvar tanCenter = points[split - 1].subtract(points[split + 1]);\n\t\tthis.fitCubic(segments, error, first, split, tan1, tanCenter);\n\t\tthis.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n\t},\n\n\taddCurve: function(segments, curve) {\n\t\tvar prev = segments[segments.length - 1];\n\t\tprev.setHandleOut(curve[1].subtract(curve[0]));\n\t\tsegments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n\t},\n\n\tgenerateBezier: function(first, last, uPrime, tan1, tan2) {\n\t\tvar epsilon = 1e-12,\n\t\t\tabs = Math.abs,\n\t\t\tpoints = this.points,\n\t\t\tpt1 = points[first],\n\t\t\tpt2 = points[last],\n\t\t\tC = [[0, 0], [0, 0]],\n\t\t\tX = [0, 0];\n\n\t\tfor (var i = 0, l = last - first + 1; i < l; i++) {\n\t\t\tvar u = uPrime[i],\n\t\t\t\tt = 1 - u,\n\t\t\t\tb = 3 * u * t,\n\t\t\t\tb0 = t * t * t,\n\t\t\t\tb1 = b * t,\n\t\t\t\tb2 = b * u,\n\t\t\t\tb3 = u * u * u,\n\t\t\t\ta1 = tan1.normalize(b1),\n\t\t\t\ta2 = tan2.normalize(b2),\n\t\t\t\ttmp = points[first + i]\n\t\t\t\t\t.subtract(pt1.multiply(b0 + b1))\n\t\t\t\t\t.subtract(pt2.multiply(b2 + b3));\n\t\t\tC[0][0] += a1.dot(a1);\n\t\t\tC[0][1] += a1.dot(a2);\n\t\t\tC[1][0] = C[0][1];\n\t\t\tC[1][1] += a2.dot(a2);\n\t\t\tX[0] += a1.dot(tmp);\n\t\t\tX[1] += a2.dot(tmp);\n\t\t}\n\n\t\tvar detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n\t\t\talpha1,\n\t\t\talpha2;\n\t\tif (abs(detC0C1) > epsilon) {\n\t\t\tvar detC0X = C[0][0] * X[1]    - C[1][0] * X[0],\n\t\t\t\tdetXC1 = X[0]    * C[1][1] - X[1]    * C[0][1];\n\t\t\talpha1 = detXC1 / detC0C1;\n\t\t\talpha2 = detC0X / detC0C1;\n\t\t} else {\n\t\t\tvar c0 = C[0][0] + C[0][1],\n\t\t\t\tc1 = C[1][0] + C[1][1];\n\t\t\talpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0\n\t\t\t\t\t\t\t: abs(c1) > epsilon ? X[1] / c1\n\t\t\t\t\t\t\t: 0;\n\t\t}\n\n\t\tvar segLength = pt2.getDistance(pt1),\n\t\t\teps = epsilon * segLength,\n\t\t\thandle1,\n\t\t\thandle2;\n\t\tif (alpha1 < eps || alpha2 < eps) {\n\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t} else {\n\t\t\tvar line = pt2.subtract(pt1);\n\t\t\thandle1 = tan1.normalize(alpha1);\n\t\t\thandle2 = tan2.normalize(alpha2);\n\t\t\tif (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n\t\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t\t\thandle1 = handle2 = null;\n\t\t\t}\n\t\t}\n\n\t\treturn [pt1,\n\t\t\t\tpt1.add(handle1 || tan1.normalize(alpha1)),\n\t\t\t\tpt2.add(handle2 || tan2.normalize(alpha2)),\n\t\t\t\tpt2];\n\t},\n\n\treparameterize: function(first, last, u, curve) {\n\t\tfor (var i = first; i <= last; i++) {\n\t\t\tu[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n\t\t}\n\t\tfor (var i = 1, l = u.length; i < l; i++) {\n\t\t\tif (u[i] <= u[i - 1])\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tfindRoot: function(curve, point, u) {\n\t\tvar curve1 = [],\n\t\t\tcurve2 = [];\n\t\tfor (var i = 0; i <= 2; i++) {\n\t\t\tcurve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n\t\t}\n\t\tfor (var i = 0; i <= 1; i++) {\n\t\t\tcurve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n\t\t}\n\t\tvar pt = this.evaluate(3, curve, u),\n\t\t\tpt1 = this.evaluate(2, curve1, u),\n\t\t\tpt2 = this.evaluate(1, curve2, u),\n\t\t\tdiff = pt.subtract(point),\n\t\t\tdf = pt1.dot(pt1) + diff.dot(pt2);\n\t\treturn Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n\t},\n\n\tevaluate: function(degree, curve, t) {\n\t\tvar tmp = curve.slice();\n\t\tfor (var i = 1; i <= degree; i++) {\n\t\t\tfor (var j = 0; j <= degree - i; j++) {\n\t\t\t\ttmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n\t\t\t}\n\t\t}\n\t\treturn tmp[0];\n\t},\n\n\tchordLengthParameterize: function(first, last) {\n\t\tvar u = [0];\n\t\tfor (var i = first + 1; i <= last; i++) {\n\t\t\tu[i - first] = u[i - first - 1]\n\t\t\t\t\t+ this.points[i].getDistance(this.points[i - 1]);\n\t\t}\n\t\tfor (var i = 1, m = last - first; i <= m; i++) {\n\t\t\tu[i] /= u[m];\n\t\t}\n\t\treturn u;\n\t},\n\n\tfindMaxError: function(first, last, curve, u) {\n\t\tvar index = Math.floor((last - first + 1) / 2),\n\t\t\tmaxDist = 0;\n\t\tfor (var i = first + 1; i < last; i++) {\n\t\t\tvar P = this.evaluate(3, curve, u[i - first]);\n\t\t\tvar v = P.subtract(this.points[i]);\n\t\t\tvar dist = v.x * v.x + v.y * v.y;\n\t\t\tif (dist >= maxDist) {\n\t\t\t\tmaxDist = dist;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\terror: maxDist,\n\t\t\tindex: index\n\t\t};\n\t}\n});\n\nvar TextItem = Item.extend({\n\t_class: 'TextItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_serializeFields: {\n\t\tcontent: null\n\t},\n\t_boundsOptions: { stroke: false, handle: false },\n\n\tinitialize: function TextItem(arg) {\n\t\tthis._content = '';\n\t\tthis._lines = [];\n\t\tvar hasProps = arg && Base.isPlainObject(arg)\n\t\t\t\t&& arg.x === undefined && arg.y === undefined;\n\t\tthis._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._content === item._content;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setContent(source._content);\n\t},\n\n\tgetContent: function() {\n\t\treturn this._content;\n\t},\n\n\tsetContent: function(content) {\n\t\tthis._content = '' + content;\n\t\tthis._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\t\tthis._changed(521);\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._content;\n\t},\n\n\tgetCharacterStyle: '#getStyle',\n\tsetCharacterStyle: '#setStyle',\n\n\tgetParagraphStyle: '#getStyle',\n\tsetParagraphStyle: '#setStyle'\n});\n\nvar PointText = TextItem.extend({\n\t_class: 'PointText',\n\n\tinitialize: function PointText() {\n\t\tTextItem.apply(this, arguments);\n\t},\n\n\tgetPoint: function() {\n\t\tvar point = this._matrix.getTranslation();\n\t\treturn new LinkedPoint(point.x, point.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.translate(point.subtract(this._matrix.getTranslation()));\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tif (!this._content)\n\t\t\treturn;\n\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\tvar lines = this._lines,\n\t\t\tstyle = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tleading = style.getLeading(),\n\t\t\tshadowColor = ctx.shadowColor;\n\t\tctx.font = style.getFontStyle();\n\t\tctx.textAlign = style.getJustification();\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\t\t\tctx.shadowColor = shadowColor;\n\t\t\tvar line = lines[i];\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fillText(line, 0, 0);\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.strokeText(line, 0, 0);\n\t\t\tctx.translate(0, leading);\n\t\t}\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar style = this._style,\n\t\t\tlines = this._lines,\n\t\t\tnumLines = lines.length,\n\t\t\tjustification = style.getJustification(),\n\t\t\tleading = style.getLeading(),\n\t\t\twidth = this.getView().getTextWidth(style.getFontStyle(), lines),\n\t\t\tx = 0;\n\t\tif (justification !== 'left')\n\t\t\tx -= width / (justification === 'center' ? 2: 1);\n\t\tvar rect = new Rectangle(x,\n\t\t\t\t\tnumLines ? - 0.75 * leading : 0,\n\t\t\t\t\twidth, numLines * leading);\n\t\treturn matrix ? matrix._transformBounds(rect, rect) : rect;\n\t}\n});\n\nvar Color = Base.extend(new function() {\n\tvar types = {\n\t\tgray: ['gray'],\n\t\trgb: ['red', 'green', 'blue'],\n\t\thsb: ['hue', 'saturation', 'brightness'],\n\t\thsl: ['hue', 'saturation', 'lightness'],\n\t\tgradient: ['gradient', 'origin', 'destination', 'highlight']\n\t};\n\n\tvar componentParsers = {},\n\t\tnamedColors = {\n\t\t\ttransparent: [0, 0, 0, 0]\n\t\t},\n\t\tcolorCtx;\n\n\tfunction fromCSS(string) {\n\t\tvar match = string.match(\n\t\t\t\t/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i\n\t\t\t) || string.match(\n\t\t\t\t/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i\n\t\t\t),\n\t\t\ttype = 'rgb',\n\t\t\tcomponents;\n\t\tif (match) {\n\t\t\tvar amount = match[4] ? 4 : 3;\n\t\t\tcomponents = new Array(amount);\n\t\t\tfor (var i = 0; i < amount; i++) {\n\t\t\t\tvar value = match[i + 1];\n\t\t\t\tcomponents[i] = parseInt(value.length == 1\n\t\t\t\t\t\t? value + value : value, 16) / 255;\n\t\t\t}\n\t\t} else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n\t\t\ttype = match[1];\n\t\t\tcomponents = match[2].trim().split(/[,\\s]+/g);\n\t\t\tvar isHSL = type === 'hsl';\n\t\t\tfor (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n\t\t\t\tvar component = components[i];\n\t\t\t\tvar value = parseFloat(component);\n\t\t\t\tif (isHSL) {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tvar unit = component.match(/([a-z]*)$/)[1];\n\t\t\t\t\t\tvalue *= ({\n\t\t\t\t\t\t\tturn: 360,\n\t\t\t\t\t\t\trad: 180 / Math.PI,\n\t\t\t\t\t\t\tgrad: 0.9\n\t\t\t\t\t\t}[unit] || 1);\n\t\t\t\t\t} else if (i < 3) {\n\t\t\t\t\t\tvalue /= 100;\n\t\t\t\t\t}\n\t\t\t\t} else if (i < 3) {\n\t\t\t\t\tvalue /= /%$/.test(component) ? 100 : 255;\n\t\t\t\t}\n\t\t\t\tcomponents[i] = value;\n\t\t\t}\n\t\t} else {\n\t\t\tvar color = namedColors[string];\n\t\t\tif (!color) {\n\t\t\t\tif (window) {\n\t\t\t\t\tif (!colorCtx) {\n\t\t\t\t\t\tcolorCtx = CanvasProvider.getContext(1, 1, {\n\t\t\t\t\t\t\twillReadFrequently: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcolorCtx.globalCompositeOperation = 'copy';\n\t\t\t\t\t}\n\t\t\t\t\tcolorCtx.fillStyle = 'rgba(0,0,0,0)';\n\t\t\t\t\tcolorCtx.fillStyle = string;\n\t\t\t\t\tcolorCtx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tvar data = colorCtx.getImageData(0, 0, 1, 1).data;\n\t\t\t\t\tcolor = namedColors[string] = [\n\t\t\t\t\t\tdata[0] / 255,\n\t\t\t\t\t\tdata[1] / 255,\n\t\t\t\t\t\tdata[2] / 255\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcolor = [0, 0, 0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents = color.slice();\n\t\t}\n\t\treturn [type, components];\n\t}\n\n\tvar hsbIndices = [\n\t\t[0, 3, 1],\n\t\t[2, 0, 1],\n\t\t[1, 0, 3],\n\t\t[1, 2, 0],\n\t\t[3, 1, 0],\n\t\t[0, 1, 2]\n\t];\n\n\tvar converters = {\n\t\t'rgb-hsb': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\th = delta === 0 ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60;\n\t\t\treturn [h, max === 0 ? 0 : delta / max, max];\n\t\t},\n\n\t\t'hsb-rgb': function(h, s, b) {\n\t\t\th = (((h / 60) % 6) + 6) % 6;\n\t\t\tvar i = Math.floor(h),\n\t\t\t\tf = h - i,\n\t\t\t\ti = hsbIndices[i],\n\t\t\t\tv = [\n\t\t\t\t\tb,\n\t\t\t\t\tb * (1 - s),\n\t\t\t\t\tb * (1 - s * f),\n\t\t\t\t\tb * (1 - s * (1 - f))\n\t\t\t\t];\n\t\t\treturn [v[i[0]], v[i[1]], v[i[2]]];\n\t\t},\n\n\t\t'rgb-hsl': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\tachromatic = delta === 0,\n\t\t\t\th = achromatic ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60,\n\t\t\t\tl = (max + min) / 2,\n\t\t\t\ts = achromatic ? 0 : l < 0.5\n\t\t\t\t\t\t? delta / (max + min)\n\t\t\t\t\t\t: delta / (2 - max - min);\n\t\t\treturn [h, s, l];\n\t\t},\n\n\t\t'hsl-rgb': function(h, s, l) {\n\t\t\th = (((h / 360) % 1) + 1) % 1;\n\t\t\tif (s === 0)\n\t\t\t\treturn [l, l, l];\n\t\t\tvar t3s = [ h + 1 / 3, h, h - 1 / 3 ],\n\t\t\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n\t\t\t\tt1 = 2 * l - t2,\n\t\t\t\tc = [];\n\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\tvar t3 = t3s[i];\n\t\t\t\tif (t3 < 0) t3 += 1;\n\t\t\t\tif (t3 > 1) t3 -= 1;\n\t\t\t\tc[i] = 6 * t3 < 1\n\t\t\t\t\t? t1 + (t2 - t1) * 6 * t3\n\t\t\t\t\t: 2 * t3 < 1\n\t\t\t\t\t\t? t2\n\t\t\t\t\t\t: 3 * t3 < 2\n\t\t\t\t\t\t\t? t1 + (t2 - t1) * ((2 / 3) - t3) * 6\n\t\t\t\t\t\t\t: t1;\n\t\t\t}\n\t\t\treturn c;\n\t\t},\n\n\t\t'rgb-gray': function(r, g, b) {\n\t\t\treturn [r * 0.2989 + g * 0.587 + b * 0.114];\n\t\t},\n\n\t\t'gray-rgb': function(g) {\n\t\t\treturn [g, g, g];\n\t\t},\n\n\t\t'gray-hsb': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gray-hsl': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gradient-rgb': function() {\n\t\t\treturn [];\n\t\t},\n\n\t\t'rgb-gradient': function() {\n\t\t\treturn [];\n\t\t}\n\n\t};\n\n\treturn Base.each(types, function(properties, type) {\n\t\tcomponentParsers[type] = [];\n\t\tBase.each(properties, function(name, index) {\n\t\t\tvar part = Base.capitalize(name),\n\t\t\t\thasOverlap = /^(hue|saturation)$/.test(name),\n\t\t\t\tparser = componentParsers[type][index] = type === 'gradient'\n\t\t\t\t\t? name === 'gradient'\n\t\t\t\t\t\t? function(value) {\n\t\t\t\t\t\t\tvar current = this._components[0];\n\t\t\t\t\t\t\tvalue = Gradient.read(\n\t\t\t\t\t\t\t\tArray.isArray(value)\n\t\t\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t\t\t: arguments, 0, { readNull: true }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (current !== value) {\n\t\t\t\t\t\t\t\tif (current)\n\t\t\t\t\t\t\t\t\tcurrent._removeOwner(this);\n\t\t\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t\t\t\tvalue._addOwner(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: function() {\n\t\t\t\t\t\t\treturn Point.read(arguments, 0, {\n\t\t\t\t\t\t\t\t\treadNull: name === 'highlight',\n\t\t\t\t\t\t\t\t\tclone: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t: function(value) {\n\t\t\t\t\t\treturn value == null || isNaN(value) ? 0 : +value;\n\t\t\t\t\t};\n\t\t\tthis['get' + part] = function() {\n\t\t\t\treturn this._type === type\n\t\t\t\t\t|| hasOverlap && /^hs[bl]$/.test(this._type)\n\t\t\t\t\t\t? this._components[index]\n\t\t\t\t\t\t: this._convert(type)[index];\n\t\t\t};\n\n\t\t\tthis['set' + part] = function(value) {\n\t\t\t\tif (this._type !== type\n\t\t\t\t\t\t&& !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n\t\t\t\t\tthis._components = this._convert(type);\n\t\t\t\t\tthis._properties = types[type];\n\t\t\t\t\tthis._type = type;\n\t\t\t\t}\n\t\t\t\tthis._components[index] = parser.call(this, value);\n\t\t\t\tthis._changed();\n\t\t\t};\n\t\t}, this);\n\t}, {\n\t\t_class: 'Color',\n\t\t_readIndex: true,\n\n\t\tinitialize: function Color(arg) {\n\t\t\tvar args = arguments,\n\t\t\t\treading = this.__read,\n\t\t\t\tread = 0,\n\t\t\t\ttype,\n\t\t\t\tcomponents,\n\t\t\t\talpha,\n\t\t\t\tvalues;\n\t\t\tif (Array.isArray(arg)) {\n\t\t\t\targs = arg;\n\t\t\t\targ = args[0];\n\t\t\t}\n\t\t\tvar argType = arg != null && typeof arg;\n\t\t\tif (argType === 'string' && arg in types) {\n\t\t\t\ttype = arg;\n\t\t\t\targ = args[1];\n\t\t\t\tif (Array.isArray(arg)) {\n\t\t\t\t\tcomponents = arg;\n\t\t\t\t\talpha = args[2];\n\t\t\t\t} else {\n\t\t\t\t\tif (reading)\n\t\t\t\t\t\tread = 1;\n\t\t\t\t\targs = Base.slice(args, 1);\n\t\t\t\t\targType = typeof arg;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!components) {\n\t\t\t\tvalues = argType === 'number'\n\t\t\t\t\t\t? args\n\t\t\t\t\t\t: argType === 'object' && arg.length != null\n\t\t\t\t\t\t\t? arg\n\t\t\t\t\t\t\t: null;\n\t\t\t\tif (values) {\n\t\t\t\t\tif (!type)\n\t\t\t\t\t\ttype = values.length >= 3\n\t\t\t\t\t\t\t\t? 'rgb'\n\t\t\t\t\t\t\t\t: 'gray';\n\t\t\t\t\tvar length = types[type].length;\n\t\t\t\t\talpha = values[length];\n\t\t\t\t\tif (reading) {\n\t\t\t\t\t\tread += values === arguments\n\t\t\t\t\t\t\t? length + (alpha != null ? 1 : 0)\n\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (values.length > length)\n\t\t\t\t\t\tvalues = Base.slice(values, 0, length);\n\t\t\t\t} else if (argType === 'string') {\n\t\t\t\t\tvar converted = fromCSS(arg);\n\t\t\t\t\ttype = converted[0];\n\t\t\t\t\tcomponents = converted[1];\n\t\t\t\t\tif (components.length === 4) {\n\t\t\t\t\t\talpha = components[3];\n\t\t\t\t\t\tcomponents.length--;\n\t\t\t\t\t}\n\t\t\t\t} else if (argType === 'object') {\n\t\t\t\t\tif (arg.constructor === Color) {\n\t\t\t\t\t\ttype = arg._type;\n\t\t\t\t\t\tcomponents = arg._components.slice();\n\t\t\t\t\t\talpha = arg._alpha;\n\t\t\t\t\t\tif (type === 'gradient') {\n\t\t\t\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\t\t\t\tvar point = components[i];\n\t\t\t\t\t\t\t\tif (point)\n\t\t\t\t\t\t\t\t\tcomponents[i] = point.clone();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (arg.constructor === Gradient) {\n\t\t\t\t\t\ttype = 'gradient';\n\t\t\t\t\t\tvalues = args;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = 'hue' in arg\n\t\t\t\t\t\t\t? 'lightness' in arg\n\t\t\t\t\t\t\t\t? 'hsl'\n\t\t\t\t\t\t\t\t: 'hsb'\n\t\t\t\t\t\t\t: 'gradient' in arg || 'stops' in arg\n\t\t\t\t\t\t\t\t\t|| 'radial' in arg\n\t\t\t\t\t\t\t\t? 'gradient'\n\t\t\t\t\t\t\t\t: 'gray' in arg\n\t\t\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t\t\t: 'rgb';\n\t\t\t\t\t\tvar properties = types[type],\n\t\t\t\t\t\t\tparsers = componentParsers[type];\n\t\t\t\t\t\tthis._components = components = [];\n\t\t\t\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\t\t\t\tvar value = arg[properties[i]];\n\t\t\t\t\t\t\tif (value == null && !i && type === 'gradient'\n\t\t\t\t\t\t\t\t\t&& 'stops' in arg) {\n\t\t\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\t\t\tstops: arg.stops,\n\t\t\t\t\t\t\t\t\tradial: arg.radial\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = parsers[i].call(this, value);\n\t\t\t\t\t\t\tif (value != null)\n\t\t\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\talpha = arg.alpha;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (reading && type)\n\t\t\t\t\tread = 1;\n\t\t\t}\n\t\t\tthis._type = type || 'rgb';\n\t\t\tif (!components) {\n\t\t\t\tthis._components = components = [];\n\t\t\t\tvar parsers = componentParsers[this._type];\n\t\t\t\tfor (var i = 0, l = parsers.length; i < l; i++) {\n\t\t\t\t\tvar value = parsers[i].call(this, values && values[i]);\n\t\t\t\t\tif (value != null)\n\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._components = components;\n\t\t\tthis._properties = types[this._type];\n\t\t\tthis._alpha = alpha;\n\t\t\tif (reading)\n\t\t\t\tthis.__read = read;\n\t\t\treturn this;\n\t\t},\n\n\t\tset: '#initialize',\n\n\t\t_serialize: function(options, dictionary) {\n\t\t\tvar components = this.getComponents();\n\t\t\treturn Base.serialize(\n\t\t\t\t\t/^(gray|rgb)$/.test(this._type)\n\t\t\t\t\t\t? components\n\t\t\t\t\t\t: [this._type].concat(components),\n\t\t\t\t\toptions, true, dictionary);\n\t\t},\n\n\t\t_changed: function() {\n\t\t\tthis._canvasStyle = null;\n\t\t\tif (this._owner) {\n\t\t\t\tif (this._setter) {\n\t\t\t\t\tthis._owner[this._setter](this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._owner._changed(129);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_convert: function(type) {\n\t\t\tvar converter;\n\t\t\treturn this._type === type\n\t\t\t\t\t? this._components.slice()\n\t\t\t\t\t: (converter = converters[this._type + '-' + type])\n\t\t\t\t\t\t? converter.apply(this, this._components)\n\t\t\t\t\t\t: converters['rgb-' + type].apply(this,\n\t\t\t\t\t\t\tconverters[this._type + '-rgb'].apply(this,\n\t\t\t\t\t\t\t\tthis._components));\n\t\t},\n\n\t\tconvert: function(type) {\n\t\t\treturn new Color(type, this._convert(type), this._alpha);\n\t\t},\n\n\t\tgetType: function() {\n\t\t\treturn this._type;\n\t\t},\n\n\t\tsetType: function(type) {\n\t\t\tthis._components = this._convert(type);\n\t\t\tthis._properties = types[type];\n\t\t\tthis._type = type;\n\t\t},\n\n\t\tgetComponents: function() {\n\t\t\tvar components = this._components.slice();\n\t\t\tif (this._alpha != null)\n\t\t\t\tcomponents.push(this._alpha);\n\t\t\treturn components;\n\t\t},\n\n\t\tgetAlpha: function() {\n\t\t\treturn this._alpha != null ? this._alpha : 1;\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\t\t\tthis._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\t\t\tthis._changed();\n\t\t},\n\n\t\thasAlpha: function() {\n\t\t\treturn this._alpha != null;\n\t\t},\n\n\t\tequals: function(color) {\n\t\t\tvar col = Base.isPlainValue(color, true)\n\t\t\t\t\t? Color.read(arguments)\n\t\t\t\t\t: color;\n\t\t\treturn col === this || col && this._class === col._class\n\t\t\t\t\t&& this._type === col._type\n\t\t\t\t\t&& this.getAlpha() === col.getAlpha()\n\t\t\t\t\t&& Base.equals(this._components, col._components)\n\t\t\t\t\t|| false;\n\t\t},\n\n\t\ttoString: function() {\n\t\t\tvar properties = this._properties,\n\t\t\t\tparts = [],\n\t\t\t\tisGradient = this._type === 'gradient',\n\t\t\t\tf = Formatter.instance;\n\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\tvar value = this._components[i];\n\t\t\t\tif (value != null)\n\t\t\t\t\tparts.push(properties[i] + ': '\n\t\t\t\t\t\t\t+ (isGradient ? value : f.number(value)));\n\t\t\t}\n\t\t\tif (this._alpha != null)\n\t\t\t\tparts.push('alpha: ' + f.number(this._alpha));\n\t\t\treturn '{ ' + parts.join(', ') + ' }';\n\t\t},\n\n\t\ttoCSS: function(hex) {\n\t\t\tvar components = this._convert('rgb'),\n\t\t\t\talpha = hex || this._alpha == null ? 1 : this._alpha;\n\t\t\tfunction convert(val) {\n\t\t\t\treturn Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n\t\t\t}\n\t\t\tcomponents = [\n\t\t\t\tconvert(components[0]),\n\t\t\t\tconvert(components[1]),\n\t\t\t\tconvert(components[2])\n\t\t\t];\n\t\t\tif (alpha < 1)\n\t\t\t\tcomponents.push(alpha < 0 ? 0 : alpha);\n\t\t\treturn hex\n\t\t\t\t\t? '#' + ((1 << 24) + (components[0] << 16)\n\t\t\t\t\t\t+ (components[1] << 8)\n\t\t\t\t\t\t+ components[2]).toString(16).slice(1)\n\t\t\t\t\t: (components.length == 4 ? 'rgba(' : 'rgb(')\n\t\t\t\t\t\t+ components.join(',') + ')';\n\t\t},\n\n\t\ttoCanvasStyle: function(ctx, matrix) {\n\t\t\tif (this._canvasStyle)\n\t\t\t\treturn this._canvasStyle;\n\t\t\tif (this._type !== 'gradient')\n\t\t\t\treturn this._canvasStyle = this.toCSS();\n\t\t\tvar components = this._components,\n\t\t\t\tgradient = components[0],\n\t\t\t\tstops = gradient._stops,\n\t\t\t\torigin = components[1],\n\t\t\t\tdestination = components[2],\n\t\t\t\thighlight = components[3],\n\t\t\t\tinverse = matrix && matrix.inverted(),\n\t\t\t\tcanvasGradient;\n\t\t\tif (inverse) {\n\t\t\t\torigin = inverse._transformPoint(origin);\n\t\t\t\tdestination = inverse._transformPoint(destination);\n\t\t\t\tif (highlight)\n\t\t\t\t\thighlight = inverse._transformPoint(highlight);\n\t\t\t}\n\t\t\tif (gradient._radial) {\n\t\t\t\tvar radius = destination.getDistance(origin);\n\t\t\t\tif (highlight) {\n\t\t\t\t\tvar vector = highlight.subtract(origin);\n\t\t\t\t\tif (vector.getLength() > radius)\n\t\t\t\t\t\thighlight = origin.add(vector.normalize(radius - 0.1));\n\t\t\t\t}\n\t\t\t\tvar start = highlight || origin;\n\t\t\t\tcanvasGradient = ctx.createRadialGradient(start.x, start.y,\n\t\t\t\t\t\t0, origin.x, origin.y, radius);\n\t\t\t} else {\n\t\t\t\tcanvasGradient = ctx.createLinearGradient(origin.x, origin.y,\n\t\t\t\t\t\tdestination.x, destination.y);\n\t\t\t}\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tcanvasGradient.addColorStop(\n\t\t\t\t\t\toffset == null ? i / (l - 1) : offset,\n\t\t\t\t\t\tstop._color.toCanvasStyle());\n\t\t\t}\n\t\t\treturn this._canvasStyle = canvasGradient;\n\t\t},\n\n\t\ttransform: function(matrix) {\n\t\t\tif (this._type === 'gradient') {\n\t\t\t\tvar components = this._components;\n\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\tvar point = components[i];\n\t\t\t\t\tmatrix._transformPoint(point, point, true);\n\t\t\t\t}\n\t\t\t\tthis._changed();\n\t\t\t}\n\t\t},\n\n\t\tstatics: {\n\t\t\t_types: types,\n\n\t\t\trandom: function() {\n\t\t\t\tvar random = Math.random;\n\t\t\t\treturn new Color(random(), random(), random());\n\t\t\t},\n\n\t\t\t_setOwner: function(color, owner, setter) {\n\t\t\t\tif (color) {\n\t\t\t\t\tif (color._owner && owner && color._owner !== owner) {\n\t\t\t\t\t\tcolor = color.clone();\n\t\t\t\t\t}\n\t\t\t\t\tif (!color._owner ^ !owner) {\n\t\t\t\t\t\tcolor._owner = owner || null;\n\t\t\t\t\t\tcolor._setter = setter || null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t});\n},\nnew function() {\n\tvar operators = {\n\t\tadd: function(a, b) {\n\t\t\treturn a + b;\n\t\t},\n\n\t\tsubtract: function(a, b) {\n\t\t\treturn a - b;\n\t\t},\n\n\t\tmultiply: function(a, b) {\n\t\t\treturn a * b;\n\t\t},\n\n\t\tdivide: function(a, b) {\n\t\t\treturn a / b;\n\t\t}\n\t};\n\n\treturn Base.each(operators, function(operator, name) {\n\t\tthis[name] = function(color) {\n\t\t\tcolor = Color.read(arguments);\n\t\t\tvar type = this._type,\n\t\t\t\tcomponents1 = this._components,\n\t\t\t\tcomponents2 = color._convert(type);\n\t\t\tfor (var i = 0, l = components1.length; i < l; i++)\n\t\t\t\tcomponents2[i] = operator(components1[i], components2[i]);\n\t\t\treturn new Color(type, components2,\n\t\t\t\t\tthis._alpha != null\n\t\t\t\t\t\t\t? operator(this._alpha, color.getAlpha())\n\t\t\t\t\t\t\t: null);\n\t\t};\n\t}, {\n\t});\n});\n\nvar Gradient = Base.extend({\n\t_class: 'Gradient',\n\n\tinitialize: function Gradient(stops, radial) {\n\t\tthis._id = UID.get();\n\t\tif (stops && Base.isPlainObject(stops)) {\n\t\t\tthis.set(stops);\n\t\t\tstops = radial = null;\n\t\t}\n\t\tif (this._stops == null) {\n\t\t\tthis.setStops(stops || ['white', 'black']);\n\t\t}\n\t\tif (this._radial == null) {\n\t\t\tthis.setRadial(typeof radial === 'string' && radial === 'radial'\n\t\t\t\t\t|| radial || false);\n\t\t}\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._stops, this._radial],\n\t\t\t\t\toptions, true, dictionary);\n\t\t});\n\t},\n\n\t_changed: function() {\n\t\tfor (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n\t\t\tthis._owners[i]._changed();\n\t\t}\n\t},\n\n\t_addOwner: function(color) {\n\t\tif (!this._owners)\n\t\t\tthis._owners = [];\n\t\tthis._owners.push(color);\n\t},\n\n\t_removeOwner: function(color) {\n\t\tvar index = this._owners ? this._owners.indexOf(color) : -1;\n\t\tif (index != -1) {\n\t\t\tthis._owners.splice(index, 1);\n\t\t\tif (!this._owners.length)\n\t\t\t\tthis._owners = undefined;\n\t\t}\n\t},\n\n\tclone: function() {\n\t\tvar stops = [];\n\t\tfor (var i = 0, l = this._stops.length; i < l; i++) {\n\t\t\tstops[i] = this._stops[i].clone();\n\t\t}\n\t\treturn new Gradient(stops, this._radial);\n\t},\n\n\tgetStops: function() {\n\t\treturn this._stops;\n\t},\n\n\tsetStops: function(stops) {\n\t\tif (stops.length < 2) {\n\t\t\tthrow new Error(\n\t\t\t\t\t'Gradient stop list needs to contain at least two stops.');\n\t\t}\n\t\tvar _stops = this._stops;\n\t\tif (_stops) {\n\t\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t\t_stops[i]._owner = undefined;\n\t\t}\n\t\t_stops = this._stops = GradientStop.readList(stops, 0, { clone: true });\n\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t_stops[i]._owner = this;\n\t\tthis._changed();\n\t},\n\n\tgetRadial: function() {\n\t\treturn this._radial;\n\t},\n\n\tsetRadial: function(radial) {\n\t\tthis._radial = radial;\n\t\tthis._changed();\n\t},\n\n\tequals: function(gradient) {\n\t\tif (gradient === this)\n\t\t\treturn true;\n\t\tif (gradient && this._class === gradient._class) {\n\t\t\tvar stops1 = this._stops,\n\t\t\t\tstops2 = gradient._stops,\n\t\t\t\tlength = stops1.length;\n\t\t\tif (length === stops2.length) {\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tif (!stops1[i].equals(stops2[i]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nvar GradientStop = Base.extend({\n\t_class: 'GradientStop',\n\n\tinitialize: function GradientStop(arg0, arg1) {\n\t\tvar color = arg0,\n\t\t\toffset = arg1;\n\t\tif (typeof arg0 === 'object' && arg1 === undefined) {\n\t\t\tif (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n\t\t\t\tcolor = arg0[0];\n\t\t\t\toffset = arg0[1];\n\t\t\t} else if ('color' in arg0 || 'offset' in arg0\n\t\t\t\t\t|| 'rampPoint' in arg0) {\n\t\t\t\tcolor = arg0.color;\n\t\t\t\toffset = arg0.offset || arg0.rampPoint || 0;\n\t\t\t}\n\t\t}\n\t\tthis.setColor(color);\n\t\tthis.setOffset(offset);\n\t},\n\n\tclone: function() {\n\t\treturn new GradientStop(this._color.clone(), this._offset);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar color = this._color,\n\t\t\toffset = this._offset;\n\t\treturn Base.serialize(offset == null ? [color] : [color, offset],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tif (this._owner)\n\t\t\tthis._owner._changed(129);\n\t},\n\n\tgetOffset: function() {\n\t\treturn this._offset;\n\t},\n\n\tsetOffset: function(offset) {\n\t\tthis._offset = offset;\n\t\tthis._changed();\n\t},\n\n\tgetRampPoint: '#getOffset',\n\tsetRampPoint: '#setOffset',\n\n\tgetColor: function() {\n\t\treturn this._color;\n\t},\n\n\tsetColor: function() {\n\t\tColor._setOwner(this._color, null);\n\t\tthis._color = Color._setOwner(Color.read(arguments, 0), this,\n\t\t\t\t'setColor');\n\t\tthis._changed();\n\t},\n\n\tequals: function(stop) {\n\t\treturn stop === this || stop && this._class === stop._class\n\t\t\t\t&& this._color.equals(stop._color)\n\t\t\t\t&& this._offset == stop._offset\n\t\t\t\t|| false;\n\t}\n});\n\nvar Style = Base.extend(new function() {\n\tvar itemDefaults = {\n\t\tfillColor: null,\n\t\tfillRule: 'nonzero',\n\t\tstrokeColor: null,\n\t\tstrokeWidth: 1,\n\t\tstrokeCap: 'butt',\n\t\tstrokeJoin: 'miter',\n\t\tstrokeScaling: true,\n\t\tmiterLimit: 10,\n\t\tdashOffset: 0,\n\t\tdashArray: [],\n\t\tshadowColor: null,\n\t\tshadowBlur: 0,\n\t\tshadowOffset: new Point(),\n\t\tselectedColor: null\n\t},\n\tgroupDefaults = Base.set({}, itemDefaults, {\n\t\tfontFamily: 'sans-serif',\n\t\tfontWeight: 'normal',\n\t\tfontSize: 12,\n\t\tleading: null,\n\t\tjustification: 'left'\n\t}),\n\ttextDefaults = Base.set({}, groupDefaults, {\n\t\tfillColor: new Color()\n\t}),\n\tflags = {\n\t\tstrokeWidth: 193,\n\t\tstrokeCap: 193,\n\t\tstrokeJoin: 193,\n\t\tstrokeScaling: 201,\n\t\tmiterLimit: 193,\n\t\tfontFamily: 9,\n\t\tfontWeight: 9,\n\t\tfontSize: 9,\n\t\tfont: 9,\n\t\tleading: 9,\n\t\tjustification: 9\n\t},\n\titem = {\n\t\tbeans: true\n\t},\n\tfields = {\n\t\t_class: 'Style',\n\t\tbeans: true,\n\n\t\tinitialize: function Style(style, _owner, _project) {\n\t\t\tthis._values = {};\n\t\t\tthis._owner = _owner;\n\t\t\tthis._project = _owner && _owner._project || _project\n\t\t\t\t\t|| paper.project;\n\t\t\tthis._defaults = !_owner || _owner instanceof Group ? groupDefaults\n\t\t\t\t\t: _owner instanceof TextItem ? textDefaults\n\t\t\t\t\t: itemDefaults;\n\t\t\tif (style)\n\t\t\t\tthis.set(style);\n\t\t}\n\t};\n\n\tBase.each(groupDefaults, function(value, key) {\n\t\tvar isColor = /Color$/.test(key),\n\t\t\tisPoint = key === 'shadowOffset',\n\t\t\tpart = Base.capitalize(key),\n\t\t\tflag = flags[key],\n\t\t\tset = 'set' + part,\n\t\t\tget = 'get' + part;\n\n\t\tfields[set] = function(value) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath);\n\t\t\tif (applyToChildren) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\t\tchildren[i]._style[set](value);\n\t\t\t}\n\t\t\tif ((key === 'selectedColor' || !applyToChildren)\n\t\t\t\t\t&& key in this._defaults) {\n\t\t\t\tvar old = this._values[key];\n\t\t\t\tif (old !== value) {\n\t\t\t\t\tif (isColor) {\n\t\t\t\t\t\tif (old) {\n\t\t\t\t\t\t\tColor._setOwner(old, null);\n\t\t\t\t\t\t\told._canvasStyle = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value && value.constructor === Color) {\n\t\t\t\t\t\t\tvalue = Color._setOwner(value, owner,\n\t\t\t\t\t\t\t\t\tapplyToChildren && set);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._values[key] = value;\n\t\t\t\t\tif (owner)\n\t\t\t\t\t\towner._changed(flag || 129);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfields[get] = function(_dontMerge) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath),\n\t\t\t\tvalue;\n\t\t\tif (applyToChildren && !_dontMerge) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\t\tvar childValue = children[i]._style[get]();\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tvalue = childValue;\n\t\t\t\t\t} else if (!Base.equals(value, childValue)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (key in this._defaults) {\n\t\t\t\tvar value = this._values[key];\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tvalue = this._defaults[key];\n\t\t\t\t\tif (value && value.clone) {\n\t\t\t\t\t\tvalue = value.clone();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar ctor = isColor ? Color : isPoint ? Point : null;\n\t\t\t\t\tif (ctor && !(value && value.constructor === ctor)) {\n\t\t\t\t\t\tthis._values[key] = value = ctor.read([value], 0,\n\t\t\t\t\t\t\t\t{ readNull: true, clone: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (value && isColor) {\n\t\t\t\tvalue = Color._setOwner(value, owner, applyToChildren && set);\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\titem[get] = function(_dontMerge) {\n\t\t\treturn this._style[get](_dontMerge);\n\t\t};\n\n\t\titem[set] = function(value) {\n\t\t\tthis._style[set](value);\n\t\t};\n\t});\n\n\tBase.each({\n\t\tFont: 'FontFamily',\n\t\tWindingRule: 'FillRule'\n\t}, function(value, key) {\n\t\tvar get = 'get' + key,\n\t\t\tset = 'set' + key;\n\t\tfields[get] = item[get] = '#get' + value;\n\t\tfields[set] = item[set] = '#set' + value;\n\t});\n\n\tItem.inject(item);\n\treturn fields;\n}, {\n\tset: function(style) {\n\t\tvar isStyle = style instanceof Style,\n\t\t\tvalues = isStyle ? style._values : style;\n\t\tif (values) {\n\t\t\tfor (var key in values) {\n\t\t\t\tif (key in this._defaults) {\n\t\t\t\t\tvar value = values[key];\n\t\t\t\t\tthis[key] = value && isStyle && value.clone\n\t\t\t\t\t\t\t? value.clone() : value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tequals: function(style) {\n\t\tfunction compare(style1, style2, secondary) {\n\t\t\tvar values1 = style1._values,\n\t\t\t\tvalues2 = style2._values,\n\t\t\t\tdefaults2 = style2._defaults;\n\t\t\tfor (var key in values1) {\n\t\t\t\tvar value1 = values1[key],\n\t\t\t\t\tvalue2 = values2[key];\n\t\t\t\tif (!(secondary && key in values2) && !Base.equals(value1,\n\t\t\t\t\t\tvalue2 === undefined ? defaults2[key] : value2))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn style === this || style && this._class === style._class\n\t\t\t\t&& compare(this, style)\n\t\t\t\t&& compare(style, this, true)\n\t\t\t\t|| false;\n\t},\n\n\t_dispose: function() {\n\t\tvar color;\n\t\tcolor = this.getFillColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getStrokeColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getShadowColor();\n\t\tif (color) color._canvasStyle = null;\n\t},\n\n\thasFill: function() {\n\t\tvar color = this.getFillColor();\n\t\treturn !!color && color.alpha > 0;\n\t},\n\n\thasStroke: function() {\n\t\tvar color = this.getStrokeColor();\n\t\treturn !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n\t},\n\n\thasShadow: function() {\n\t\tvar color = this.getShadowColor();\n\t\treturn !!color && color.alpha > 0 && (this.getShadowBlur() > 0\n\t\t\t\t|| !this.getShadowOffset().isZero());\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\tgetFontStyle: function() {\n\t\tvar fontSize = this.getFontSize();\n\t\treturn this.getFontWeight()\n\t\t\t\t+ ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ')\n\t\t\t\t+ this.getFontFamily();\n\t},\n\n\tgetFont: '#getFontFamily',\n\tsetFont: '#setFontFamily',\n\n\tgetLeading: function getLeading() {\n\t\tvar leading = getLeading.base.call(this),\n\t\t\tfontSize = this.getFontSize();\n\t\tif (/pt|em|%|px/.test(fontSize))\n\t\t\tfontSize = this.getView().getPixelSize(fontSize);\n\t\treturn leading != null ? leading : fontSize * 1.2;\n\t}\n\n});\n\nvar DomElement = new function() {\n\tfunction handlePrefix(el, name, set, value) {\n\t\tvar prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n\t\t\tsuffix = name[0].toUpperCase() + name.substring(1);\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tvar prefix = prefixes[i],\n\t\t\t\tkey = prefix ? prefix + suffix : name;\n\t\t\tif (key in el) {\n\t\t\t\tif (set) {\n\t\t\t\t\tel[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\treturn el[key];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tgetStyles: function(el) {\n\t\t\tvar doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n\t\t\t\tview = doc && doc.defaultView;\n\t\t\treturn view && view.getComputedStyle(el, '');\n\t\t},\n\n\t\tgetBounds: function(el, viewport) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tbody = doc.body,\n\t\t\t\thtml = doc.documentElement,\n\t\t\t\trect;\n\t\t\ttry {\n\t\t\t\trect = el.getBoundingClientRect();\n\t\t\t} catch (e) {\n\t\t\t\trect = { left: 0, top: 0, width: 0, height: 0 };\n\t\t\t}\n\t\t\tvar x = rect.left - (html.clientLeft || body.clientLeft || 0),\n\t\t\t\ty = rect.top - (html.clientTop || body.clientTop || 0);\n\t\t\tif (!viewport) {\n\t\t\t\tvar view = doc.defaultView;\n\t\t\t\tx += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n\t\t\t\ty += view.pageYOffset || html.scrollTop || body.scrollTop;\n\t\t\t}\n\t\t\treturn new Rectangle(x, y, rect.width, rect.height);\n\t\t},\n\n\t\tgetViewportBounds: function(el) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tview = doc.defaultView,\n\t\t\t\thtml = doc.documentElement;\n\t\t\treturn new Rectangle(0, 0,\n\t\t\t\tview.innerWidth || html.clientWidth,\n\t\t\t\tview.innerHeight || html.clientHeight\n\t\t\t);\n\t\t},\n\n\t\tgetOffset: function(el, viewport) {\n\t\t\treturn DomElement.getBounds(el, viewport).getPoint();\n\t\t},\n\n\t\tgetSize: function(el) {\n\t\t\treturn DomElement.getBounds(el, true).getSize();\n\t\t},\n\n\t\tisInvisible: function(el) {\n\t\t\treturn DomElement.getSize(el).equals(new Size(0, 0));\n\t\t},\n\n\t\tisInView: function(el) {\n\t\t\treturn !DomElement.isInvisible(el)\n\t\t\t\t\t&& DomElement.getViewportBounds(el).intersects(\n\t\t\t\t\t\tDomElement.getBounds(el, true));\n\t\t},\n\n\t\tisInserted: function(el) {\n\t\t\treturn document.body.contains(el);\n\t\t},\n\n\t\tgetPrefixed: function(el, name) {\n\t\t\treturn el && handlePrefix(el, name);\n\t\t},\n\n\t\tsetPrefixed: function(el, name, value) {\n\t\t\tif (typeof name === 'object') {\n\t\t\t\tfor (var key in name)\n\t\t\t\t\thandlePrefix(el, key, true, name[key]);\n\t\t\t} else {\n\t\t\t\thandlePrefix(el, name, true, value);\n\t\t\t}\n\t\t}\n\t};\n};\n\nvar DomEvent = {\n\tadd: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\t\t\t\t\tvar name = parts[i];\n\t\t\t\t\tvar options = (\n\t\t\t\t\t\tel === document\n\t\t\t\t\t\t&& (name === 'touchstart' || name === 'touchmove')\n\t\t\t\t\t) ? { passive: false } : false;\n\t\t\t\t\tel.addEventListener(name, func, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++)\n\t\t\t\t\tel.removeEventListener(parts[i], func, false);\n\t\t\t}\n\t\t}\n\t},\n\n\tgetPoint: function(event) {\n\t\tvar pos = event.targetTouches\n\t\t\t\t? event.targetTouches.length\n\t\t\t\t\t? event.targetTouches[0]\n\t\t\t\t\t: event.changedTouches[0]\n\t\t\t\t: event;\n\t\treturn new Point(\n\t\t\tpos.pageX || pos.clientX + document.documentElement.scrollLeft,\n\t\t\tpos.pageY || pos.clientY + document.documentElement.scrollTop\n\t\t);\n\t},\n\n\tgetTarget: function(event) {\n\t\treturn event.target || event.srcElement;\n\t},\n\n\tgetRelatedTarget: function(event) {\n\t\treturn event.relatedTarget || event.toElement;\n\t},\n\n\tgetOffset: function(event, target) {\n\t\treturn DomEvent.getPoint(event).subtract(DomElement.getOffset(\n\t\t\t\ttarget || DomEvent.getTarget(event)));\n\t}\n};\n\nDomEvent.requestAnimationFrame = new function() {\n\tvar nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n\t\trequested = false,\n\t\tcallbacks = [],\n\t\ttimer;\n\n\tfunction handleCallbacks() {\n\t\tvar functions = callbacks;\n\t\tcallbacks = [];\n\t\tfor (var i = 0, l = functions.length; i < l; i++)\n\t\t\tfunctions[i]();\n\t\trequested = nativeRequest && callbacks.length;\n\t\tif (requested)\n\t\t\tnativeRequest(handleCallbacks);\n\t}\n\n\treturn function(callback) {\n\t\tcallbacks.push(callback);\n\t\tif (nativeRequest) {\n\t\t\tif (!requested) {\n\t\t\t\tnativeRequest(handleCallbacks);\n\t\t\t\trequested = true;\n\t\t\t}\n\t\t} else if (!timer) {\n\t\t\ttimer = setInterval(handleCallbacks, 1000 / 60);\n\t\t}\n\t};\n};\n\nvar View = Base.extend(Emitter, {\n\t_class: 'View',\n\n\tinitialize: function View(project, element) {\n\n\t\tfunction getSize(name) {\n\t\t\treturn element[name] || parseInt(element.getAttribute(name), 10);\n\t\t}\n\n\t\tfunction getCanvasSize() {\n\t\t\tvar size = DomElement.getSize(element);\n\t\t\treturn size.isNaN() || size.isZero()\n\t\t\t\t\t? new Size(getSize('width'), getSize('height'))\n\t\t\t\t\t: size;\n\t\t}\n\n\t\tvar size;\n\t\tif (window && element) {\n\t\t\tthis._id = element.getAttribute('id');\n\t\t\tif (this._id == null)\n\t\t\t\telement.setAttribute('id', this._id = 'paper-view-' + View._id++);\n\t\t\tDomEvent.add(element, this._viewEvents);\n\t\t\tvar none = 'none';\n\t\t\tDomElement.setPrefixed(element.style, {\n\t\t\t\tuserDrag: none,\n\t\t\t\tuserSelect: none,\n\t\t\t\ttouchCallout: none,\n\t\t\t\tcontentZooming: none,\n\t\t\t\ttapHighlightColor: 'rgba(0,0,0,0)'\n\t\t\t});\n\n\t\t\tif (PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar that = this;\n\t\t\t\tDomEvent.add(window, this._windowEvents = {\n\t\t\t\t\tresize: function() {\n\t\t\t\t\t\tthat.setViewSize(getCanvasSize());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsize = getCanvasSize();\n\n\t\t\tif (PaperScope.hasAttribute(element, 'stats')\n\t\t\t\t\t&& typeof Stats !== 'undefined') {\n\t\t\t\tthis._stats = new Stats();\n\t\t\t\tvar stats = this._stats.domElement,\n\t\t\t\t\tstyle = stats.style,\n\t\t\t\t\toffset = DomElement.getOffset(element);\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = offset.x + 'px';\n\t\t\t\tstyle.top = offset.y + 'px';\n\t\t\t\tdocument.body.appendChild(stats);\n\t\t\t}\n\t\t} else {\n\t\t\tsize = new Size(element);\n\t\t\telement = null;\n\t\t}\n\t\tthis._project = project;\n\t\tthis._scope = project._scope;\n\t\tthis._element = element;\n\t\tif (!this._pixelRatio)\n\t\t\tthis._pixelRatio = window && window.devicePixelRatio || 1;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize = size;\n\t\tView._views.push(this);\n\t\tView._viewsById[this._id] = this;\n\t\t(this._matrix = new Matrix())._owner = this;\n\t\tif (!View._focused)\n\t\t\tView._focused = this;\n\t\tthis._frameItems = {};\n\t\tthis._frameItemCount = 0;\n\t\tthis._itemEvents = { native: {}, virtual: {} };\n\t\tthis._autoUpdate = !paper.agent.node;\n\t\tthis._needsUpdate = false;\n\t},\n\n\tremove: function() {\n\t\tif (!this._project)\n\t\t\treturn false;\n\t\tif (View._focused === this)\n\t\t\tView._focused = null;\n\t\tView._views.splice(View._views.indexOf(this), 1);\n\t\tdelete View._viewsById[this._id];\n\t\tvar project = this._project;\n\t\tif (project._view === this)\n\t\t\tproject._view = null;\n\t\tDomEvent.remove(this._element, this._viewEvents);\n\t\tDomEvent.remove(window, this._windowEvents);\n\t\tthis._element = this._project = null;\n\t\tthis.off('frame');\n\t\tthis._animate = false;\n\t\tthis._frameItems = {};\n\t\treturn true;\n\t},\n\n\t_events: Base.each(\n\t\tItem._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']),\n\t\tfunction(name) {\n\t\t\tthis[name] = {};\n\t\t}, {\n\t\t\tonFrame: {\n\t\t\t\tinstall: function() {\n\t\t\t\t\tthis.play();\n\t\t\t\t},\n\n\t\t\t\tuninstall: function() {\n\t\t\t\t\tthis.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t),\n\n\t_animate: false,\n\t_time: 0,\n\t_count: 0,\n\n\tgetAutoUpdate: function() {\n\t\treturn this._autoUpdate;\n\t},\n\n\tsetAutoUpdate: function(autoUpdate) {\n\t\tthis._autoUpdate = autoUpdate;\n\t\tif (autoUpdate)\n\t\t\tthis.requestUpdate();\n\t},\n\n\tupdate: function() {\n\t},\n\n\tdraw: function() {\n\t\tthis.update();\n\t},\n\n\trequestUpdate: function() {\n\t\tif (!this._requested) {\n\t\t\tvar that = this;\n\t\t\tDomEvent.requestAnimationFrame(function() {\n\t\t\t\tthat._requested = false;\n\t\t\t\tif (that._animate) {\n\t\t\t\t\tthat.requestUpdate();\n\t\t\t\t\tvar element = that._element;\n\t\t\t\t\tif ((!DomElement.getPrefixed(document, 'hidden')\n\t\t\t\t\t\t\t|| PaperScope.getAttribute(element, 'keepalive')\n\t\t\t\t\t\t\t\t=== 'true') && DomElement.isInView(element)) {\n\t\t\t\t\t\tthat._handleFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (that._autoUpdate)\n\t\t\t\t\tthat.update();\n\t\t\t});\n\t\t\tthis._requested = true;\n\t\t}\n\t},\n\n\tplay: function() {\n\t\tthis._animate = true;\n\t\tthis.requestUpdate();\n\t},\n\n\tpause: function() {\n\t\tthis._animate = false;\n\t},\n\n\t_handleFrame: function() {\n\t\tpaper = this._scope;\n\t\tvar now = Date.now() / 1000,\n\t\t\tdelta = this._last ? now - this._last : 0;\n\t\tthis._last = now;\n\t\tthis.emit('frame', new Base({\n\t\t\tdelta: delta,\n\t\t\ttime: this._time += delta,\n\t\t\tcount: this._count++\n\t\t}));\n\t\tif (this._stats)\n\t\t\tthis._stats.update();\n\t},\n\n\t_animateItem: function(item, animate) {\n\t\tvar items = this._frameItems;\n\t\tif (animate) {\n\t\t\titems[item._id] = {\n\t\t\t\titem: item,\n\t\t\t\ttime: 0,\n\t\t\t\tcount: 0\n\t\t\t};\n\t\t\tif (++this._frameItemCount === 1)\n\t\t\t\tthis.on('frame', this._handleFrameItems);\n\t\t} else {\n\t\t\tdelete items[item._id];\n\t\t\tif (--this._frameItemCount === 0) {\n\t\t\t\tthis.off('frame', this._handleFrameItems);\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleFrameItems: function(event) {\n\t\tfor (var i in this._frameItems) {\n\t\t\tvar entry = this._frameItems[i];\n\t\t\tentry.item.emit('frame', new Base(event, {\n\t\t\t\ttime: entry.time += event.delta,\n\t\t\t\tcount: entry.count++\n\t\t\t}));\n\t\t}\n\t},\n\n\t_changed: function() {\n\t\tthis._project._changed(4097);\n\t\tthis._bounds = this._decomposed = undefined;\n\t},\n\n\tgetElement: function() {\n\t\treturn this._element;\n\t},\n\n\tgetPixelRatio: function() {\n\t\treturn this._pixelRatio;\n\t},\n\n\tgetResolution: function() {\n\t\treturn this._pixelRatio * 72;\n\t},\n\n\tgetViewSize: function() {\n\t\tvar size = this._viewSize;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setViewSize');\n\t},\n\n\tsetViewSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tdelta = size.subtract(this._viewSize);\n\t\tif (delta.isZero())\n\t\t\treturn;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize.set(size);\n\t\tthis._changed();\n\t\tthis.emit('resize', { size: size, delta: delta });\n\t\tif (this._autoUpdate) {\n\t\t\tthis.update();\n\t\t}\n\t},\n\n\t_setElementSize: function(width, height) {\n\t\tvar element = this._element;\n\t\tif (element) {\n\t\t\tif (element.width !== width)\n\t\t\t\telement.width = width;\n\t\t\tif (element.height !== height)\n\t\t\t\telement.height = height;\n\t\t}\n\t},\n\n\tgetBounds: function() {\n\t\tif (!this._bounds)\n\t\t\tthis._bounds = this._matrix.inverted()._transformBounds(\n\t\t\t\t\tnew Rectangle(new Point(), this._viewSize));\n\t\treturn this._bounds;\n\t},\n\n\tgetSize: function() {\n\t\treturn this.getBounds().getSize();\n\t},\n\n\tisVisible: function() {\n\t\treturn DomElement.isInView(this._element);\n\t},\n\n\tisInserted: function() {\n\t\treturn DomElement.isInserted(this._element);\n\t},\n\n\tgetPixelSize: function(size) {\n\t\tvar element = this._element,\n\t\t\tpixels;\n\t\tif (element) {\n\t\t\tvar parent = element.parentNode,\n\t\t\t\ttemp = document.createElement('div');\n\t\t\ttemp.style.fontSize = size;\n\t\t\tparent.appendChild(temp);\n\t\t\tpixels = parseFloat(DomElement.getStyles(temp).fontSize);\n\t\t\tparent.removeChild(temp);\n\t\t} else {\n\t\t\tpixels = parseFloat(pixels);\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\treturn 0;\n\t}\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getCenter(true)));\n\t};\n}, {\n\t_decompose: function() {\n\t\treturn this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\tgetCenter: function() {\n\t\treturn this.getBounds().getCenter();\n\t},\n\n\tsetCenter: function() {\n\t\tvar center = Point.read(arguments);\n\t\tthis.translate(this.getCenter().subtract(center));\n\t},\n\n\tgetZoom: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn (scaling.x + scaling.y) / 2;\n\t},\n\n\tsetZoom: function(zoom) {\n\t\tthis.transform(new Matrix().scale(zoom / this.getZoom(),\n\t\t\tthis.getCenter()));\n\t},\n\n\tgetRotation: function() {\n\t\treturn this._decompose().rotation;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tthis.rotate(rotation - current);\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling) {\n\t\t\tthis.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._matrix.append(matrix);\n\t},\n\n\tscrollBy: function() {\n\t\tthis.translate(Point.read(arguments).negate());\n\t}\n}), {\n\n\tprojectToView: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tviewToProject: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tgetEventPoint: function(event) {\n\t\treturn this.viewToProject(DomEvent.getOffset(event, this._element));\n\t},\n\n}, {\n\tstatics: {\n\t\t_views: [],\n\t\t_viewsById: {},\n\t\t_id: 0,\n\n\t\tcreate: function(project, element) {\n\t\t\tif (document && typeof element === 'string')\n\t\t\t\telement = document.getElementById(element);\n\t\t\tvar ctor = window ? CanvasView : View;\n\t\t\treturn new ctor(project, element);\n\t\t}\n\t}\n},\nnew function() {\n\tif (!window)\n\t\treturn;\n\tvar prevFocus,\n\t\ttempFocus,\n\t\tdragging = false,\n\t\tmouseDown = false;\n\n\tfunction getView(event) {\n\t\tvar target = DomEvent.getTarget(event);\n\t\treturn target.getAttribute && View._viewsById[\n\t\t\t\ttarget.getAttribute('id')];\n\t}\n\n\tfunction updateFocus() {\n\t\tvar view = View._focused;\n\t\tif (!view || !view.isVisible()) {\n\t\t\tfor (var i = 0, l = View._views.length; i < l; i++) {\n\t\t\t\tif ((view = View._views[i]).isVisible()) {\n\t\t\t\t\tView._focused = tempFocus = view;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleMouseMove(view, event, point) {\n\t\tview._handleMouseEvent('mousemove', event, point);\n\t}\n\n\tvar navigator = window.navigator,\n\t\tmousedown, mousemove, mouseup;\n\tif (navigator.pointerEnabled || navigator.msPointerEnabled) {\n\t\tmousedown = 'pointerdown MSPointerDown';\n\t\tmousemove = 'pointermove MSPointerMove';\n\t\tmouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n\t} else {\n\t\tmousedown = 'touchstart';\n\t\tmousemove = 'touchmove';\n\t\tmouseup = 'touchend touchcancel';\n\t\tif (!('ontouchstart' in window && navigator.userAgent.match(\n\t\t\t\t/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n\t\t\tmousedown += ' mousedown';\n\t\t\tmousemove += ' mousemove';\n\t\t\tmouseup += ' mouseup';\n\t\t}\n\t}\n\n\tvar viewEvents = {},\n\t\tdocEvents = {\n\t\t\tmouseout: function(event) {\n\t\t\t\tvar view = View._focused,\n\t\t\t\t\ttarget = DomEvent.getRelatedTarget(event);\n\t\t\t\tif (view && (!target || target.nodeName === 'HTML')) {\n\t\t\t\t\tvar offset = DomEvent.getOffset(event, view._element),\n\t\t\t\t\t\tx = offset.x,\n\t\t\t\t\t\tabs = Math.abs,\n\t\t\t\t\t\tax = abs(x),\n\t\t\t\t\t\tmax = 1 << 25,\n\t\t\t\t\t\tdiff = ax - max;\n\t\t\t\t\toffset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n\t\t\t\t\thandleMouseMove(view, event, view.viewToProject(offset));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tscroll: updateFocus\n\t\t};\n\n\tviewEvents[mousedown] = function(event) {\n\t\tvar view = View._focused = getView(event);\n\t\tif (!dragging) {\n\t\t\tdragging = true;\n\t\t\tview._handleMouseEvent('mousedown', event);\n\t\t}\n\t};\n\n\tdocEvents[mousemove] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (!mouseDown) {\n\t\t\tvar target = getView(event);\n\t\t\tif (target) {\n\t\t\t\tif (view !== target) {\n\t\t\t\t\tif (view)\n\t\t\t\t\t\thandleMouseMove(view, event);\n\t\t\t\t\tif (!prevFocus)\n\t\t\t\t\t\tprevFocus = view;\n\t\t\t\t\tview = View._focused = tempFocus = target;\n\t\t\t\t}\n\t\t\t} else if (tempFocus && tempFocus === view) {\n\t\t\t\tif (prevFocus && !prevFocus.isInserted())\n\t\t\t\t\tprevFocus = null;\n\t\t\t\tview = View._focused = prevFocus;\n\t\t\t\tprevFocus = null;\n\t\t\t\tupdateFocus();\n\t\t\t}\n\t\t}\n\t\tif (view)\n\t\t\thandleMouseMove(view, event);\n\t};\n\n\tdocEvents[mousedown] = function() {\n\t\tmouseDown = true;\n\t};\n\n\tdocEvents[mouseup] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (view && dragging)\n\t\t\tview._handleMouseEvent('mouseup', event);\n\t\tmouseDown = dragging = false;\n\t};\n\n\tDomEvent.add(document, docEvents);\n\n\tDomEvent.add(window, {\n\t\tload: updateFocus\n\t});\n\n\tvar called = false,\n\t\tprevented = false,\n\t\tfallbacks = {\n\t\t\tdoubleclick: 'click',\n\t\t\tmousedrag: 'mousemove'\n\t\t},\n\t\twasInView = false,\n\t\toverView,\n\t\tdownPoint,\n\t\tlastPoint,\n\t\tdownItem,\n\t\toverItem,\n\t\tdragItem,\n\t\tclickItem,\n\t\tclickTime,\n\t\tdblClick;\n\n\tfunction emitMouseEvent(obj, target, type, event, point, prevPoint,\n\t\t\tstopItem) {\n\t\tvar stopped = false,\n\t\t\tmouseEvent;\n\n\t\tfunction emit(obj, type) {\n\t\t\tif (obj.responds(type)) {\n\t\t\t\tif (!mouseEvent) {\n\t\t\t\t\tmouseEvent = new MouseEvent(type, event, point,\n\t\t\t\t\t\t\ttarget || obj,\n\t\t\t\t\t\t\tprevPoint ? point.subtract(prevPoint) : null);\n\t\t\t\t}\n\t\t\t\tif (obj.emit(type, mouseEvent)) {\n\t\t\t\t\tcalled = true;\n\t\t\t\t\tif (mouseEvent.prevented)\n\t\t\t\t\t\tprevented = true;\n\t\t\t\t\tif (mouseEvent.stopped)\n\t\t\t\t\t\treturn stopped = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar fallback = fallbacks[type];\n\t\t\t\tif (fallback)\n\t\t\t\t\treturn emit(obj, fallback);\n\t\t\t}\n\t\t}\n\n\t\twhile (obj && obj !== stopItem) {\n\t\t\tif (emit(obj, type))\n\t\t\t\tbreak;\n\t\t\tobj = obj._parent;\n\t\t}\n\t\treturn stopped;\n\t}\n\n\tfunction emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n\t\tview._project.removeOn(type);\n\t\tprevented = called = false;\n\t\treturn (dragItem && emitMouseEvent(dragItem, null, type, event,\n\t\t\t\t\tpoint, prevPoint)\n\t\t\t|| hitItem && hitItem !== dragItem\n\t\t\t\t&& !hitItem.isDescendant(dragItem)\n\t\t\t\t&& emitMouseEvent(hitItem, null, type === 'mousedrag' ?\n\t\t\t\t\t'mousemove' : type, event, point, prevPoint, dragItem)\n\t\t\t|| emitMouseEvent(view, dragItem || hitItem || view, type, event,\n\t\t\t\t\tpoint, prevPoint));\n\t}\n\n\tvar itemEventsMap = {\n\t\tmousedown: {\n\t\t\tmousedown: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmouseup: {\n\t\t\tmouseup: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmousemove: {\n\t\t\tmousedrag: 1,\n\t\t\tmousemove: 1,\n\t\t\tmouseenter: 1,\n\t\t\tmouseleave: 1\n\t\t}\n\t};\n\n\treturn {\n\t\t_viewEvents: viewEvents,\n\n\t\t_handleMouseEvent: function(type, event, point) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\thitItems = itemEvents.native[type],\n\t\t\t\tnativeMove = type === 'mousemove',\n\t\t\t\ttool = this._scope.tool,\n\t\t\t\tview = this;\n\n\t\t\tfunction responds(type) {\n\t\t\t\treturn itemEvents.virtual[type] || view.responds(type)\n\t\t\t\t\t\t|| tool && tool.responds(type);\n\t\t\t}\n\n\t\t\tif (nativeMove && dragging && responds('mousedrag'))\n\t\t\t\ttype = 'mousedrag';\n\t\t\tif (!point)\n\t\t\t\tpoint = this.getEventPoint(event);\n\n\t\t\tvar inView = this.getBounds().contains(point),\n\t\t\t\thit = hitItems && inView && view._project.hitTest(point, {\n\t\t\t\t\ttolerance: 0,\n\t\t\t\t\tfill: true,\n\t\t\t\t\tstroke: true\n\t\t\t\t}),\n\t\t\t\thitItem = hit && hit.item || null,\n\t\t\t\thandle = false,\n\t\t\t\tmouse = {};\n\t\t\tmouse[type.substr(5)] = true;\n\n\t\t\tif (hitItems && hitItem !== overItem) {\n\t\t\t\tif (overItem) {\n\t\t\t\t\temitMouseEvent(overItem, null, 'mouseleave', event, point);\n\t\t\t\t}\n\t\t\t\tif (hitItem) {\n\t\t\t\t\temitMouseEvent(hitItem, null, 'mouseenter', event, point);\n\t\t\t\t}\n\t\t\t\toverItem = hitItem;\n\t\t\t}\n\t\t\tif (wasInView ^ inView) {\n\t\t\t\temitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave',\n\t\t\t\t\t\tevent, point);\n\t\t\t\toverView = inView ? this : null;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tif ((inView || mouse.drag) && !point.equals(lastPoint)) {\n\t\t\t\temitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove',\n\t\t\t\t\t\tevent, point, lastPoint);\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\twasInView = inView;\n\t\t\tif (mouse.down && inView || mouse.up && downPoint) {\n\t\t\t\temitMouseEvents(this, hitItem, type, event, point, downPoint);\n\t\t\t\tif (mouse.down) {\n\t\t\t\t\tdblClick = hitItem === clickItem\n\t\t\t\t\t\t&& (Date.now() - clickTime < 300);\n\t\t\t\t\tdownItem = clickItem = hitItem;\n\t\t\t\t\tif (!prevented && hitItem) {\n\t\t\t\t\t\tvar item = hitItem;\n\t\t\t\t\t\twhile (item && !item.responds('mousedrag'))\n\t\t\t\t\t\t\titem = item._parent;\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\tdragItem = hitItem;\n\t\t\t\t\t}\n\t\t\t\t\tdownPoint = point;\n\t\t\t\t} else if (mouse.up) {\n\t\t\t\t\tif (!prevented && hitItem === downItem) {\n\t\t\t\t\t\tclickTime = Date.now();\n\t\t\t\t\t\temitMouseEvents(this, hitItem, dblClick ? 'doubleclick'\n\t\t\t\t\t\t\t\t: 'click', event, point, downPoint);\n\t\t\t\t\t\tdblClick = false;\n\t\t\t\t\t}\n\t\t\t\t\tdownItem = dragItem = null;\n\t\t\t\t}\n\t\t\t\twasInView = false;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tlastPoint = point;\n\t\t\tif (handle && tool) {\n\t\t\t\tcalled = tool._handleMouseEvent(type, event, point, mouse)\n\t\t\t\t\t|| called;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tevent.cancelable !== false\n\t\t\t\t&& (called && !mouse.move || mouse.down && responds('mouseup'))\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_handleKeyEvent: function(type, event, key, character) {\n\t\t\tvar scope = this._scope,\n\t\t\t\ttool = scope.tool,\n\t\t\t\tkeyEvent;\n\n\t\t\tfunction emit(obj) {\n\t\t\t\tif (obj.responds(type)) {\n\t\t\t\t\tpaper = scope;\n\t\t\t\t\tobj.emit(type, keyEvent = keyEvent\n\t\t\t\t\t\t\t|| new KeyEvent(type, event, key, character));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isVisible()) {\n\t\t\t\temit(this);\n\t\t\t\tif (tool && tool.responds(type))\n\t\t\t\t\temit(tool);\n\t\t\t}\n\t\t},\n\n\t\t_countItemEvent: function(type, sign) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\tnative = itemEvents.native,\n\t\t\t\tvirtual = itemEvents.virtual;\n\t\t\tfor (var key in itemEventsMap) {\n\t\t\t\tnative[key] = (native[key] || 0)\n\t\t\t\t\t\t+ (itemEventsMap[key][type] || 0) * sign;\n\t\t\t}\n\t\t\tvirtual[type] = (virtual[type] || 0) + sign;\n\t\t},\n\n\t\tstatics: {\n\t\t\tupdateFocus: updateFocus,\n\n\t\t\t_resetState: function() {\n\t\t\t\tdragging = mouseDown = called = wasInView = false;\n\t\t\t\tprevFocus = tempFocus = overView = downPoint = lastPoint =\n\t\t\t\t\tdownItem = overItem = dragItem = clickItem = clickTime =\n\t\t\t\t\tdblClick = null;\n\t\t\t}\n\t\t}\n\t};\n});\n\nvar CanvasView = View.extend({\n\t_class: 'CanvasView',\n\n\tinitialize: function CanvasView(project, canvas) {\n\t\tif (!(canvas instanceof window.HTMLCanvasElement)) {\n\t\t\tvar size = Size.read(arguments, 1);\n\t\t\tif (size.isZero())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Cannot create CanvasView with the provided argument: '\n\t\t\t\t\t\t+ Base.slice(arguments, 1));\n\t\t\tcanvas = CanvasProvider.getCanvas(size);\n\t\t}\n\t\tvar ctx = this._context = canvas.getContext('2d');\n\t\tctx.save();\n\t\tthis._pixelRatio = 1;\n\t\tif (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n\t\t\tvar deviceRatio = window.devicePixelRatio || 1,\n\t\t\t\tbackingStoreRatio = DomElement.getPrefixed(ctx,\n\t\t\t\t\t\t'backingStorePixelRatio') || 1;\n\t\t\tthis._pixelRatio = deviceRatio / backingStoreRatio;\n\t\t}\n\t\tView.call(this, project, canvas);\n\t\tthis._needsUpdate = true;\n\t},\n\n\tremove: function remove() {\n\t\tthis._context.restore();\n\t\treturn remove.base.call(this);\n\t},\n\n\t_setElementSize: function _setElementSize(width, height) {\n\t\tvar pixelRatio = this._pixelRatio;\n\t\t_setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\t\tif (pixelRatio !== 1) {\n\t\t\tvar element = this._element,\n\t\t\t\tctx = this._context;\n\t\t\tif (!PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar style = element.style;\n\t\t\t\tstyle.width = width + 'px';\n\t\t\t\tstyle.height = height + 'px';\n\t\t\t}\n\t\t\tctx.restore();\n\t\t\tctx.save();\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t},\n\n\tgetContext: function() {\n\t\treturn this._context;\n\t},\n\n\tgetPixelSize: function getPixelSize(size) {\n\t\tvar agent = paper.agent,\n\t\t\tpixels;\n\t\tif (agent && agent.firefox) {\n\t\t\tpixels = getPixelSize.base.call(this, size);\n\t\t} else {\n\t\t\tvar ctx = this._context,\n\t\t\t\tprevFont = ctx.font;\n\t\t\tctx.font = size + ' serif';\n\t\t\tpixels = parseFloat(ctx.font);\n\t\t\tctx.font = prevFont;\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\tvar ctx = this._context,\n\t\t\tprevFont = ctx.font,\n\t\t\twidth = 0;\n\t\tctx.font = font;\n\t\tfor (var i = 0, l = lines.length; i < l; i++)\n\t\t\twidth = Math.max(width, ctx.measureText(lines[i]).width);\n\t\tctx.font = prevFont;\n\t\treturn width;\n\t},\n\n\tupdate: function() {\n\t\tif (!this._needsUpdate)\n\t\t\treturn false;\n\t\tvar project = this._project,\n\t\t\tctx = this._context,\n\t\t\tsize = this._viewSize;\n\t\tctx.clearRect(0, 0, size.width + 1, size.height + 1);\n\t\tif (project)\n\t\t\tproject.draw(ctx, this._matrix, this._pixelRatio);\n\t\tthis._needsUpdate = false;\n\t\treturn true;\n\t}\n});\n\nvar Event = Base.extend({\n\t_class: 'Event',\n\n\tinitialize: function Event(event) {\n\t\tthis.event = event;\n\t\tthis.type = event && event.type;\n\t},\n\n\tprevented: false,\n\tstopped: false,\n\n\tpreventDefault: function() {\n\t\tthis.prevented = true;\n\t\tthis.event.preventDefault();\n\t},\n\n\tstopPropagation: function() {\n\t\tthis.stopped = true;\n\t\tthis.event.stopPropagation();\n\t},\n\n\tstop: function() {\n\t\tthis.stopPropagation();\n\t\tthis.preventDefault();\n\t},\n\n\tgetTimeStamp: function() {\n\t\treturn this.event.timeStamp;\n\t},\n\n\tgetModifiers: function() {\n\t\treturn Key.modifiers;\n\t}\n});\n\nvar KeyEvent = Event.extend({\n\t_class: 'KeyEvent',\n\n\tinitialize: function KeyEvent(type, event, key, character) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.key = key;\n\t\tthis.character = character;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', key: '\" + this.key\n\t\t\t\t+ \"', character: '\" + this.character\n\t\t\t\t+ \"', modifiers: \" + this.getModifiers()\n\t\t\t\t+ \" }\";\n\t}\n});\n\nvar Key = new function() {\n\tvar keyLookup = {\n\t\t\t'\\t': 'tab',\n\t\t\t' ': 'space',\n\t\t\t'\\b': 'backspace',\n\t\t\t'\\x7f': 'delete',\n\t\t\t'Spacebar': 'space',\n\t\t\t'Del': 'delete',\n\t\t\t'Win': 'meta',\n\t\t\t'Esc': 'escape'\n\t\t},\n\n\t\tcharLookup = {\n\t\t\t'tab': '\\t',\n\t\t\t'space': ' ',\n\t\t\t'enter': '\\r'\n\t\t},\n\n\t\tkeyMap = {},\n\t\tcharMap = {},\n\t\tmetaFixMap,\n\t\tdownKey,\n\n\t\tmodifiers = new Base({\n\t\t\tshift: false,\n\t\t\tcontrol: false,\n\t\t\talt: false,\n\t\t\tmeta: false,\n\t\t\tcapsLock: false,\n\t\t\tspace: false\n\t\t}).inject({\n\t\t\toption: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.alt;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcommand: {\n\t\t\t\tget: function() {\n\t\t\t\t\tvar agent = paper && paper.agent;\n\t\t\t\t\treturn agent && agent.mac ? this.meta : this.control;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tfunction getKey(event) {\n\t\tvar key = event.key || event.keyIdentifier;\n\t\tkey = /^U\\+/.test(key)\n\t\t\t\t? String.fromCharCode(parseInt(key.substr(2), 16))\n\t\t\t\t: /^Arrow[A-Z]/.test(key) ? key.substr(5)\n\t\t\t\t: key === 'Unidentified'  || key === undefined\n\t\t\t\t\t? String.fromCharCode(event.keyCode)\n\t\t\t\t\t: key;\n\t\treturn keyLookup[key] ||\n\t\t\t\t(key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n\t}\n\n\tfunction handleKey(down, key, character, event) {\n\t\tvar type = down ? 'keydown' : 'keyup',\n\t\t\tview = View._focused,\n\t\t\tname;\n\t\tkeyMap[key] = down;\n\t\tif (down) {\n\t\t\tcharMap[key] = character;\n\t\t} else {\n\t\t\tdelete charMap[key];\n\t\t}\n\t\tif (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n\t\t\tmodifiers[name] = down;\n\t\t\tvar agent = paper && paper.agent;\n\t\t\tif (name === 'meta' && agent && agent.mac) {\n\t\t\t\tif (down) {\n\t\t\t\t\tmetaFixMap = {};\n\t\t\t\t} else {\n\t\t\t\t\tfor (var k in metaFixMap) {\n\t\t\t\t\t\tif (k in charMap)\n\t\t\t\t\t\t\thandleKey(false, k, metaFixMap[k], event);\n\t\t\t\t\t}\n\t\t\t\t\tmetaFixMap = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (down && metaFixMap) {\n\t\t\tmetaFixMap[key] = character;\n\t\t}\n\t\tif (view) {\n\t\t\tview._handleKeyEvent(down ? 'keydown' : 'keyup', event, key,\n\t\t\t\t\tcharacter);\n\t\t}\n\t}\n\n\tDomEvent.add(document, {\n\t\tkeydown: function(event) {\n\t\t\tvar key = getKey(event),\n\t\t\t\tagent = paper && paper.agent;\n\t\t\tif (key.length > 1 || agent && (agent.chrome && (event.altKey\n\t\t\t\t\t\t|| agent.mac && event.metaKey\n\t\t\t\t\t\t|| !agent.mac && event.ctrlKey))) {\n\t\t\t\thandleKey(true, key,\n\t\t\t\t\t\tcharLookup[key] || (key.length > 1 ? '' : key), event);\n\t\t\t} else {\n\t\t\t\tdownKey = key;\n\t\t\t}\n\t\t},\n\n\t\tkeypress: function(event) {\n\t\t\tif (downKey) {\n\t\t\t\tvar key = getKey(event),\n\t\t\t\t\tcode = event.charCode,\n\t\t\t\t\tcharacter = code >= 32 ? String.fromCharCode(code)\n\t\t\t\t\t\t: key.length > 1 ? '' : key;\n\t\t\t\tif (key !== downKey) {\n\t\t\t\t\tkey = character.toLowerCase();\n\t\t\t\t}\n\t\t\t\thandleKey(true, key, character, event);\n\t\t\t\tdownKey = null;\n\t\t\t}\n\t\t},\n\n\t\tkeyup: function(event) {\n\t\t\tvar key = getKey(event);\n\t\t\tif (key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\tDomEvent.add(window, {\n\t\tblur: function(event) {\n\t\t\tfor (var key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\treturn {\n\t\tmodifiers: modifiers,\n\n\t\tisDown: function(key) {\n\t\t\treturn !!keyMap[key];\n\t\t}\n\t};\n};\n\nvar MouseEvent = Event.extend({\n\t_class: 'MouseEvent',\n\n\tinitialize: function MouseEvent(type, event, point, target, delta) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.point = point;\n\t\tthis.target = target;\n\t\tthis.delta = delta;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', point: \" + this.point\n\t\t\t\t+ ', target: ' + this.target\n\t\t\t\t+ (this.delta ? ', delta: ' + this.delta : '')\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar ToolEvent = Event.extend({\n\t_class: 'ToolEvent',\n\t_item: null,\n\n\tinitialize: function ToolEvent(tool, type, event) {\n\t\tthis.tool = tool;\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t},\n\n\t_choosePoint: function(point, toolPoint) {\n\t\treturn point ? point : toolPoint ? toolPoint.clone() : null;\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._choosePoint(this._point, this.tool._point);\n\t},\n\n\tsetPoint: function(point) {\n\t\tthis._point = point;\n\t},\n\n\tgetLastPoint: function() {\n\t\treturn this._choosePoint(this._lastPoint, this.tool._lastPoint);\n\t},\n\n\tsetLastPoint: function(lastPoint) {\n\t\tthis._lastPoint = lastPoint;\n\t},\n\n\tgetDownPoint: function() {\n\t\treturn this._choosePoint(this._downPoint, this.tool._downPoint);\n\t},\n\n\tsetDownPoint: function(downPoint) {\n\t\tthis._downPoint = downPoint;\n\t},\n\n\tgetMiddlePoint: function() {\n\t\tif (!this._middlePoint && this.tool._lastPoint) {\n\t\t\treturn this.tool._point.add(this.tool._lastPoint).divide(2);\n\t\t}\n\t\treturn this._middlePoint;\n\t},\n\n\tsetMiddlePoint: function(middlePoint) {\n\t\tthis._middlePoint = middlePoint;\n\t},\n\n\tgetDelta: function() {\n\t\treturn !this._delta && this.tool._lastPoint\n\t\t\t\t? this.tool._point.subtract(this.tool._lastPoint)\n\t\t\t\t: this._delta;\n\t},\n\n\tsetDelta: function(delta) {\n\t\tthis._delta = delta;\n\t},\n\n\tgetCount: function() {\n\t\treturn this.tool[/^mouse(down|up)$/.test(this.type)\n\t\t\t\t? '_downCount' : '_moveCount'];\n\t},\n\n\tsetCount: function(count) {\n\t\tthis.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count']\n\t\t\t= count;\n\t},\n\n\tgetItem: function() {\n\t\tif (!this._item) {\n\t\t\tvar result = this.tool._scope.project.hitTest(this.getPoint());\n\t\t\tif (result) {\n\t\t\t\tvar item = result.item,\n\t\t\t\t\tparent = item._parent;\n\t\t\t\twhile (/^(Group|CompoundPath)$/.test(parent._class)) {\n\t\t\t\t\titem = parent;\n\t\t\t\t\tparent = parent._parent;\n\t\t\t\t}\n\t\t\t\tthis._item = item;\n\t\t\t}\n\t\t}\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item) {\n\t\tthis._item = item;\n\t},\n\n\ttoString: function() {\n\t\treturn '{ type: ' + this.type\n\t\t\t\t+ ', point: ' + this.getPoint()\n\t\t\t\t+ ', count: ' + this.getCount()\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar Tool = PaperScopeItem.extend({\n\t_class: 'Tool',\n\t_list: 'tools',\n\t_reference: 'tool',\n\t_events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove',\n\t\t\t'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown',\n\t\t\t'onKeyUp'],\n\n\tinitialize: function Tool(props) {\n\t\tPaperScopeItem.call(this);\n\t\tthis._moveCount = -1;\n\t\tthis._downCount = -1;\n\t\tthis.set(props);\n\t},\n\n\tgetMinDistance: function() {\n\t\treturn this._minDistance;\n\t},\n\n\tsetMinDistance: function(minDistance) {\n\t\tthis._minDistance = minDistance;\n\t\tif (minDistance != null && this._maxDistance != null\n\t\t\t\t&& minDistance > this._maxDistance) {\n\t\t\tthis._maxDistance = minDistance;\n\t\t}\n\t},\n\n\tgetMaxDistance: function() {\n\t\treturn this._maxDistance;\n\t},\n\n\tsetMaxDistance: function(maxDistance) {\n\t\tthis._maxDistance = maxDistance;\n\t\tif (this._minDistance != null && maxDistance != null\n\t\t\t\t&& maxDistance < this._minDistance) {\n\t\t\tthis._minDistance = maxDistance;\n\t\t}\n\t},\n\n\tgetFixedDistance: function() {\n\t\treturn this._minDistance == this._maxDistance\n\t\t\t? this._minDistance : null;\n\t},\n\n\tsetFixedDistance: function(distance) {\n\t\tthis._minDistance = this._maxDistance = distance;\n\t},\n\n\t_handleMouseEvent: function(type, event, point, mouse) {\n\t\tpaper = this._scope;\n\t\tif (mouse.drag && !this.responds(type))\n\t\t\ttype = 'mousemove';\n\t\tvar move = mouse.move || mouse.drag,\n\t\t\tresponds = this.responds(type),\n\t\t\tminDistance = this.minDistance,\n\t\t\tmaxDistance = this.maxDistance,\n\t\t\tcalled = false,\n\t\t\ttool = this;\n\t\tfunction update(minDistance, maxDistance) {\n\t\t\tvar pt = point,\n\t\t\t\ttoolPoint = move ? tool._point : (tool._downPoint || pt);\n\t\t\tif (move) {\n\t\t\t\tif (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (toolPoint && (minDistance != null || maxDistance != null)) {\n\t\t\t\t\tvar vector = pt.subtract(toolPoint),\n\t\t\t\t\t\tdistance = vector.getLength();\n\t\t\t\t\tif (distance < (minDistance || 0))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tif (maxDistance) {\n\t\t\t\t\t\tpt = toolPoint.add(vector.normalize(\n\t\t\t\t\t\t\t\tMath.min(distance, maxDistance)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttool._moveCount++;\n\t\t\t}\n\t\t\ttool._point = pt;\n\t\t\ttool._lastPoint = toolPoint || pt;\n\t\t\tif (mouse.down) {\n\t\t\t\ttool._moveCount = -1;\n\t\t\t\ttool._downPoint = pt;\n\t\t\t\ttool._downCount++;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction emit() {\n\t\t\tif (responds) {\n\t\t\t\tcalled = tool.emit(type, new ToolEvent(tool, type, event))\n\t\t\t\t\t\t|| called;\n\t\t\t}\n\t\t}\n\n\t\tif (mouse.down) {\n\t\t\tupdate();\n\t\t\temit();\n\t\t} else if (mouse.up) {\n\t\t\tupdate(null, maxDistance);\n\t\t\temit();\n\t\t} else if (responds) {\n\t\t\twhile (update(minDistance, maxDistance))\n\t\t\t\temit();\n\t\t}\n\t\treturn called;\n\t}\n\n});\n\nvar Tween = Base.extend(Emitter, {\n\t_class: 'Tween',\n\n\tstatics: {\n\t\teasings: new Base({\n\t\t\tlinear: function(t) {\n\t\t\t\treturn t;\n\t\t\t},\n\n\t\t\teaseInQuad: function(t) {\n\t\t\t\treturn t * t;\n\t\t\t},\n\n\t\t\teaseOutQuad: function(t) {\n\t\t\t\treturn t * (2 - t);\n\t\t\t},\n\n\t\t\teaseInOutQuad: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 2 * t * t\n\t\t\t\t\t: -1 + 2 * (2 - t) * t;\n\t\t\t},\n\n\t\t\teaseInCubic: function(t) {\n\t\t\t\treturn t * t * t;\n\t\t\t},\n\n\t\t\teaseOutCubic: function(t) {\n\t\t\t\treturn --t * t * t + 1;\n\t\t\t},\n\n\t\t\teaseInOutCubic: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 4 * t * t * t\n\t\t\t\t\t: (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\t\t\t},\n\n\t\t\teaseInQuart: function(t) {\n\t\t\t\treturn t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuart: function(t) {\n\t\t\t\treturn 1 - (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuart: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 8 * t * t * t * t\n\t\t\t\t\t: 1 - 8 * (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInQuint: function(t) {\n\t\t\t\treturn t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuint: function(t) {\n\t\t\t\treturn 1 + --t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuint: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 16 * t * t * t * t * t\n\t\t\t\t\t: 1 + 16 * (--t) * t * t * t * t;\n\t\t\t}\n\t\t})\n\t},\n\n\tinitialize: function Tween(object, from, to, duration, easing, start) {\n\t\tthis.object = object;\n\t\tvar type = typeof easing;\n\t\tvar isFunction = type === 'function';\n\t\tthis.type = isFunction\n\t\t\t? type\n\t\t\t: type === 'string'\n\t\t\t\t? easing\n\t\t\t\t: 'linear';\n\t\tthis.easing = isFunction ? easing : Tween.easings[this.type];\n\t\tthis.duration = duration;\n\t\tthis.running = false;\n\n\t\tthis._then = null;\n\t\tthis._startTime = null;\n\t\tvar state = from || to;\n\t\tthis._keys = state ? Object.keys(state) : [];\n\t\tthis._parsedKeys = this._parseKeys(this._keys);\n\t\tthis._from = state && this._getState(from);\n\t\tthis._to = state && this._getState(to);\n\t\tif (start !== false) {\n\t\t\tthis.start();\n\t\t}\n\t},\n\n\tthen: function(then) {\n\t\tthis._then = then;\n\t\treturn this;\n\t},\n\n\tstart: function() {\n\t\tthis._startTime = null;\n\t\tthis.running = true;\n\t\treturn this;\n\t},\n\n\tstop: function() {\n\t\tthis.running = false;\n\t\treturn this;\n\t},\n\n\tupdate: function(progress) {\n\t\tif (this.running) {\n\t\t\tif (progress >= 1) {\n\t\t\t\tprogress = 1;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\n\t\t\tvar factor = this.easing(progress),\n\t\t\t\tkeys = this._keys,\n\t\t\t\tgetValue = function(value) {\n\t\t\t\t\treturn typeof value === 'function'\n\t\t\t\t\t\t? value(factor, progress)\n\t\t\t\t\t\t: value;\n\t\t\t\t};\n\t\t\tfor (var i = 0, l = keys && keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i],\n\t\t\t\t\tfrom = getValue(this._from[key]),\n\t\t\t\t\tto = getValue(this._to[key]),\n\t\t\t\t\tvalue = (from && to && from.__add && to.__add)\n\t\t\t\t\t\t? to.__subtract(from).__multiply(factor).__add(from)\n\t\t\t\t\t\t: ((to - from) * factor) + from;\n\t\t\t\tthis._setProperty(this._parsedKeys[key], value);\n\t\t\t}\n\n\t\t\tif (this.responds('update')) {\n\t\t\t\tthis.emit('update', new Base({\n\t\t\t\t\tprogress: progress,\n\t\t\t\t\tfactor: factor\n\t\t\t\t}));\n\t\t\t}\n\t\t\tif (!this.running && this._then) {\n\t\t\t\tthis._then(this.object);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t_events: {\n\t\tonUpdate: {}\n\t},\n\n\t_handleFrame: function(time) {\n\t\tvar startTime = this._startTime,\n\t\t\tprogress = startTime\n\t\t\t\t? (time - startTime) / this.duration\n\t\t\t\t: 0;\n\t\tif (!startTime) {\n\t\t\tthis._startTime = time;\n\t\t}\n\t\tthis.update(progress);\n\t},\n\n\t_getState: function(state) {\n\t\tvar keys = this._keys,\n\t\t\tresult = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = this._parsedKeys[key],\n\t\t\t\tcurrent = this._getProperty(path),\n\t\t\t\tvalue;\n\t\t\tif (state) {\n\t\t\t\tvar resolved = this._resolveValue(current, state[key]);\n\t\t\t\tthis._setProperty(path, resolved);\n\t\t\t\tvalue = this._getProperty(path);\n\t\t\t\tvalue = value && value.clone ? value.clone() : value;\n\t\t\t\tthis._setProperty(path, current);\n\t\t\t} else {\n\t\t\t\tvalue = current && current.clone ? current.clone() : current;\n\t\t\t}\n\t\t\tresult[key] = value;\n\t\t}\n\t\treturn result;\n\t},\n\n\t_resolveValue: function(current, value) {\n\t\tif (value) {\n\t\t\tif (Array.isArray(value) && value.length === 2) {\n\t\t\t\tvar operator = value[0];\n\t\t\t\treturn (\n\t\t\t\t\toperator &&\n\t\t\t\t\toperator.match &&\n\t\t\t\t\toperator.match(/^[+\\-\\*\\/]=/)\n\t\t\t\t)\n\t\t\t\t\t? this._calculate(current, operator[0], value[1])\n\t\t\t\t\t: value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvar match = value.match(/^[+\\-*/]=(.*)/);\n\t\t\t\tif (match) {\n\t\t\t\t\tvar parsed = JSON.parse(match[1].replace(\n\t\t\t\t\t\t/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g,\n\t\t\t\t\t\t'\"$2\": '\n\t\t\t\t\t));\n\t\t\t\t\treturn this._calculate(current, value[0], parsed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\n\t_calculate: function(left, operator, right) {\n\t\treturn paper.PaperScript.calculateBinary(left, operator, right);\n\t},\n\n\t_parseKeys: function(keys) {\n\t\tvar parsed = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = key\n\t\t\t\t\t.replace(/\\.([^.]*)/g, '/$1')\n\t\t\t\t\t.replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n\t\t\tparsed[key] = path.split('/');\n\t\t}\n\t\treturn parsed;\n\t},\n\n\t_getProperty: function(path, offset) {\n\t\tvar obj = this.object;\n\t\tfor (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n\t\t\tobj = obj[path[i]];\n\t\t}\n\t\treturn obj;\n\t},\n\n\t_setProperty: function(path, value) {\n\t\tvar dest = this._getProperty(path, 1);\n\t\tif (dest) {\n\t\t\tdest[path[path.length - 1]] = value;\n\t\t}\n\t}\n});\n\nvar Http = {\n\trequest: function(options) {\n\t\tvar xhr = new self.XMLHttpRequest();\n\t\txhr.open((options.method || 'get').toUpperCase(), options.url,\n\t\t\t\tBase.pick(options.async, true));\n\t\tif (options.mimeType)\n\t\t\txhr.overrideMimeType(options.mimeType);\n\t\txhr.onload = function() {\n\t\t\tvar status = xhr.status;\n\t\t\tif (status === 0 || status === 200) {\n\t\t\t\tif (options.onLoad) {\n\t\t\t\t\toptions.onLoad.call(xhr, xhr.responseText);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\txhr.onerror();\n\t\t\t}\n\t\t};\n\t\txhr.onerror = function() {\n\t\t\tvar status = xhr.status,\n\t\t\t\tmessage = 'Could not load \"' + options.url + '\" (Status: '\n\t\t\t\t\t\t+ status + ')';\n\t\t\tif (options.onError) {\n\t\t\t\toptions.onError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t};\n\t\treturn xhr.send(null);\n\t}\n};\n\nvar CanvasProvider = Base.exports.CanvasProvider = {\n\tcanvases: [],\n\n\tgetCanvas: function(width, height, options) {\n\t\tif (!window)\n\t\t\treturn null;\n\t\tvar canvas,\n\t\t\tclear = true;\n\t\tif (typeof width === 'object') {\n\t\t\theight = width.height;\n\t\t\twidth = width.width;\n\t\t}\n\t\tif (this.canvases.length) {\n\t\t\tcanvas = this.canvases.pop();\n\t\t} else {\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tclear = false;\n\t\t}\n\t\tvar ctx = canvas.getContext('2d', options || {});\n\t\tif (!ctx) {\n\t\t\tthrow new Error('Canvas ' + canvas +\n\t\t\t\t\t' is unable to provide a 2D context.');\n\t\t}\n\t\tif (canvas.width === width && canvas.height === height) {\n\t\t\tif (clear)\n\t\t\t\tctx.clearRect(0, 0, width + 1, height + 1);\n\t\t} else {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t}\n\t\tctx.save();\n\t\treturn canvas;\n\t},\n\n\tgetContext: function(width, height, options) {\n\t\tvar canvas = this.getCanvas(width, height, options);\n\t\treturn canvas ? canvas.getContext('2d', options || {}) : null;\n\t},\n\n\trelease: function(obj) {\n\t\tvar canvas = obj && obj.canvas ? obj.canvas : obj;\n\t\tif (canvas && canvas.getContext) {\n\t\t\tcanvas.getContext('2d').restore();\n\t\t\tthis.canvases.push(canvas);\n\t\t}\n\t}\n};\n\nvar BlendMode = new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\tsr, sg, sb, sa,\n\t\tbr, bg, bb, ba,\n\t\tdr, dg, db;\n\n\tfunction getLum(r, g, b) {\n\t\treturn 0.2989 * r + 0.587 * g + 0.114 * b;\n\t}\n\n\tfunction setLum(r, g, b, l) {\n\t\tvar d = l - getLum(r, g, b);\n\t\tdr = r + d;\n\t\tdg = g + d;\n\t\tdb = b + d;\n\t\tvar l = getLum(dr, dg, db),\n\t\t\tmn = min(dr, dg, db),\n\t\t\tmx = max(dr, dg, db);\n\t\tif (mn < 0) {\n\t\t\tvar lmn = l - mn;\n\t\t\tdr = l + (dr - l) * l / lmn;\n\t\t\tdg = l + (dg - l) * l / lmn;\n\t\t\tdb = l + (db - l) * l / lmn;\n\t\t}\n\t\tif (mx > 255) {\n\t\t\tvar ln = 255 - l,\n\t\t\t\tmxl = mx - l;\n\t\t\tdr = l + (dr - l) * ln / mxl;\n\t\t\tdg = l + (dg - l) * ln / mxl;\n\t\t\tdb = l + (db - l) * ln / mxl;\n\t\t}\n\t}\n\n\tfunction getSat(r, g, b) {\n\t\treturn max(r, g, b) - min(r, g, b);\n\t}\n\n\tfunction setSat(r, g, b, s) {\n\t\tvar col = [r, g, b],\n\t\t\tmx = max(r, g, b),\n\t\t\tmn = min(r, g, b),\n\t\t\tmd;\n\t\tmn = mn === r ? 0 : mn === g ? 1 : 2;\n\t\tmx = mx === r ? 0 : mx === g ? 1 : 2;\n\t\tmd = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\t\tif (col[mx] > col[mn]) {\n\t\t\tcol[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n\t\t\tcol[mx] = s;\n\t\t} else {\n\t\t\tcol[md] = col[mx] = 0;\n\t\t}\n\t\tcol[mn] = 0;\n\t\tdr = col[0];\n\t\tdg = col[1];\n\t\tdb = col[2];\n\t}\n\n\tvar modes = {\n\t\tmultiply: function() {\n\t\t\tdr = br * sr / 255;\n\t\t\tdg = bg * sg / 255;\n\t\t\tdb = bb * sb / 255;\n\t\t},\n\n\t\tscreen: function() {\n\t\t\tdr = br + sr - (br * sr / 255);\n\t\t\tdg = bg + sg - (bg * sg / 255);\n\t\t\tdb = bb + sb - (bb * sb / 255);\n\t\t},\n\n\t\toverlay: function() {\n\t\t\tdr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n\t\t\tdg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n\t\t\tdb = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n\t\t},\n\n\t\t'soft-light': function() {\n\t\t\tvar t = sr * br / 255;\n\t\t\tdr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n\t\t\tt = sg * bg / 255;\n\t\t\tdg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n\t\t\tt = sb * bb / 255;\n\t\t\tdb = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n\t\t},\n\n\t\t'hard-light': function() {\n\t\t\tdr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n\t\t\tdg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n\t\t\tdb = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n\t\t},\n\n\t\t'color-dodge': function() {\n\t\t\tdr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n\t\t\tdg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n\t\t\tdb = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n\t\t},\n\n\t\t'color-burn': function() {\n\t\t\tdr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n\t\t\tdg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n\t\t\tdb = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n\t\t},\n\n\t\tdarken: function() {\n\t\t\tdr = br < sr ? br : sr;\n\t\t\tdg = bg < sg ? bg : sg;\n\t\t\tdb = bb < sb ? bb : sb;\n\t\t},\n\n\t\tlighten: function() {\n\t\t\tdr = br > sr ? br : sr;\n\t\t\tdg = bg > sg ? bg : sg;\n\t\t\tdb = bb > sb ? bb : sb;\n\t\t},\n\n\t\tdifference: function() {\n\t\t\tdr = br - sr;\n\t\t\tif (dr < 0)\n\t\t\t\tdr = -dr;\n\t\t\tdg = bg - sg;\n\t\t\tif (dg < 0)\n\t\t\t\tdg = -dg;\n\t\t\tdb = bb - sb;\n\t\t\tif (db < 0)\n\t\t\t\tdb = -db;\n\t\t},\n\n\t\texclusion: function() {\n\t\t\tdr = br + sr * (255 - br - br) / 255;\n\t\t\tdg = bg + sg * (255 - bg - bg) / 255;\n\t\t\tdb = bb + sb * (255 - bb - bb) / 255;\n\t\t},\n\n\t\thue: function() {\n\t\t\tsetSat(sr, sg, sb, getSat(br, bg, bb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tsaturation: function() {\n\t\t\tsetSat(br, bg, bb, getSat(sr, sg, sb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tluminosity: function() {\n\t\t\tsetLum(br, bg, bb, getLum(sr, sg, sb));\n\t\t},\n\n\t\tcolor: function() {\n\t\t\tsetLum(sr, sg, sb, getLum(br, bg, bb));\n\t\t},\n\n\t\tadd: function() {\n\t\t\tdr = min(br + sr, 255);\n\t\t\tdg = min(bg + sg, 255);\n\t\t\tdb = min(bb + sb, 255);\n\t\t},\n\n\t\tsubtract: function() {\n\t\t\tdr = max(br - sr, 0);\n\t\t\tdg = max(bg - sg, 0);\n\t\t\tdb = max(bb - sb, 0);\n\t\t},\n\n\t\taverage: function() {\n\t\t\tdr = (br + sr) / 2;\n\t\t\tdg = (bg + sg) / 2;\n\t\t\tdb = (bb + sb) / 2;\n\t\t},\n\n\t\tnegation: function() {\n\t\t\tdr = 255 - abs(255 - sr - br);\n\t\t\tdg = 255 - abs(255 - sg - bg);\n\t\t\tdb = 255 - abs(255 - sb - bb);\n\t\t}\n\t};\n\n\tvar nativeModes = this.nativeModes = Base.each([\n\t\t'source-over', 'source-in', 'source-out', 'source-atop',\n\t\t'destination-over', 'destination-in', 'destination-out',\n\t\t'destination-atop', 'lighter', 'darker', 'copy', 'xor'\n\t], function(mode) {\n\t\tthis[mode] = true;\n\t}, {});\n\n\tvar ctx = CanvasProvider.getContext(1, 1, { willReadFrequently: true });\n\tif (ctx) {\n\t\tBase.each(modes, function(func, mode) {\n\t\t\tvar darken = mode === 'darken',\n\t\t\t\tok = false;\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.fillStyle = darken ? '#300' : '#a00';\n\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\tctx.globalCompositeOperation = mode;\n\t\t\t\tif (ctx.globalCompositeOperation === mode) {\n\t\t\t\t\tctx.fillStyle = darken ? '#a00' : '#300';\n\t\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken\n\t\t\t\t\t\t\t? 170 : 51;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\tctx.restore();\n\t\t\tnativeModes[mode] = ok;\n\t\t});\n\t\tCanvasProvider.release(ctx);\n\t}\n\n\tthis.process = function(mode, srcContext, dstContext, alpha, offset) {\n\t\tvar srcCanvas = srcContext.canvas,\n\t\t\tnormal = mode === 'normal';\n\t\tif (normal || nativeModes[mode]) {\n\t\t\tdstContext.save();\n\t\t\tdstContext.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tdstContext.globalAlpha = alpha;\n\t\t\tif (!normal)\n\t\t\t\tdstContext.globalCompositeOperation = mode;\n\t\t\tdstContext.drawImage(srcCanvas, offset.x, offset.y);\n\t\t\tdstContext.restore();\n\t\t} else {\n\t\t\tvar process = modes[mode];\n\t\t\tif (!process)\n\t\t\t\treturn;\n\t\t\tvar dstData = dstContext.getImageData(offset.x, offset.y,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height),\n\t\t\t\tdst = dstData.data,\n\t\t\t\tsrc = srcContext.getImageData(0, 0,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height).data;\n\t\t\tfor (var i = 0, l = dst.length; i < l; i += 4) {\n\t\t\t\tsr = src[i];\n\t\t\t\tbr = dst[i];\n\t\t\t\tsg = src[i + 1];\n\t\t\t\tbg = dst[i + 1];\n\t\t\t\tsb = src[i + 2];\n\t\t\t\tbb = dst[i + 2];\n\t\t\t\tsa = src[i + 3];\n\t\t\t\tba = dst[i + 3];\n\t\t\t\tprocess();\n\t\t\t\tvar a1 = sa * alpha / 255,\n\t\t\t\t\ta2 = 1 - a1;\n\t\t\t\tdst[i] = a1 * dr + a2 * br;\n\t\t\t\tdst[i + 1] = a1 * dg + a2 * bg;\n\t\t\t\tdst[i + 2] = a1 * db + a2 * bb;\n\t\t\t\tdst[i + 3] = sa * alpha + a2 * ba;\n\t\t\t}\n\t\t\tdstContext.putImageData(dstData, offset.x, offset.y);\n\t\t}\n\t};\n};\n\nvar SvgElement = new function() {\n\tvar svg = 'http://www.w3.org/2000/svg',\n\t\txmlns = 'http://www.w3.org/2000/xmlns',\n\t\txlink = 'http://www.w3.org/1999/xlink',\n\t\tattributeNamespace = {\n\t\t\thref: xlink,\n\t\t\txlink: xmlns,\n\t\t\txmlns: xmlns + '/',\n\t\t\t'xmlns:xlink': xmlns + '/'\n\t\t};\n\n\tfunction create(tag, attributes, formatter) {\n\t\treturn set(document.createElementNS(svg, tag), attributes, formatter);\n\t}\n\n\tfunction get(node, name) {\n\t\tvar namespace = attributeNamespace[name],\n\t\t\tvalue = namespace\n\t\t\t\t? node.getAttributeNS(namespace, name)\n\t\t\t\t: node.getAttribute(name);\n\t\treturn value === 'null' ? null : value;\n\t}\n\n\tfunction set(node, attributes, formatter) {\n\t\tfor (var name in attributes) {\n\t\t\tvar value = attributes[name],\n\t\t\t\tnamespace = attributeNamespace[name];\n\t\t\tif (typeof value === 'number' && formatter)\n\t\t\t\tvalue = formatter.number(value);\n\t\t\tif (namespace) {\n\t\t\t\tnode.setAttributeNS(namespace, name, value);\n\t\t\t} else {\n\t\t\t\tnode.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\treturn {\n\t\tsvg: svg,\n\t\txmlns: xmlns,\n\t\txlink: xlink,\n\n\t\tcreate: create,\n\t\tget: get,\n\t\tset: set\n\t};\n};\n\nvar SvgStyles = Base.each({\n\tfillColor: ['fill', 'color'],\n\tfillRule: ['fill-rule', 'string'],\n\tstrokeColor: ['stroke', 'color'],\n\tstrokeWidth: ['stroke-width', 'number'],\n\tstrokeCap: ['stroke-linecap', 'string'],\n\tstrokeJoin: ['stroke-linejoin', 'string'],\n\tstrokeScaling: ['vector-effect', 'lookup', {\n\t\ttrue: 'none',\n\t\tfalse: 'non-scaling-stroke'\n\t}, function(item, value) {\n\t\treturn !value\n\t\t\t\t&& (item instanceof PathItem\n\t\t\t\t\t|| item instanceof Shape\n\t\t\t\t\t|| item instanceof TextItem);\n\t}],\n\tmiterLimit: ['stroke-miterlimit', 'number'],\n\tdashArray: ['stroke-dasharray', 'array'],\n\tdashOffset: ['stroke-dashoffset', 'number'],\n\tfontFamily: ['font-family', 'string'],\n\tfontWeight: ['font-weight', 'string'],\n\tfontSize: ['font-size', 'number'],\n\tjustification: ['text-anchor', 'lookup', {\n\t\tleft: 'start',\n\t\tcenter: 'middle',\n\t\tright: 'end'\n\t}],\n\topacity: ['opacity', 'number'],\n\tblendMode: ['mix-blend-mode', 'style']\n}, function(entry, key) {\n\tvar part = Base.capitalize(key),\n\t\tlookup = entry[2];\n\tthis[key] = {\n\t\ttype: entry[1],\n\t\tproperty: key,\n\t\tattribute: entry[0],\n\t\ttoSVG: lookup,\n\t\tfromSVG: lookup && Base.each(lookup, function(value, name) {\n\t\t\tthis[value] = name;\n\t\t}, {}),\n\t\texportFilter: entry[3],\n\t\tget: 'get' + part,\n\t\tset: 'set' + part\n\t};\n}, {});\n\nnew function() {\n\tvar formatter;\n\n\tfunction getTransform(matrix, coordinates, center) {\n\t\tvar attrs = new Base(),\n\t\t\ttrans = matrix.getTranslation();\n\t\tif (coordinates) {\n\t\t\tvar point;\n\t\t\tif (matrix.isInvertible()) {\n\t\t\t\tmatrix = matrix._shiftless();\n\t\t\t\tpoint = matrix._inverseTransform(trans);\n\t\t\t\ttrans = null;\n\t\t\t} else {\n\t\t\t\tpoint = new Point();\n\t\t\t}\n\t\t\tattrs[center ? 'cx' : 'x'] = point.x;\n\t\t\tattrs[center ? 'cy' : 'y'] = point.y;\n\t\t}\n\t\tif (!matrix.isIdentity()) {\n\t\t\tvar decomposed = matrix.decompose();\n\t\t\tif (decomposed) {\n\t\t\t\tvar parts = [],\n\t\t\t\t\tangle = decomposed.rotation,\n\t\t\t\t\tscale = decomposed.scaling,\n\t\t\t\t\tskew = decomposed.skewing;\n\t\t\t\tif (trans && !trans.isZero())\n\t\t\t\t\tparts.push('translate(' + formatter.point(trans) + ')');\n\t\t\t\tif (angle)\n\t\t\t\t\tparts.push('rotate(' + formatter.number(angle) + ')');\n\t\t\t\tif (!Numerical.isZero(scale.x - 1)\n\t\t\t\t\t\t|| !Numerical.isZero(scale.y - 1))\n\t\t\t\t\tparts.push('scale(' + formatter.point(scale) +')');\n\t\t\t\tif (skew.x)\n\t\t\t\t\tparts.push('skewX(' + formatter.number(skew.x) + ')');\n\t\t\t\tif (skew.y)\n\t\t\t\t\tparts.push('skewY(' + formatter.number(skew.y) + ')');\n\t\t\t\tattrs.transform = parts.join(' ');\n\t\t\t} else {\n\t\t\t\tattrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n\t\t\t}\n\t\t}\n\t\treturn attrs;\n\t}\n\n\tfunction exportGroup(item, options) {\n\t\tvar attrs = getTransform(item._matrix),\n\t\t\tchildren = item._children;\n\t\tvar node = SvgElement.create('g', attrs, formatter);\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i];\n\t\t\tvar childNode = exportSVG(child, options);\n\t\t\tif (childNode) {\n\t\t\t\tif (child.isClipMask()) {\n\t\t\t\t\tvar clip = SvgElement.create('clipPath');\n\t\t\t\t\tclip.appendChild(childNode);\n\t\t\t\t\tsetDefinition(child, clip, 'clip');\n\t\t\t\t\tSvgElement.set(node, {\n\t\t\t\t\t\t'clip-path': 'url(#' + clip.id + ')'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnode.appendChild(childNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\tfunction exportRaster(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tsize = item.getSize(),\n\t\t\timage = item.getImage();\n\t\tattrs.x -= size.width / 2;\n\t\tattrs.y -= size.height / 2;\n\t\tattrs.width = size.width;\n\t\tattrs.height = size.height;\n\t\tattrs.href = options.embedImages == false && image && image.src\n\t\t\t\t|| item.toDataURL();\n\t\treturn SvgElement.create('image', attrs, formatter);\n\t}\n\n\tfunction exportPath(item, options) {\n\t\tvar matchShapes = options.matchShapes;\n\t\tif (matchShapes) {\n\t\t\tvar shape = item.toShape(false);\n\t\t\tif (shape)\n\t\t\t\treturn exportShape(shape, options);\n\t\t}\n\t\tvar segments = item._segments,\n\t\t\tlength = segments.length,\n\t\t\ttype,\n\t\t\tattrs = getTransform(item._matrix);\n\t\tif (matchShapes && length >= 2 && !item.hasHandles()) {\n\t\t\tif (length > 2) {\n\t\t\t\ttype = item._closed ? 'polygon' : 'polyline';\n\t\t\t\tvar parts = [];\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tparts.push(formatter.point(segments[i]._point));\n\t\t\t\t}\n\t\t\t\tattrs.points = parts.join(' ');\n\t\t\t} else {\n\t\t\t\ttype = 'line';\n\t\t\t\tvar start = segments[0]._point,\n\t\t\t\t\tend = segments[1]._point;\n\t\t\t\tattrs.set({\n\t\t\t\t\tx1: start.x,\n\t\t\t\t\ty1: start.y,\n\t\t\t\t\tx2: end.x,\n\t\t\t\t\ty2: end.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\ttype = 'path';\n\t\t\tattrs.d = item.getPathData(null, options.precision);\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportShape(item) {\n\t\tvar type = item._type,\n\t\t\tradius = item._radius,\n\t\t\tattrs = getTransform(item._matrix, true, type !== 'rectangle');\n\t\tif (type === 'rectangle') {\n\t\t\ttype = 'rect';\n\t\t\tvar size = item._size,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tattrs.x -= width / 2;\n\t\t\tattrs.y -= height / 2;\n\t\t\tattrs.width = width;\n\t\t\tattrs.height = height;\n\t\t\tif (radius.isZero())\n\t\t\t\tradius = null;\n\t\t}\n\t\tif (radius) {\n\t\t\tif (type === 'circle') {\n\t\t\t\tattrs.r = radius;\n\t\t\t} else {\n\t\t\t\tattrs.rx = radius.width;\n\t\t\t\tattrs.ry = radius.height;\n\t\t\t}\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportCompoundPath(item, options) {\n\t\tvar attrs = getTransform(item._matrix);\n\t\tvar data = item.getPathData(null, options.precision);\n\t\tif (data)\n\t\t\tattrs.d = data;\n\t\treturn SvgElement.create('path', attrs, formatter);\n\t}\n\n\tfunction exportSymbolItem(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tdefinition = item._definition,\n\t\t\tnode = getDefinition(definition, 'symbol'),\n\t\t\tdefinitionItem = definition._item,\n\t\t\tbounds = definitionItem.getStrokeBounds();\n\t\tif (!node) {\n\t\t\tnode = SvgElement.create('symbol', {\n\t\t\t\tviewBox: formatter.rectangle(bounds)\n\t\t\t});\n\t\t\tnode.appendChild(exportSVG(definitionItem, options));\n\t\t\tsetDefinition(definition, node, 'symbol');\n\t\t}\n\t\tattrs.href = '#' + node.id;\n\t\tattrs.x += bounds.x;\n\t\tattrs.y += bounds.y;\n\t\tattrs.width = bounds.width;\n\t\tattrs.height = bounds.height;\n\t\tattrs.overflow = 'visible';\n\t\treturn SvgElement.create('use', attrs, formatter);\n\t}\n\n\tfunction exportGradient(color) {\n\t\tvar gradientNode = getDefinition(color, 'color');\n\t\tif (!gradientNode) {\n\t\t\tvar gradient = color.getGradient(),\n\t\t\t\tradial = gradient._radial,\n\t\t\t\torigin = color.getOrigin(),\n\t\t\t\tdestination = color.getDestination(),\n\t\t\t\tattrs;\n\t\t\tif (radial) {\n\t\t\t\tattrs = {\n\t\t\t\t\tcx: origin.x,\n\t\t\t\t\tcy: origin.y,\n\t\t\t\t\tr: origin.getDistance(destination)\n\t\t\t\t};\n\t\t\t\tvar highlight = color.getHighlight();\n\t\t\t\tif (highlight) {\n\t\t\t\t\tattrs.fx = highlight.x;\n\t\t\t\t\tattrs.fy = highlight.y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tattrs = {\n\t\t\t\t\tx1: origin.x,\n\t\t\t\t\ty1: origin.y,\n\t\t\t\t\tx2: destination.x,\n\t\t\t\t\ty2: destination.y\n\t\t\t\t};\n\t\t\t}\n\t\t\tattrs.gradientUnits = 'userSpaceOnUse';\n\t\t\tgradientNode = SvgElement.create((radial ? 'radial' : 'linear')\n\t\t\t\t\t+ 'Gradient', attrs, formatter);\n\t\t\tvar stops = gradient._stops;\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\tstopColor = stop._color,\n\t\t\t\t\talpha = stopColor.getAlpha(),\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tattrs = {\n\t\t\t\t\toffset: offset == null ? i / (l - 1) : offset\n\t\t\t\t};\n\t\t\t\tif (stopColor)\n\t\t\t\t\tattrs['stop-color'] = stopColor.toCSS(true);\n\t\t\t\tif (alpha < 1)\n\t\t\t\t\tattrs['stop-opacity'] = alpha;\n\t\t\t\tgradientNode.appendChild(\n\t\t\t\t\t\tSvgElement.create('stop', attrs, formatter));\n\t\t\t}\n\t\t\tsetDefinition(color, gradientNode, 'color');\n\t\t}\n\t\treturn 'url(#' + gradientNode.id + ')';\n\t}\n\n\tfunction exportText(item) {\n\t\tvar node = SvgElement.create('text', getTransform(item._matrix, true),\n\t\t\t\tformatter);\n\t\tnode.textContent = item._content;\n\t\treturn node;\n\t}\n\n\tvar exporters = {\n\t\tGroup: exportGroup,\n\t\tLayer: exportGroup,\n\t\tRaster: exportRaster,\n\t\tPath: exportPath,\n\t\tShape: exportShape,\n\t\tCompoundPath: exportCompoundPath,\n\t\tSymbolItem: exportSymbolItem,\n\t\tPointText: exportText\n\t};\n\n\tfunction applyStyle(item, node, isRoot) {\n\t\tvar attrs = {},\n\t\t\tparent = !isRoot && item.getParent(),\n\t\t\tstyle = [];\n\n\t\tif (item._name != null)\n\t\t\tattrs.id = item._name;\n\n\t\tBase.each(SvgStyles, function(entry) {\n\t\t\tvar get = entry.get,\n\t\t\t\ttype = entry.type,\n\t\t\t\tvalue = item[get]();\n\t\t\tif (entry.exportFilter\n\t\t\t\t\t? entry.exportFilter(item, value)\n\t\t\t\t\t: !parent || !Base.equals(parent[get](), value)) {\n\t\t\t\tif (type === 'color' && value != null) {\n\t\t\t\t\tvar alpha = value.getAlpha();\n\t\t\t\t\tif (alpha < 1)\n\t\t\t\t\t\tattrs[entry.attribute + '-opacity'] = alpha;\n\t\t\t\t}\n\t\t\t\tif (type === 'style') {\n\t\t\t\t\tstyle.push(entry.attribute + ': ' + value);\n\t\t\t\t} else {\n\t\t\t\t\tattrs[entry.attribute] = value == null ? 'none'\n\t\t\t\t\t\t\t: type === 'color' ? value.gradient\n\t\t\t\t\t\t\t\t? exportGradient(value, item)\n\t\t\t\t\t\t\t\t: value.toCSS(true)\n\t\t\t\t\t\t\t: type === 'array' ? value.join(',')\n\t\t\t\t\t\t\t: type === 'lookup' ? entry.toSVG[value]\n\t\t\t\t\t\t\t: value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (style.length)\n\t\t\tattrs.style = style.join(';');\n\n\t\tif (attrs.opacity === 1)\n\t\t\tdelete attrs.opacity;\n\n\t\tif (!item._visible)\n\t\t\tattrs.visibility = 'hidden';\n\n\t\treturn SvgElement.set(node, attrs, formatter);\n\t}\n\n\tvar definitions;\n\tfunction getDefinition(item, type) {\n\t\tif (!definitions)\n\t\t\tdefinitions = { ids: {}, svgs: {} };\n\t\treturn item && definitions.svgs[type + '-'\n\t\t\t\t+ (item._id || item.__id || (item.__id = UID.get('svg')))];\n\t}\n\n\tfunction setDefinition(item, node, type) {\n\t\tif (!definitions)\n\t\t\tgetDefinition();\n\t\tvar typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n\t\tnode.id = type + '-' + typeId;\n\t\tdefinitions.svgs[type + '-' + (item._id || item.__id)] = node;\n\t}\n\n\tfunction exportDefinitions(node, options) {\n\t\tvar svg = node,\n\t\t\tdefs = null;\n\t\tif (definitions) {\n\t\t\tsvg = node.nodeName.toLowerCase() === 'svg' && node;\n\t\t\tfor (var i in definitions.svgs) {\n\t\t\t\tif (!defs) {\n\t\t\t\t\tif (!svg) {\n\t\t\t\t\t\tsvg = SvgElement.create('svg');\n\t\t\t\t\t\tsvg.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tdefs = svg.insertBefore(SvgElement.create('defs'),\n\t\t\t\t\t\t\tsvg.firstChild);\n\t\t\t\t}\n\t\t\t\tdefs.appendChild(definitions.svgs[i]);\n\t\t\t}\n\t\t\tdefinitions = null;\n\t\t}\n\t\treturn options.asString\n\t\t\t\t? new self.XMLSerializer().serializeToString(svg)\n\t\t\t\t: svg;\n\t}\n\n\tfunction exportSVG(item, options, isRoot) {\n\t\tvar exporter = exporters[item._class],\n\t\t\tnode = exporter && exporter(item, options);\n\t\tif (node) {\n\t\t\tvar onExport = options.onExport;\n\t\t\tif (onExport)\n\t\t\t\tnode = onExport(item, node, options) || node;\n\t\t\tvar data = JSON.stringify(item._data);\n\t\t\tif (data && data !== '{}' && data !== 'null')\n\t\t\t\tnode.setAttribute('data-paper-data', data);\n\t\t}\n\t\treturn node && applyStyle(item, node, isRoot);\n\t}\n\n\tfunction setOptions(options) {\n\t\tif (!options)\n\t\t\toptions = {};\n\t\tformatter = new Formatter(options.precision);\n\t\treturn options;\n\t}\n\n\tItem.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\treturn exportDefinitions(exportSVG(this, options, true), options);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\tvar children = this._children,\n\t\t\t\tview = this.getView(),\n\t\t\t\tbounds = Base.pick(options.bounds, 'view'),\n\t\t\t\tmx = options.matrix || bounds === 'view' && view._matrix,\n\t\t\t\tmatrix = mx && Matrix.read([mx]),\n\t\t\t\trect = bounds === 'view'\n\t\t\t\t\t? new Rectangle([0, 0], view.getViewSize())\n\t\t\t\t\t: bounds === 'content'\n\t\t\t\t\t\t? Item._getBounds(children, matrix, { stroke: true })\n\t\t\t\t\t\t\t.rect\n\t\t\t\t\t\t: Rectangle.read([bounds], 0, { readNull: true }),\n\t\t\t\tattrs = {\n\t\t\t\t\tversion: '1.1',\n\t\t\t\t\txmlns: SvgElement.svg,\n\t\t\t\t\t'xmlns:xlink': SvgElement.xlink,\n\t\t\t\t};\n\t\t\tif (rect) {\n\t\t\t\tattrs.width = rect.width;\n\t\t\t\tattrs.height = rect.height;\n\t\t\t\tif (rect.x || rect.x === 0 || rect.y || rect.y === 0)\n\t\t\t\t\tattrs.viewBox = formatter.rectangle(rect);\n\t\t\t}\n\t\t\tvar node = SvgElement.create('svg', attrs, formatter),\n\t\t\t\tparent = node;\n\t\t\tif (matrix && !matrix.isIdentity()) {\n\t\t\t\tparent = node.appendChild(SvgElement.create('g',\n\t\t\t\t\t\tgetTransform(matrix), formatter));\n\t\t\t}\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tparent.appendChild(exportSVG(children[i], options, true));\n\t\t\t}\n\t\t\treturn exportDefinitions(node, options);\n\t\t}\n\t});\n};\n\nnew function() {\n\n\tvar definitions = {},\n\t\trootSize;\n\n\tfunction getValue(node, name, isString, allowNull, allowPercent,\n\t\t\tdefaultValue) {\n\t\tvar value = SvgElement.get(node, name) || defaultValue,\n\t\t\tres = value == null\n\t\t\t\t? allowNull\n\t\t\t\t\t? null\n\t\t\t\t\t: isString ? '' : 0\n\t\t\t\t: isString\n\t\t\t\t\t? value\n\t\t\t\t\t: parseFloat(value);\n\t\treturn /%\\s*$/.test(value)\n\t\t\t? (res / 100) * (allowPercent ? 1\n\t\t\t\t: rootSize[/x|^width/.test(name) ? 'width' : 'height'])\n\t\t\t: res;\n\t}\n\n\tfunction getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n\t\tx = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n\t\ty = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n\t\treturn allowNull && (x == null || y == null) ? null\n\t\t\t\t: new Point(x, y);\n\t}\n\n\tfunction getSize(node, w, h, allowNull, allowPercent) {\n\t\tw = getValue(node, w || 'width', false, allowNull, allowPercent);\n\t\th = getValue(node, h || 'height', false, allowNull, allowPercent);\n\t\treturn allowNull && (w == null || h == null) ? null\n\t\t\t\t: new Size(w, h);\n\t}\n\n\tfunction convertValue(value, type, lookup) {\n\t\treturn value === 'none' ? null\n\t\t\t\t: type === 'number' ? parseFloat(value)\n\t\t\t\t: type === 'array' ?\n\t\t\t\t\tvalue ? value.split(/[\\s,]+/g).map(parseFloat) : []\n\t\t\t\t: type === 'color' ? getDefinition(value) || value\n\t\t\t\t: type === 'lookup' ? lookup[value]\n\t\t\t\t: value;\n\t}\n\n\tfunction importGroup(node, type, options, isRoot) {\n\t\tvar nodes = node.childNodes,\n\t\t\tisClip = type === 'clippath',\n\t\t\tisDefs = type === 'defs',\n\t\t\titem = new Group(),\n\t\t\tproject = item._project,\n\t\t\tcurrentStyle = project._currentStyle,\n\t\t\tchildren = [];\n\t\tif (!isClip && !isDefs) {\n\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tproject._currentStyle = item._style.clone();\n\t\t}\n\t\tif (isRoot) {\n\t\t\tvar defs = node.querySelectorAll('defs');\n\t\t\tfor (var i = 0, l = defs.length; i < l; i++) {\n\t\t\t\timportNode(defs[i], options, false);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\tvar childNode = nodes[i],\n\t\t\t\tchild;\n\t\t\tif (childNode.nodeType === 1\n\t\t\t\t\t&& !/^defs$/i.test(childNode.nodeName)\n\t\t\t\t\t&& (child = importNode(childNode, options, false))\n\t\t\t\t\t&& !(child instanceof SymbolDefinition))\n\t\t\t\tchildren.push(child);\n\t\t}\n\t\titem.addChildren(children);\n\t\tif (isClip)\n\t\t\titem = applyAttributes(item.reduce(), node, isRoot);\n\t\tproject._currentStyle = currentStyle;\n\t\tif (isClip || isDefs) {\n\t\t\titem.remove();\n\t\t\titem = null;\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importPoly(node, type) {\n\t\tvar coords = node.getAttribute('points').match(\n\t\t\t\t\t/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n\t\t\tpoints = [];\n\t\tfor (var i = 0, l = coords.length; i < l; i += 2)\n\t\t\tpoints.push(new Point(\n\t\t\t\t\tparseFloat(coords[i]),\n\t\t\t\t\tparseFloat(coords[i + 1])));\n\t\tvar path = new Path(points);\n\t\tif (type === 'polygon')\n\t\t\tpath.closePath();\n\t\treturn path;\n\t}\n\n\tfunction importPath(node) {\n\t\treturn PathItem.create(node.getAttribute('d'));\n\t}\n\n\tfunction importGradient(node, type) {\n\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\tradial = type === 'radialgradient',\n\t\t\tgradient;\n\t\tif (id) {\n\t\t\tgradient = definitions[id].getGradient();\n\t\t\tif (gradient._radial ^ radial) {\n\t\t\t\tgradient = gradient.clone();\n\t\t\t\tgradient._radial = radial;\n\t\t\t}\n\t\t} else {\n\t\t\tvar nodes = node.childNodes,\n\t\t\t\tstops = [];\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\tstops.push(applyAttributes(new GradientStop(), child));\n\t\t\t}\n\t\t\tgradient = new Gradient(stops, radial);\n\t\t}\n\t\tvar origin, destination, highlight,\n\t\t\tscaleToBounds = getValue(node, 'gradientUnits', true) !==\n\t\t\t\t'userSpaceOnUse';\n\t\tif (radial) {\n\t\t\torigin = getPoint(node, 'cx', 'cy', false, scaleToBounds,\n\t\t\t\t'50%', '50%');\n\t\t\tdestination = origin.add(\n\t\t\t\tgetValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n\t\t\thighlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n\t\t} else {\n\t\t\torigin = getPoint(node, 'x1', 'y1', false, scaleToBounds,\n\t\t\t\t'0%', '0%');\n\t\t\tdestination = getPoint(node, 'x2', 'y2', false, scaleToBounds,\n\t\t\t\t'100%', '0%');\n\t\t}\n\t\tvar color = applyAttributes(\n\t\t\t\tnew Color(gradient, origin, destination, highlight), node);\n\t\tcolor._scaleToBounds = scaleToBounds;\n\t\treturn null;\n\t}\n\n\tvar importers = {\n\t\t'#document': function (node, type, options, isRoot) {\n\t\t\tvar nodes = node.childNodes;\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\treturn importNode(child, options, isRoot);\n\t\t\t}\n\t\t},\n\t\tg: importGroup,\n\t\tsvg: importGroup,\n\t\tclippath: importGroup,\n\t\tpolygon: importPoly,\n\t\tpolyline: importPoly,\n\t\tpath: importPath,\n\t\tlineargradient: importGradient,\n\t\tradialgradient: importGradient,\n\n\t\timage: function (node) {\n\t\t\tvar raster = new Raster(getValue(node, 'href', true));\n\t\t\traster.on('load', function() {\n\t\t\t\tvar size = getSize(node);\n\t\t\t\tthis.setSize(size);\n\t\t\t\tvar center = getPoint(node).add(size.divide(2));\n\t\t\t\tthis._matrix.append(new Matrix().translate(center));\n\t\t\t});\n\t\t\treturn raster;\n\t\t},\n\n\t\tsymbol: function(node, type, options, isRoot) {\n\t\t\treturn new SymbolDefinition(\n\t\t\t\t\timportGroup(node, type, options, isRoot), true);\n\t\t},\n\n\t\tdefs: importGroup,\n\n\t\tuse: function(node) {\n\t\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\t\tdefinition = definitions[id],\n\t\t\t\tpoint = getPoint(node);\n\t\t\treturn definition\n\t\t\t\t\t? definition instanceof SymbolDefinition\n\t\t\t\t\t\t? definition.place(point)\n\t\t\t\t\t\t: definition.clone().translate(point)\n\t\t\t\t\t: null;\n\t\t},\n\n\t\tcircle: function(node) {\n\t\t\treturn new Shape.Circle(\n\t\t\t\t\tgetPoint(node, 'cx', 'cy'),\n\t\t\t\t\tgetValue(node, 'r'));\n\t\t},\n\n\t\tellipse: function(node) {\n\t\t\treturn new Shape.Ellipse({\n\t\t\t\tcenter: getPoint(node, 'cx', 'cy'),\n\t\t\t\tradius: getSize(node, 'rx', 'ry')\n\t\t\t});\n\t\t},\n\n\t\trect: function(node) {\n\t\t\treturn new Shape.Rectangle(new Rectangle(\n\t\t\t\t\t\tgetPoint(node),\n\t\t\t\t\t\tgetSize(node)\n\t\t\t\t\t), getSize(node, 'rx', 'ry'));\n\t\t\t},\n\n\t\tline: function(node) {\n\t\t\treturn new Path.Line(\n\t\t\t\t\tgetPoint(node, 'x1', 'y1'),\n\t\t\t\t\tgetPoint(node, 'x2', 'y2'));\n\t\t},\n\n\t\ttext: function(node) {\n\t\t\tvar text = new PointText(getPoint(node).add(\n\t\t\t\t\tgetPoint(node, 'dx', 'dy')));\n\t\t\ttext.setContent(node.textContent.trim() || '');\n\t\t\treturn text;\n\t\t},\n\n\t\tswitch: importGroup\n\t};\n\n\tfunction applyTransform(item, value, name, node) {\n\t\tif (item.transform) {\n\t\t\tvar transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n\t\t\t\tmatrix = new Matrix();\n\t\t\tfor (var i = 0, l = transforms.length; i < l; i++) {\n\t\t\t\tvar transform = transforms[i];\n\t\t\t\tif (!transform)\n\t\t\t\t\tbreak;\n\t\t\t\tvar parts = transform.split(/\\(\\s*/),\n\t\t\t\t\tcommand = parts[0],\n\t\t\t\t\tv = parts[1].split(/[\\s,]+/g);\n\t\t\t\tfor (var j = 0, m = v.length; j < m; j++)\n\t\t\t\t\tv[j] = parseFloat(v[j]);\n\t\t\t\tswitch (command) {\n\t\t\t\tcase 'matrix':\n\t\t\t\t\tmatrix.append(\n\t\t\t\t\t\t\tnew Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rotate':\n\t\t\t\t\tmatrix.rotate(v[0], v[1] || 0, v[2] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'translate':\n\t\t\t\t\tmatrix.translate(v[0], v[1] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scale':\n\t\t\t\t\tmatrix.scale(v);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewX':\n\t\t\t\t\tmatrix.skew(v[0], 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewY':\n\t\t\t\t\tmatrix.skew(0, v[0]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.transform(matrix);\n\t\t}\n\t}\n\n\tfunction applyOpacity(item, value, name) {\n\t\tvar key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n\t\t\tcolor = item[key] && item[key]();\n\t\tif (color)\n\t\t\tcolor.setAlpha(parseFloat(value));\n\t}\n\n\tvar attributes = Base.set(Base.each(SvgStyles, function(entry) {\n\t\tthis[entry.attribute] = function(item, value) {\n\t\t\tif (item[entry.set]) {\n\t\t\t\titem[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\t\t\t\tif (entry.type === 'color') {\n\t\t\t\t\tvar color = item[entry.get]();\n\t\t\t\t\tif (color) {\n\t\t\t\t\t\tif (color._scaleToBounds) {\n\t\t\t\t\t\t\tvar bounds = item.getBounds();\n\t\t\t\t\t\t\tcolor.transform(new Matrix()\n\t\t\t\t\t\t\t\t.translate(bounds.getPoint())\n\t\t\t\t\t\t\t\t.scale(bounds.getSize()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}, {}), {\n\t\tid: function(item, value) {\n\t\t\tdefinitions[value] = item;\n\t\t\tif (item.setName)\n\t\t\t\titem.setName(value);\n\t\t},\n\n\t\t'clip-path': function(item, value) {\n\t\t\tvar clip = getDefinition(value);\n\t\t\tif (clip) {\n\t\t\t\tclip = clip.clone();\n\t\t\t\tclip.setClipMask(true);\n\t\t\t\tif (item instanceof Group) {\n\t\t\t\t\titem.insertChild(0, clip);\n\t\t\t\t} else {\n\t\t\t\t\treturn new Group(clip, item);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgradientTransform: applyTransform,\n\t\ttransform: applyTransform,\n\n\t\t'fill-opacity': applyOpacity,\n\t\t'stroke-opacity': applyOpacity,\n\n\t\tvisibility: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value === 'visible');\n\t\t},\n\n\t\tdisplay: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value !== null);\n\t\t},\n\n\t\t'stop-color': function(item, value) {\n\t\t\tif (item.setColor)\n\t\t\t\titem.setColor(value);\n\t\t},\n\n\t\t'stop-opacity': function(item, value) {\n\t\t\tif (item._color)\n\t\t\t\titem._color.setAlpha(parseFloat(value));\n\t\t},\n\n\t\toffset: function(item, value) {\n\t\t\tif (item.setOffset) {\n\t\t\t\tvar percent = value.match(/(.*)%$/);\n\t\t\t\titem.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n\t\t\t}\n\t\t},\n\n\t\tviewBox: function(item, value, name, node, styles) {\n\t\t\tvar rect = new Rectangle(convertValue(value, 'array')),\n\t\t\t\tsize = getSize(node, null, null, true),\n\t\t\t\tgroup,\n\t\t\t\tmatrix;\n\t\t\tif (item instanceof Group) {\n\t\t\t\tvar scale = size ? size.divide(rect.getSize()) : 1,\n\t\t\t\tmatrix = new Matrix().scale(scale)\n\t\t\t\t\t\t.translate(rect.getPoint().negate());\n\t\t\t\tgroup = item;\n\t\t\t} else if (item instanceof SymbolDefinition) {\n\t\t\t\tif (size)\n\t\t\t\t\trect.setSize(size);\n\t\t\t\tgroup = item._item;\n\t\t\t}\n\t\t\tif (group)  {\n\t\t\t\tif (getAttribute(node, 'overflow', styles) !== 'visible') {\n\t\t\t\t\tvar clip = new Shape.Rectangle(rect);\n\t\t\t\t\tclip.setClipMask(true);\n\t\t\t\t\tgroup.addChild(clip);\n\t\t\t\t}\n\t\t\t\tif (matrix)\n\t\t\t\t\tgroup.transform(matrix);\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getAttribute(node, name, styles) {\n\t\tvar attr = node.attributes[name],\n\t\t\tvalue = attr && attr.value;\n\t\tif (!value && node.style) {\n\t\t\tvar style = Base.camelize(name);\n\t\t\tvalue = node.style[style];\n\t\t\tif (!value && styles.node[style] !== styles.parent[style])\n\t\t\t\tvalue = styles.node[style];\n\t\t}\n\t\treturn !value ? undefined\n\t\t\t\t: value === 'none' ? null\n\t\t\t\t: value;\n\t}\n\n\tfunction applyAttributes(item, node, isRoot) {\n\t\tvar parent = node.parentNode,\n\t\t\tstyles = {\n\t\t\t\tnode: DomElement.getStyles(node) || {},\n\t\t\t\tparent: !isRoot && !/^defs$/i.test(parent.tagName)\n\t\t\t\t\t\t&& DomElement.getStyles(parent) || {}\n\t\t\t};\n\t\tBase.each(attributes, function(apply, name) {\n\t\t\tvar value = getAttribute(node, name, styles);\n\t\t\titem = value !== undefined\n\t\t\t\t\t&& apply(item, value, name, node, styles) || item;\n\t\t});\n\t\treturn item;\n\t}\n\n\tfunction getDefinition(value) {\n\t\tvar match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n\t\t\tname = match && match[1],\n\t\t\tres = name && definitions[window\n\t\t\t\t\t? name.replace(window.location.href.split('#')[0] + '#', '')\n\t\t\t\t\t: name];\n\t\tif (res && res._scaleToBounds) {\n\t\t\tres = res.clone();\n\t\t\tres._scaleToBounds = true;\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction importNode(node, options, isRoot) {\n\t\tvar type = node.nodeName.toLowerCase(),\n\t\t\tisElement = type !== '#document',\n\t\t\tbody = document.body,\n\t\t\tcontainer,\n\t\t\tparent,\n\t\t\tnext;\n\t\tif (isRoot && isElement) {\n\t\t\trootSize = paper.getView().getSize();\n\t\t\trootSize = getSize(node, null, null, true) || rootSize;\n\t\t\tcontainer = SvgElement.create('svg', {\n\t\t\t\tstyle: 'stroke-width: 1px; stroke-miterlimit: 10'\n\t\t\t});\n\t\t\tparent = node.parentNode;\n\t\t\tnext = node.nextSibling;\n\t\t\tcontainer.appendChild(node);\n\t\t\tbody.appendChild(container);\n\t\t}\n\t\tvar settings = paper.settings,\n\t\t\tapplyMatrix = settings.applyMatrix,\n\t\t\tinsertItems = settings.insertItems;\n\t\tsettings.applyMatrix = false;\n\t\tsettings.insertItems = false;\n\t\tvar importer = importers[type],\n\t\t\titem = importer && importer(node, type, options, isRoot) || null;\n\t\tsettings.insertItems = insertItems;\n\t\tsettings.applyMatrix = applyMatrix;\n\t\tif (item) {\n\t\t\tif (isElement && !(item instanceof Group))\n\t\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tvar onImport = options.onImport,\n\t\t\t\tdata = isElement && node.getAttribute('data-paper-data');\n\t\t\tif (onImport)\n\t\t\t\titem = onImport(node, item, options) || item;\n\t\t\tif (options.expandShapes && item instanceof Shape) {\n\t\t\t\titem.remove();\n\t\t\t\titem = item.toPath();\n\t\t\t}\n\t\t\tif (data)\n\t\t\t\titem._data = JSON.parse(data);\n\t\t}\n\t\tif (container) {\n\t\t\tbody.removeChild(container);\n\t\t\tif (parent) {\n\t\t\t\tif (next) {\n\t\t\t\t\tparent.insertBefore(node, next);\n\t\t\t\t} else {\n\t\t\t\t\tparent.appendChild(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (isRoot) {\n\t\t\tdefinitions = {};\n\t\t\tif (item && Base.pick(options.applyMatrix, applyMatrix))\n\t\t\t\titem.matrix.apply(true, true);\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importSVG(source, options, owner) {\n\t\tif (!source)\n\t\t\treturn null;\n\t\toptions = typeof options === 'function' ? { onLoad: options }\n\t\t\t\t: options || {};\n\t\tvar scope = paper,\n\t\t\titem = null;\n\n\t\tfunction onLoad(svg) {\n\t\t\ttry {\n\t\t\t\tvar node = typeof svg === 'object'\n\t\t\t\t\t? svg\n\t\t\t\t\t: new self.DOMParser().parseFromString(\n\t\t\t\t\t\tsvg.trim(),\n\t\t\t\t\t\t'image/svg+xml'\n\t\t\t\t\t);\n\t\t\t\tif (!node.nodeName) {\n\t\t\t\t\tnode = null;\n\t\t\t\t\tthrow new Error('Unsupported SVG source: ' + source);\n\t\t\t\t}\n\t\t\t\tpaper = scope;\n\t\t\t\titem = importNode(node, options, true);\n\t\t\t\tif (!options || options.insert !== false) {\n\t\t\t\t\towner._insertItem(undefined, item);\n\t\t\t\t}\n\t\t\t\tvar onLoad = options.onLoad;\n\t\t\t\tif (onLoad)\n\t\t\t\t\tonLoad(item, svg);\n\t\t\t} catch (e) {\n\t\t\t\tonError(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction onError(message, status) {\n\t\t\tvar onError = options.onError;\n\t\t\tif (onError) {\n\t\t\t\tonError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n\t\t\tvar node = document.getElementById(source);\n\t\t\tif (node) {\n\t\t\t\tonLoad(node);\n\t\t\t} else {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: source,\n\t\t\t\t\tasync: true,\n\t\t\t\t\tonLoad: onLoad,\n\t\t\t\t\tonError: onError\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (typeof File !== 'undefined' && source instanceof File) {\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function() {\n\t\t\t\tonLoad(reader.result);\n\t\t\t};\n\t\t\treader.onerror = function() {\n\t\t\t\tonError(reader.error);\n\t\t\t};\n\t\t\treturn reader.readAsText(source);\n\t\t} else {\n\t\t\tonLoad(source);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tItem.inject({\n\t\timportSVG: function(node, options) {\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\timportSVG: function(node, options) {\n\t\t\tthis.activate();\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n};\n\nBase.exports.PaperScript = function() {\n\tvar global = this,\n\t\tacorn = global.acorn;\n\tif (!acorn && typeof require !== 'undefined') {\n\t\ttry { acorn = require('acorn'); } catch(e) {}\n\t}\n\tif (!acorn) {\n\t\tvar exports, module;\n\t\tacorn = exports = module = {};\n\n(function(root, mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n  if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n  mod(root.acorn || (root.acorn = {}));\n})(this, function(exports) {\n  \"use strict\";\n\n  exports.version = \"0.5.0\";\n\n  var options, input, inputLen, sourceFile;\n\n  exports.parse = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\treturn parseTopLevel(options.program);\n  };\n\n  var defaultOptions = exports.defaultOptions = {\n\tecmaVersion: 5,\n\tstrictSemicolons: false,\n\tallowTrailingCommas: true,\n\tforbidReserved: false,\n\tallowReturnOutsideFunction: false,\n\tlocations: false,\n\tonComment: null,\n\tranges: false,\n\tprogram: null,\n\tsourceFile: null,\n\tdirectSourceFile: null\n  };\n\n  function setOptions(opts) {\n\toptions = opts || {};\n\tfor (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt))\n\t  options[opt] = defaultOptions[opt];\n\tsourceFile = options.sourceFile || null;\n  }\n\n  var getLineInfo = exports.getLineInfo = function(input, offset) {\n\tfor (var line = 1, cur = 0;;) {\n\t  lineBreak.lastIndex = cur;\n\t  var match = lineBreak.exec(input);\n\t  if (match && match.index < offset) {\n\t\t++line;\n\t\tcur = match.index + match[0].length;\n\t  } else break;\n\t}\n\treturn {line: line, column: offset - cur};\n  };\n\n  exports.tokenize = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\n\tvar t = {};\n\tfunction getToken(forceRegexp) {\n\t  lastEnd = tokEnd;\n\t  readToken(forceRegexp);\n\t  t.start = tokStart; t.end = tokEnd;\n\t  t.startLoc = tokStartLoc; t.endLoc = tokEndLoc;\n\t  t.type = tokType; t.value = tokVal;\n\t  return t;\n\t}\n\tgetToken.jumpTo = function(pos, reAllowed) {\n\t  tokPos = pos;\n\t  if (options.locations) {\n\t\ttokCurLine = 1;\n\t\ttokLineStart = lineBreak.lastIndex = 0;\n\t\tvar match;\n\t\twhile ((match = lineBreak.exec(input)) && match.index < pos) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = match.index + match[0].length;\n\t\t}\n\t  }\n\t  tokRegexpAllowed = reAllowed;\n\t  skipSpace();\n\t};\n\treturn getToken;\n  };\n\n  var tokPos;\n\n  var tokStart, tokEnd;\n\n  var tokStartLoc, tokEndLoc;\n\n  var tokType, tokVal;\n\n  var tokRegexpAllowed;\n\n  var tokCurLine, tokLineStart;\n\n  var lastStart, lastEnd, lastEndLoc;\n\n  var inFunction, labels, strict;\n\n  function raise(pos, message) {\n\tvar loc = getLineInfo(input, pos);\n\tmessage += \" (\" + loc.line + \":\" + loc.column + \")\";\n\tvar err = new SyntaxError(message);\n\terr.pos = pos; err.loc = loc; err.raisedAt = tokPos;\n\tthrow err;\n  }\n\n  var empty = [];\n\n  var _num = {type: \"num\"}, _regexp = {type: \"regexp\"}, _string = {type: \"string\"};\n  var _name = {type: \"name\"}, _eof = {type: \"eof\"};\n\n  var _break = {keyword: \"break\"}, _case = {keyword: \"case\", beforeExpr: true}, _catch = {keyword: \"catch\"};\n  var _continue = {keyword: \"continue\"}, _debugger = {keyword: \"debugger\"}, _default = {keyword: \"default\"};\n  var _do = {keyword: \"do\", isLoop: true}, _else = {keyword: \"else\", beforeExpr: true};\n  var _finally = {keyword: \"finally\"}, _for = {keyword: \"for\", isLoop: true}, _function = {keyword: \"function\"};\n  var _if = {keyword: \"if\"}, _return = {keyword: \"return\", beforeExpr: true}, _switch = {keyword: \"switch\"};\n  var _throw = {keyword: \"throw\", beforeExpr: true}, _try = {keyword: \"try\"}, _var = {keyword: \"var\"};\n  var _while = {keyword: \"while\", isLoop: true}, _with = {keyword: \"with\"}, _new = {keyword: \"new\", beforeExpr: true};\n  var _this = {keyword: \"this\"};\n\n  var _null = {keyword: \"null\", atomValue: null}, _true = {keyword: \"true\", atomValue: true};\n  var _false = {keyword: \"false\", atomValue: false};\n\n  var _in = {keyword: \"in\", binop: 7, beforeExpr: true};\n\n  var keywordTypes = {\"break\": _break, \"case\": _case, \"catch\": _catch,\n\t\t\t\t\t  \"continue\": _continue, \"debugger\": _debugger, \"default\": _default,\n\t\t\t\t\t  \"do\": _do, \"else\": _else, \"finally\": _finally, \"for\": _for,\n\t\t\t\t\t  \"function\": _function, \"if\": _if, \"return\": _return, \"switch\": _switch,\n\t\t\t\t\t  \"throw\": _throw, \"try\": _try, \"var\": _var, \"while\": _while, \"with\": _with,\n\t\t\t\t\t  \"null\": _null, \"true\": _true, \"false\": _false, \"new\": _new, \"in\": _in,\n\t\t\t\t\t  \"instanceof\": {keyword: \"instanceof\", binop: 7, beforeExpr: true}, \"this\": _this,\n\t\t\t\t\t  \"typeof\": {keyword: \"typeof\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"void\": {keyword: \"void\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"delete\": {keyword: \"delete\", prefix: true, beforeExpr: true}};\n\n  var _bracketL = {type: \"[\", beforeExpr: true}, _bracketR = {type: \"]\"}, _braceL = {type: \"{\", beforeExpr: true};\n  var _braceR = {type: \"}\"}, _parenL = {type: \"(\", beforeExpr: true}, _parenR = {type: \")\"};\n  var _comma = {type: \",\", beforeExpr: true}, _semi = {type: \";\", beforeExpr: true};\n  var _colon = {type: \":\", beforeExpr: true}, _dot = {type: \".\"}, _question = {type: \"?\", beforeExpr: true};\n\n  var _slash = {binop: 10, beforeExpr: true}, _eq = {isAssign: true, beforeExpr: true};\n  var _assign = {isAssign: true, beforeExpr: true};\n  var _incDec = {postfix: true, prefix: true, isUpdate: true}, _prefix = {prefix: true, beforeExpr: true};\n  var _logicalOR = {binop: 1, beforeExpr: true};\n  var _logicalAND = {binop: 2, beforeExpr: true};\n  var _bitwiseOR = {binop: 3, beforeExpr: true};\n  var _bitwiseXOR = {binop: 4, beforeExpr: true};\n  var _bitwiseAND = {binop: 5, beforeExpr: true};\n  var _equality = {binop: 6, beforeExpr: true};\n  var _relational = {binop: 7, beforeExpr: true};\n  var _bitShift = {binop: 8, beforeExpr: true};\n  var _plusMin = {binop: 9, prefix: true, beforeExpr: true};\n  var _multiplyModulo = {binop: 10, beforeExpr: true};\n\n  exports.tokTypes = {bracketL: _bracketL, bracketR: _bracketR, braceL: _braceL, braceR: _braceR,\n\t\t\t\t\t  parenL: _parenL, parenR: _parenR, comma: _comma, semi: _semi, colon: _colon,\n\t\t\t\t\t  dot: _dot, question: _question, slash: _slash, eq: _eq, name: _name, eof: _eof,\n\t\t\t\t\t  num: _num, regexp: _regexp, string: _string};\n  for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n  function makePredicate(words) {\n\twords = words.split(\" \");\n\tvar f = \"\", cats = [];\n\tout: for (var i = 0; i < words.length; ++i) {\n\t  for (var j = 0; j < cats.length; ++j)\n\t\tif (cats[j][0].length == words[i].length) {\n\t\t  cats[j].push(words[i]);\n\t\t  continue out;\n\t\t}\n\t  cats.push([words[i]]);\n\t}\n\tfunction compareTo(arr) {\n\t  if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n\t  f += \"switch(str){\";\n\t  for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n\t  f += \"return true}return false;\";\n\t}\n\n\tif (cats.length > 3) {\n\t  cats.sort(function(a, b) {return b.length - a.length;});\n\t  f += \"switch(str.length){\";\n\t  for (var i = 0; i < cats.length; ++i) {\n\t\tvar cat = cats[i];\n\t\tf += \"case \" + cat[0].length + \":\";\n\t\tcompareTo(cat);\n\t  }\n\t  f += \"}\";\n\n\t} else {\n\t  compareTo(words);\n\t}\n\treturn new Function(\"str\", f);\n  }\n\n  var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n\n  var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n\n  var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n\n  var isStrictBadIdWord = makePredicate(\"eval arguments\");\n\n  var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n\n  var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n  var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n  var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n  var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n  var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n  var newline = /[\\n\\r\\u2028\\u2029]/;\n\n  var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n  var isIdentifierStart = exports.isIdentifierStart = function(code) {\n\tif (code < 65) return code === 36;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n  };\n\n  var isIdentifierChar = exports.isIdentifierChar = function(code) {\n\tif (code < 48) return code === 36;\n\tif (code < 58) return true;\n\tif (code < 65) return false;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n  };\n\n  function line_loc_t() {\n\tthis.line = tokCurLine;\n\tthis.column = tokPos - tokLineStart;\n  }\n\n  function initTokenState() {\n\ttokCurLine = 1;\n\ttokPos = tokLineStart = 0;\n\ttokRegexpAllowed = true;\n\tskipSpace();\n  }\n\n  function finishToken(type, val) {\n\ttokEnd = tokPos;\n\tif (options.locations) tokEndLoc = new line_loc_t;\n\ttokType = type;\n\tskipSpace();\n\ttokVal = val;\n\ttokRegexpAllowed = type.beforeExpr;\n  }\n\n  function skipBlockComment() {\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar start = tokPos, end = input.indexOf(\"*/\", tokPos += 2);\n\tif (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n\ttokPos = end + 2;\n\tif (options.locations) {\n\t  lineBreak.lastIndex = start;\n\t  var match;\n\t  while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n\t\t++tokCurLine;\n\t\ttokLineStart = match.index + match[0].length;\n\t  }\n\t}\n\tif (options.onComment)\n\t  options.onComment(true, input.slice(start + 2, end), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipLineComment() {\n\tvar start = tokPos;\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar ch = input.charCodeAt(tokPos+=2);\n\twhile (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n\t  ++tokPos;\n\t  ch = input.charCodeAt(tokPos);\n\t}\n\tif (options.onComment)\n\t  options.onComment(false, input.slice(start + 2, tokPos), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipSpace() {\n\twhile (tokPos < inputLen) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === 32) {\n\t\t++tokPos;\n\t  } else if (ch === 13) {\n\t\t++tokPos;\n\t\tvar next = input.charCodeAt(tokPos);\n\t\tif (next === 10) {\n\t\t  ++tokPos;\n\t\t}\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch === 10 || ch === 8232 || ch === 8233) {\n\t\t++tokPos;\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch > 8 && ch < 14) {\n\t\t++tokPos;\n\t  } else if (ch === 47) {\n\t\tvar next = input.charCodeAt(tokPos + 1);\n\t\tif (next === 42) {\n\t\t  skipBlockComment();\n\t\t} else if (next === 47) {\n\t\t  skipLineComment();\n\t\t} else break;\n\t  } else if (ch === 160) {\n\t\t++tokPos;\n\t  } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n\t\t++tokPos;\n\t  } else {\n\t\tbreak;\n\t  }\n\t}\n  }\n\n  function readToken_dot() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next >= 48 && next <= 57) return readNumber(true);\n\t++tokPos;\n\treturn finishToken(_dot);\n  }\n\n  function readToken_slash() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (tokRegexpAllowed) {++tokPos; return readRegexp();}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_slash, 1);\n  }\n\n  function readToken_mult_modulo() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_multiplyModulo, 1);\n  }\n\n  function readToken_pipe_amp(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n  }\n\n  function readToken_caret() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_bitwiseXOR, 1);\n  }\n\n  function readToken_plus_min(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) {\n\t  if (next == 45 && input.charCodeAt(tokPos + 2) == 62 &&\n\t\t  newline.test(input.slice(lastEnd, tokPos))) {\n\t\ttokPos += 3;\n\t\tskipLineComment();\n\t\tskipSpace();\n\t\treturn readToken();\n\t  }\n\t  return finishOp(_incDec, 2);\n\t}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_plusMin, 1);\n  }\n\n  function readToken_lt_gt(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tvar size = 1;\n\tif (next === code) {\n\t  size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n\t  if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n\t  return finishOp(_bitShift, size);\n\t}\n\tif (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 &&\n\t\tinput.charCodeAt(tokPos + 3) == 45) {\n\t  tokPos += 4;\n\t  skipLineComment();\n\t  skipSpace();\n\t  return readToken();\n\t}\n\tif (next === 61)\n\t  size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n\treturn finishOp(_relational, size);\n  }\n\n  function readToken_eq_excl(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n\treturn finishOp(code === 61 ? _eq : _prefix, 1);\n  }\n\n  function getTokenFromCode(code) {\n\tswitch(code) {\n\tcase 46:\n\t  return readToken_dot();\n\n\tcase 40: ++tokPos; return finishToken(_parenL);\n\tcase 41: ++tokPos; return finishToken(_parenR);\n\tcase 59: ++tokPos; return finishToken(_semi);\n\tcase 44: ++tokPos; return finishToken(_comma);\n\tcase 91: ++tokPos; return finishToken(_bracketL);\n\tcase 93: ++tokPos; return finishToken(_bracketR);\n\tcase 123: ++tokPos; return finishToken(_braceL);\n\tcase 125: ++tokPos; return finishToken(_braceR);\n\tcase 58: ++tokPos; return finishToken(_colon);\n\tcase 63: ++tokPos; return finishToken(_question);\n\n\tcase 48:\n\t  var next = input.charCodeAt(tokPos + 1);\n\t  if (next === 120 || next === 88) return readHexNumber();\n\tcase 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57:\n\t  return readNumber(false);\n\n\tcase 34: case 39:\n\t  return readString(code);\n\n\tcase 47:\n\t  return readToken_slash(code);\n\n\tcase 37: case 42:\n\t  return readToken_mult_modulo();\n\n\tcase 124: case 38:\n\t  return readToken_pipe_amp(code);\n\n\tcase 94:\n\t  return readToken_caret();\n\n\tcase 43: case 45:\n\t  return readToken_plus_min(code);\n\n\tcase 60: case 62:\n\t  return readToken_lt_gt(code);\n\n\tcase 61: case 33:\n\t  return readToken_eq_excl(code);\n\n\tcase 126:\n\t  return finishOp(_prefix, 1);\n\t}\n\n\treturn false;\n  }\n\n  function readToken(forceRegexp) {\n\tif (!forceRegexp) tokStart = tokPos;\n\telse tokPos = tokStart + 1;\n\tif (options.locations) tokStartLoc = new line_loc_t;\n\tif (forceRegexp) return readRegexp();\n\tif (tokPos >= inputLen) return finishToken(_eof);\n\n\tvar code = input.charCodeAt(tokPos);\n\tif (isIdentifierStart(code) || code === 92 ) return readWord();\n\n\tvar tok = getTokenFromCode(code);\n\n\tif (tok === false) {\n\t  var ch = String.fromCharCode(code);\n\t  if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n\t  raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n\t}\n\treturn tok;\n  }\n\n  function finishOp(type, size) {\n\tvar str = input.slice(tokPos, tokPos + size);\n\ttokPos += size;\n\tfinishToken(type, str);\n  }\n\n  function readRegexp() {\n\tvar content = \"\", escaped, inClass, start = tokPos;\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n\t  var ch = input.charAt(tokPos);\n\t  if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n\t  if (!escaped) {\n\t\tif (ch === \"[\") inClass = true;\n\t\telse if (ch === \"]\" && inClass) inClass = false;\n\t\telse if (ch === \"/\" && !inClass) break;\n\t\tescaped = ch === \"\\\\\";\n\t  } else escaped = false;\n\t  ++tokPos;\n\t}\n\tvar content = input.slice(start, tokPos);\n\t++tokPos;\n\tvar mods = readWord1();\n\tif (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n\ttry {\n\t  var value = new RegExp(content, mods);\n\t} catch (e) {\n\t  if (e instanceof SyntaxError) raise(start, e.message);\n\t  raise(e);\n\t}\n\treturn finishToken(_regexp, value);\n  }\n\n  function readInt(radix, len) {\n\tvar start = tokPos, total = 0;\n\tfor (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n\t  var code = input.charCodeAt(tokPos), val;\n\t  if (code >= 97) val = code - 97 + 10;\n\t  else if (code >= 65) val = code - 65 + 10;\n\t  else if (code >= 48 && code <= 57) val = code - 48;\n\t  else val = Infinity;\n\t  if (val >= radix) break;\n\t  ++tokPos;\n\t  total = total * radix + val;\n\t}\n\tif (tokPos === start || len != null && tokPos - start !== len) return null;\n\n\treturn total;\n  }\n\n  function readHexNumber() {\n\ttokPos += 2;\n\tvar val = readInt(16);\n\tif (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\treturn finishToken(_num, val);\n  }\n\n  function readNumber(startsWithDot) {\n\tvar start = tokPos, isFloat = false, octal = input.charCodeAt(tokPos) === 48;\n\tif (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n\tif (input.charCodeAt(tokPos) === 46) {\n\t  ++tokPos;\n\t  readInt(10);\n\t  isFloat = true;\n\t}\n\tvar next = input.charCodeAt(tokPos);\n\tif (next === 69 || next === 101) {\n\t  next = input.charCodeAt(++tokPos);\n\t  if (next === 43 || next === 45) ++tokPos;\n\t  if (readInt(10) === null) raise(start, \"Invalid number\");\n\t  isFloat = true;\n\t}\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\n\tvar str = input.slice(start, tokPos), val;\n\tif (isFloat) val = parseFloat(str);\n\telse if (!octal || str.length === 1) val = parseInt(str, 10);\n\telse if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");\n\telse val = parseInt(str, 8);\n\treturn finishToken(_num, val);\n  }\n\n  function readString(quote) {\n\ttokPos++;\n\tvar out = \"\";\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === quote) {\n\t\t++tokPos;\n\t\treturn finishToken(_string, out);\n\t  }\n\t  if (ch === 92) {\n\t\tch = input.charCodeAt(++tokPos);\n\t\tvar octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n\t\tif (octal) octal = octal[0];\n\t\twhile (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n\t\tif (octal === \"0\") octal = null;\n\t\t++tokPos;\n\t\tif (octal) {\n\t\t  if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n\t\t  out += String.fromCharCode(parseInt(octal, 8));\n\t\t  tokPos += octal.length - 1;\n\t\t} else {\n\t\t  switch (ch) {\n\t\t  case 110: out += \"\\n\"; break;\n\t\t  case 114: out += \"\\r\"; break;\n\t\t  case 120: out += String.fromCharCode(readHexChar(2)); break;\n\t\t  case 117: out += String.fromCharCode(readHexChar(4)); break;\n\t\t  case 85: out += String.fromCharCode(readHexChar(8)); break;\n\t\t  case 116: out += \"\\t\"; break;\n\t\t  case 98: out += \"\\b\"; break;\n\t\t  case 118: out += \"\\u000b\"; break;\n\t\t  case 102: out += \"\\f\"; break;\n\t\t  case 48: out += \"\\0\"; break;\n\t\t  case 13: if (input.charCodeAt(tokPos) === 10) ++tokPos;\n\t\t  case 10:\n\t\t\tif (options.locations) { tokLineStart = tokPos; ++tokCurLine; }\n\t\t\tbreak;\n\t\t  default: out += String.fromCharCode(ch); break;\n\t\t  }\n\t\t}\n\t  } else {\n\t\tif (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n\t\tout += String.fromCharCode(ch);\n\t\t++tokPos;\n\t  }\n\t}\n  }\n\n  function readHexChar(len) {\n\tvar n = readInt(16, len);\n\tif (n === null) raise(tokStart, \"Bad character escape sequence\");\n\treturn n;\n  }\n\n  var containsEsc;\n\n  function readWord1() {\n\tcontainsEsc = false;\n\tvar word, first = true, start = tokPos;\n\tfor (;;) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (isIdentifierChar(ch)) {\n\t\tif (containsEsc) word += input.charAt(tokPos);\n\t\t++tokPos;\n\t  } else if (ch === 92) {\n\t\tif (!containsEsc) word = input.slice(start, tokPos);\n\t\tcontainsEsc = true;\n\t\tif (input.charCodeAt(++tokPos) != 117)\n\t\t  raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n\t\t++tokPos;\n\t\tvar esc = readHexChar(4);\n\t\tvar escStr = String.fromCharCode(esc);\n\t\tif (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n\t\tif (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc)))\n\t\t  raise(tokPos - 4, \"Invalid Unicode escape\");\n\t\tword += escStr;\n\t  } else {\n\t\tbreak;\n\t  }\n\t  first = false;\n\t}\n\treturn containsEsc ? word : input.slice(start, tokPos);\n  }\n\n  function readWord() {\n\tvar word = readWord1();\n\tvar type = _name;\n\tif (!containsEsc && isKeyword(word))\n\t  type = keywordTypes[word];\n\treturn finishToken(type, word);\n  }\n\n  function next() {\n\tlastStart = tokStart;\n\tlastEnd = tokEnd;\n\tlastEndLoc = tokEndLoc;\n\treadToken();\n  }\n\n  function setStrict(strct) {\n\tstrict = strct;\n\ttokPos = tokStart;\n\tif (options.locations) {\n\t  while (tokPos < tokLineStart) {\n\t\ttokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n\t\t--tokCurLine;\n\t  }\n\t}\n\tskipSpace();\n\treadToken();\n  }\n\n  function node_t() {\n\tthis.type = null;\n\tthis.start = tokStart;\n\tthis.end = null;\n  }\n\n  function node_loc_t() {\n\tthis.start = tokStartLoc;\n\tthis.end = null;\n\tif (sourceFile !== null) this.source = sourceFile;\n  }\n\n  function startNode() {\n\tvar node = new node_t();\n\tif (options.locations)\n\t  node.loc = new node_loc_t();\n\tif (options.directSourceFile)\n\t  node.sourceFile = options.directSourceFile;\n\tif (options.ranges)\n\t  node.range = [tokStart, 0];\n\treturn node;\n  }\n\n  function startNodeFrom(other) {\n\tvar node = new node_t();\n\tnode.start = other.start;\n\tif (options.locations) {\n\t  node.loc = new node_loc_t();\n\t  node.loc.start = other.loc.start;\n\t}\n\tif (options.ranges)\n\t  node.range = [other.range[0], 0];\n\n\treturn node;\n  }\n\n  function finishNode(node, type) {\n\tnode.type = type;\n\tnode.end = lastEnd;\n\tif (options.locations)\n\t  node.loc.end = lastEndLoc;\n\tif (options.ranges)\n\t  node.range[1] = lastEnd;\n\treturn node;\n  }\n\n  function isUseStrict(stmt) {\n\treturn options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" &&\n\t  stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n  }\n\n  function eat(type) {\n\tif (tokType === type) {\n\t  next();\n\t  return true;\n\t}\n  }\n\n  function canInsertSemicolon() {\n\treturn !options.strictSemicolons &&\n\t  (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n  }\n\n  function semicolon() {\n\tif (!eat(_semi) && !canInsertSemicolon()) unexpected();\n  }\n\n  function expect(type) {\n\tif (tokType === type) next();\n\telse unexpected();\n  }\n\n  function unexpected() {\n\traise(tokStart, \"Unexpected token\");\n  }\n\n  function checkLVal(expr) {\n\tif (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\")\n\t  raise(expr.start, \"Assigning to rvalue\");\n\tif (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name))\n\t  raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n  }\n\n  function parseTopLevel(program) {\n\tlastStart = lastEnd = tokPos;\n\tif (options.locations) lastEndLoc = new line_loc_t;\n\tinFunction = strict = null;\n\tlabels = [];\n\treadToken();\n\n\tvar node = program || startNode(), first = true;\n\tif (!program) node.body = [];\n\twhile (tokType !== _eof) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && isUseStrict(stmt)) setStrict(true);\n\t  first = false;\n\t}\n\treturn finishNode(node, \"Program\");\n  }\n\n  var loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\n  function parseStatement() {\n\tif (tokType === _slash || tokType === _assign && tokVal == \"/=\")\n\t  readToken(true);\n\n\tvar starttype = tokType, node = startNode();\n\n\tswitch (starttype) {\n\tcase _break: case _continue:\n\t  next();\n\t  var isBreak = starttype === _break;\n\t  if (eat(_semi) || canInsertSemicolon()) node.label = null;\n\t  else if (tokType !== _name) unexpected();\n\t  else {\n\t\tnode.label = parseIdent();\n\t\tsemicolon();\n\t  }\n\n\t  for (var i = 0; i < labels.length; ++i) {\n\t\tvar lab = labels[i];\n\t\tif (node.label == null || lab.name === node.label.name) {\n\t\t  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n\t\t  if (node.label && isBreak) break;\n\t\t}\n\t  }\n\t  if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n\t  return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n\n\tcase _debugger:\n\t  next();\n\t  semicolon();\n\t  return finishNode(node, \"DebuggerStatement\");\n\n\tcase _do:\n\t  next();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  expect(_while);\n\t  node.test = parseParenExpression();\n\t  semicolon();\n\t  return finishNode(node, \"DoWhileStatement\");\n\n\tcase _for:\n\t  next();\n\t  labels.push(loopLabel);\n\t  expect(_parenL);\n\t  if (tokType === _semi) return parseFor(node, null);\n\t  if (tokType === _var) {\n\t\tvar init = startNode();\n\t\tnext();\n\t\tparseVar(init, true);\n\t\tfinishNode(init, \"VariableDeclaration\");\n\t\tif (init.declarations.length === 1 && eat(_in))\n\t\t  return parseForIn(node, init);\n\t\treturn parseFor(node, init);\n\t  }\n\t  var init = parseExpression(false, true);\n\t  if (eat(_in)) {checkLVal(init); return parseForIn(node, init);}\n\t  return parseFor(node, init);\n\n\tcase _function:\n\t  next();\n\t  return parseFunction(node, true);\n\n\tcase _if:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  node.consequent = parseStatement();\n\t  node.alternate = eat(_else) ? parseStatement() : null;\n\t  return finishNode(node, \"IfStatement\");\n\n\tcase _return:\n\t  if (!inFunction && !options.allowReturnOutsideFunction)\n\t\traise(tokStart, \"'return' outside of function\");\n\t  next();\n\n\t  if (eat(_semi) || canInsertSemicolon()) node.argument = null;\n\t  else { node.argument = parseExpression(); semicolon(); }\n\t  return finishNode(node, \"ReturnStatement\");\n\n\tcase _switch:\n\t  next();\n\t  node.discriminant = parseParenExpression();\n\t  node.cases = [];\n\t  expect(_braceL);\n\t  labels.push(switchLabel);\n\n\t  for (var cur, sawDefault; tokType != _braceR;) {\n\t\tif (tokType === _case || tokType === _default) {\n\t\t  var isCase = tokType === _case;\n\t\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t\t  node.cases.push(cur = startNode());\n\t\t  cur.consequent = [];\n\t\t  next();\n\t\t  if (isCase) cur.test = parseExpression();\n\t\t  else {\n\t\t\tif (sawDefault) raise(lastStart, \"Multiple default clauses\"); sawDefault = true;\n\t\t\tcur.test = null;\n\t\t  }\n\t\t  expect(_colon);\n\t\t} else {\n\t\t  if (!cur) unexpected();\n\t\t  cur.consequent.push(parseStatement());\n\t\t}\n\t  }\n\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t  next();\n\t  labels.pop();\n\t  return finishNode(node, \"SwitchStatement\");\n\n\tcase _throw:\n\t  next();\n\t  if (newline.test(input.slice(lastEnd, tokStart)))\n\t\traise(lastEnd, \"Illegal newline after throw\");\n\t  node.argument = parseExpression();\n\t  semicolon();\n\t  return finishNode(node, \"ThrowStatement\");\n\n\tcase _try:\n\t  next();\n\t  node.block = parseBlock();\n\t  node.handler = null;\n\t  if (tokType === _catch) {\n\t\tvar clause = startNode();\n\t\tnext();\n\t\texpect(_parenL);\n\t\tclause.param = parseIdent();\n\t\tif (strict && isStrictBadIdWord(clause.param.name))\n\t\t  raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n\t\texpect(_parenR);\n\t\tclause.guard = null;\n\t\tclause.body = parseBlock();\n\t\tnode.handler = finishNode(clause, \"CatchClause\");\n\t  }\n\t  node.guardedHandlers = empty;\n\t  node.finalizer = eat(_finally) ? parseBlock() : null;\n\t  if (!node.handler && !node.finalizer)\n\t\traise(node.start, \"Missing catch or finally clause\");\n\t  return finishNode(node, \"TryStatement\");\n\n\tcase _var:\n\t  next();\n\t  parseVar(node);\n\t  semicolon();\n\t  return finishNode(node, \"VariableDeclaration\");\n\n\tcase _while:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  return finishNode(node, \"WhileStatement\");\n\n\tcase _with:\n\t  if (strict) raise(tokStart, \"'with' in strict mode\");\n\t  next();\n\t  node.object = parseParenExpression();\n\t  node.body = parseStatement();\n\t  return finishNode(node, \"WithStatement\");\n\n\tcase _braceL:\n\t  return parseBlock();\n\n\tcase _semi:\n\t  next();\n\t  return finishNode(node, \"EmptyStatement\");\n\n\tdefault:\n\t  var maybeName = tokVal, expr = parseExpression();\n\t  if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n\t\tfor (var i = 0; i < labels.length; ++i)\n\t\t  if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n\t\tvar kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n\t\tlabels.push({name: maybeName, kind: kind});\n\t\tnode.body = parseStatement();\n\t\tlabels.pop();\n\t\tnode.label = expr;\n\t\treturn finishNode(node, \"LabeledStatement\");\n\t  } else {\n\t\tnode.expression = expr;\n\t\tsemicolon();\n\t\treturn finishNode(node, \"ExpressionStatement\");\n\t  }\n\t}\n  }\n\n  function parseParenExpression() {\n\texpect(_parenL);\n\tvar val = parseExpression();\n\texpect(_parenR);\n\treturn val;\n  }\n\n  function parseBlock(allowStrict) {\n\tvar node = startNode(), first = true, strict = false, oldStrict;\n\tnode.body = [];\n\texpect(_braceL);\n\twhile (!eat(_braceR)) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && allowStrict && isUseStrict(stmt)) {\n\t\toldStrict = strict;\n\t\tsetStrict(strict = true);\n\t  }\n\t  first = false;\n\t}\n\tif (strict && !oldStrict) setStrict(false);\n\treturn finishNode(node, \"BlockStatement\");\n  }\n\n  function parseFor(node, init) {\n\tnode.init = init;\n\texpect(_semi);\n\tnode.test = tokType === _semi ? null : parseExpression();\n\texpect(_semi);\n\tnode.update = tokType === _parenR ? null : parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForStatement\");\n  }\n\n  function parseForIn(node, init) {\n\tnode.left = init;\n\tnode.right = parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForInStatement\");\n  }\n\n  function parseVar(node, noIn) {\n\tnode.declarations = [];\n\tnode.kind = \"var\";\n\tfor (;;) {\n\t  var decl = startNode();\n\t  decl.id = parseIdent();\n\t  if (strict && isStrictBadIdWord(decl.id.name))\n\t\traise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n\t  decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n\t  node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n\t  if (!eat(_comma)) break;\n\t}\n\treturn node;\n  }\n\n  function parseExpression(noComma, noIn) {\n\tvar expr = parseMaybeAssign(noIn);\n\tif (!noComma && tokType === _comma) {\n\t  var node = startNodeFrom(expr);\n\t  node.expressions = [expr];\n\t  while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n\t  return finishNode(node, \"SequenceExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseMaybeAssign(noIn) {\n\tvar left = parseMaybeConditional(noIn);\n\tif (tokType.isAssign) {\n\t  var node = startNodeFrom(left);\n\t  node.operator = tokVal;\n\t  node.left = left;\n\t  next();\n\t  node.right = parseMaybeAssign(noIn);\n\t  checkLVal(left);\n\t  return finishNode(node, \"AssignmentExpression\");\n\t}\n\treturn left;\n  }\n\n  function parseMaybeConditional(noIn) {\n\tvar expr = parseExprOps(noIn);\n\tif (eat(_question)) {\n\t  var node = startNodeFrom(expr);\n\t  node.test = expr;\n\t  node.consequent = parseExpression(true);\n\t  expect(_colon);\n\t  node.alternate = parseExpression(true, noIn);\n\t  return finishNode(node, \"ConditionalExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprOps(noIn) {\n\treturn parseExprOp(parseMaybeUnary(), -1, noIn);\n  }\n\n  function parseExprOp(left, minPrec, noIn) {\n\tvar prec = tokType.binop;\n\tif (prec != null && (!noIn || tokType !== _in)) {\n\t  if (prec > minPrec) {\n\t\tvar node = startNodeFrom(left);\n\t\tnode.left = left;\n\t\tnode.operator = tokVal;\n\t\tvar op = tokType;\n\t\tnext();\n\t\tnode.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n\t\tvar exprNode = finishNode(node, (op === _logicalOR || op === _logicalAND) ? \"LogicalExpression\" : \"BinaryExpression\");\n\t\treturn parseExprOp(exprNode, minPrec, noIn);\n\t  }\n\t}\n\treturn left;\n  }\n\n  function parseMaybeUnary() {\n\tif (tokType.prefix) {\n\t  var node = startNode(), update = tokType.isUpdate;\n\t  node.operator = tokVal;\n\t  node.prefix = true;\n\t  tokRegexpAllowed = true;\n\t  next();\n\t  node.argument = parseMaybeUnary();\n\t  if (update) checkLVal(node.argument);\n\t  else if (strict && node.operator === \"delete\" &&\n\t\t\t   node.argument.type === \"Identifier\")\n\t\traise(node.start, \"Deleting local variable in strict mode\");\n\t  return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n\t}\n\tvar expr = parseExprSubscripts();\n\twhile (tokType.postfix && !canInsertSemicolon()) {\n\t  var node = startNodeFrom(expr);\n\t  node.operator = tokVal;\n\t  node.prefix = false;\n\t  node.argument = expr;\n\t  checkLVal(expr);\n\t  next();\n\t  expr = finishNode(node, \"UpdateExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprSubscripts() {\n\treturn parseSubscripts(parseExprAtom());\n  }\n\n  function parseSubscripts(base, noCalls) {\n\tif (eat(_dot)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseIdent(true);\n\t  node.computed = false;\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (eat(_bracketL)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseExpression();\n\t  node.computed = true;\n\t  expect(_bracketR);\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (!noCalls && eat(_parenL)) {\n\t  var node = startNodeFrom(base);\n\t  node.callee = base;\n\t  node.arguments = parseExprList(_parenR, false);\n\t  return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n\t} else return base;\n  }\n\n  function parseExprAtom() {\n\tswitch (tokType) {\n\tcase _this:\n\t  var node = startNode();\n\t  next();\n\t  return finishNode(node, \"ThisExpression\");\n\tcase _name:\n\t  return parseIdent();\n\tcase _num: case _string: case _regexp:\n\t  var node = startNode();\n\t  node.value = tokVal;\n\t  node.raw = input.slice(tokStart, tokEnd);\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _null: case _true: case _false:\n\t  var node = startNode();\n\t  node.value = tokType.atomValue;\n\t  node.raw = tokType.keyword;\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _parenL:\n\t  var tokStartLoc1 = tokStartLoc, tokStart1 = tokStart;\n\t  next();\n\t  var val = parseExpression();\n\t  val.start = tokStart1;\n\t  val.end = tokEnd;\n\t  if (options.locations) {\n\t\tval.loc.start = tokStartLoc1;\n\t\tval.loc.end = tokEndLoc;\n\t  }\n\t  if (options.ranges)\n\t\tval.range = [tokStart1, tokEnd];\n\t  expect(_parenR);\n\t  return val;\n\n\tcase _bracketL:\n\t  var node = startNode();\n\t  next();\n\t  node.elements = parseExprList(_bracketR, true, true);\n\t  return finishNode(node, \"ArrayExpression\");\n\n\tcase _braceL:\n\t  return parseObj();\n\n\tcase _function:\n\t  var node = startNode();\n\t  next();\n\t  return parseFunction(node, false);\n\n\tcase _new:\n\t  return parseNew();\n\n\tdefault:\n\t  unexpected();\n\t}\n  }\n\n  function parseNew() {\n\tvar node = startNode();\n\tnext();\n\tnode.callee = parseSubscripts(parseExprAtom(), true);\n\tif (eat(_parenL)) node.arguments = parseExprList(_parenR, false);\n\telse node.arguments = empty;\n\treturn finishNode(node, \"NewExpression\");\n  }\n\n  function parseObj() {\n\tvar node = startNode(), first = true, sawGetSet = false;\n\tnode.properties = [];\n\tnext();\n\twhile (!eat(_braceR)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (options.allowTrailingCommas && eat(_braceR)) break;\n\t  } else first = false;\n\n\t  var prop = {key: parsePropertyName()}, isGetSet = false, kind;\n\t  if (eat(_colon)) {\n\t\tprop.value = parseExpression(true);\n\t\tkind = prop.kind = \"init\";\n\t  } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" &&\n\t\t\t\t (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n\t\tisGetSet = sawGetSet = true;\n\t\tkind = prop.kind = prop.key.name;\n\t\tprop.key = parsePropertyName();\n\t\tif (tokType !== _parenL) unexpected();\n\t\tprop.value = parseFunction(startNode(), false);\n\t  } else unexpected();\n\n\t  if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n\t\tfor (var i = 0; i < node.properties.length; ++i) {\n\t\t  var other = node.properties[i];\n\t\t  if (other.key.name === prop.key.name) {\n\t\t\tvar conflict = kind == other.kind || isGetSet && other.kind === \"init\" ||\n\t\t\t  kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n\t\t\tif (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n\t\t\tif (conflict) raise(prop.key.start, \"Redefinition of property\");\n\t\t  }\n\t\t}\n\t  }\n\t  node.properties.push(prop);\n\t}\n\treturn finishNode(node, \"ObjectExpression\");\n  }\n\n  function parsePropertyName() {\n\tif (tokType === _num || tokType === _string) return parseExprAtom();\n\treturn parseIdent(true);\n  }\n\n  function parseFunction(node, isStatement) {\n\tif (tokType === _name) node.id = parseIdent();\n\telse if (isStatement) unexpected();\n\telse node.id = null;\n\tnode.params = [];\n\tvar first = true;\n\texpect(_parenL);\n\twhile (!eat(_parenR)) {\n\t  if (!first) expect(_comma); else first = false;\n\t  node.params.push(parseIdent());\n\t}\n\n\tvar oldInFunc = inFunction, oldLabels = labels;\n\tinFunction = true; labels = [];\n\tnode.body = parseBlock(true);\n\tinFunction = oldInFunc; labels = oldLabels;\n\n\tif (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n\t  for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n\t\tvar id = i < 0 ? node.id : node.params[i];\n\t\tif (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name))\n\t\t  raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n\t\tif (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name)\n\t\t  raise(id.start, \"Argument name clash in strict mode\");\n\t  }\n\t}\n\n\treturn finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n  }\n\n  function parseExprList(close, allowTrailingComma, allowEmpty) {\n\tvar elts = [], first = true;\n\twhile (!eat(close)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n\t  } else first = false;\n\n\t  if (allowEmpty && tokType === _comma) elts.push(null);\n\t  else elts.push(parseExpression(true));\n\t}\n\treturn elts;\n  }\n\n  function parseIdent(liberal) {\n\tvar node = startNode();\n\tif (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n\tif (tokType === _name) {\n\t  if (!liberal &&\n\t\t  (options.forbidReserved &&\n\t\t   (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) ||\n\t\t   strict && isStrictReservedWord(tokVal)) &&\n\t\t  input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1)\n\t\traise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n\t  node.name = tokVal;\n\t} else if (liberal && tokType.keyword) {\n\t  node.name = tokType.keyword;\n\t} else {\n\t  unexpected();\n\t}\n\ttokRegexpAllowed = false;\n\tnext();\n\treturn finishNode(node, \"Identifier\");\n  }\n\n});\n\n\t\tif (!acorn.version)\n\t\t\tacorn = null;\n\t}\n\n\tfunction parse(code, options) {\n\t\treturn (global.acorn || acorn).parse(code, options);\n\t}\n\n\tvar binaryOperators = {\n\t\t'+': '__add',\n\t\t'-': '__subtract',\n\t\t'*': '__multiply',\n\t\t'/': '__divide',\n\t\t'%': '__modulo',\n\t\t'==': '__equals',\n\t\t'!=': '__equals'\n\t};\n\n\tvar unaryOperators = {\n\t\t'-': '__negate',\n\t\t'+': '__self'\n\t};\n\n\tvar fields = Base.each(\n\t\t['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'],\n\t\tfunction(name) {\n\t\t\tthis['__' + name] = '#' + name;\n\t\t},\n\t\t{\n\t\t\t__self: function() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t);\n\tPoint.inject(fields);\n\tSize.inject(fields);\n\tColor.inject(fields);\n\n\tfunction __$__(left, operator, right) {\n\t\tvar handler = binaryOperators[operator];\n\t\tif (left && left[handler]) {\n\t\t\tvar res = left[handler](right);\n\t\t\treturn operator === '!=' ? !res : res;\n\t\t}\n\t\tswitch (operator) {\n\t\tcase '+': return left + right;\n\t\tcase '-': return left - right;\n\t\tcase '*': return left * right;\n\t\tcase '/': return left / right;\n\t\tcase '%': return left % right;\n\t\tcase '==': return left == right;\n\t\tcase '!=': return left != right;\n\t\t}\n\t}\n\n\tfunction $__(operator, value) {\n\t\tvar handler = unaryOperators[operator];\n\t\tif (value && value[handler])\n\t\t\treturn value[handler]();\n\t\tswitch (operator) {\n\t\tcase '+': return +value;\n\t\tcase '-': return -value;\n\t\t}\n\t}\n\n\tfunction compile(code, options) {\n\t\tif (!code)\n\t\t\treturn '';\n\t\toptions = options || {};\n\n\t\tvar insertions = [];\n\n\t\tfunction getOffset(offset) {\n\t\t\tfor (var i = 0, l = insertions.length; i < l; i++) {\n\t\t\t\tvar insertion = insertions[i];\n\t\t\t\tif (insertion[0] >= offset)\n\t\t\t\t\tbreak;\n\t\t\t\toffset += insertion[1];\n\t\t\t}\n\t\t\treturn offset;\n\t\t}\n\n\t\tfunction getCode(node) {\n\t\t\treturn code.substring(getOffset(node.range[0]),\n\t\t\t\t\tgetOffset(node.range[1]));\n\t\t}\n\n\t\tfunction getBetween(left, right) {\n\t\t\treturn code.substring(getOffset(left.range[1]),\n\t\t\t\t\tgetOffset(right.range[0]));\n\t\t}\n\n\t\tfunction replaceCode(node, str) {\n\t\t\tvar start = getOffset(node.range[0]),\n\t\t\t\tend = getOffset(node.range[1]),\n\t\t\t\tinsert = 0;\n\t\t\tfor (var i = insertions.length - 1; i >= 0; i--) {\n\t\t\t\tif (start > insertions[i][0]) {\n\t\t\t\t\tinsert = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinsertions.splice(insert, 0, [start, str.length - end + start]);\n\t\t\tcode = code.substring(0, start) + str + code.substring(end);\n\t\t}\n\n\t\tfunction handleOverloading(node, parent) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'UnaryExpression':\n\t\t\t\tif (node.operator in unaryOperators\n\t\t\t\t\t\t&& node.argument.type !== 'Literal') {\n\t\t\t\t\tvar arg = getCode(node.argument);\n\t\t\t\t\treplaceCode(node, '$__(\"' + node.operator + '\", '\n\t\t\t\t\t\t\t+ arg + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'BinaryExpression':\n\t\t\t\tif (node.operator in binaryOperators\n\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\tbetween = getBetween(node.left, node.right),\n\t\t\t\t\t\toperator = node.operator;\n\t\t\t\t\treplaceCode(node, '__$__(' + left + ','\n\t\t\t\t\t\t\t+ between.replace(new RegExp('\\\\' + operator),\n\t\t\t\t\t\t\t\t'\"' + operator + '\"')\n\t\t\t\t\t\t\t+ ', ' + right + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'UpdateExpression':\n\t\t\tcase 'AssignmentExpression':\n\t\t\t\tvar parentType = parent && parent.type;\n\t\t\t\tif (!(\n\t\t\t\t\t\tparentType === 'ForStatement'\n\t\t\t\t\t\t|| parentType === 'BinaryExpression'\n\t\t\t\t\t\t\t&& /^[=!<>]/.test(parent.operator)\n\t\t\t\t\t\t|| parentType === 'MemberExpression' && parent.computed\n\t\t\t\t)) {\n\t\t\t\t\tif (node.type === 'UpdateExpression') {\n\t\t\t\t\t\tvar arg = getCode(node.argument),\n\t\t\t\t\t\t\texp = '__$__(' + arg + ', \"' + node.operator[0]\n\t\t\t\t\t\t\t\t\t+ '\", 1)',\n\t\t\t\t\t\t\tstr = arg + ' = ' + exp;\n\t\t\t\t\t\tif (node.prefix) {\n\t\t\t\t\t\t\tstr = '(' + str + ')';\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tparentType === 'AssignmentExpression' ||\n\t\t\t\t\t\t\tparentType === 'VariableDeclarator' ||\n\t\t\t\t\t\t\tparentType === 'BinaryExpression'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (getCode(parent.left || parent.id) === arg)\n\t\t\t\t\t\t\t\tstr = exp;\n\t\t\t\t\t\t\tstr = arg + '; ' + str;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treplaceCode(node, str);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (/^.=$/.test(node.operator)\n\t\t\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\t\t\texp = left + ' = __$__(' + left + ', \"'\n\t\t\t\t\t\t\t\t\t+ node.operator[0] + '\", ' + right + ')';\n\t\t\t\t\t\t\treplaceCode(node, /^\\(.*\\)$/.test(getCode(node))\n\t\t\t\t\t\t\t\t\t? '(' + exp + ')' : exp);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction handleExports(node) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'ExportDefaultDeclaration':\n\t\t\t\treplaceCode({\n\t\t\t\t\trange: [node.start, node.declaration.start]\n\t\t\t\t}, 'module.exports = ');\n\t\t\t\tbreak;\n\t\t\tcase 'ExportNamedDeclaration':\n\t\t\t\tvar declaration = node.declaration;\n\t\t\t\tvar specifiers = node.specifiers;\n\t\t\t\tif (declaration) {\n\t\t\t\t\tvar declarations = declaration.declarations;\n\t\t\t\t\tif (declarations) {\n\t\t\t\t\t\tdeclarations.forEach(function(dec) {\n\t\t\t\t\t\t\treplaceCode(dec, 'module.exports.' + getCode(dec));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treplaceCode({\n\t\t\t\t\t\t\trange: [\n\t\t\t\t\t\t\t\tnode.start,\n\t\t\t\t\t\t\t\tdeclaration.start + declaration.kind.length\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}, '');\n\t\t\t\t\t}\n\t\t\t\t} else if (specifiers) {\n\t\t\t\t\tvar exports = specifiers.map(function(specifier) {\n\t\t\t\t\t\tvar name = getCode(specifier);\n\t\t\t\t\t\treturn 'module.exports.' + name + ' = ' + name + '; ';\n\t\t\t\t\t}).join('');\n\t\t\t\t\tif (exports) {\n\t\t\t\t\t\treplaceCode(node, exports);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction walkAST(node, parent, paperFeatures) {\n\t\t\tif (node) {\n\t\t\t\tfor (var key in node) {\n\t\t\t\t\tif (key !== 'range' && key !== 'loc') {\n\t\t\t\t\t\tvar value = node[key];\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tfor (var i = 0, l = value.length; i < l; i++) {\n\t\t\t\t\t\t\t\twalkAST(value[i], node, paperFeatures);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (value && typeof value === 'object') {\n\t\t\t\t\t\t\twalkAST(value, node, paperFeatures);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.operatorOverloading !== false) {\n\t\t\t\t\thandleOverloading(node, parent);\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.moduleExports !== false) {\n\t\t\t\t\thandleExports(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction encodeVLQ(value) {\n\t\t\tvar res = '',\n\t\t\t\tbase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t\t\tvalue = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n\t\t\twhile (value || !res) {\n\t\t\t\tvar next = value & (32 - 1);\n\t\t\t\tvalue >>= 5;\n\t\t\t\tif (value)\n\t\t\t\t\tnext |= 32;\n\t\t\t\tres += base64[next];\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tvar url = options.url || '',\n\t\t\tsourceMaps = options.sourceMaps,\n\t\t\tpaperFeatures = options.paperFeatures || {},\n\t\t\tsource = options.source || code,\n\t\t\toffset = options.offset || 0,\n\t\t\tagent = paper.agent,\n\t\t\tversion = agent.versionNumber,\n\t\t\toffsetCode = false,\n\t\t\tlineBreaks = /\\r\\n|\\n|\\r/mg,\n\t\t\tmap;\n\t\tif (sourceMaps && (agent.chrome && version >= 30\n\t\t\t\t|| agent.webkit && version >= 537.76\n\t\t\t\t|| agent.firefox && version >= 23\n\t\t\t\t|| agent.node)) {\n\t\t\tif (agent.node) {\n\t\t\t\toffset -= 2;\n\t\t\t} else if (window && url && !window.location.href.indexOf(url)) {\n\t\t\t\tvar html = document.getElementsByTagName('html')[0].innerHTML;\n\t\t\t\toffset = html.substr(0, html.indexOf(code) + 1).match(\n\t\t\t\t\t\tlineBreaks).length + 1;\n\t\t\t}\n\t\t\toffsetCode = offset > 0 && !(\n\t\t\t\t\tagent.chrome && version >= 36 ||\n\t\t\t\t\tagent.safari && version >= 600 ||\n\t\t\t\t\tagent.firefox && version >= 40 ||\n\t\t\t\t\tagent.node);\n\t\t\tvar mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n\t\t\tmappings.length = (code.match(lineBreaks) || []).length + 1\n\t\t\t\t\t+ (offsetCode ? offset : 0);\n\t\t\tmap = {\n\t\t\t\tversion: 3,\n\t\t\t\tfile: url,\n\t\t\t\tnames:[],\n\t\t\t\tmappings: mappings.join(';AACA'),\n\t\t\t\tsourceRoot: '',\n\t\t\t\tsources: [url],\n\t\t\t\tsourcesContent: [source]\n\t\t\t};\n\t\t}\n\t\tif (\n\t\t\tpaperFeatures.operatorOverloading !== false ||\n\t\t\tpaperFeatures.moduleExports !== false\n\t\t) {\n\t\t\twalkAST(parse(code, {\n\t\t\t\tranges: true,\n\t\t\t\tpreserveParens: true,\n\t\t\t\tsourceType: 'module'\n\t\t\t}), null, paperFeatures);\n\t\t}\n\t\tif (map) {\n\t\t\tif (offsetCode) {\n\t\t\t\tcode = new Array(offset + 1).join('\\n') + code;\n\t\t\t}\n\t\t\tif (/^(inline|both)$/.test(sourceMaps)) {\n\t\t\t\tcode += \"\\n//# sourceMappingURL=data:application/json;base64,\"\n\t\t\t\t\t\t+ self.btoa(unescape(encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify(map))));\n\t\t\t}\n\t\t\tcode += \"\\n//# sourceURL=\" + (url || 'paperscript');\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tsource: source,\n\t\t\tcode: code,\n\t\t\tmap: map\n\t\t};\n\t}\n\n\tfunction execute(code, scope, options) {\n\t\tpaper = scope;\n\t\tvar view = scope.getView(),\n\t\t\ttool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/\n\t\t\t\t\t.test(code) && !/\\bnew\\s+Tool\\b/.test(code)\n\t\t\t\t\t\t? new Tool() : null,\n\t\t\ttoolHandlers = tool ? tool._events : [],\n\t\t\thandlers = ['onFrame', 'onResize'].concat(toolHandlers),\n\t\t\tparams = [],\n\t\t\targs = [],\n\t\t\tfunc,\n\t\t\tcompiled = typeof code === 'object' ? code : compile(code, options);\n\t\tcode = compiled.code;\n\t\tfunction expose(scope, hidden) {\n\t\t\tfor (var key in scope) {\n\t\t\t\tif ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)'\n\t\t\t\t\t\t+ key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n\t\t\t\t\tparams.push(key);\n\t\t\t\t\targs.push(scope[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\texpose({ __$__: __$__, $__: $__, paper: scope, tool: tool },\n\t\t\t\ttrue);\n\t\texpose(scope);\n\t\tcode = 'var module = { exports: {} }; ' + code;\n\t\tvar exports = Base.each(handlers, function(key) {\n\t\t\tif (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n\t\t\t\tparams.push(key);\n\t\t\t\tthis.push('module.exports.' + key + ' = ' + key + ';');\n\t\t\t}\n\t\t}, []).join('\\n');\n\t\tif (exports) {\n\t\t\tcode += '\\n' + exports;\n\t\t}\n\t\tcode += '\\nreturn module.exports;';\n\t\tvar agent = paper.agent;\n\t\tif (document && (agent.chrome\n\t\t\t\t|| agent.firefox && agent.versionNumber < 40)) {\n\t\t\tvar script = document.createElement('script'),\n\t\t\t\thead = document.head || document.getElementsByTagName('head')[0];\n\t\t\tif (agent.firefox)\n\t\t\t\tcode = '\\n' + code;\n\t\t\tscript.appendChild(document.createTextNode(\n\t\t\t\t'document.__paperscript__ = function(' + params + ') {' +\n\t\t\t\t\tcode +\n\t\t\t\t'\\n}'\n\t\t\t));\n\t\t\thead.appendChild(script);\n\t\t\tfunc = document.__paperscript__;\n\t\t\tdelete document.__paperscript__;\n\t\t\thead.removeChild(script);\n\t\t} else {\n\t\t\tfunc = Function(params, code);\n\t\t}\n\t\tvar exports = func && func.apply(scope, args);\n\t\tvar obj = exports || {};\n\t\tBase.each(toolHandlers, function(key) {\n\t\t\tvar value = obj[key];\n\t\t\tif (value)\n\t\t\t\ttool[key] = value;\n\t\t});\n\t\tif (view) {\n\t\t\tif (obj.onResize)\n\t\t\t\tview.setOnResize(obj.onResize);\n\t\t\tview.emit('resize', {\n\t\t\t\tsize: view.size,\n\t\t\t\tdelta: new Point()\n\t\t\t});\n\t\t\tif (obj.onFrame)\n\t\t\t\tview.setOnFrame(obj.onFrame);\n\t\t\tview.requestUpdate();\n\t\t}\n\t\treturn exports;\n\t}\n\n\tfunction loadScript(script) {\n\t\tif (/^text\\/(?:x-|)paperscript$/.test(script.type)\n\t\t\t\t&& PaperScope.getAttribute(script, 'ignore') !== 'true') {\n\t\t\tvar canvasId = PaperScope.getAttribute(script, 'canvas'),\n\t\t\t\tcanvas = document.getElementById(canvasId),\n\t\t\t\tsrc = script.src || script.getAttribute('data-src'),\n\t\t\t\tasync = PaperScope.hasAttribute(script, 'async'),\n\t\t\t\tscopeAttribute = 'data-paper-scope';\n\t\t\tif (!canvas)\n\t\t\t\tthrow new Error('Unable to find canvas with id \"'\n\t\t\t\t\t\t+ canvasId + '\"');\n\t\t\tvar scope = PaperScope.get(canvas.getAttribute(scopeAttribute))\n\t\t\t\t\t\t|| new PaperScope().setup(canvas);\n\t\t\tcanvas.setAttribute(scopeAttribute, scope._id);\n\t\t\tif (src) {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: src,\n\t\t\t\t\tasync: async,\n\t\t\t\t\tmimeType: 'text/plain',\n\t\t\t\t\tonLoad: function(code) {\n\t\t\t\t\t\texecute(code, scope, src);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\texecute(script.innerHTML, scope, script.baseURI);\n\t\t\t}\n\t\t\tscript.setAttribute('data-paper-ignore', 'true');\n\t\t\treturn scope;\n\t\t}\n\t}\n\n\tfunction loadAll() {\n\t\tBase.each(document && document.getElementsByTagName('script'),\n\t\t\t\tloadScript);\n\t}\n\n\tfunction load(script) {\n\t\treturn script ? loadScript(script) : loadAll();\n\t}\n\n\tif (window) {\n\t\tif (document.readyState === 'complete') {\n\t\t\tsetTimeout(loadAll);\n\t\t} else {\n\t\t\tDomEvent.add(window, { load: loadAll });\n\t\t}\n\t}\n\n\treturn {\n\t\tcompile: compile,\n\t\texecute: execute,\n\t\tload: load,\n\t\tparse: parse,\n\t\tcalculateBinary: __$__,\n\t\tcalculateUnary: $__\n\t};\n\n}.call(this);\n\nvar paper = new (PaperScope.inject(Base.exports, {\n\tBase: Base,\n\tNumerical: Numerical,\n\tKey: Key,\n\tDomEvent: DomEvent,\n\tDomElement: DomElement,\n\tdocument: document,\n\twindow: window,\n\tSymbol: SymbolDefinition,\n\tPlacedSymbol: SymbolItem\n}))();\n\nif (paper.agent.node) {\n\trequire('./node/extend.js')(paper);\n}\n\nif (typeof define === 'function' && define.amd) {\n\tdefine('paper', paper);\n} else if (typeof module === 'object' && module) {\n\tmodule.exports = paper;\n}\n\nreturn paper;\n}.call(this, typeof self === 'object' ? self : null);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}