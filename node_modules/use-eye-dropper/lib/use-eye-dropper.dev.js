!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("react")):"function"==typeof define&&define.amd?define(["react"],o):(e||self).useEyeDropper=o(e.react)}(this,function(e){const o=()=>"undefined"!=typeof window&&"EyeDropper"in window,r=()=>{let e="Unsupported browser.";throw e="Unsupported browser: no EyeDropper in Window. Check https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API.",new Error("Unsupported browser: no EyeDropper in Window. Check https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API.")},n=()=>{const r=e.useRef(),[n,t]=e.useState(!1);e.useEffect(()=>(r.current=!0,t(o()),()=>{r.current=!1}),[]);const p=e.useCallback(()=>n,[n]);return[r,p]},t=e=>{const n=(e=>o()&&new EyeDropper(e))(e);var t;return(t=n)?EyeDropper.prototype.open.bind(t):r};return o=>{const r=e.useMemo(()=>t(o),[o]),[p,i]=n(),s=e.useRef(),d=e.useCallback(()=>{void 0!==s.current&&s.current.abort()},[s]),c=e.useCallback(async function(e){void 0===e&&(e={}),d();const{signal:o,...n}=e,t=new AbortController;s.current=t;const i=void 0!==o?(e=>{const o=new AbortController,r=()=>{o.abort();for(const o of e)o.removeEventListener("abort",r)};for(const o of e){if(o.aborted){r();break}o.addEventListener("abort",r)}return o.signal})([o,t.signal]):t.signal;try{return await r({...n,signal:i})}catch(e){throw p.current||(e.canceled=!0),e}},[s,p,d,r]);return e.useEffect(()=>d,[d]),{open:c,close:d,isSupported:i}}});
