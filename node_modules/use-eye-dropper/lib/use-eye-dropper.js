!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):(o||self).useEyeDropper=e(o.react)}(this,function(o){const e=()=>"undefined"!=typeof window&&"EyeDropper"in window,n=()=>{throw new Error("Unsupported browser.")},r=()=>{const n=o.useRef(),[r,t]=o.useState(!1);o.useEffect(()=>(n.current=!0,t(e()),()=>{n.current=!1}),[]);const i=o.useCallback(()=>r,[r]);return[n,i]},t=o=>{const r=(o=>e()&&new EyeDropper(o))(o);var t;return(t=r)?EyeDropper.prototype.open.bind(t):n};return e=>{const n=o.useMemo(()=>t(e),[e]),[i,s]=r(),c=o.useRef(),f=o.useCallback(()=>{void 0!==c.current&&c.current.abort()},[c]),d=o.useCallback(async function(o){void 0===o&&(o={}),f();const{signal:e,...r}=o,t=new AbortController;c.current=t;const s=void 0!==e?(o=>{const e=new AbortController,n=()=>{e.abort();for(const e of o)e.removeEventListener("abort",n)};for(const e of o){if(e.aborted){n();break}e.addEventListener("abort",n)}return e.signal})([e,t.signal]):t.signal;try{return await n({...r,signal:s})}catch(o){throw i.current||(o.canceled=!0),o}},[c,i,f,n]);return o.useEffect(()=>f,[f]),{open:d,close:f,isSupported:s}}});
